(self.webpackChunkfirestore=self.webpackChunkfirestore||[]).push([[179],{8255:tt=>{function De(U){return Promise.resolve().then(()=>{var _=new Error("Cannot find module '"+U+"'");throw _.code="MODULE_NOT_FOUND",_})}De.keys=()=>[],De.resolve=De,De.id=8255,tt.exports=De},639:(tt,De,U)=>{"use strict";U.d(De,{deG:()=>Oh,tb:()=>nc,AFp:()=>qi,ip1:()=>Om,CZH:()=>ns,hGG:()=>$C,z2F:()=>Lm,sBO:()=>fD,Sil:()=>up,_Vd:()=>Vd,EJc:()=>wC,SBq:()=>Qn,qLn:()=>Xc,vpe:()=>xo,gxx:()=>vd,tBr:()=>Ka,XFs:()=>et,OlP:()=>zn,zs3:()=>nr,ZZ4:()=>Vy,aQg:()=>L0,soG:()=>ap,YKP:()=>j0,v3s:()=>$S,h0i:()=>Zl,PXZ:()=>pO,R0b:()=>rs,FiY:()=>mt,Lbi:()=>ya,g9A:()=>pu,Qsj:()=>Ly,FYo:()=>Fy,JOm:()=>wo,Tiy:()=>F0,q3G:()=>wr,tp0:()=>yo,EAV:()=>WS,Rgc:()=>fm,dDg:()=>TC,DyG:()=>Wa,q4F:()=>sD,GfV:()=>fr,s_b:()=>Wf,ifc:()=>K,eFA:()=>lp,G48:()=>uO,Gpc:()=>fe,X6Q:()=>AC,_c5:()=>ZS,VLi:()=>aO,c2e:()=>op,zSh:()=>zu,wAp:()=>Et,vHH:()=>ut,EiD:()=>li,mCW:()=>Bu,qzn:()=>rt,JVY:()=>Pt,pB0:()=>Hh,eBb:()=>ws,L6k:()=>Kn,LAX:()=>vo,cg1:()=>zl,Tjo:()=>wO,kL8:()=>Yw,yhl:()=>yt,dqk:()=>We,sIi:()=>Bl,CqO:()=>py,QGY:()=>_w,F4k:()=>hT,RDi:()=>_h,AaK:()=>le,z3N:()=>Le,qOj:()=>Br,TTD:()=>wc,_Bn:()=>XT,xp6:()=>fI,uIk:()=>uw,ekj:()=>Aw,Suo:()=>lS,Xpm:()=>Bt,lG2:()=>ch,Yz7:()=>Cn,cJS:()=>Xr,oAB:()=>Ki,Yjl:()=>pc,Y36:()=>Qg,_UZ:()=>cT,qZA:()=>fy,TgZ:()=>Jg,EpF:()=>mw,n5z:()=>xh,Ikx:()=>Kw,LFG:()=>dr,$8M:()=>jc,NdJ:()=>su,CRH:()=>cS,oxw:()=>Af,Q6J:()=>hy,iGM:()=>uS,MAs:()=>hi,CHM:()=>Ou,LSH:()=>pE,kYT:()=>Vo,YNc:()=>ca,_uU:()=>bT,Oqu:()=>Lw,hij:()=>Ey});var _=U(7574),q=U(4869),F=U(3282),he=U(6693),Ce=U(9765),we=U(5319),xe=U(2441);var H=U(1307);function ne(){return new Ce.xQ}function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function Fe(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function le(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(le).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const _e=ye({__forward_ref__:ye});function fe(o){return o.__forward_ref__=fe,o.toString=function(){return le(this())},o}function ie(o){return Be(o)?o():o}function Be(o){return"function"==typeof o&&o.hasOwnProperty(_e)&&o.__forward_ref__===fe}class ut extends Error{constructor(a,l){super(function(o,a){return`${o?`NG0${o}: `:""}${a}`}(a,l)),this.code=a}}function Ye(o){return"string"==typeof o?o:null==o?"":String(o)}function se(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ye(o)}function $e(o,a){const l=a?` in ${a}`:"";throw new ut("201",`No provider for ${se(o)} found${l}`)}function Nn(o,a){null==o&&function(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Cn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Xr(o){return{providers:o.providers||[],imports:o.imports||[]}}function Un(o){return gi(o,ot)||gi(o,Gt)}function gi(o,a){return o.hasOwnProperty(a)?o[a]:null}function mi(o){return o&&(o.hasOwnProperty(lt)||o.hasOwnProperty(un))?o[lt]:null}const ot=ye({\u0275prov:ye}),lt=ye({\u0275inj:ye}),Gt=ye({ngInjectableDef:ye}),un=ye({ngInjectorDef:ye});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let $t;function Xe(o){const a=$t;return $t=o,a}function ro(o,a,l){const d=Un(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&et.Optional?null:void 0!==a?a:void $e(le(o),"Injector")}function Bn(o){return{toString:o}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),K=(()=>((K=K||{})[K.Emulated=0]="Emulated",K[K.None=2]="None",K[K.ShadowDom=3]="ShadowDom",K))();const Y="undefined"!=typeof globalThis&&globalThis,J="undefined"!=typeof window&&window,Pe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,We=Y||"undefined"!=typeof global&&global||J||Pe,hn={},wt=[],Xn=ye({\u0275cmp:ye}),oe=ye({\u0275dir:ye}),Z=ye({\u0275pipe:ye}),Q=ye({\u0275mod:ye}),ke=ye({\u0275loc:ye}),ze=ye({\u0275fac:ye}),_t=ye({__NG_ELEMENT_ID__:ye});let Vt=0;function Bt(o){return Bn(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||wt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||K.Emulated,id:"c",styles:o.styles||wt,_:null,setInput:null,schemas:o.schemas||null,tView:null},h=o.directives,g=o.features,y=o.pipes;return d.id+=Vt++,d.inputs=sl(o.inputs,l),d.outputs=sl(o.outputs),g&&g.forEach(w=>w(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(Or):null,d.pipeDefs=y?()=>("function"==typeof y?y():y).map(On):null,d})}function Or(o){return sr(o)||function(o){return o[oe]||null}(o)}function On(o){return function(o){return o[Z]||null}(o)}const Ut={};function Ki(o){return Bn(()=>{const a={type:o.type,bootstrap:o.bootstrap||wt,declarations:o.declarations||wt,imports:o.imports||wt,exports:o.exports||wt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Ut[o.id]=o.type),a})}function Vo(o,a){return Bn(()=>{const l=Ni(o,!0);l.declarations=a.declarations||wt,l.imports=a.imports||wt,l.exports=a.exports||wt})}function sl(o,a){if(null==o)return hn;const l={};for(const d in o)if(o.hasOwnProperty(d)){let h=o[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=d,a&&(a[h]=g)}return l}const ch=Bt;function pc(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function sr(o){return o[Xn]||null}function Ni(o,a){const l=o[Q]||null;if(!l&&!0===a)throw new Error(`Type ${le(o)} does not have '\u0275mod' property.`);return l}function or(o){return Array.isArray(o)&&"object"==typeof o[1]}function Zi(o){return Array.isArray(o)&&!0===o[1]}function Iu(o){return 0!=(8&o.flags)}function al(o){return 2==(2&o.flags)}function Ta(o){return 1==(1&o.flags)}function ri(o){return null!==o.template}function Ms(o){return 0!=(512&o[2])}function Gn(o,a){return o.hasOwnProperty(ze)?o[ze]:null}class ph{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function wc(){return Cc}function Cc(o){return o.type.prototype.ngOnChanges&&(o.setInput=gh),$o}function $o(){const o=mh(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===hn)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function gh(o,a,l,d){const h=mh(o)||function(o,a){return o[cl]=a}(o,{previous:hn,current:null}),g=h.current||(h.current={}),y=h.previous,w=this.declaredInputs[l],I=y[w];g[w]=new ph(I&&I.currentValue,a,y===hn),o[d]=a}wc.ngInherit=!0;const cl="__ngSimpleChanges__";function mh(o){return o[cl]||null}let fs;function _h(o){fs=o}function xn(o){return!!o.listen}const dl={createRenderer:(o,a)=>void 0!==fs?fs:"undefined"!=typeof document?document:void 0};function Mn(o){for(;Array.isArray(o);)o=o[0];return o}function Fs(o,a){return Mn(a[o])}function Gr(o,a){return Mn(a[o.index])}function Go(o,a){return o.data[a]}function ii(o,a){const l=a[o];return or(l)?l:l[0]}function fl(o){return 4==(4&o[2])}function xu(o){return 128==(128&o[2])}function Ls(o,a){return null==a?null:o[a]}function gl(o){o[18]=0}function gs(o,a){o[5]+=a;let l=o,d=o[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const ft={lFrame:nE(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Nu(){return ft.bindingsEnabled}function Ve(){return ft.lFrame.lView}function Wt(){return ft.lFrame.tView}function Ou(o){return ft.lFrame.contextLView=o,o[8]}function ur(){let o=Ra();for(;null!==o&&64===o.type;)o=o.parent;return o}function Ra(){return ft.lFrame.currentTNode}function si(o,a){const l=ft.lFrame;l.currentTNode=o,l.isParent=a}function El(){return ft.lFrame.isParent}function xa(){return ft.isInCheckNoChangesMode}function po(o){ft.isInCheckNoChangesMode=o}function Na(){return ft.lFrame.bindingIndex++}function Ma(o,a){const l=ft.lFrame;l.bindingIndex=l.bindingRootIndex=o,Ic(a)}function Ic(o){ft.lFrame.currentDirectiveIndex=o}function Wp(){return ft.lFrame.currentQueryIndex}function Pa(o){ft.lFrame.currentQueryIndex=o}function qp(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function o_(o,a,l){if(l&et.SkipSelf){let h=a,g=o;for(;!(h=h.parent,null!==h||l&et.Host||(h=qp(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;a=h,o=g}const d=ft.lFrame=bh();return d.currentTNode=a,d.lView=o,!0}function Tc(o){const a=bh(),l=o[1];ft.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function bh(){const o=ft.lFrame,a=null===o?null:o.child;return null===a?nE(o):a}function nE(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function rE(){const o=ft.lFrame;return ft.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Dc=rE;function Sc(){const o=rE();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function lr(){return ft.lFrame.selectedIndex}function Vs(o){ft.lFrame.selectedIndex=o}function Nt(){const o=ft.lFrame;return Go(o.tView,o.selectedIndex)}function ka(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:N}=g;y&&(o.contentHooks||(o.contentHooks=[])).push(-l,y),w&&((o.contentHooks||(o.contentHooks=[])).push(l,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,w)),I&&(o.viewHooks||(o.viewHooks=[])).push(-l,I),A&&((o.viewHooks||(o.viewHooks=[])).push(l,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,A)),null!=N&&(o.destroyHooks||(o.destroyHooks=[])).push(l,N)}}function bl(o,a,l){Kp(o,a,3,l)}function Il(o,a,l,d){(3&o[2])===l&&Kp(o,a,l,d)}function Mc(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Kp(o,a,l,d){const g=null!=d?d:-1,y=a.length-1;let w=0;for(let I=void 0!==d?65535&o[18]:0;I<y;I++)if("number"==typeof a[I+1]){if(w=a[I],null!=d&&w>=d)break}else a[I]<0&&(o[18]+=65536),(w<g||-1==g)&&(yi(o,l,a,I),o[18]=(4294901760&o[18])+I+2),I++}function yi(o,a,l,d){const h=l[d]<0,g=l[d+1],w=o[h?-l[d]:l[d]];if(h){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Fa{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Zo(o,a,l){const d=xn(o);let h=0;for(;h<l.length;){const g=l[h];if("number"==typeof g){if(0!==g)break;h++;const y=l[h++],w=l[h++],I=l[h++];d?o.setAttribute(a,w,I,y):a.setAttributeNS(y,w,I)}else{const y=g,w=l[++h];Fc(y)?d&&o.setProperty(a,y,w):d?o.setAttribute(a,y,w):a.setAttribute(y,w),h++}}return h}function Zp(o){return 3===o||4===o||6===o}function Fc(o){return 64===o.charCodeAt(0)}function Tl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?l=h:0===l||Dh(o,l,h,null,-1===l||2===l?a[++d]:null)}}return o}function Dh(o,a,l,d,h){let g=0,y=o.length;if(-1===a)y=-1;else for(;g<o.length;){const w=o[g++];if("number"==typeof w){if(w===a){y=-1;break}if(w>a){y=g-1;break}}}for(;g<o.length;){const w=o[g];if("number"==typeof w)break;if(w===l){if(null===d)return void(null!==h&&(o[g+1]=h));if(d===o[g+1])return void(o[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==y&&(o.splice(y,0,a),g=y+1),o.splice(g++,0,l),null!==d&&o.splice(g++,0,d),null!==h&&o.splice(g++,0,h)}function La(o){return-1!==o}function Va(o){return 32767&o}function Us(o,a){let l=function(o){return o>>16}(o),d=a;for(;l>0;)d=d[15],l--;return d}let ms=!0;function qn(o){const a=ms;return ms=o,a}let ja=0;function $a(o,a){const l=Sh(o,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Vc(d.data,o),Vc(a,null),Vc(d.blueprint,null));const h=yr(o,a),g=o.injectorIndex;if(La(h)){const y=Va(h),w=Us(h,a),I=w[1].data;for(let A=0;A<8;A++)a[g+A]=w[y+A]|I[y+A]}return a[g+8]=h,g}function Vc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Sh(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function yr(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,h=a;for(;null!==h;){const g=h[1],y=g.type;if(d=2===y?g.declTNode:1===y?h[6]:null,null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Yo(o,a,l){!function(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(_t)&&(d=l[_t]),null==d&&(d=l[_t]=ja++);const h=255&d;a.data[o+(h>>5)]|=1<<h}(o,a,l)}function Uc(o,a,l){if(l&et.Optional)return o;$e(a,"NodeInjector")}function Ha(o,a,l,d){if(l&et.Optional&&void 0===d&&(d=null),0==(l&(et.Self|et.Host))){const h=o[9],g=Xe(void 0);try{return h?h.get(a,d,l&et.Optional):ro(a,d,l&et.Optional)}finally{Xe(g)}}return Uc(d,a,l)}function Ah(o,a,l,d=et.Default,h){if(null!==o){const g=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(_t)?o[_t]:void 0;return"number"==typeof a?a>=0?255&a:Yp:a}(l);if("function"==typeof g){if(!o_(a,o,d))return d&et.Host?Uc(h,l,d):Ha(a,l,d,h);try{const y=g(d);if(null!=y||d&et.Optional)return y;$e(l)}finally{Dc()}}else if("number"==typeof g){let y=null,w=Sh(o,a),I=-1,A=d&et.Host?a[16][6]:null;for((-1===w||d&et.SkipSelf)&&(I=-1===w?yr(o,a):a[w+8],-1!==I&&Rh(d,!1)?(y=a[1],w=Va(I),a=Us(I,a)):w=-1);-1!==w;){const N=a[1];if(Qp(g,w,N.data)){const k=Dl(w,a,l,y,d,A);if(k!==Qo)return k}I=a[w+8],-1!==I&&Rh(d,a[1].data[w+8]===A)&&Qp(g,w,a)?(y=N,w=Va(I),a=Us(I,a)):w=-1}}}return Ha(a,l,d,h)}const Qo={};function Yp(){return new $s(ur(),Ve())}function Dl(o,a,l,d,h,g){const y=a[1],w=y.data[o+8],N=Bc(w,y,l,null==d?al(w)&&ms:d!=y&&0!=(3&w.type),h&et.Host&&g===w);return null!==N?js(a,y,N,w):Qo}function Bc(o,a,l,d,h){const g=o.providerIndexes,y=a.data,w=1048575&g,I=o.directiveStart,N=g>>20,B=h?w+N:o.directiveEnd;for(let z=d?w:w+N;z<B;z++){const X=y[z];if(z<I&&l===X||z>=I&&X.type===l)return z}if(h){const z=y[I];if(z&&ri(z)&&z.type===l)return I}return null}function js(o,a,l,d){let h=o[l];const g=a.data;if(function(o){return o instanceof Fa}(h)){const y=h;y.resolving&&function(o,a){throw new ut("200",`Circular dependency in DI detected for ${o}`)}(se(g[l]));const w=qn(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Xe(y.injectImpl):null;o_(o,d,et.Default);try{h=o[l]=y.factory(void 0,g,o,d),a.firstCreatePass&&l>=d.directiveStart&&function(o,a,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=a.type.prototype;if(d){const y=Cc(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==I&&Xe(I),qn(w),y.resolving=!1,Dc()}}return h}function Qp(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function Rh(o,a){return!(o&et.Self||o&et.Host&&a)}class $s{constructor(a,l){this._tNode=a,this._lView=l}get(a,l){return Ah(this._tNode,this._lView,a,void 0,l)}}function xh(o){return Bn(()=>{const a=o.prototype.constructor,l=a[ze]||Jp(a),d=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==d;){const g=h[ze]||Jp(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Jp(o){return Be(o)?()=>{const a=Jp(ie(o));return a&&a()}:Gn(o)}function jc(o){return function(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const g=l[h];if(Zp(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(g===a)return l[h+1];h+=2}}}return null}(ur(),o)}const Fu="__parameters__";function Jo(o,a,l){return Bn(()=>{const d=function(o){return function(...l){if(o){const d=o(...l);for(const h in d)this[h]=d[h]}}}(a);function h(...g){if(this instanceof h)return d.apply(this,g),this;const y=new h(...g);return w.annotation=y,w;function w(I,A,N){const k=I.hasOwnProperty(Fu)?I[Fu]:Object.defineProperty(I,Fu,{value:[]})[Fu];for(;k.length<=N;)k.push(null);return(k[N]=k[N]||[]).push(y),I}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}class zn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Cn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Oh=new zn("AnalyzeForEntryComponents"),Wa=Function;function vi(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(a===o&&(a=o.slice(0,l)),vi(d,a)):a!==o&&a.push(d)}return a}function ki(o,a){o.forEach(l=>Array.isArray(l)?ki(l,a):a(l))}function Yi(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Ei(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Pr(o,a,l){let d=Wr(o,a);return d>=0?o[1|d]=l:(d=~d,function(o,a,l,d){let h=o.length;if(h==a)o.push(l,d);else if(1===h)o.push(d,o[0]),o[0]=l;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function Rl(o,a){const l=Wr(o,a);if(l>=0)return o[1|l]}function Wr(o,a){return function(o,a,l){let d=0,h=o.length>>l;for(;h!==d;){const g=d+(h-d>>1),y=o[g<<l];if(a===y)return g<<l;y>a?h=g:d=g+1}return~(h<<l)}(o,a,1)}const Kt={},Rr="__NG_DI_FLAG__",cr="ngTempTokenPath",ta=/\n/gm,go="__source",Es=ye({provide:String,useValue:ye});let mo;function na(o){const a=mo;return mo=o,a}function Pb(o,a=et.Default){if(void 0===mo)throw new Error("inject() must be called from an injection context");return null===mo?ro(o,void 0,a):mo.get(o,a&et.Optional?null:void 0,a)}function dr(o,a=et.Default){return($t||Pb)(ie(o),a)}function wi(o){const a=[];for(let l=0;l<o.length;l++){const d=ie(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let h,g=et.Default;for(let y=0;y<d.length;y++){const w=d[y],I=j(w);"number"==typeof I?-1===I?h=w.token:g|=I:h=w}a.push(dr(h,g))}else a.push(dr(d))}return a}function ai(o,a){return o[Rr]=a,o.prototype[Rr]=a,o}function j(o){return o[Rr]}function qc(o,a,l,d){const h=o[cr];throw a[go]&&h.unshift(a[go]),o.message=function(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let h=le(a);if(Array.isArray(a))h=a.map(le).join(" -> ");else if("object"==typeof a){let g=[];for(let y in a)if(a.hasOwnProperty(y)){let w=a[y];g.push(y+":"+("string"==typeof w?JSON.stringify(w):le(w)))}h=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${o.replace(ta,"\n  ")}`}("\n"+o.message,h,l,d),o.ngTokenPath=h,o[cr]=null,o}const Ka=ai(Jo("Inject",o=>({token:o})),-1),mt=ai(Jo("Optional"),8),yo=ai(Jo("SkipSelf"),4);let Ya;function tr(o){var a;return(null===(a=function(){if(void 0===Ya&&(Ya=null,We.trustedTypes))try{Ya=We.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Ya}())||void 0===a?void 0:a.createHTML(o))||o}class v{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class E extends v{getTypeName(){return"HTML"}}class D extends v{getTypeName(){return"Style"}}class M extends v{getTypeName(){return"Script"}}class $ extends v{getTypeName(){return"URL"}}class de extends v{getTypeName(){return"ResourceURL"}}function Le(o){return o instanceof v?o.changingThisBreaksApplicationSecurity:o}function rt(o,a){const l=yt(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function yt(o){return o instanceof v&&o.getTypeName()||null}function Pt(o){return new E(o)}function Kn(o){return new D(o)}function ws(o){return new M(o)}function vo(o){return new $(o)}function Hh(o){return new de(o)}class Yc{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(tr(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class lg{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=tr(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=tr(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let h=l.length-1;0<h;h--){const y=l.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&a.removeAttribute(y)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const cg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bu(o){return(o=String(o)).match(cg)||o.match(xl)?o:"unsafe:"+o}function Eo(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function $u(...o){const a={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const Qc=Eo("area,br,col,hr,img,wbr"),dg=Eo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),__=Eo("rp,rt"),y_=$u(Qc,$u(dg,Eo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$u(__,Eo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$u(__,dg)),v_=Eo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cE=Eo("srcset"),E_=$u(v_,cE,Eo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Eo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ub=Eo("script,style,template");class hR{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!y_.hasOwnProperty(l))return this.sanitizedSomething=!0,!Ub.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let h=0;h<d.length;h++){const g=d.item(h),y=g.name,w=y.toLowerCase();if(!E_.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=g.value;v_[w]&&(I=Bu(I)),cE[w]&&(o=I,I=(o=String(o)).split(",").map(a=>Bu(a.trim())).join(", ")),this.buf.push(" ",y,'="',w_(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();y_.hasOwnProperty(l)&&!Qc.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(w_(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const dE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hE=/([^\#-~ |!])/g;function w_(o){return o.replace(/&/g,"&amp;").replace(dE,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(hE,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xr;function li(o,a){let l=null;try{xr=xr||function(o){const a=new lg(o);return function(){try{return!!(new window.DOMParser).parseFromString(tr(""),"text/html")}catch(o){return!1}}()?new Yc(a):a}(o);let d=a?String(a):"";l=xr.getInertBodyElement(d);let h=5,g=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=g,g=l.innerHTML,l=xr.getInertBodyElement(d)}while(d!==g);return tr((new hR).sanitizeChildren(Gh(l)||l))}finally{if(l){const d=Gh(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Gh(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function pE(o){const a=function(){const o=Ve();return o&&o[12]}();return a?a.sanitize(wr.URL,o)||"":rt(o,"URL")?Le(o):Bu(Ye(o))}const Wh="__ngContext__";function Ii(o,a){o[Wh]=a}function b_(o){const a=function(o){return o[Wh]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function fg(o){return o.ngOriginalError}function Zb(o,...a){o.error(...a)}class Xc{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=this._findContext(a),h=(o=a)&&o.ngErrorLogger||Zb;var o;h(this._console,"ERROR",a),l&&h(this._console,"ORIGINAL ERROR",l),d&&h(this._console,"ERROR CONTEXT",d)}_findContext(a){return a?a.ngDebugContext||this._findContext(fg(a)):null}_findOriginalError(a){let l=a&&fg(a);for(;l&&fg(l);)l=fg(l);return l||null}}const IE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(We))();function Ws(o){return o instanceof Function?o():o}var wo=(()=>((wo=wo||{})[wo.Important=1]="Important",wo[wo.DashCase=2]="DashCase",wo))();function mg(o,a){return undefined(o,a)}function _g(o){const a=o[3];return Zi(a)?a[3]:a}function Yh(o){return yg(o[13])}function Qh(o){return yg(o[4])}function yg(o){for(;null!==o&&!Zi(o);)o=o[4];return o}function In(o,a,l,d,h){if(null!=d){let g,y=!1;Zi(d)?g=d:or(d)&&(y=!0,d=d[0]);const w=Mn(d);0===o&&null!==l?null==h?DE(a,l,w):sd(a,l,w,h||null,!0):1===o&&null!==l?sd(a,l,w,h||null,!0):2===o?function(o,a,l){const d=Eg(o,a);d&&function(o,a,l,d){xn(o)?o.removeChild(a,l,d):a.removeChild(l)}(o,d,a,l)}(a,w,y):3===o&&a.destroyNode(w),null!=g&&function(o,a,l,d,h){const g=l[7];g!==Mn(l)&&In(a,o,d,g,h);for(let w=10;w<l.length;w++){const I=l[w];Xh(I[1],I,o,a,d,g)}}(a,o,g,l,h)}}function nd(o,a,l){return xn(o)?o.createElement(a,l):null===l?o.createElement(a):o.createElementNS(l,a)}function eI(o,a){const l=o[9],d=l.indexOf(a),h=a[3];1024&a[2]&&(a[2]&=-1025,gs(h,-1)),l.splice(d,1)}function rd(o,a){if(o.length<=10)return;const l=10+a,d=o[l];if(d){const h=d[17];null!==h&&h!==o&&eI(h,d),a>0&&(o[l-1][4]=d[4]);const g=Ei(o,10+a);!function(o,a){Xh(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const y=g[19];null!==y&&y.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Hu(o,a){if(!(256&a[2])){const l=a[11];xn(l)&&l.destroyNode&&Xh(o,a,l,3,null,null),function(o){let a=o[13];if(!a)return M_(o[1],o);for(;a;){let l=null;if(or(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==o;)or(a)&&M_(a[1],a),a=a[3];null===a&&(a=o),or(a)&&M_(a[1],a),l=a&&a[4]}a=l}}(a)}}function M_(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const h=a[l[d]];if(!(h instanceof Fa)){const g=l[d+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const w=h[g[y]],I=g[y+1];try{I.call(w)}finally{}}else try{g.call(h)}finally{}}}}(o,a),function(o,a){const l=o.cleanup,d=a[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const y=l[g+1],w="function"==typeof y?y(a):Mn(a[y]),I=d[h=l[g+2]],A=l[g+3];"boolean"==typeof A?w.removeEventListener(l[g],I,A):A>=0?d[h=A]():d[h=-A].unsubscribe(),g+=2}else{const y=d[h=l[g+1]];l[g].call(y)}if(null!==d){for(let g=h+1;g<d.length;g++)d[g]();a[7]=null}}(o,a),1===a[1].type&&xn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&Zi(a[3])){l!==a[3]&&eI(l,a);const d=a[19];null!==d&&d.detachView(o)}}}function id(o,a,l){return function(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const h=o.data[d.directiveStart].encapsulation;if(h===K.None||h===K.Emulated)return null}return Gr(d,l)}(o,a.parent,l)}function sd(o,a,l,d,h){xn(o)?o.insertBefore(a,l,d,h):a.insertBefore(l,d,h)}function DE(o,a,l){xn(o)?o.appendChild(a,l):a.appendChild(l)}function iI(o,a,l,d,h){null!==d?sd(o,a,l,d,h):DE(o,a,l)}function Eg(o,a){return xn(o)?o.parentNode(a):a.parentNode}let RE=function(o,a,l){return 40&o.type?Gr(o,l):null};function k_(o,a,l,d){const h=id(o,d,a),g=a[11],w=function(o,a,l){return RE(o,a,l)}(d.parent||a[6],d,a);if(null!=h)if(Array.isArray(l))for(let I=0;I<l.length;I++)iI(g,h,l[I],w,!1);else iI(g,h,l,w,!1)}function F_(o,a){if(null!==a){const l=a.type;if(3&l)return Gr(a,o);if(4&l)return od(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return F_(o,d);{const h=o[a.index];return Zi(h)?od(-1,h):Mn(h)}}if(32&l)return mg(a,o)()||Mn(o[a.index]);{const d=Cg(o,a);return null!==d?Array.isArray(d)?d[0]:F_(_g(o[16]),d):F_(o,a.next)}}return null}function Cg(o,a){return null!==a?o[16][6].projection[a.projection]:null}function od(o,a){const l=10+o+1;if(l<a.length){const d=a[l],h=d[1].firstChild;if(null!==h)return F_(d,h)}return a[7]}function Ig(o,a,l,d,h,g,y){for(;null!=l;){const w=d[l.index],I=l.type;if(y&&0===a&&(w&&Ii(Mn(w),d),l.flags|=4),64!=(64&l.flags))if(8&I)Ig(o,a,l.child,d,h,g,!1),In(a,o,h,w,g);else if(32&I){const A=mg(l,d);let N;for(;N=A();)In(a,o,h,N,g);In(a,o,h,w,g)}else 16&I?ef(o,a,d,l,h,g):In(a,o,h,w,g);l=y?l.projectionNext:l.next}}function Xh(o,a,l,d,h,g){Ig(l,d,o.firstChild,a,h,g,!1)}function ef(o,a,l,d,h,g){const y=l[16],I=y[6].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)In(a,o,h,I[A],g);else Ig(o,a,I,y[3],h,g,!0)}function xE(o,a,l){xn(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function NE(o,a,l){xn(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function aI(o,a,l){let d=o.length;for(;;){const h=o.indexOf(a,l);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const g=a.length;if(h+g===d||o.charCodeAt(h+g)<=32)return h}l=h+1}}const uI="ng-template";function lI(o,a,l){let d=0;for(;d<o.length;){let h=o[d++];if(l&&"class"===h){if(h=o[d],-1!==aI(h.toLowerCase(),a,0))return!0}else if(1===h){for(;d<o.length&&"string"==typeof(h=o[d++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function OE(o){return 4===o.type&&o.value!==uI}function cI(o,a,l){return a===(4!==o.type||l?o.value:uI)}function L_(o,a,l){let d=4;const h=o.attrs||[],g=function(o){for(let a=0;a<o.length;a++)if(Zp(o[a]))return a;return o.length}(h);let y=!1;for(let w=0;w<a.length;w++){const I=a[w];if("number"!=typeof I){if(!y)if(4&d){if(d=2|1&d,""!==I&&!cI(o,I,l)||""===I&&1===a.length){if(Co(d))return!1;y=!0}}else{const A=8&d?I:a[++w];if(8&d&&null!==o.attrs){if(!lI(o.attrs,A,l)){if(Co(d))return!1;y=!0}continue}const k=Gu(8&d?"class":I,h,OE(o),l);if(-1===k){if(Co(d))return!1;y=!0;continue}if(""!==A){let B;B=k>g?"":h[k+1].toLowerCase();const z=8&d?B:null;if(z&&-1!==aI(z,A,0)||2&d&&A!==B){if(Co(d))return!1;y=!0}}}}else{if(!y&&!Co(d)&&!Co(I))return!1;if(y&&Co(I))continue;y=!1,d=I|1&d}}return Co(d)||y}function Co(o){return 0==(1&o)}function Gu(o,a,l,d){if(null===a)return-1;let h=0;if(d||!l){let g=!1;for(;h<a.length;){const y=a[h];if(y===o)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let w=a[++h];for(;"string"==typeof w;)w=a[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function ME(o,a,l=!1){for(let d=0;d<a.length;d++)if(L_(o,a[d],l))return!0;return!1}function V_(o,a){return o?":not("+a.trim()+")":a}function U_(o){let a=o[0],l=1,d=2,h="",g=!1;for(;l<o.length;){let y=o[l];if("string"==typeof y)if(2&d){const w=o[++l];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!Co(y)&&(a+=V_(g,h),h=""),d=y,g=g||!Co(d);l++}return""!==h&&(a+=V_(g,h)),a}const Tt={};function fI(o){FE(Wt(),Ve(),lr()+o,xa())}function FE(o,a,l,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&bl(a,g,l)}else{const g=o.preOrderHooks;null!==g&&Il(a,g,0,l)}Vs(l)}function kl(o,a){return o<<17|a<<2}function bo(o){return o>>17&32767}function Sg(o){return 2|o}function Ja(o){return(131068&o)>>2}function tf(o,a){return-131069&o|a<<2}function B_(o){return 1|o}function bI(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],g=l[d+1];if(-1!==g){const y=o.data[g];Pa(h),y.contentQueries(2,a[g],g)}}}function eu(o,a,l,d,h,g,y,w,I,A){const N=a.blueprint.slice();return N[0]=h,N[2]=140|d,gl(N),N[3]=N[15]=o,N[8]=l,N[10]=y||o&&o[10],N[11]=w||o&&o[11],N[12]=I||o&&o[12]||null,N[9]=A||o&&o[9]||null,N[6]=g,N[16]=2==a.type?o[16]:N,N}function cd(o,a,l,d,h){let g=o.data[a];if(null===g)g=function(o,a,l,d,h){const g=Ra(),y=El(),I=o.data[a]=function(o,a,l,d,h,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,l,a,d,h);return null===o.firstChild&&(o.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,l,d,h),ft.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=h;const y=function(){const o=ft.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return si(g,!0),g}function At(o,a,l,d){if(0===l)return-1;const h=a.length;for(let g=0;g<l;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return h}function rf(o,a,l){Tc(a);try{const d=o.viewQuery;null!==d&&z_(1,d,l);const h=o.template;null!==h&&sf(o,a,h,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&bI(o,a),o.staticViewQueries&&z_(2,o.viewQuery,l);const g=o.components;null!==g&&function(o,a){for(let l=0;l<a.length;l++)xI(o,a[l])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Sc()}}function Io(o,a,l,d){const h=a[2];if(256==(256&h))return;Tc(a);const g=xa();try{gl(a),function(o){ft.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&sf(o,a,l,2,d);const y=3==(3&h);if(!g)if(y){const A=o.preOrderCheckHooks;null!==A&&bl(a,A,null)}else{const A=o.preOrderHooks;null!==A&&Il(a,A,0,null),Mc(a,0)}if(function(o){for(let a=Yh(o);null!==a;a=Qh(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const h=l[d],g=h[3];0==(1024&h[2])&&gs(g,1),h[2]|=1024}}}(a),function(o){for(let a=Yh(o);null!==a;a=Qh(a))for(let l=10;l<a.length;l++){const d=a[l],h=d[1];xu(d)&&Io(h,d,h.template,d[8])}}(a),null!==o.contentQueries&&bI(o,a),!g)if(y){const A=o.contentCheckHooks;null!==A&&bl(a,A)}else{const A=o.contentHooks;null!==A&&Il(a,A,1),Mc(a,1)}!function(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)Vs(~h);else{const g=h,y=l[++d],w=l[++d];Ma(y,g),w(2,a[g])}}}finally{Vs(-1)}}(o,a);const w=o.components;null!==w&&function(o,a){for(let l=0;l<a.length;l++)FR(o,a[l])}(a,w);const I=o.viewQuery;if(null!==I&&z_(2,I,d),!g)if(y){const A=o.viewCheckHooks;null!==A&&bl(a,A)}else{const A=o.viewHooks;null!==A&&Il(a,A,2),Mc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),g||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,gs(a[3],-1))}finally{Sc()}}function TI(o,a,l,d){const h=a[10],g=!xa(),y=fl(a);try{g&&!y&&h.begin&&h.begin(),y&&rf(o,a,d),Io(o,a,l,d)}finally{g&&!y&&h.end&&h.end()}}function sf(o,a,l,d,h){const g=lr(),y=2&d;try{Vs(-1),y&&a.length>20&&FE(o,a,20,xa()),l(d,h)}finally{Vs(g)}}function GE(o,a,l){!Nu()||(function(o,a,l,d){const h=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||$a(l,a),Ii(d,a);const y=l.initialInputs;for(let w=h;w<g;w++){const I=o.data[w],A=ri(I);A&&OR(a,l,I);const N=js(a,o,w,l);Ii(N,a),null!==y&&MR(0,w-h,N,I,0,y),A&&(ii(l.index,a)[8]=N)}}(o,a,l,Gr(l,a)),128==(128&l.flags)&&function(o,a,l){const d=l.directiveStart,h=l.directiveEnd,y=l.index,w=ft.lFrame.currentDirectiveIndex;try{Vs(y);for(let I=d;I<h;I++){const A=o.data[I],N=a[I];Ic(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&ZE(A,N)}}finally{Vs(-1),Ic(w)}}(o,a,l))}function Kr(o,a,l=Gr){const d=a.localNames;if(null!==d){let h=a.index+1;for(let g=0;g<d.length;g+=2){const y=d[g+1],w=-1===y?l(a,o):o[y];o[h++]=w}}}function dd(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=$_(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function $_(o,a,l,d,h,g,y,w,I,A){const N=20+d,k=N+h,B=function(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:Tt);return l}(N,k),z="function"==typeof A?A():A;return B[1]={type:o,blueprint:B,template:l,queries:null,viewQuery:w,declTNode:a,data:B.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:z,incompleteFirstPass:!1}}function fd(o,a,l,d){const h=yd(a);null===l?h.push(d):(h.push(l),o.firstCreatePass&&kg(o).push(d,h.length-1))}function qE(o,a,l){for(let d in o)if(o.hasOwnProperty(d)){const h=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,h):l[d]=[a,h]}return l}function Ui(o,a,l,d,h,g,y,w){const I=Gr(a,l);let N,A=a.inputs;!w&&null!=A&&(N=A[d])?(Z_(o,l,N,d,h),al(a)&&function(o,a){const l=ii(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),h=null!=y?y(h,a.value||"",d):h,xn(g)?g.setProperty(I,d,h):Fc(d)||(I.setProperty?I.setProperty(d,h):I[d]=h))}function Og(o,a,l,d){let h=!1;if(Nu()){const g=function(o,a,l){const d=o.directiveRegistry;let h=null;if(d)for(let g=0;g<d.length;g++){const y=d[g];ME(l,y.selectors,!1)&&(h||(h=[]),Yo($a(l,a),o,y.type),ri(y)?(Mg(o,l),h.unshift(y)):h.push(y))}return h}(o,a,l),y=null===d?null:{"":-1};if(null!==g){h=!0,YE(l,o.data.length,g.length);for(let N=0;N<g.length;N++){const k=g[N];k.providersResolver&&k.providersResolver(k)}let w=!1,I=!1,A=At(o,a,g.length,null);for(let N=0;N<g.length;N++){const k=g[N];l.mergedAttrs=Tl(l.mergedAttrs,k.hostAttrs),Zn(o,l,a,A,k),Bi(A,k,y),null!==k.contentQueries&&(l.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(l.flags|=128);const B=k.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),w=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),I=!0),A++}!function(o,a){const d=a.directiveEnd,h=o.data,g=a.attrs,y=[];let w=null,I=null;for(let A=a.directiveStart;A<d;A++){const N=h[A],k=N.inputs,B=null===g||OE(a)?null:W_(k,g);y.push(B),w=qE(k,A,w),I=qE(N.outputs,A,I)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=w,a.outputs=I}(o,l)}y&&function(o,a,l){if(a){const d=o.localNames=[];for(let h=0;h<a.length;h+=2){const g=l[a[h+1]];if(null==g)throw new ut("301",`Export of name '${a[h+1]}' not found!`);d.push(a[h],g)}}}(l,d,y)}return l.mergedAttrs=Tl(l.mergedAttrs,l.attrs),h}function H_(o,a,l,d,h,g){const y=g.hostBindings;if(y){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const I=~a.index;(function(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(d,h,y)}}function ZE(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Mg(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Bi(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;ri(a)&&(l[""]=o)}}function YE(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function Zn(o,a,l,d,h){o.data[d]=h;const g=h.factory||(h.factory=Gn(h.type)),y=new Fa(g,ri(h),null);o.blueprint[d]=y,l[d]=y,H_(o,a,0,d,At(o,l,h.hostVars,Tt),h)}function OR(o,a,l){const d=Gr(a,o),h=dd(l),g=o[10],y=q_(o,eu(o,h,null,l.onPush?64:16,d,a,g,g.createRenderer(d,l),null,null));o[a.index]=y}function ia(o,a,l,d,h,g){const y=Gr(o,a);!function(o,a,l,d,h,g,y){if(null==g)xn(o)?o.removeAttribute(a,h,l):a.removeAttribute(h);else{const w=null==y?Ye(g):y(g,d||"",h);xn(o)?o.setAttribute(a,h,w,l):l?a.setAttributeNS(l,h,w):a.setAttribute(h,w)}}(a[11],y,g,o.value,l,d,h)}function MR(o,a,l,d,h,g){const y=g[a];if(null!==y){const w=d.setInput;for(let I=0;I<y.length;){const A=y[I++],N=y[I++],k=y[I++];null!==w?d.setInput(l,k,A,N):l[N]=k}}}function W_(o,a){let l=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;o.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,o[h],a[d+1])),d+=2}else d+=2;else d+=4}return l}function ji(o,a,l,d){return new Array(o,!0,!1,a,null,0,d,l,null,null)}function FR(o,a){const l=ii(a,o);if(xu(l)){const d=l[1];80&l[2]?Io(d,l,d.template,l[8]):l[5]>0&&JE(l)}}function JE(o){for(let d=Yh(o);null!==d;d=Qh(d))for(let h=10;h<d.length;h++){const g=d[h];if(1024&g[2]){const y=g[1];Io(y,g,y.template,g[8])}else g[5]>0&&JE(g)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=ii(l[d],o);xu(h)&&h[5]>0&&JE(h)}}function xI(o,a){const l=ii(a,o),d=l[1];(function(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(d,l),rf(d,l,l[8])}function q_(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function XE(o){for(;o;){o[2]|=64;const a=_g(o);if(Ms(o)&&!a)return o;o=a}return null}function uf(o,a,l){const d=a[10];d.begin&&d.begin();try{Io(o,a,o.template,l)}catch(h){throw K_(a,h),h}finally{d.end&&d.end()}}function _d(o){!function(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],d=b_(l),h=d[1];TI(h,d,h.template,l)}}(o[8])}function z_(o,a,l){Pa(0),a(o,l)}const OI=(()=>Promise.resolve(null))();function yd(o){return o[7]||(o[7]=[])}function kg(o){return o.cleanup||(o.cleanup=[])}function K_(o,a){const l=o[9],d=l?l.get(Xc,null):null;d&&d.handleError(a)}function Z_(o,a,l,d,h){for(let g=0;g<l.length;){const y=l[g++],w=l[g++],I=a[y],A=o.data[y];null!==A.setInput?A.setInput(I,h,d,w):I[w]=h}}function sa(o,a,l){const d=Fs(a,o);!function(o,a,l){xn(o)?o.setValue(a,l):a.textContent=l}(o[11],d,l)}function qu(o,a,l){let d=l?o.styles:null,h=l?o.classes:null,g=0;if(null!==a)for(let y=0;y<a.length;y++){const w=a[y];"number"==typeof w?g=w:1==g?h=ve(h,w):2==g&&(d=ve(d,w+": "+a[++y]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=h:o.classesWithoutHost=h}const vd=new zn("INJECTOR",-1);class Q_{get(a,l=Kt){if(l===Kt){const d=new Error(`NullInjectorError: No provider for ${le(a)}!`);throw d.name="NullInjectorError",d}return l}}const zu=new zn("Set Injector scope."),lf={},BR={};let J_;function ew(){return void 0===J_&&(J_=new Q_),J_}function Lg(o,a=null,l=null,d){return new jR(o,l,a||ew(),d)}class jR{constructor(a,l,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&ki(l,w=>this.processProvider(w,a,l)),ki([a],w=>this.processInjectorType(w,[],g)),this.records.set(vd,Ed(void 0,this));const y=this.records.get(zu);this.scope=null!=y?y.value:null,this.source=h||("object"==typeof a?null:le(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=Kt,d=et.Default){this.assertNotDestroyed();const h=na(this),g=Xe(void 0);try{if(!(d&et.SkipSelf)){let w=this.records.get(a);if(void 0===w){const I=("function"==typeof(o=a)||"object"==typeof o&&o instanceof zn)&&Un(a);w=I&&this.injectableDefInScope(I)?Ed(tw(a),lf):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(d&et.Self?ew():this.parent).get(a,l=d&et.Optional&&l===Kt?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[cr]=y[cr]||[]).unshift(le(a)),h)throw y;return qc(y,a,"R3InjectorError",this.source)}throw y}finally{Xe(g),na(h)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,h)=>a.push(le(h))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,l,d){if(!(a=ie(a)))return!1;let h=mi(a);const g=null==h&&a.ngModule||void 0,y=void 0===g?a:g,w=-1!==d.indexOf(y);if(void 0!==g&&(h=mi(g)),null==h)return!1;if(null!=h.imports&&!w){let N;d.push(y);try{ki(h.imports,k=>{this.processInjectorType(k,l,d)&&(void 0===N&&(N=[]),N.push(k))})}finally{}if(void 0!==N)for(let k=0;k<N.length;k++){const{ngModule:B,providers:z}=N[k];ki(z,X=>this.processProvider(X,B,z||wt))}}this.injectorDefTypes.add(y);const I=Gn(y)||(()=>new y);this.records.set(y,Ed(I,lf));const A=h.providers;if(null!=A&&!w){const N=a;ki(A,k=>this.processProvider(k,N,A))}return void 0!==g&&void 0!==a.providers}processProvider(a,l,d){let h=wd(a=ie(a))?a:ie(a&&a.provide);const g=Ul(o=a)?Ed(void 0,o.useValue):Ed(Vl(o),lf);var o;if(wd(a)||!0!==a.multi)this.records.get(h);else{let y=this.records.get(h);y||(y=Ed(void 0,lf,!0),y.factory=()=>wi(y.multi),this.records.set(h,y)),h=a,y.multi.push(a)}this.records.set(h,g)}hydrate(a,l){return l.value===lf&&(l.value=BR,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(o=l.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var o}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ie(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function tw(o){const a=Un(o),l=null!==a?a.factory:Gn(o);if(null!==l)return l;if(o instanceof zn)throw new Error(`Token ${le(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const a=o.length;if(a>0){const d=function(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}(a,"?");throw new Error(`Can't resolve all parameters for ${le(o)}: (${d.join(", ")}).`)}const l=function(o){const a=o&&(o[ot]||o[Gt]);if(a){const l=function(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Error("unreachable")}function Vl(o,a,l){let d;if(wd(o)){const h=ie(o);return Gn(h)||tw(h)}if(Ul(o))d=()=>ie(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...wi(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))d=()=>dr(ie(o.useExisting));else{const h=ie(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return Gn(h)||tw(h);d=()=>new h(...wi(o.deps))}return d}function Ed(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function Ul(o){return null!==o&&"object"==typeof o&&Es in o}function wd(o){return"function"==typeof o}const Ug=function(o,a,l){return function(o,a=null,l=null,d){const h=Lg(o,a,l,d);return h._resolveInjectorDefTypes(),h}({name:l},a,o,l)};let nr=(()=>{class o{static create(l,d){return Array.isArray(l)?Ug(l,d,""):Ug(l.providers,l.parent,l.name||"")}}return o.THROW_IF_NOT_FOUND=Kt,o.NULL=new Q_,o.\u0275prov=Cn({token:o,providedIn:"any",factory:()=>dr(vd)}),o.__NG_ELEMENT_ID__=-1,o})();function Gg(o,a){ka(b_(o)[1],ur())}function Br(o){let a=function(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let h;if(ri(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");h=a.\u0275dir}if(h){if(l){d.push(h);const y=o;y.inputs=iy(o.inputs),y.declaredInputs=iy(o.declaredInputs),y.outputs=iy(o.outputs);const w=h.hostBindings;w&&aw(o,w);const I=h.viewQuery,A=h.contentQueries;if(I&&Wg(o,I),A&&nu(o,A),Fe(o.inputs,h.inputs),Fe(o.declaredInputs,h.declaredInputs),Fe(o.outputs,h.outputs),ri(h)&&h.data.animation){const N=o.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const w=g[y];w&&w.ngInherit&&w(o),w===Br&&(l=!1)}}a=Object.getPrototypeOf(a)}!function(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const h=o[d];h.hostVars=a+=h.hostVars,h.hostAttrs=Tl(h.hostAttrs,l=Tl(l,h.hostAttrs))}}(d)}function iy(o){return o===hn?{}:o===wt?[]:o}function Wg(o,a){const l=o.viewQuery;o.viewQuery=l?(d,h)=>{a(d,h),l(d,h)}:a}function nu(o,a){const l=o.contentQueries;o.contentQueries=l?(d,h,g)=>{a(d,h,g),l(d,h,g)}:a}function aw(o,a){const l=o.hostBindings;o.hostBindings=l?(d,h)=>{a(d,h),l(d,h)}:a}let zg=null;function Td(){if(!zg){const o=We.Symbol;if(o&&o.iterator)zg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(zg=d)}}}return zg}function Bl(o){return!!sy(o)&&(Array.isArray(o)||!(o instanceof Map)&&Td()in o)}function sy(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function $i(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function uw(o,a,l,d){const h=Ve();return $i(h,Na(),a)&&(Wt(),ia(Nt(),h,o,a,l,d)),uw}function ca(o,a,l,d,h,g,y,w){const I=Ve(),A=Wt(),N=o+20,k=A.firstCreatePass?function(o,a,l,d,h,g,y,w,I){const A=a.consts,N=cd(a,o,4,y||null,Ls(A,w));Og(a,l,N,Ls(A,I)),ka(a,N);const k=N.tViews=$_(2,N,d,h,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,N),k.queries=a.queries.embeddedTView(N)),N}(N,A,I,a,l,d,h,g,y):A.data[N];si(k,!1);const B=I[11].createComment("");k_(A,I,B,k),Ii(B,I),q_(I,I[N]=ji(B,I,B,k)),Ta(k)&&GE(A,I,k),null!=y&&Kr(I,k,w)}function hi(o){return function(o,a){return o[a]}(ft.lFrame.contextLView,20+o)}function Qg(o,a=et.Default){const l=Ve();return null===l?dr(o,a):Ah(ur(),l,ie(o),a)}function hy(o,a,l){const d=Ve();return $i(d,Na(),a)&&Ui(Wt(),Nt(),d,o,a,d[11],l,!1),hy}function iu(o,a,l,d,h){const y=h?"class":"style";Z_(o,l,a.inputs[y],y,d)}function Jg(o,a,l,d){const h=Ve(),g=Wt(),y=20+o,w=h[11],I=h[y]=nd(w,a,ft.lFrame.currentNamespace),A=g.firstCreatePass?function(o,a,l,d,h,g,y){const w=a.consts,A=cd(a,o,2,h,Ls(w,g));return Og(a,l,A,Ls(w,y)),null!==A.attrs&&qu(A,A.attrs,!1),null!==A.mergedAttrs&&qu(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(y,g,h,0,a,l,d):g.data[y];si(A,!0);const N=A.mergedAttrs;null!==N&&Zo(w,I,N);const k=A.classes;null!==k&&NE(w,I,k);const B=A.styles;null!==B&&xE(w,I,B),64!=(64&A.flags)&&k_(g,h,I,A),0===ft.lFrame.elementDepthCount&&Ii(I,h),ft.lFrame.elementDepthCount++,Ta(A)&&(GE(g,h,A),function(o,a,l){if(Iu(a)){const h=a.directiveEnd;for(let g=a.directiveStart;g<h;g++){const y=o.data[g];y.contentQueries&&y.contentQueries(1,l[g],g)}}}(g,A,h)),null!==d&&Kr(h,A)}function fy(){let o=ur();El()?ft.lFrame.isParent=!1:(o=o.parent,si(o,!1));const a=o;ft.lFrame.elementDepthCount--;const l=Wt();l.firstCreatePass&&(ka(l,o),Iu(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(a)&&iu(l,a,Ve(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(a)&&iu(l,a,Ve(),a.stylesWithoutHost,!1)}function cT(o,a,l,d){Jg(o,a,l,d),fy()}function mw(){return Ve()}function _w(o){return!!o&&"function"==typeof o.then}function hT(o){return!!o&&"function"==typeof o.subscribe}const py=hT;function su(o,a,l,d){const h=Ve(),g=Wt(),y=ur();return function(o,a,l,d,h,g,y,w){const I=Ta(d),N=o.firstCreatePass&&kg(o),k=a[8],B=yd(a);let z=!0;if(3&d.type||w){const ae=Gr(d,a),Ge=w?w(ae):ae,Oe=B.length,ct=w?It=>w(Mn(It[d.index])):d.index;if(xn(l)){let It=null;if(!w&&I&&(It=function(o,a,l,d){const h=o.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===l&&h[g+1]===d){const w=a[7],I=h[g+2];return w.length>I?w[I]:null}"string"==typeof y&&(g+=2)}return null}(o,a,h,d.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=g,It.__ngLastListenerFn__=g,z=!1;else{g=tm(d,a,k,g,!1);const Yt=l.listen(Ge,h,g);B.push(g,Yt),N&&N.push(h,ct,Oe,Oe+1)}}else g=tm(d,a,k,g,!0),Ge.addEventListener(h,g,y),B.push(g),N&&N.push(h,ct,Oe,y)}else g=tm(d,a,k,g,!1);const X=d.outputs;let Ee;if(z&&null!==X&&(Ee=X[h])){const ae=Ee.length;if(ae)for(let Ge=0;Ge<ae;Ge+=2){const Jr=a[Ee[Ge]][Ee[Ge+1]].subscribe(g),Po=B.length;B.push(g,Jr),N&&N.push(h,d.index,Po,-(Po+1))}}}(g,h,h[11],y,o,a,!!l,d),su}function gy(o,a,l,d){try{return!1!==l(d)}catch(h){return K_(o,h),!1}}function tm(o,a,l,d,h){return function g(y){if(y===Function)return d;const w=2&o.flags?ii(o.index,a):a;0==(32&a[2])&&XE(w);let I=gy(a,0,d,y),A=g.__ngNextListenerFn__;for(;A;)I=gy(a,0,A,y)&&I,A=A.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Af(o=1){return function(o){return(ft.lFrame.contextLView=function(o,a){for(;o>0;)a=a[15],o--;return a}(o,ft.lFrame.contextLView))[8]}(o)}function Md(o,a,l,d,h){const g=o[l+1],y=null===a;let w=d?bo(g):Ja(g),I=!1;for(;0!==w&&(!1===I||y);){const N=o[w+1];Tw(o[w],a)&&(I=!0,o[w+1]=d?B_(N):Sg(N)),w=d?bo(N):Ja(N)}I&&(o[l+1]=d?Sg(g):B_(g))}function Tw(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Wr(o,a)>=0}function Aw(o,a){return function(o,a,l,d){const h=Ve(),g=Wt(),y=function(o){const a=ft.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}(2);g.firstUpdatePass&&function(o,a,l,d){const h=o.data;if(null===h[l+1]){const g=h[lr()],y=function(o,a){return a>=o.expandoStartIndex}(o,l);(function(o,a){return 0!=(o.flags&(a?16:32))})(g,d)&&null===a&&!y&&(a=!1),a=function(o,a,l,d){const h=function(o){const a=ft.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(l=Nf(l=Mw(null,o,a,l,d),a.attrs,d),g=null);else{const y=a.directiveStylingLast;if(-1===y||o[y]!==h)if(l=Mw(h,o,a,l,d),null===g){let I=function(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==Ja(d))return o[bo(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=Mw(null,o,a,I[1],d),I=Nf(I,a.attrs,d),function(o,a,l,d){o[bo(l?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else g=function(o,a,l){let d;const h=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<h;g++)d=Nf(d,o[g].hostAttrs,l);return Nf(d,a.attrs,l)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(h,g,a,d),function(o,a,l,d,h,g){let y=g?a.classBindings:a.styleBindings,w=bo(y),I=Ja(y);o[d]=l;let N,A=!1;if(Array.isArray(l)){const k=l;N=k[1],(null===N||Wr(k,N)>0)&&(A=!0)}else N=l;if(h)if(0!==I){const B=bo(o[w+1]);o[d+1]=kl(B,w),0!==B&&(o[B+1]=tf(o[B+1],d)),o[w+1]=function(o,a){return 131071&o|a<<17}(o[w+1],d)}else o[d+1]=kl(w,0),0!==w&&(o[w+1]=tf(o[w+1],d)),w=d;else o[d+1]=kl(I,0),0===w?w=d:o[I+1]=tf(o[I+1],d),I=d;A&&(o[d+1]=Sg(o[d+1])),Md(o,N,d,!0),Md(o,N,d,!1),function(o,a,l,d,h){const g=h?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&Wr(g,a)>=0&&(l[d+1]=B_(l[d+1]))}(a,N,o,d,g),y=kl(w,I),g?a.classBindings=y:a.styleBindings=y}(h,g,a,l,y,d)}}(g,o,y,d),a!==Tt&&$i(h,y,a)&&function(o,a,l,d,h,g,y,w){if(!(3&a.type))return;const I=o.data,A=I[w+1];Wl(function(o){return 1==(1&o)}(A)?im(I,a,l,h,Ja(A),y):void 0)||(Wl(g)||function(o){return 2==(2&o)}(A)&&(g=im(I,null,l,h,w,y)),function(o,a,l,d,h){const g=xn(o);if(a)h?g?o.addClass(l,d):l.classList.add(d):g?o.removeClass(l,d):l.classList.remove(d);else{let y=-1===d.indexOf("-")?void 0:wo.DashCase;if(null==h)g?o.removeStyle(l,d,y):l.style.removeProperty(d);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),y|=wo.Important),g?o.setStyle(l,d,h,y):l.style.setProperty(d,h,w?"important":"")}}}(d,y,Fs(lr(),l),h,g))}(g,g.data[lr()],h,h[11],o,h[y+1]=function(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=le(Le(o)))),o}(a,l),d,y)}(o,a,null,!0),Aw}function Mw(o,a,l,d,h){let g=null;const y=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<y&&(g=a[w],d=Nf(d,g.hostAttrs,h),g!==o);)w++;return null!==o&&(l.directiveStylingLast=w),d}function Nf(o,a,l){const d=l?1:2;let h=-1;if(null!==a)for(let g=0;g<a.length;g++){const y=a[g];"number"==typeof y?h=y:h===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Pr(o,y,!!l||a[++g]))}return void 0===o?null:o}function im(o,a,l,d,h,g){const y=null===a;let w;for(;h>0;){const I=o[h],A=Array.isArray(I),N=A?I[1]:I,k=null===N;let B=l[h+1];B===Tt&&(B=k?wt:void 0);let z=k?Rl(B,d):N===d?B:void 0;if(A&&!Wl(z)&&(z=Rl(I,d)),Wl(z)&&(w=z,y))return w;const X=o[h+1];h=y?bo(X):Ja(X)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(w=Rl(I,d))}return w}function Wl(o){return void 0!==o}function bT(o,a=""){const l=Ve(),d=Wt(),h=o+20,g=d.firstCreatePass?cd(d,h,1,a,null):d.data[h],y=l[h]=function(o,a){return xn(o)?o.createText(a):o.createTextNode(a)}(l[11],a);k_(d,l,y,g),si(g,!1)}function Lw(o){return Ey("",o,""),Lw}function Ey(o,a,l){const d=Ve(),h=function(o,a,l,d){return $i(o,Na(),l)?a+Ye(l)+d:Tt}(d,o,a,l);return h!==Tt&&sa(d,lr(),h),Ey}function Kw(o,a,l){const d=Ve();return $i(d,Na(),a)&&Ui(Wt(),Nt(),d,o,a,d[11],l,!0),Kw}const Zu=void 0;var kf=["en",[["a","p"],["AM","PM"],Zu],[["AM","PM"],Zu,Zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zu,"{1} 'at' {0}",Zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const a=Math.floor(Math.abs(o)),l=o.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Zs={};function zl(o){const a=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=kd(a);if(l)return l;const d=a.split("-")[0];if(l=kd(d),l)return l;if("en"===d)return kf;throw new Error(`Missing locale data for the locale "${o}".`)}function Yw(o){return zl(o)[Et.PluralCase]}function kd(o){return o in Zs||(Zs[o]=We.ng&&We.ng.common&&We.ng.common.locales&&We.ng.common.locales[o]),Zs[o]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Ff="en-US";let e0=Ff;function t0(o){Nn(o,"Expected localeId to be defined"),"string"==typeof o&&(e0=o.toLowerCase().replace(/_/g,"-"))}function N0(o,a,l,d,h){if(o=ie(o),Array.isArray(o))for(let g=0;g<o.length;g++)N0(o[g],a,l,d,h);else{const g=Wt(),y=Ve();let w=wd(o)?o:ie(o.provide),I=Vl(o);const A=ur(),N=1048575&A.providerIndexes,k=A.directiveStart,B=A.providerIndexes>>20;if(wd(o)||!o.multi){const z=new Fa(I,h,Qg),X=ky(w,a,h?N:N+B,k);-1===X?(Yo($a(A,y),g,w),O0(g,o,a.length),a.push(w),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(z),y.push(z)):(l[X]=z,y[X]=z)}else{const z=ky(w,a,N+B,k),X=ky(w,a,N,N+B),Ee=z>=0&&l[z],ae=X>=0&&l[X];if(h&&!ae||!h&&!Ee){Yo($a(A,y),g,w);const Ge=function(o,a,l,d,h){const g=new Fa(o,l,Qg);return g.multi=[],g.index=a,g.componentProviders=0,QT(g,h,d&&!l),g}(h?JT:Fx,l.length,h,d,I);!h&&ae&&(l[X].providerFactory=Ge),O0(g,o,a.length,0),a.push(w),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(Ge),y.push(Ge)}else O0(g,o,z>-1?z:X,QT(l[h?X:z],I,!h&&d));!h&&d&&ae&&l[X].componentProviders++}}}function O0(o,a,l,d){const h=wd(a);if(h||function(o){return!!o.useClass}(a)){const y=(a.useClass||a).prototype.ngOnDestroy;if(y){const w=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const I=w.indexOf(l);-1===I?w.push(l,[d,y]):w[I+1].push(d,y)}else w.push(l,y)}}}function QT(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function ky(o,a,l,d){for(let h=l;h<d;h++)if(a[h]===o)return h;return-1}function Fx(o,a,l,d){return M0(this.multi,[])}function JT(o,a,l,d){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=js(l,l[1],this.providerFactory.index,d);g=w.slice(0,y),M0(h,g);for(let I=y;I<w.length;I++)g.push(w[I])}else g=[],M0(h,g);return g}function M0(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function XT(o,a=[]){return l=>{l.providersResolver=(d,h)=>function(o,a,l){const d=Wt();if(d.firstCreatePass){const h=ri(o);N0(l,d.data,d.blueprint,h,!0),N0(a,d.data,d.blueprint,h,!1)}}(d,h?h(o):o,a)}}class eD{}const P0="ngComponent";class nD{resolveComponentFactory(a){throw function(o){const a=Error(`No component factory found for ${le(o)}. Did you add it to @NgModule.entryComponents?`);return a[P0]=o,a}(a)}}let Vd=(()=>{class o{}return o.NULL=new nD,o})();function Xt(...o){}function Ud(o,a){return new Qn(Gr(o,a))}const Yn=function(){return Ud(ur(),Ve())};let Qn=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=Yn,o})();function pa(o){return o instanceof Qn?o.nativeElement:o}class Fy{}let Ly=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>$x(),o})();const $x=function(){const o=Ve(),l=ii(ur().index,o);return function(o){return o[11]}(or(l)?l:o)};let F0=(()=>{class o{}return o.\u0275prov=Cn({token:o,providedIn:"root",factory:()=>null}),o})();class fr{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const sD=new fr("12.2.10");class Gx{constructor(){}supports(a){return Bl(a)}create(a){return new qx(a)}}const Qr=(o,a)=>a;class qx{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Qr}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,h=0,g=null;for(;l||d;){const y=!d||l&&l.currentIndex<uD(d,h,g)?l:d,w=uD(y,h,g),I=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{g||(g=[]);const A=w-h,N=I-h;if(A!=N){for(let B=0;B<A;B++){const z=B<g.length?g[B]:g[B]=0,X=z+B;N<=X&&X<A&&(g[B]=z+1)}g[y.previousIndex]=N-A}}w!==I&&a(y,w,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Bl(a))throw new Error(`Error trying to diff '${le(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,g,y,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],y=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,g,y,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,y,w),d=!0),l=l._next}else h=0,function(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Td()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,w=>{y=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,w,y,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,y,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,h){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,h)):a=this._addAfter(new zx(l,d),g,h),a}_verifyReinsertion(a,l,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,g=a._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new aD),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aD),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class zx{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oD{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class aD{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new oD,this.map.set(l,d)),d.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uD(o,a,l){const d=o.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+a+h}class lD{constructor(){}supports(a){return a instanceof Map||sy(a)}create(){return new Kx}}class Kx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||sy(a)))throw new Error(`Error trying to diff '${le(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const d=new PP(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class PP{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cD(){return new Vy([new Gx])}let Vy=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||cD()),deps:[[o,new yo,new mt]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(o){return o.name||typeof o}(l)}'`)}}return o.\u0275prov=Cn({token:o,providedIn:"root",factory:cD}),o})();function uu(){return new L0([new lD])}let L0=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||uu()),deps:[[o,new yo,new mt]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return o.\u0275prov=Cn({token:o,providedIn:"root",factory:uu}),o})();function Ys(o,a,l,d,h=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&d.push(Mn(g)),Zi(g))for(let w=10;w<g.length;w++){const I=g[w],A=I[1].firstChild;null!==A&&Ys(I[1],I,A,d)}const y=l.type;if(8&y)Ys(o,a,l.child,d);else if(32&y){const w=mg(l,a);let I;for(;I=w();)d.push(I)}else if(16&y){const w=Cg(a,l);if(Array.isArray(w))d.push(...w);else{const I=_g(a[16]);Ys(I[1],I,w,d,!0)}}l=h?l.projectionNext:l.next}return d}class ga{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Ys(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Zi(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(rd(a,d),Ei(l,d))}this._attachedToViewContainer=!1}Hu(this._lView[1],this._lView)}onDestroy(a){fd(this._lView[1],this._lView,null,a)}markForCheck(){XE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){uf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,a,l){po(!0);try{uf(o,a,l)}finally{po(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,Xh(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class Uy extends ga{constructor(a){super(a),this._view=a}detectChanges(){_d(this._view)}checkNoChanges(){!function(o){po(!0);try{_d(o)}finally{po(!1)}}(this._view)}get context(){return null}}const hD=function(o){return function(o,a,l){if(al(o)&&!l){const d=ii(o.index,a);return new ga(d,d)}return 47&o.type?new ga(a[16],a):null}(ur(),Ve(),16==(16&o))};let fD=(()=>{class o{}return o.__NG_ELEMENT_ID__=hD,o})();const Bd=[new lD],hm=new Vy([new Gx]),pD=new L0(Bd),Qx=function(){return lu(ur(),Ve())};let fm=(()=>{class o{}return o.__NG_ELEMENT_ID__=Qx,o})();const U0=fm,B0=class extends U0{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=eu(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(l)),rf(l,d,a),new ga(d)}};function lu(o,a){return 4&o.type?new B0(a,o,Ud(o,a)):null}class Zl{}class j0{}const Jx=function(){return Yl(ur(),Ve())};let Wf=(()=>{class o{}return o.__NG_ELEMENT_ID__=Jx,o})();const _D=Wf,qf=class extends _D{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Ud(this._hostTNode,this._hostLView)}get injector(){return new $s(this._hostTNode,this._hostLView)}get parentInjector(){const a=yr(this._hostTNode,this._hostLView);if(La(a)){const l=Us(a,this._hostLView),d=Va(a);return new $s(l[1].data[d+8],l)}return new $s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=yD(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const h=a.createEmbeddedView(l||{});return this.insert(h,d),h}createComponent(a,l,d,h,g){const y=d||this.parentInjector;if(!g&&null==a.ngModule&&y){const I=y.get(Zl,null);I&&(g=I)}const w=a.create(y,h,void 0,g);return this.insert(w.hostView,l),w}insert(a,l){const d=a._lView,h=d[1];if(Zi(d[3])){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const k=d[3],B=new qf(k,k[6],k[3]);B.detach(B.indexOf(a))}}const g=this._adjustIndex(l),y=this._lContainer;!function(o,a,l,d){const h=10+d,g=l.length;d>0&&(l[h-1][4]=a),d<g-10?(a[4]=l[h],Yi(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const y=a[17];null!==y&&l!==y&&function(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(y,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=128}(h,d,y,g);const w=od(g,y),I=d[11],A=Eg(I,y[7]);return null!==A&&function(o,a,l,d,h,g){d[0]=h,d[6]=a,Xh(o,d,l,1,h,g)}(h,y[6],I,d,A,w),a.attachToViewContainerRef(),Yi(zf(y),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=yD(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=rd(this._lContainer,l);d&&(Ei(zf(this._lContainer),l),Hu(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=rd(this._lContainer,l);return d&&null!=Ei(zf(this._lContainer),l)?new ga(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function yD(o){return o[8]}function zf(o){return o[8]||(o[8]=[])}function Yl(o,a){let l;const d=a[o.index];if(Zi(d))l=d;else{let h;if(8&o.type)h=Mn(d);else{const g=a[11];h=g.createComment("");const y=Gr(o,a);sd(g,Eg(g,y),h,function(o,a){return xn(o)?o.nextSibling(a):a.nextSibling}(g,y),!1)}a[o.index]=l=ji(d,a,h,o),q_(a,l)}return new qf(l,o,a)}const Im={};class gN extends Vd{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=sr(a);return new WD(l,this.ngModule)}}function mN(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}const ZP=new zn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>IE});class WD extends eD{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=a.selectors.map(U_).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return mN(this.componentDef.inputs)}get outputs(){return mN(this.componentDef.outputs)}create(a,l,d,h){const g=(h=h||this.ngModule)?function(o,a){return{get:(l,d,h)=>{const g=o.get(l,Im,h);return g!==Im||d===Im?g:a.get(l,d,h)}}}(a,h.injector):a,y=g.get(Fy,dl),w=g.get(F0,null),I=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=d?function(o,a,l){if(xn(o))return o.selectRootElement(a,l===K.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(I,d,this.componentDef.encapsulation):nd(y.createRenderer(null,this.componentDef),A,function(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(A)),k=this.componentDef.onPush?576:528,B=function(o,a){return{components:[],scheduler:o||IE,clean:OI,playerHandler:a||null,flags:0}}(),z=$_(0,null,null,1,0,null,null,null,null,null),X=eu(null,z,B,k,null,null,y,I,w,g);let Ee,ae;Tc(X);try{const Ge=function(o,a,l,d,h,g){const y=l[1];l[20]=o;const I=cd(y,20,2,"#host",null),A=I.mergedAttrs=a.hostAttrs;null!==A&&(qu(I,A,!0),null!==o&&(Zo(h,o,A),null!==I.classes&&NE(h,o,I.classes),null!==I.styles&&xE(h,o,I.styles)));const N=d.createRenderer(o,a),k=eu(l,dd(a),null,a.onPush?64:16,l[20],I,d,N,g||null,null);return y.firstCreatePass&&(Yo($a(I,l),y,a.type),Mg(y,I),YE(I,l.length,1)),q_(l,k),l[20]=k}(N,this.componentDef,X,y,I);if(N)if(d)Zo(I,N,["ng-version",sD.full]);else{const{attrs:Oe,classes:ct}=function(o){const a=[],l=[];let d=1,h=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===h?""!==g&&a.push(g,o[++d]):8===h&&l.push(g);else{if(!Co(h))break;h=g}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Oe&&Zo(I,N,Oe),ct&&ct.length>0&&NE(I,N,ct.join(" "))}if(ae=Go(z,20),void 0!==l){const Oe=ae.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const It=l[ct];Oe.push(null!=It?Array.from(It):null)}}Ee=function(o,a,l,d,h){const g=l[1],y=function(o,a,l){const d=ur();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Zn(o,d,a,At(o,a,1,null),l));const h=js(a,o,d.directiveStart,d);Ii(h,a);const g=Gr(d,a);return g&&Ii(g,a),h}(g,l,a);if(d.components.push(y),o[8]=y,h&&h.forEach(I=>I(y,a)),a.contentQueries){const I=ur();a.contentQueries(1,y,I.directiveStart)}const w=ur();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Vs(w.index),H_(l[1],w,0,w.directiveStart,w.directiveEnd,a),ZE(a,y)),y}(Ge,this.componentDef,X,B,[Gg]),rf(z,X,null)}finally{Sc()}return new hu(this.componentType,Ee,Ud(ae,X),X,ae)}}class hu extends class{}{constructor(a,l,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new Uy(h),this.componentType=a}get injector(){return new $s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}const Kd=new Map;class yN extends Zl{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new gN(this);const d=Ni(a),h=a[ke]||null;h&&t0(h),this._bootstrapComponents=Ws(d.bootstrap),this._r3Injector=Lg(a,l,[{provide:Zl,useValue:this},{provide:Vd,useValue:this.componentFactoryResolver}],le(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=nr.THROW_IF_NOT_FOUND,d=et.Default){return a===nr||a===Zl||a===vd?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class ts extends j0{constructor(a){super(),this.moduleType=a,null!==Ni(a)&&function(o){const a=new Set;!function l(d){const h=Ni(d,!0),g=h.id;null!==g&&(function(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${le(a)} vs ${le(a.name)}`)}(g,Kd.get(g),d),Kd.set(g,d));const y=Ws(h.imports);for(const w of y)a.has(w)||(a.add(w),l(w))}(o)}(a)}create(a){return new yN(this.moduleType,a)}}function uC(o){return a=>{setTimeout(o,void 0,a)}}const xo=class extends Ce.xQ{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var h,g,y;let w=a,I=l||(()=>null),A=d;if(a&&"object"==typeof a){const k=a;w=null===(h=k.next)||void 0===h?void 0:h.bind(k),I=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(I=uC(I),w&&(w=uC(w)),A&&(A=uC(A)));const N=super.subscribe({next:w,error:I,complete:A});return a instanceof we.w&&a.add(N),N}};function sS(){return this._results[Td()]()}class Am{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Td(),d=Am.prototype;d[l]||(d[l]=sS)}get changes(){return this._changes||(this._changes=new xo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const h=vi(a);(this._changesDetected=!function(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let h=o[d],g=a[d];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class cC{constructor(a){this.queryList=a,this.matches=null}clone(){return new cC(this.queryList)}setDirty(){this.queryList.setDirty()}}class tp{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let g=0;g<d;g++){const y=l.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new tp(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==fS(a,l).matches&&this.queries[l].setDirty()}}class Qy{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class Jy{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,h);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new Jy(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Rm{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Rm(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(a,l,DN(l,g)),this.matchTNodeWithReadOption(a,l,Bc(l,a,g,!1,!1))}else d===fm?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Bc(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Qn||h===Wf||h===fm&&4&l.type)this.addMatch(l.index,-2);else{const g=Bc(l,a,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function DN(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function xm(o,a,l,d){return-1===l?function(o,a){return 11&o.type?Ud(o,a):4&o.type?lu(o,a):null}(a,o):-2===l?function(o,a,l){return l===Qn?Ud(a,o):l===fm?lu(a,o):l===Wf?Yl(a,o):void 0}(o,a,d):js(o,o[1],l,a)}function aS(o,a,l,d){const h=a[19].queries[d];if(null===h.matches){const g=o.data,y=l.matches,w=[];for(let I=0;I<y.length;I+=2){const A=y[I];w.push(A<0?null:xm(a,g[A],y[I+1],l.metadata.read))}h.matches=w}return h.matches}function dC(o,a,l,d){const h=o.queries.getByIndex(l),g=h.matches;if(null!==g){const y=aS(o,a,h,l);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)d.push(y[w/2]);else{const A=g[w+1],N=a[-I];for(let k=10;k<N.length;k++){const B=N[k];B[17]===B[3]&&dC(B[1],B,A,d)}if(null!==N[9]){const k=N[9];for(let B=0;B<k.length;B++){const z=k[B];dC(z[1],z,A,d)}}}}}return d}function uS(o){const a=Ve(),l=Wt(),d=Wp();Pa(d+1);const h=fS(l,d);if(o.dirty&&fl(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const g=h.crossesNgTemplate?dC(l,a,d,[]):aS(l,a,h,d);o.reset(g,pa),o.notifyOnChanges()}return!0}return!1}function lS(o,a,l,d){const h=Wt();if(h.firstCreatePass){const g=ur();(function(o,a,l){null===o.queries&&(o.queries=new Jy),o.queries.track(new Rm(a,l))})(h,new Qy(a,l,d),g.index),function(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(h,o),2==(2&l)&&(h.staticContentQueries=!0)}!function(o,a,l){const d=new Am(4==(4&l));fd(o,a,d,d.destroy),null===a[19]&&(a[19]=new tp),a[19].queries.push(new cC(d))}(h,Ve(),l)}function cS(){return o=Ve(),a=Wp(),o[19].queries[a].queryList;var o,a}function fS(o,a){return o.queries.getByIndex(a)}const Om=new zn("Application Initializer");let ns=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Xt,this.reject=Xt,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(_w(g))l.push(g);else if(py(g)){const y=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});l.push(y)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(dr(Om,8))},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})();const qi=new zn("AppId"),pv={provide:qi,useFactory:function(){return`${EC()}${EC()}${EC()}`},deps:[]};function EC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pu=new zn("Platform Initializer"),ya=new zn("Platform ID"),nc=new zn("appBootstrapListener");let op=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})();const ap=new zn("LocaleId"),wC=new zn("DefaultCurrencyCode");class AS{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}const rc=function(o){return new ts(o)},JN=rc,XN=function(o){return Promise.resolve(rc(o))},Mm=function(o){const a=rc(o),d=Ws(Ni(o).declarations).reduce((h,g)=>{const y=sr(g);return y&&h.push(new WD(y)),h},[]);return new AS(a,d)},xS=Mm,NS=function(o){return Promise.resolve(Mm(o))};let up=(()=>{class o{constructor(){this.compileModuleSync=JN,this.compileModuleAsync=XN,this.compileModuleAndAllComponentsSync=xS,this.compileModuleAndAllComponentsAsync=NS}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})();const bC=(()=>Promise.resolve(0))();function yv(o){"undefined"==typeof Zone?bC.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class rs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xo(!1),this.onMicrotaskEmpty=new xo(!1),this.onStable=new xo(!1),this.onError=new xo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let o=We.requestAnimationFrame,a=We.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(o){const a=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(We,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Pm(o),o.isCheckStableRunning=!0,vv(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Pm(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,g,y,w)=>{try{return Ev(o),l.invokeTask(h,g,y,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),PS(o)}},onInvoke:(l,d,h,g,y,w,I)=>{try{return Ev(o),l.invoke(h,g,y,w,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),PS(o)}},onHasTask:(l,d,h,g)=>{l.hasTask(h,g),d===h&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,Pm(o),vv(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,h,g)=>(l.handleError(h,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,a,rO,Xt,Xt);try{return g.runTask(y,l,d)}finally{g.cancelTask(y)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const rO={};function vv(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Pm(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Ev(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function PS(o){o._nesting--,vv(o)}class sO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xo,this.onMicrotaskEmpty=new xo,this.onStable=new xo,this.onError=new xo}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,h){return a.apply(l,d)}}let TC=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rs.assertNotInAngularZone(),yv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yv(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,h){return[]}}return o.\u0275fac=function(l){return new(l||o)(dr(rs))},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})(),kS=(()=>{class o{constructor(){this._applications=new Map,wv.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return wv.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})();class oO{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function aO(o){wv=o}let wv=new oO,DC=!0,SC=!1;function AC(){return SC=!0,DC}function uO(){if(SC)throw new Error("Cannot enable prod mode after platform setup.");DC=!1}let va;const LS=new zn("AllowMultipleToken");class pO{constructor(a,l){this.name=a,this.token=l}}function lp(o,a,l=[]){const d=`Platform: ${a}`,h=new zn(d);return(g=[])=>{let y=VS();if(!y||y.injector.get(LS,!1))if(o)o(l.concat(g).concat({provide:h,useValue:!0}));else{const w=l.concat(g).concat({provide:h,useValue:!0},{provide:zu,useValue:"platform"});!function(o){if(va&&!va.destroyed&&!va.injector.get(LS,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");va=o.get(US);const a=o.get(pu,null);a&&a.forEach(l=>l())}(nr.create({providers:w,name:d}))}return function(o){const a=VS();if(!a)throw new Error("No platform exists!");if(!a.injector.get(o,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return a}(h)}}function VS(){return va&&!va.destroyed?va:null}let US=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const w=function(o,a){let l;return l="noop"===o?new sO:("zone.js"===o?void 0:o)||new rs({enableLongStackTrace:AC(),shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),I=[{provide:rs,useValue:w}];return w.run(()=>{const A=nr.create({providers:I,parent:this.injector,name:l.moduleType.name}),N=l.create(A),k=N.injector.get(Xc,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return w.runOutsideAngular(()=>{const B=w.onError.subscribe({next:z=>{k.handleError(z)}});N.onDestroy(()=>{Cv(this._modules,N),B.unsubscribe()})}),function(o,a,l){try{const d=l();return _w(d)?d.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(k,w,()=>{const B=N.injector.get(ns);return B.runInitializers(),B.donePromise.then(()=>(t0(N.injector.get(ap,Ff)||Ff),this._moduleDoBootstrap(N),N))})})}bootstrapModule(l,d=[]){const h=OC({},d);return function(o,a,l){const d=new ts(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const d=l.injector.get(Lm);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Error(`The module ${le(l.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(dr(nr))},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})();function OC(o,a){return Array.isArray(a)?a.reduce(OC,o):Object.assign(Object.assign({},o),a)}let Lm=(()=>{class o{constructor(l,d,h,g,y){this._zone=l,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=g,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new _.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new _.y(A=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{rs.assertNotInAngularZone(),yv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{N.unsubscribe(),k.unsubscribe()}});this.isStable=function(...o){let a=Number.POSITIVE_INFINITY,l=null,d=o[o.length-1];return(0,q.K)(d)?(l=o.pop(),o.length>1&&"number"==typeof o[o.length-1]&&(a=o.pop())):"number"==typeof d&&(a=o.pop()),null===l&&1===o.length&&o[0]instanceof _.y?o[0]:(0,F.J)(a)((0,he.n)(o,l))}(w,I.pipe(o=>(0,H.x)()(function(o,a){return function(d){let h;h="function"==typeof o?o:function(){return o};const g=Object.create(d,xe.N);return g.source=d,g.subjectFactory=h,g}}(ne)(o))))}bootstrap(l,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=l instanceof eD?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const g=function(o){return o.isBoundToModule}(h)?void 0:this._injector.get(Zl),w=h.create(nr.NULL,[],d||h.selector,g),I=w.location.nativeElement,A=w.injector.get(TC,null),N=A&&w.injector.get(kS);return A&&N&&N.registerApplication(I,A),w.onDestroy(()=>{this.detachView(w.hostView),Cv(this.components,w),N&&N.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Cv(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(nc,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(dr(rs),dr(nr),dr(Xc),dr(Vd),dr(ns))},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})();function Cv(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}class $S{}class bv{}const GS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let WS=(()=>{class o{constructor(l,d){this._compiler=l,this._config=d||GS}load(l){return this.loadAndCompile(l)}loadAndCompile(l){let[d,h]=l.split("#");return void 0===h&&(h="default"),U(8255)(d).then(g=>g[h]).then(g=>_n(g,d,h)).then(g=>this._compiler.compileModuleAsync(g))}loadFactory(l){let[d,h]=l.split("#"),g="NgFactory";return void 0===h&&(h="default",g=""),U(8255)(this._config.factoryPathPrefix+d+this._config.factoryPathSuffix).then(y=>y[h+g]).then(y=>_n(y,d,h))}}return o.\u0275fac=function(l){return new(l||o)(dr(up),dr(bv,8))},o.\u0275prov=Cn({token:o,factory:o.\u0275fac}),o})();function _n(o,a,l){if(!o)throw new Error(`Cannot find '${l}' in '${a}'`);return o}const wO=function(o){return null},ZS=lp(null,"core",[{provide:ya,useValue:"unknown"},{provide:US,deps:[nr]},{provide:kS,deps:[]},{provide:op,deps:[]}]),bO=[{provide:Lm,useClass:Lm,deps:[rs,nr,Xc,Vd,ns]},{provide:ZP,deps:[rs],useFactory:function(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:ns,useClass:ns,deps:[[new mt,Om]]},{provide:up,useClass:up,deps:[]},pv,{provide:Vy,useFactory:function(){return hm},deps:[]},{provide:L0,useFactory:function(){return pD},deps:[]},{provide:ap,useFactory:function(o){return t0(o=o||"undefined"!=typeof $localize&&$localize.locale||Ff),o},deps:[[new Ka(ap),new mt,new yo]]},{provide:wC,useValue:"USD"}];let $C=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(dr(Lm))},o.\u0275mod=Ki({type:o}),o.\u0275inj=Xr({providers:bO}),o})()},8939:(tt,De,U)=>{"use strict";U.d(De,{hO:()=>me,xv:()=>ee,Dh:()=>xe,GT:()=>Ce,cc:()=>ye,on:()=>V,pX:()=>ce});var _=U(639),q=U(7841),F=U(8797);tt=U.hmd(tt);const he=["ngOnDestroy"],ce=(_e,fe,ie,Be={})=>new Proxy(_e,{get:(pt,ut)=>ie.runOutsideAngular(()=>{var An;if(_e[ut])return(null===(An=null==Be?void 0:Be.spy)||void 0===An?void 0:An.get)&&Be.spy.get(ut,_e[ut]),_e[ut];if(he.indexOf(ut)>-1)return()=>{};const Ae=fe.toPromise().then(Ye=>{const se=Ye&&Ye[ut];return"function"==typeof se?se.bind(Ye):se&&se.then?se.then(Te=>ie.run(()=>Te)):ie.run(()=>se)});return new Proxy(()=>{},{get:(Ye,se)=>Ae[se],apply:(Ye,se,Te)=>Ae.then(be=>{var Se;const $e=be&&be(...Te);return(null===(Se=null==Be?void 0:Be.spy)||void 0===Se?void 0:Se.apply)&&Be.spy.apply(ut,Te,$e),$e})})})}),Ce=(_e,fe)=>{fe.forEach(ie=>{Object.getOwnPropertyNames(ie.prototype||ie).forEach(Be=>{Object.defineProperty(_e.prototype,Be,Object.getOwnPropertyDescriptor(ie.prototype||ie,Be))})})};class we{constructor(fe){return fe}}const xe=new _.OlP("angularfire2.app.options"),ee=new _.OlP("angularfire2.app.name");function V(_e,fe,ie){const pt="object"==typeof ie&&ie||{};pt.name=pt.name||"string"==typeof ie&&ie||"[DEFAULT]";const An=q.Z.apps.filter(Ae=>Ae&&Ae.name===pt.name)[0]||fe.runOutsideAngular(()=>q.Z.initializeApp(_e,pt));try{JSON.stringify(_e)!==JSON.stringify(An.options)&&H("error",`${An.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ae){}return new we(An)}const H=(_e,...fe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[_e](...fe)},ne={provide:we,useFactory:V,deps:[xe,_.R0b,[new _.FiY,ee]]};let me=(()=>{class _e{constructor(ie){q.Z.registerVersion("angularfire",F.q4.full,"core"),q.Z.registerVersion("angularfire",F.q4.full,"app-compat"),q.Z.registerVersion("angular",_.q4F.full,ie.toString())}static initializeApp(ie,Be){return{ngModule:_e,providers:[{provide:xe,useValue:ie},{provide:ee,useValue:Be}]}}}return _e.\u0275fac=function(ie){return new(ie||_e)(_.LFG(_.Lbi))},_e.\u0275mod=_.oAB({type:_e}),_e.\u0275inj=_.cJS({providers:[ne]}),_e})();function ye(_e,fe,ie,Be,pt){const[,ut,An]=globalThis.\u0275AngularfireInstanceCache.find(Ae=>Ae[0]===_e)||[];if(ut)return function(_e,fe){try{return _e.toString()===fe.toString()}catch(ie){return _e===fe}}(pt,An)||(ve("error",`${fe} was already initialized on the ${ie} Firebase App with different settings.${le?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:pt,was:An})),ut;{const Ae=Be();return globalThis.\u0275AngularfireInstanceCache.push([_e,Ae,pt]),Ae}}const le=!!tt.hot,ve=(_e,...fe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[_e](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8797:(tt,De,U)=>{"use strict";U.d(De,{q4:()=>Mh,iC:()=>Pr,HU:()=>Vh,vb:()=>ki,JM:()=>vi});var _=U(639),q=U(2329),F=U(8239),he=U(5452),ce=U(3854),Ce=U(6034),we=U(5601),xe=U(6676);const V="0.5.1",ne=`w:${V}`,me="FIS_v2",fe=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ie(S){return S instanceof ce.ZR&&S.code.includes("request-failed")}function Be({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function pt(S){return{token:S.token,requestStatus:2,expiresIn:be(S.expiresIn),creationTime:Date.now()}}function ut(S,R){return An.apply(this,arguments)}function An(){return(An=(0,F.Z)(function*(S,R){const G=(yield R.json()).error;return fe.create("request-failed",{requestName:S,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})})).apply(this,arguments)}function Ae({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function Ye(S,{refreshToken:R}){const P=Ae(S);return P.append("Authorization",function(S){return`${me} ${S}`}(R)),P}function se(S){return Te.apply(this,arguments)}function Te(){return(Te=(0,F.Z)(function*(S){const R=yield S();return R.status>=500&&R.status<600?S():R})).apply(this,arguments)}function be(S){return Number(S.replace("s","000"))}function $e(S,R){return pe.apply(this,arguments)}function pe(){return(pe=(0,F.Z)(function*(S,{fid:R}){const P=Be(S),ue={method:"POST",headers:Ae(S),body:JSON.stringify({fid:R,authVersion:me,appId:S.appId,sdkVersion:ne})},Ne=yield se(()=>fetch(P,ue));if(Ne.ok){const Ke=yield Ne.json();return{fid:Ke.fid||R,registrationStatus:2,refreshToken:Ke.refreshToken,authToken:pt(Ke.authToken)}}throw yield ut("Create Installation",Ne)})).apply(this,arguments)}function vt(S){return new Promise(R=>{setTimeout(R,S)})}const Ln=/^[cdef][\w-]{21}$/;function jt(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const P=function(S){return function(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Ln.test(P)?P:""}catch(S){return""}}function dn(S){return`${S.appName}!${S.appId}`}const Tr=new Map;function Dr(S,R){const P=dn(S);Vn(P,R),function(S,R){const P=(!Dt&&"BroadcastChannel"in self&&(Dt=new BroadcastChannel("[Firebase] FID Change"),Dt.onmessage=S=>{Vn(S.data.key,S.data.fid)}),Dt);P&&P.postMessage({key:S,fid:R}),0===Tr.size&&Dt&&(Dt.close(),Dt=null)}(P,R)}function Vn(S,R){const P=Tr.get(S);if(P)for(const G of P)G(R)}let Dt=null;const gr="firebase-installations-store";let Xr=null;function Un(){return Xr||(Xr=(0,xe.openDb)("firebase-installations-database",1,S=>{switch(S.oldVersion){case 0:S.createObjectStore(gr)}})),Xr}function gi(S,R){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,F.Z)(function*(S,R){const P=dn(S),te=(yield Un()).transaction(gr,"readwrite"),ue=te.objectStore(gr),Ne=yield ue.get(P);return yield ue.put(R,P),yield te.complete,(!Ne||Ne.fid!==R.fid)&&Dr(S,R.fid),R})).apply(this,arguments)}function Sr(S){return mi.apply(this,arguments)}function mi(){return(mi=(0,F.Z)(function*(S){const R=dn(S),G=(yield Un()).transaction(gr,"readwrite");yield G.objectStore(gr).delete(R),yield G.complete})).apply(this,arguments)}function ot(S,R){return lt.apply(this,arguments)}function lt(){return(lt=(0,F.Z)(function*(S,R){const P=dn(S),te=(yield Un()).transaction(gr,"readwrite"),ue=te.objectStore(gr),Ne=yield ue.get(P),Ke=R(Ne);return void 0===Ke?yield ue.delete(P):yield ue.put(Ke,P),yield te.complete,Ke&&(!Ne||Ne.fid!==Ke.fid)&&Dr(S,Ke.fid),Ke})).apply(this,arguments)}function Gt(S){return un.apply(this,arguments)}function un(){return(un=(0,F.Z)(function*(S){let R;const P=yield ot(S,G=>{const te=et(G),ue=$t(S,te);return R=ue.registrationPromise,ue.installationEntry});return""===P.fid?{installationEntry:yield R}:{installationEntry:P,registrationPromise:R}})).apply(this,arguments)}function et(S){return jn(S||{fid:jt(),registrationStatus:0})}function $t(S,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(fe.create("app-offline"))};const P={fid:R.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:P,registrationPromise:function(S,R){return Xe.apply(this,arguments)}(S,P)}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:ro(S)}:{installationEntry:R}}function Xe(){return(Xe=(0,F.Z)(function*(S,R){try{return gi(S,yield $e(S,R))}catch(P){throw ie(P)&&409===P.customData.serverCode?yield Sr(S):yield gi(S,{fid:R.fid,registrationStatus:0}),P}})).apply(this,arguments)}function ro(S){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,F.Z)(function*(S){let R=yield Bn(S);for(;1===R.registrationStatus;)yield vt(100),R=yield Bn(S);if(0===R.registrationStatus){const{installationEntry:P,registrationPromise:G}=yield Gt(S);return G||P}return R})).apply(this,arguments)}function Bn(S){return ot(S,R=>{if(!R)throw fe.create("installation-not-found");return jn(R)})}function jn(S){return function(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function io(S,R){return K.apply(this,arguments)}function K(){return(K=(0,F.Z)(function*({appConfig:S,platformLoggerProvider:R},P){const G=Y(S,P),te=Ye(S,P),ue=R.getImmediate({optional:!0});ue&&te.append("x-firebase-client",ue.getPlatformInfoString());const Ke={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:ne}})},Ue=yield se(()=>fetch(G,Ke));if(Ue.ok)return pt(yield Ue.json());throw yield ut("Generate Auth Token",Ue)})).apply(this,arguments)}function Y(S,{fid:R}){return`${Be(S)}/${R}/authTokens:generate`}function J(S){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,F.Z)(function*(S,R=!1){let P;const G=yield ot(S.appConfig,ue=>{if(!wt(ue))throw fe.create("not-registered");const Ne=ue.authToken;if(!R&&Xn(Ne))return ue;if(1===Ne.requestStatus)return P=ge(S,R),ue;{if(!navigator.onLine)throw fe.create("app-offline");const Ke=Z(ue);return P=on(S,Ke),Ke}});return P?yield P:G.authToken})).apply(this,arguments)}function ge(S,R){return We.apply(this,arguments)}function We(){return(We=(0,F.Z)(function*(S,R){let P=yield gt(S.appConfig);for(;1===P.authToken.requestStatus;)yield vt(100),P=yield gt(S.appConfig);const G=P.authToken;return 0===G.requestStatus?J(S,R):G})).apply(this,arguments)}function gt(S){return ot(S,R=>{if(!wt(R))throw fe.create("not-registered");return function(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function on(S,R){return hn.apply(this,arguments)}function hn(){return(hn=(0,F.Z)(function*(S,R){try{const P=yield io(S,R),G=Object.assign(Object.assign({},R),{authToken:P});return yield gi(S.appConfig,G),P}catch(P){if(!ie(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const G=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield gi(S.appConfig,G)}else yield Sr(S.appConfig);throw P}})).apply(this,arguments)}function wt(S){return void 0!==S&&2===S.registrationStatus}function Xn(S){return 2===S.requestStatus&&!function(S){const R=Date.now();return R<S.creationTime||S.creationTime+S.expiresIn<R+36e5}(S)}function Z(S){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:R})}function ze(){return(ze=(0,F.Z)(function*(S){const R=S,{installationEntry:P,registrationPromise:G}=yield Gt(R.appConfig);return G?G.catch(console.error):J(R).catch(console.error),P.fid})).apply(this,arguments)}function Vt(){return(Vt=(0,F.Z)(function*(S,R=!1){const P=S;return yield Bt(P.appConfig),(yield J(P,R)).token})).apply(this,arguments)}function Bt(S){return $n.apply(this,arguments)}function $n(){return($n=(0,F.Z)(function*(S){const{registrationPromise:R}=yield Gt(S);R&&(yield R)})).apply(this,arguments)}function sr(S){return fe.create("missing-app-config-values",{valueName:S})}const Rn="installations";(0,he._registerComponent)(new Ce.wA(Rn,S=>{const R=S.getProvider("app").getImmediate();return{app:R,appConfig:function(S){if(!S||!S.options)throw sr("App Configuration");if(!S.name)throw sr("App Name");const R=["projectId","apiKey","appId"];for(const P of R)if(!S.options[P])throw sr(P);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(R),platformLoggerProvider:(0,he._getProvider)(R,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,he._registerComponent)(new Ce.wA("installations-internal",S=>{const R=S.getProvider("app").getImmediate(),P=(0,he._getProvider)(R,Rn).getImmediate();return{getId:()=>function(S){return ze.apply(this,arguments)}(P),getToken:te=>function(S){return Vt.apply(this,arguments)}(P,te)}},"PRIVATE")),(0,he.registerVersion)("@firebase/installations",V);const Qe="@firebase/remote-config",Qt=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class lo{constructor(R,P,G,te){this.client=R,this.storage=P,this.storageCache=G,this.logger=te}isCachedDataFresh(R,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const G=Date.now()-P,te=G<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${G}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${te}.`),te}fetch(R){var P=this;return(0,F.Z)(function*(){const[G,te]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(te&&P.isCachedDataFresh(R.cacheMaxAgeMillis,G))return te;R.eTag=te&&te.eTag;const ue=yield P.client.fetch(R),Ne=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ne.push(P.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ne),ue})()}}function ni(S=navigator){return S.languages&&S.languages[0]||S.language}class fn{constructor(R,P,G,te,ue,Ne){this.firebaseInstallations=R,this.sdkVersion=P,this.namespace=G,this.projectId=te,this.apiKey=ue,this.appId=Ne}fetch(R){var P=this;return(0,F.Z)(function*(){const[G,te]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},Ue={sdk_version:P.sdkVersion,app_instance_id:G,app_instance_id_token:te,app_id:P.appId,language_code:ni()},bt={method:"POST",headers:Ke,body:JSON.stringify(Ue)},Kt=fetch(Ne,bt),Rr=new Promise((vs,Es)=>{R.signal.addEventListener(()=>{const mo=new Error("The operation was aborted.");mo.name="AbortError",Es(mo)})});let cr;try{yield Promise.race([Kt,Rr]),cr=yield Kt}catch(vs){let Es="fetch-client-network";throw"AbortError"===vs.name&&(Es="fetch-timeout"),Qt.create(Es,{originalErrorMessage:vs.message})}let Er=cr.status;const ta=cr.headers.get("ETag")||void 0;let qa,go;if(200===cr.status){let vs;try{vs=yield cr.json()}catch(Es){throw Qt.create("fetch-client-parse",{originalErrorMessage:Es.message})}qa=vs.entries,go=vs.state}if("INSTANCE_STATE_UNSPECIFIED"===go?Er=500:"NO_CHANGE"===go?Er=304:("NO_TEMPLATE"===go||"EMPTY_CONFIG"===go)&&(qa={}),304!==Er&&200!==Er)throw Qt.create("fetch-status",{httpStatus:Er});return{status:Er,eTag:ta,config:qa}})()}}class Zi{constructor(R,P){this.client=R,this.storage=P}fetch(R){var P=this;return(0,F.Z)(function*(){const G=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(R,G)})()}attemptFetch(R,{throttleEndTimeMillis:P,backoffCount:G}){var te=this;return(0,F.Z)(function*(){yield function(S,R){return new Promise((P,G)=>{const te=Math.max(R-Date.now(),0),ue=setTimeout(P,te);S.addEventListener(()=>{clearTimeout(ue),G(Qt.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,P);try{const ue=yield te.client.fetch(R);return yield te.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(S){if(!(S instanceof ce.ZR&&S.customData))return!1;const R=Number(S.customData.httpStatus);return 429===R||500===R||503===R||504===R}(ue))throw ue;const Ne={throttleEndTimeMillis:Date.now()+(0,ce.$s)(G),backoffCount:G+1};return yield te.storage.setThrottleMetadata(Ne),te.attemptFetch(R,Ne)}})()}}class Ta{constructor(R,P,G,te,ue){this.app=R,this._client=P,this._storageCache=G,this._storage=te,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ri(S,R){const P=S.target.error||void 0;return Qt.create(R,{originalErrorMessage:P&&P.message})}const Ms="app_namespace_store";class Da{constructor(R,P,G,te=function(){return new Promise((S,R)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=G=>{R(ri(G,"storage-open"))},P.onsuccess=G=>{S(G.target.result)},P.onupgradeneeded=G=>{const te=G.target.result;switch(G.oldVersion){case 0:te.createObjectStore(Ms,{keyPath:"compositeKey"})}}}catch(P){R(Qt.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=R,this.appName=P,this.namespace=G,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var P=this;return(0,F.Z)(function*(){const G=yield P.openDbPromise;return new Promise((te,ue)=>{const Ke=G.transaction([Ms],"readonly").objectStore(Ms),Ue=P.createCompositeKey(R);try{const bt=Ke.get(Ue);bt.onerror=Kt=>{ue(ri(Kt,"storage-get"))},bt.onsuccess=Kt=>{const Rr=Kt.target.result;te(Rr?Rr.value:void 0)}}catch(bt){ue(Qt.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(R,P){var G=this;return(0,F.Z)(function*(){const te=yield G.openDbPromise;return new Promise((ue,Ne)=>{const Ue=te.transaction([Ms],"readwrite").objectStore(Ms),bt=G.createCompositeKey(R);try{const Kt=Ue.put({compositeKey:bt,value:P});Kt.onerror=Rr=>{Ne(ri(Rr,"storage-set"))},Kt.onsuccess=()=>{ue()}}catch(Kt){Ne(Qt.create("storage-set",{originalErrorMessage:Kt&&Kt.message}))}})})()}delete(R){var P=this;return(0,F.Z)(function*(){const G=yield P.openDbPromise;return new Promise((te,ue)=>{const Ke=G.transaction([Ms],"readwrite").objectStore(Ms),Ue=P.createCompositeKey(R);try{const bt=Ke.delete(Ue);bt.onerror=Kt=>{ue(ri(Kt,"storage-delete"))},bt.onsuccess=()=>{te()}}catch(bt){ue(Qt.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class i_{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,F.Z)(function*(){const P=R.storage.getLastFetchStatus(),G=R.storage.getLastSuccessfulFetchTimestampMillis(),te=R.storage.getActiveConfig(),ue=yield P;ue&&(R.lastFetchStatus=ue);const Ne=yield G;Ne&&(R.lastSuccessfulFetchTimestampMillis=Ne);const Ke=yield te;Ke&&(R.activeConfig=Ke)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function yc(){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,F.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(S){return!1}})).apply(this,arguments)}(0,he._registerComponent)(new Ce.wA("remote-config",function(R,{instanceIdentifier:P}){const G=R.getProvider("app").getImmediate(),te=R.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Qt.create("registration-window");if(!(0,ce.hl)())throw Qt.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ne,appId:Ke}=G.options;if(!ue)throw Qt.create("registration-project-id");if(!Ne)throw Qt.create("registration-api-key");if(!Ke)throw Qt.create("registration-app-id");const Ue=new Da(Ke,G.name,P=P||"firebase"),bt=new i_(Ue),Kt=new we.Yd(Qe);Kt.logLevel=we.in.ERROR;const Rr=new fn(te,he.SDK_VERSION,P,ue,Ne,Ke),cr=new Zi(Rr,Ue),Er=new lo(cr,Ue,bt,Kt),ta=new Ta(G,Er,bt,Ue,Kt);return function(S){const R=(0,ce.m9)(S);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(ta),ta},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(Qe,"0.3.0");const Tu="/firebase-messaging-sw.js",ul="/firebase-cloud-messaging-push-scope",vc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Hp="google.c.a.c_id",tE="google.c.a.c_l",Sa="google.c.a.ts",Ec="google.c.a.e";var Du=(()=>{return(S=Du||(Du={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Du;var S})();function ks(S){const R=new Uint8Array(S);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gp(S){const P=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(P),te=new Uint8Array(G.length);for(let ue=0;ue<G.length;++ue)te[ue]=G.charCodeAt(ue);return te}const Gn="fcm_token_details_db",wc="fcm_token_object_Store";function Cc(S){return $o.apply(this,arguments)}function $o(){return($o=(0,F.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Gn))return null;let R=null;return(yield(0,xe.openDb)(Gn,5,function(){var G=(0,F.Z)(function*(te){var ue;if(te.oldVersion<2||!te.objectStoreNames.contains(wc))return;const Ne=te.transaction.objectStore(wc),Ke=yield Ne.index("fcmSenderId").get(S);if(yield Ne.clear(),Ke)if(2===te.oldVersion){const Ue=Ke;if(!Ue.auth||!Ue.p256dh||!Ue.endpoint)return;R={token:Ue.fcmToken,createTime:null!==(ue=Ue.createTime)&&void 0!==ue?ue:Date.now(),subscriptionOptions:{auth:Ue.auth,p256dh:Ue.p256dh,endpoint:Ue.endpoint,swScope:Ue.swScope,vapidKey:"string"==typeof Ue.vapidKey?Ue.vapidKey:ks(Ue.vapidKey)}}}else if(3===te.oldVersion){const Ue=Ke;R={token:Ue.fcmToken,createTime:Ue.createTime,subscriptionOptions:{auth:ks(Ue.auth),p256dh:ks(Ue.p256dh),endpoint:Ue.endpoint,swScope:Ue.swScope,vapidKey:ks(Ue.vapidKey)}}}else if(4===te.oldVersion){const Ue=Ke;R={token:Ue.fcmToken,createTime:Ue.createTime,subscriptionOptions:{auth:ks(Ue.auth),p256dh:ks(Ue.p256dh),endpoint:Ue.endpoint,swScope:Ue.swScope,vapidKey:ks(Ue.vapidKey)}}}});return function(te){return G.apply(this,arguments)}}())).close(),yield(0,xe.deleteDb)(Gn),yield(0,xe.deleteDb)("fcm_vapid_details_db"),yield(0,xe.deleteDb)("undefined"),gh(R)?R:null})).apply(this,arguments)}function gh(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:R}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const co="firebase-messaging-store";let Ho=null;function Su(){return Ho||(Ho=(0,xe.openDb)("firebase-messaging-database",1,S=>{switch(S.oldVersion){case 0:S.createObjectStore(co)}})),Ho}function _r(S){return hs.apply(this,arguments)}function hs(){return(hs=(0,F.Z)(function*(S){const R=Ru(S),G=yield(yield Su()).transaction(co).objectStore(co).get(R);if(G)return G;{const te=yield Cc(S.appConfig.senderId);if(te)return yield Au(S,te),te}})).apply(this,arguments)}function Au(S,R){return fs.apply(this,arguments)}function fs(){return(fs=(0,F.Z)(function*(S,R){const P=Ru(S),te=(yield Su()).transaction(co,"readwrite");return yield te.objectStore(co).put(R,P),yield te.complete,R})).apply(this,arguments)}function _h(S){return ho.apply(this,arguments)}function ho(){return(ho=(0,F.Z)(function*(S){const R=Ru(S),G=(yield Su()).transaction(co,"readwrite");yield G.objectStore(co).delete(R),yield G.complete})).apply(this,arguments)}function Ru({appConfig:S}){return S.appId}const ar=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function dl(S,R){return hl.apply(this,arguments)}function hl(){return(hl=(0,F.Z)(function*(S,R){const P=yield Aa(S),G=ps(R),te={method:"POST",headers:P,body:JSON.stringify(G)};let ue;try{ue=yield(yield fetch(Gr(S.appConfig),te)).json()}catch(Ne){throw ar.create("token-subscribe-failed",{errorInfo:Ne})}if(ue.error)throw ar.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw ar.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function Mn(S,R){return yh.apply(this,arguments)}function yh(){return(yh=(0,F.Z)(function*(S,R){const P=yield Aa(S),G=ps(R.subscriptionOptions),te={method:"PATCH",headers:P,body:JSON.stringify(G)};let ue;try{ue=yield(yield fetch(`${Gr(S.appConfig)}/${R.token}`,te)).json()}catch(Ne){throw ar.create("token-update-failed",{errorInfo:Ne})}if(ue.error)throw ar.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw ar.create("token-update-no-token");return ue.token})).apply(this,arguments)}function vh(S,R){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,F.Z)(function*(S,R){const G={method:"DELETE",headers:yield Aa(S)};try{const ue=yield(yield fetch(`${Gr(S.appConfig)}/${R}`,G)).json();if(ue.error)throw ar.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(te){throw ar.create("token-unsubscribe-failed",{errorInfo:te})}})).apply(this,arguments)}function Gr({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function Aa(S){return Go.apply(this,arguments)}function Go(){return(Go=(0,F.Z)(function*({appConfig:S,installations:R}){const P=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function ps({p256dh:S,auth:R,endpoint:P,vapidKey:G}){const te={web:{endpoint:P,auth:R,p256dh:S}};return G!==vc&&(te.web.applicationPubKey=G),te}const ii=6048e5;function fl(S){return xu.apply(this,arguments)}function xu(){return(xu=(0,F.Z)(function*(S){const R=yield _l(S.swRegistration,S.vapidKey),P={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:R.endpoint,auth:ks(R.getKey("auth")),p256dh:ks(R.getKey("p256dh"))},G=yield _r(S.firebaseDependencies);if(G){if(yl(G.subscriptionOptions,P))return Date.now()>=G.createTime+ii?gl(S,{token:G.token,createTime:Date.now(),subscriptionOptions:P}):G.token;try{yield vh(S.firebaseDependencies,G.token)}catch(te){console.warn(te)}return ft(S.firebaseDependencies,P)}return ft(S.firebaseDependencies,P)})).apply(this,arguments)}function pl(S){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,F.Z)(function*(S){const R=yield _r(S.firebaseDependencies);R&&(yield vh(S.firebaseDependencies,R.token),yield _h(S.firebaseDependencies));const P=yield S.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function gl(S,R){return gs.apply(this,arguments)}function gs(){return(gs=(0,F.Z)(function*(S,R){try{const P=yield Mn(S.firebaseDependencies,R),G=Object.assign(Object.assign({},R),{token:P,createTime:Date.now()});return yield Au(S.firebaseDependencies,G),P}catch(P){throw yield pl(S),P}})).apply(this,arguments)}function ft(S,R){return ml.apply(this,arguments)}function ml(){return(ml=(0,F.Z)(function*(S,R){const G={token:yield dl(S,R),createTime:Date.now(),subscriptionOptions:R};return yield Au(S,G),G.token})).apply(this,arguments)}function _l(S,R){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,F.Z)(function*(S,R){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gp(R)})})).apply(this,arguments)}function yl(S,R){return R.vapidKey===S.vapidKey&&R.endpoint===S.endpoint&&R.auth===S.auth&&R.p256dh===S.p256dh}function Nu(S){const R={from:S.from,collapseKey:S.collapse_key,messageId:S.fcm_message_id};return function(S,R){if(!R.notification)return;S.notification={};const P=R.notification.title;P&&(S.notification.title=P);const G=R.notification.body;G&&(S.notification.body=G);const te=R.notification.image;te&&(S.notification.image=te)}(R,S),function(S,R){!R.data||(S.data=R.data)}(R,S),function(S,R){if(!R.fcmOptions)return;S.fcmOptions={};const P=R.fcmOptions.link;P&&(S.fcmOptions.link=P);const G=R.fcmOptions.analytics_label;G&&(S.fcmOptions.analyticsLabel=G)}(R,S),R}function Wt(S){return"object"==typeof S&&!!S&&Hp in S}function Ou(S,R){const P=[];for(let G=0;G<S.length;G++)P.push(S.charAt(G)),G<R.length&&P.push(R.charAt(G));return P.join("")}function Ra(S){return ar.create("missing-app-config-values",{valueName:S})}Ou("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ou("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fo{constructor(R,P,G){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function(S){if(!S||!S.options)throw Ra("App Configuration Object");if(!S.name)throw Ra("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:P}=S;for(const G of R)if(!P[G])throw Ra(G);return{appName:S.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:te,installations:P,analyticsProvider:G}}_delete(){return Promise.resolve()}}function si(S){return El.apply(this,arguments)}function El(){return(El=(0,F.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(Tu,{scope:ul}),S.swRegistration.update().catch(()=>{})}catch(R){throw ar.create("failed-service-worker-registration",{browserErrorMessage:R.message})}})).apply(this,arguments)}function qo(S,R){return wl.apply(this,arguments)}function wl(){return(wl=(0,F.Z)(function*(S,R){if(!R&&!S.swRegistration&&(yield si(S)),R||!S.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw ar.create("invalid-sw-registration");S.swRegistration=R}})).apply(this,arguments)}function Eh(S,R){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(S,R){R?S.vapidKey=R:S.vapidKey||(S.vapidKey=vc)})).apply(this,arguments)}function Ar(){return(Ar=(0,F.Z)(function*(S,R){if(!navigator)throw ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ar.create("permission-blocked");return yield Eh(S,null==R?void 0:R.vapidKey),yield qo(S,null==R?void 0:R.serviceWorkerRegistration),fl(S)})).apply(this,arguments)}function Mi(S,R,P){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,F.Z)(function*(S,R,P){const G=Na(R);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:P[Hp],message_name:P[tE],message_time:P[Sa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Na(S){switch(S){case Du.NOTIFICATION_CLICKED:return"notification_open";case Du.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Oa(){return(Oa=(0,F.Z)(function*(S,R){const P=R.data;if(!P.isFirebaseMessaging)return;S.onMessageHandler&&P.messageType===Du.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Nu(P)):S.onMessageHandler.next(Nu(P)));const G=P.data;Wt(G)&&"1"===G[Ec]&&(yield Mi(S,P.messageType,G))})).apply(this,arguments)}function Ic(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,F.Z)(function*(){return"undefined"!=typeof window&&(0,ce.hl)()&&(yield(0,ce.eu)())&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,he._registerComponent)(new Ce.wA("messaging",S=>{const R=new fo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function(S,R){return Oa.apply(this,arguments)}(R,P)),R},"PUBLIC")),(0,he._registerComponent)(new Ce.wA("messaging-internal",S=>{const R=S.getProvider("messaging").getImmediate();return{getToken:G=>function(S,R){return Ar.apply(this,arguments)}(R,G)}},"PRIVATE"));const Dc="analytics",Sc="firebase_id",lr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vs="https://www.googletagmanager.com/gtag/js",Nt=new we.Yd("@firebase/analytics");function Ih(S){return Promise.all(S.map(R=>R.catch(P=>P)))}function zp(S,R){const P=document.createElement("script");P.src=`${Vs}?l=${S}&id=${R}`,P.async=!0,document.head.appendChild(P)}function xc(S,R,P,G,te,ue){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,F.Z)(function*(S,R,P,G,te,ue){const Ne=G[te];try{if(Ne)yield R[Ne];else{const Ue=(yield Ih(P)).find(bt=>bt.measurementId===te);Ue&&(yield R[Ue.appId])}}catch(Ke){Nt.error(Ke)}S("config",te,ue)})).apply(this,arguments)}function Oc(S,R,P,G,te){return ka.apply(this,arguments)}function ka(){return(ka=(0,F.Z)(function*(S,R,P,G,te){try{let ue=[];if(te&&te.send_to){let Ne=te.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ke=yield Ih(P);for(const Ue of Ne){const bt=Ke.find(Rr=>Rr.measurementId===Ue),Kt=bt&&R[bt.appId];if(!Kt){ue=[];break}ue.push(Kt)}}0===ue.length&&(ue=Object.values(R)),yield Promise.all(ue),S("event",G,te||{})}catch(ue){Nt.error(ue)}})).apply(this,arguments)}function Mc(){const S=window.document.getElementsByTagName("script");for(const R of Object.values(S))if(R.src&&R.src.includes(Vs))return R;return null}const yi=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Th=new class{constructor(R={},P=1e3){this.throttleMetadata=R,this.intervalMillis=P}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,P){this.throttleMetadata[R]=P}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function Mr(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Pc(S){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,F.Z)(function*(S){var R;const{appId:P,apiKey:G}=S,te={method:"GET",headers:Mr(G)},ue=lr.replace("{app-id}",P),Ne=yield fetch(ue,te);if(200!==Ne.status&&304!==Ne.status){let Ke="";try{const Ue=yield Ne.json();(null===(R=Ue.error)||void 0===R?void 0:R.message)&&(Ke=Ue.error.message)}catch(Ue){}throw yi.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ke})}return Ne.json()})).apply(this,arguments)}function kc(S){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,F.Z)(function*(S,R=Th,P){const{appId:G,apiKey:te,measurementId:ue}=S.options;if(!G)throw yi.create("no-app-id");if(!te){if(ue)return{measurementId:ue,appId:G};throw yi.create("no-api-key")}const Ne=R.getThrottleMetadata(G)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Tl;return setTimeout((0,F.Z)(function*(){Ke.abort()}),void 0!==P?P:6e4),u_({appId:G,apiKey:te,measurementId:ue},Ne,Ke,R)})).apply(this,arguments)}function u_(S,R,P){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,F.Z)(function*(S,{throttleEndTimeMillis:R,backoffCount:P},G,te=Th){const{appId:ue,measurementId:Ne}=S;try{yield Zp(G,R)}catch(Ke){if(Ne)return Nt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ue,measurementId:Ne};throw Ke}try{const Ke=yield Pc(S);return te.deleteThrottleMetadata(ue),Ke}catch(Ke){if(!Fc(Ke)){if(te.deleteThrottleMetadata(ue),Ne)return Nt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ue,measurementId:Ne};throw Ke}const Ue=503===Number(Ke.customData.httpStatus)?(0,ce.$s)(P,te.intervalMillis,30):(0,ce.$s)(P,te.intervalMillis),bt={throttleEndTimeMillis:Date.now()+Ue,backoffCount:P+1};return te.setThrottleMetadata(ue,bt),Nt.debug(`Calling attemptFetch again in ${Ue} millis`),u_(S,bt,G,te)}})).apply(this,arguments)}function Zp(S,R){return new Promise((P,G)=>{const te=Math.max(R-Date.now(),0),ue=setTimeout(P,te);S.addEventListener(()=>{clearTimeout(ue),G(yi.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function Fc(S){if(!(S instanceof ce.ZR&&S.customData))return!1;const R=Number(S.customData.httpStatus);return 429===R||500===R||503===R||504===R}class Tl{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}function Dh(){return La.apply(this,arguments)}function La(){return(La=(0,F.Z)(function*(){if(!(0,ce.hl)())return Nt.warn(yi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(S){return Nt.warn(yi.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function Ua(){return(Ua=(0,F.Z)(function*(S,R,P,G,te,ue,Ne){var Ke;const Ue=kc(S);Ue.then(Er=>{P[Er.measurementId]=Er.appId,S.options.measurementId&&Er.measurementId!==S.options.measurementId&&Nt.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Er.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Er=>Nt.error(Er)),R.push(Ue);const bt=Dh().then(Er=>{if(Er)return G.getId()}),[Kt,Rr]=yield Promise.all([Ue,bt]);Mc()||zp(ue,Kt.measurementId),te("js",new Date);const cr=null!==(Ke=null==Ne?void 0:Ne.config)&&void 0!==Ke?Ke:{};return cr.origin="firebase",cr.update=!0,null!=Rr&&(cr[Sc]=Rr),te("config",Kt.measurementId,cr),Kt.measurementId})).apply(this,arguments)}class Us{constructor(R){this.app=R}_delete(){return delete ms[this.app.options.appId],Promise.resolve()}}let ms={},qn=[];const Lc={};let ja,_s,Bs="dataLayer",$a=!1;function yr(S,R,P){!function(){const S=[];if((0,ce.ru)()&&S.push("This is a browser extension environment."),(0,ce.zI)()||S.push("Cookies are not available."),S.length>0){const R=S.map((G,te)=>`(${te+1}) ${G}`).join(" "),P=yi.create("invalid-analytics-context",{errorInfo:R});Nt.warn(P.message)}}();const G=S.options.appId;if(!G)throw yi.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw yi.create("no-api-key");Nt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ms[G])throw yi.create("already-exists",{id:G});if(!$a){!function(S){let R=[];Array.isArray(window[S])?R=window[S]:window[S]=R}(Bs);const{wrappedGtag:ue,gtagCore:Ne}=function(S,R,P,G,te){let ue=function(...Ne){window[G].push(arguments)};return window[te]&&"function"==typeof window[te]&&(ue=window[te]),window[te]=function(S,R,P,G){function ue(){return(ue=(0,F.Z)(function*(Ne,Ke,Ue){try{"event"===Ne?yield Oc(S,R,P,Ke,Ue):"config"===Ne?yield xc(S,R,P,G,Ke,Ue):S("set",Ke)}catch(bt){Nt.error(bt)}})).apply(this,arguments)}return function(Ne,Ke,Ue){return ue.apply(this,arguments)}}(ue,S,R,P),{gtagCore:ue,wrappedGtag:window[te]}}(ms,qn,Lc,Bs,"gtag");_s=ue,ja=Ne,$a=!0}return ms[G]=function(S,R,P,G,te,ue,Ne){return Ua.apply(this,arguments)}(S,qn,Lc,R,ja,Bs,P),new Us(S)}function vr(){return(vr=(0,F.Z)(function*(S,R,P,G,te){if(te&&te.global)S("event",P,G);else{const ue=yield R;S("event",P,Object.assign(Object.assign({},G),{send_to:ue}))}})).apply(this,arguments)}function Rh(){return $s.apply(this,arguments)}function $s(){return($s=(0,F.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(S){return!1}})).apply(this,arguments)}(0,he._registerComponent)(new Ce.wA(Dc,(R,{options:P})=>yr(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,he._registerComponent)(new Ce.wA("analytics-internal",function(R){try{const P=R.getProvider(Dc).getImmediate();return{logEvent:(G,te,ue)=>function(S,R,P,G){S=(0,ce.m9)(S),function(S,R,P,G,te){return vr.apply(this,arguments)}(_s,ms[S.app.options.appId],R,P,G).catch(te=>Nt.error(te))}(P,G,te,ue)}}catch(P){throw yi.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,he.registerVersion)("@firebase/analytics","0.7.1");var Jo=U(504);class Xp extends Jo.o{constructor(R,P){super(R,P),this.scheduler=R,this.work=P}schedule(R,P=0){return P>0?super.schedule(R,P):(this.delay=P,this.state=R,this.scheduler.flush(this),this)}execute(R,P){return P>0||this.closed?super.execute(R,P):this._execute(R,P)}requestAsyncId(R,P,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(R,P,G):R.flush(this)}}var l_=U(9713);class Nh extends l_.v{}const c_=new Nh(Xp);var zn=U(4346),Oh=U(6361),Al=U(3201),$c=U(1894),tg=U(576),ng=U(8127),Xo=U(8341);const Mh=new _.GfV("7.1.0"),Gc="__angularfire_symbol__analyticsIsSupported",ys="__angularfire_symbol__remoteConfigIsSupported",pn="__angularfire_symbol__messagingIsSupported";function vi(S,R,P){if(R){if(1===R.length)return R[0];const ue=R.filter(Ne=>Ne.app===P);if(1===ue.length)return ue[0]}return P.container.getProvider(S).getImmediate({optional:!0})}globalThis[Gc]||(globalThis[Gc]=Rh().then(S=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=S)),globalThis[pn]||(globalThis[pn]=Ic().then(S=>globalThis.__angularfire_symbol__messagingIsSupportedValue=S)),globalThis[ys]||(globalThis[ys]=yc().then(S=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=S));const ki=(S,R)=>{const P=R?[R]:(0,q.C6)(),G=[];return P.forEach(te=>{te.container.getProvider(S).instances.forEach(Ne=>{G.includes(Ne)||G.push(Ne)})}),G};function Yi(){}class Ei{constructor(R,P=c_){this.zone=R,this.delegate=P}now(){return this.delegate.now()}schedule(R,P,G){const te=this.zone;return this.delegate.schedule(function(Ne){te.runGuarded(()=>{R.apply(this,[Ne])})},P,G)}}class oi{constructor(R){this.zone=R,this.task=null}call(R,P){const G=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yi,{},Yi,Yi)),P.pipe(function(S,R,P){const G=(0,Oh.m)(S)?{next:S,error:R,complete:P}:S;return G?(0,Al.e)((te,ue)=>{var Ne;null===(Ne=G.subscribe)||void 0===Ne||Ne.call(G);let Ke=!0;te.subscribe(new $c.Q(ue,Ue=>{var bt;null===(bt=G.next)||void 0===bt||bt.call(G,Ue),ue.next(Ue)},()=>{var Ue;Ke=!1,null===(Ue=G.complete)||void 0===Ue||Ue.call(G),ue.complete()},Ue=>{var bt;Ke=!1,null===(bt=G.error)||void 0===bt||bt.call(G,Ue),ue.error(Ue)},()=>{var Ue,bt;Ke&&(null===(Ue=G.unsubscribe)||void 0===Ue||Ue.call(G)),null===(bt=G.finalize)||void 0===bt||bt.call(G)}))}):tg.y}({next:G,complete:G,error:G})).subscribe(R).add(G)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vh=(()=>{class S{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Ei(Zone.current)),this.insideAngular=P.run(()=>new Ei(Zone.current,zn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(P){return new(P||S)(_.LFG(_.R0b))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ea(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Pr(S){return ea(),function(S){return function(P){return(P=P.lift(new oi(S.ngZone))).pipe((0,ng.R)(S.outsideAngular),(0,Xo.Q)(S.insideAngular))}}(ea())(S)}},2515:(tt,De,U)=>{"use strict";U.d(De,{Hp:()=>me,Lv:()=>ne});var _=U(6361),q=U(2669),F=U(5960),he=U(9249),ce=U(9361);const Ce=(()=>ee("C",void 0,void 0))();function ee(_e,fe,ie){return{kind:_e,value:fe,error:ie}}var V=U(2487),H=U(776);class ne extends q.w0{constructor(fe){super(),this.isStopped=!1,fe?(this.destination=fe,(0,q.Nn)(fe)&&fe.add(this)):this.destination=ve}static create(fe,ie,Be){return new me(fe,ie,Be)}next(fe){this.isStopped?le(ee("N",fe,void 0),this):this._next(fe)}error(fe){this.isStopped?le(ee("E",void 0,fe),this):(this.isStopped=!0,this._error(fe))}complete(){this.isStopped?le(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(fe){this.destination.next(fe)}_error(fe){try{this.destination.error(fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class me extends ne{constructor(fe,ie,Be){let pt;if(super(),(0,_.m)(fe))pt=fe;else if(fe){let ut;({next:pt,error:ie,complete:Be}=fe),this&&F.v.useDeprecatedNextContext?(ut=Object.create(fe),ut.unsubscribe=()=>this.unsubscribe()):ut=fe,pt=null==pt?void 0:pt.bind(ut),ie=null==ie?void 0:ie.bind(ut),Be=null==Be?void 0:Be.bind(ut)}this.destination={next:pt?ye(pt):ce.Z,error:ye(null!=ie?ie:Fe),complete:Be?ye(Be):ce.Z}}}function ye(_e,fe){return(...ie)=>{try{_e(...ie)}catch(Be){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Be):(0,he.h)(Be)}}}function Fe(_e){throw _e}function le(_e,fe){const{onStoppedNotification:ie}=F.v;ie&&V.z.setTimeout(()=>ie(_e,fe))}const ve={closed:!0,next:ce.Z,error:Fe,complete:ce.Z}},2669:(tt,De,U)=>{"use strict";U.d(De,{Lc:()=>Ce,w0:()=>ce,Nn:()=>we});var _=U(6361);const F=(0,U(9753).d)(ee=>function(H){ee(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ne,me)=>`${me+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var he=U(8208);class ce{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const ye of H)ye.remove(this);else H.remove(this);const{initialTeardown:ne}=this;if((0,_.m)(ne))try{ne()}catch(ye){V=ye instanceof F?ye.errors:[ye]}const{_teardowns:me}=this;if(me){this._teardowns=null;for(const ye of me)try{xe(ye)}catch(Fe){V=null!=V?V:[],Fe instanceof F?V=[...V,...Fe.errors]:V.push(Fe)}}if(V)throw new F(V)}}add(V){var H;if(V&&V!==this)if(this.closed)xe(V);else{if(V instanceof ce){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._teardowns=null!==(H=this._teardowns)&&void 0!==H?H:[]).push(V)}}_hasParent(V){const{_parentage:H}=this;return H===V||Array.isArray(H)&&H.includes(V)}_addParent(V){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(V),H):H?[H,V]:V}_removeParent(V){const{_parentage:H}=this;H===V?this._parentage=null:Array.isArray(H)&&(0,he.P)(H,V)}remove(V){const{_teardowns:H}=this;H&&(0,he.P)(H,V),V instanceof ce&&V._removeParent(this)}}ce.EMPTY=(()=>{const ee=new ce;return ee.closed=!0,ee})();const Ce=ce.EMPTY;function we(ee){return ee instanceof ce||ee&&"closed"in ee&&(0,_.m)(ee.remove)&&(0,_.m)(ee.add)&&(0,_.m)(ee.unsubscribe)}function xe(ee){(0,_.m)(ee)?ee():ee.unsubscribe()}},5960:(tt,De,U)=>{"use strict";U.d(De,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1894:(tt,De,U)=>{"use strict";U.d(De,{Q:()=>q});var _=U(2515);class q extends _.Lv{constructor(he,ce,Ce,we,xe){super(he),this.onFinalize=xe,this._next=ce?function(ee){try{ce(ee)}catch(V){he.error(V)}}:super._next,this._error=we?function(ee){try{we(ee)}catch(V){he.error(V)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(ee){he.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}},8341:(tt,De,U)=>{"use strict";U.d(De,{Q:()=>he});var _=U(768),q=U(3201),F=U(1894);function he(ce,Ce=0){return(0,q.e)((we,xe)=>{we.subscribe(new F.Q(xe,ee=>(0,_.f)(xe,ce,()=>xe.next(ee),Ce),()=>(0,_.f)(xe,ce,()=>xe.complete(),Ce),ee=>(0,_.f)(xe,ce,()=>xe.error(ee),Ce)))})}},8127:(tt,De,U)=>{"use strict";U.d(De,{R:()=>q});var _=U(3201);function q(F,he=0){return(0,_.e)((ce,Ce)=>{Ce.add(F.schedule(()=>ce.subscribe(Ce),he))})}},504:(tt,De,U)=>{"use strict";U.d(De,{o:()=>ce});var _=U(2669);class q extends _.w0{constructor(we,xe){super()}schedule(we,xe=0){return this}}const F={setInterval(...Ce){const{delegate:we}=F;return((null==we?void 0:we.setInterval)||setInterval)(...Ce)},clearInterval(Ce){const{delegate:we}=F;return((null==we?void 0:we.clearInterval)||clearInterval)(Ce)},delegate:void 0};var he=U(8208);class ce extends q{constructor(we,xe){super(we,xe),this.scheduler=we,this.work=xe,this.pending=!1}schedule(we,xe=0){if(this.closed)return this;this.state=we;const ee=this.id,V=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(V,ee,xe)),this.pending=!0,this.delay=xe,this.id=this.id||this.requestAsyncId(V,this.id,xe),this}requestAsyncId(we,xe,ee=0){return F.setInterval(we.flush.bind(we,this),ee)}recycleAsyncId(we,xe,ee=0){if(null!=ee&&this.delay===ee&&!1===this.pending)return xe;F.clearInterval(xe)}execute(we,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ee=this._execute(we,xe);if(ee)return ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,xe){let V,ee=!1;try{this.work(we)}catch(H){ee=!0,V=H||new Error("Scheduled action threw falsy error")}if(ee)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:we,scheduler:xe}=this,{actions:ee}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(ee,this),null!=we&&(this.id=this.recycleAsyncId(xe,we,null)),this.delay=null,super.unsubscribe()}}}},9713:(tt,De,U)=>{"use strict";U.d(De,{v:()=>F});var _=U(1373);class q{constructor(ce,Ce=q.now){this.schedulerActionCtor=ce,this.now=Ce}schedule(ce,Ce=0,we){return new this.schedulerActionCtor(this,ce).schedule(we,Ce)}}q.now=_.l.now;class F extends q{constructor(ce,Ce=q.now){super(ce,Ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:Ce}=this;if(this._active)return void Ce.push(ce);let we;this._active=!0;do{if(we=ce.execute(ce.state,ce.delay))break}while(ce=Ce.shift());if(this._active=!1,we){for(;ce=Ce.shift();)ce.unsubscribe();throw we}}}},4346:(tt,De,U)=>{"use strict";U.d(De,{z:()=>F});var _=U(504);const F=new(U(9713).v)(_.o)},1373:(tt,De,U)=>{"use strict";U.d(De,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},2487:(tt,De,U)=>{"use strict";U.d(De,{z:()=>_});const _={setTimeout(...q){const{delegate:F}=_;return((null==F?void 0:F.setTimeout)||setTimeout)(...q)},clearTimeout(q){const{delegate:F}=_;return((null==F?void 0:F.clearTimeout)||clearTimeout)(q)},delegate:void 0}},8208:(tt,De,U)=>{"use strict";function _(q,F){if(q){const he=q.indexOf(F);0<=he&&q.splice(he,1)}}U.d(De,{P:()=>_})},9753:(tt,De,U)=>{"use strict";function _(q){const he=q(ce=>{Error.call(ce),ce.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}U.d(De,{d:()=>_})},776:(tt,De,U)=>{"use strict";U.d(De,{x:()=>F,O:()=>he});var _=U(5960);let q=null;function F(ce){if(_.v.useDeprecatedSynchronousErrorHandling){const Ce=!q;if(Ce&&(q={errorThrown:!1,error:null}),ce(),Ce){const{errorThrown:we,error:xe}=q;if(q=null,we)throw xe}}else ce()}function he(ce){_.v.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=ce)}},768:(tt,De,U)=>{"use strict";function _(q,F,he,ce=0,Ce=!1){const we=F.schedule(function(){he(),Ce?q.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(q.add(we),!Ce)return we}U.d(De,{f:()=>_})},576:(tt,De,U)=>{"use strict";function _(q){return q}U.d(De,{y:()=>_})},6361:(tt,De,U)=>{"use strict";function _(q){return"function"==typeof q}U.d(De,{m:()=>_})},3201:(tt,De,U)=>{"use strict";U.d(De,{e:()=>F});var _=U(6361);function F(he){return ce=>{if(function(he){return(0,_.m)(null==he?void 0:he.lift)}(ce))return ce.lift(function(Ce){try{return he(Ce,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},9361:(tt,De,U)=>{"use strict";function _(){}U.d(De,{Z:()=>_})},9249:(tt,De,U)=>{"use strict";U.d(De,{h:()=>F});var _=U(5960),q=U(2487);function F(he){q.z.setTimeout(()=>{const{onUnhandledError:ce}=_.v;if(!ce)throw he;ce(he)})}},4486:(tt,De,U)=>{"use strict";U.d(De,{Z:()=>Fe});var _=U(3854),q=U(6034),F=U(5452),he=U(5601);class ce{constructor(ve,_e){this._delegate=ve,this.firebase=_e,(0,F._addComponent)(ve,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ve,_e=F._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const ie=this._delegate.container.getProvider(ve);return!ie.isInitialized()&&"EXPLICIT"===(null===(fe=ie.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&ie.initialize(),ie.getImmediate({identifier:_e})}_removeServiceInstance(ve,_e=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(_e)}_addComponent(ve){(0,F._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,F._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function ee(){const le=function(le){const ve={},_e={__esModule:!0,initializeApp:function(Ae,Ye={}){const se=F.initializeApp(Ae,Ye);if((0,_.r3)(ve,se.name))return ve[se.name];const Te=new le(se,_e);return ve[se.name]=Te,Te},app:ie,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(Ae){const Ye=Ae.name,se=Ye.replace("-compat","");if(F._registerComponent(Ae)&&"PUBLIC"===Ae.type){const Te=(be=ie())=>{if("function"!=typeof be[se])throw we.create("invalid-app-argument",{appName:Ye});return be[se]()};void 0!==Ae.serviceProps&&(0,_.ZB)(Te,Ae.serviceProps),_e[se]=Te,le.prototype[se]=function(...be){return this._getService.bind(this,Ye).apply(this,Ae.multipleInstances?be:[])}}return"PUBLIC"===Ae.type?_e[se]:null},removeApp:function(Ae){delete ve[Ae]},useAsService:function(Ae,Ye){return"serverAuth"===Ye?null:Ye},modularAPIs:F}};function ie(Ae){if(!(0,_.r3)(ve,Ae=Ae||F._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Ae});return ve[Ae]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function(){return Object.keys(ve).map(Ae=>ve[Ae])}}),ie.App=le,_e}(ce);return le.INTERNAL=Object.assign(Object.assign({},le.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(_e){(0,_.ZB)(le,_e)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),le}(),H=new he.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const le=self.firebase.SDK_VERSION;le&&le.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=V;(0,F.registerVersion)("@firebase/app-compat","0.1.4",undefined)},5452:(tt,De,U)=>{"use strict";U.r(De),U.d(De,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>to,_DEFAULT_ENTRY_NAME:()=>Ln,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Tr,_apps:()=>jt,_clearComponents:()=>Vn,_components:()=>pr,_getProvider:()=>zt,_registerComponent:()=>Dr,_removeServiceInstance:()=>mn,deleteApp:()=>Xr,getApp:()=>Cn,getApps:()=>gr,initializeApp:()=>no,onLog:()=>Ht,registerVersion:()=>gi,setLogLevel:()=>Sr});var _=U(8239),q=U(6034),F=U(5601),he=U(3854);class ce{constructor(lt){this.container=lt}getPlatformInfoString(){return this.container.getProviders().map(Gt=>{if(function(ot){const lt=ot.getComponent();return"VERSION"===(null==lt?void 0:lt.type)}(Gt)){const un=Gt.getImmediate();return`${un.library}/${un.version}`}return null}).filter(Gt=>Gt).join(" ")}}const we="@firebase/app",ee=new F.Yd("@firebase/app"),Ln="[DEFAULT]",dt={[we]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},jt=new Map,pr=new Map;function dn(ot,lt){try{ot.container.addComponent(lt)}catch(Gt){ee.debug(`Component ${lt.name} failed to register with FirebaseApp ${ot.name}`,Gt)}}function Tr(ot,lt){ot.container.addOrOverwriteComponent(lt)}function Dr(ot){const lt=ot.name;if(pr.has(lt))return ee.debug(`There were multiple attempts to register component ${lt}.`),!1;pr.set(lt,ot);for(const Gt of jt.values())dn(Gt,ot);return!0}function zt(ot,lt){return ot.container.getProvider(lt)}function mn(ot,lt,Gt=Ln){zt(ot,lt).clearInstance(Gt)}function Vn(){pr.clear()}const Dt=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Hr{constructor(lt,Gt,un){this._isDeleted=!1,this._options=Object.assign({},lt),this._config=Object.assign({},Gt),this._name=Gt.name,this._automaticDataCollectionEnabled=Gt.automaticDataCollectionEnabled,this._container=un,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(lt){this._isDeleted=lt}checkDestroyed(){if(this.isDeleted)throw Dt.create("app-deleted",{appName:this._name})}}const to="9.1.2";function no(ot,lt={}){"object"!=typeof lt&&(lt={name:lt});const Gt=Object.assign({name:Ln,automaticDataCollectionEnabled:!1},lt),un=Gt.name;if("string"!=typeof un||!un)throw Dt.create("bad-app-name",{appName:String(un)});const et=jt.get(un);if(et){if((0,he.vZ)(ot,et.options)&&(0,he.vZ)(Gt,et.config))return et;throw Dt.create("duplicate-app",{appName:un})}const $t=new q.H0(un);for(const Xe of pr.values())$t.addComponent(Xe);const nt=new Hr(ot,Gt,$t);return jt.set(un,nt),nt}function Cn(ot=Ln){const lt=jt.get(ot);if(!lt)throw Dt.create("no-app",{appName:ot});return lt}function gr(){return Array.from(jt.values())}function Xr(ot){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.Z)(function*(ot){const lt=ot.name;jt.has(lt)&&(jt.delete(lt),yield Promise.all(ot.container.getProviders().map(Gt=>Gt.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function gi(ot,lt,Gt){var un;let et=null!==(un=dt[ot])&&void 0!==un?un:ot;Gt&&(et+=`-${Gt}`);const $t=et.match(/\s|\//),nt=lt.match(/\s|\//);if($t||nt){const Xe=[`Unable to register library "${et}" with version "${lt}":`];return $t&&Xe.push(`library name "${et}" contains illegal characters (whitespace or "/")`),$t&&nt&&Xe.push("and"),nt&&Xe.push(`version name "${lt}" contains illegal characters (whitespace or "/")`),void ee.warn(Xe.join(" "))}Dr(new q.wA(`${et}-version`,()=>({library:et,version:lt}),"VERSION"))}function Ht(ot,lt){if(null!==ot&&"function"!=typeof ot)throw Dt.create("invalid-log-argument");(0,F.Am)(ot,lt)}function Sr(ot){(0,F.Ub)(ot)}Dr(new q.wA("platform-logger",lt=>new ce(lt),"PRIVATE")),gi(we,"0.7.3",undefined),gi("fire-js","")},1093:(tt,De,U)=>{"use strict";U.d(De,{$:()=>ii,A:()=>H,E:()=>Ni,G:()=>an,I:()=>or,K:()=>Xn,L:()=>yc,M:()=>vc,N:()=>fh,P:()=>ng,Q:()=>Hp,R:()=>Hs,T:()=>ul,V:()=>Du,W:()=>wc,X:()=>Ru,Y:()=>ar,Z:()=>hl,_:()=>Fs,a:()=>Fa,a0:()=>xu,a1:()=>Ls,a2:()=>gs,a3:()=>ml,a4:()=>Wo,a5:()=>Nu,a6:()=>bc,a7:()=>Ve,a8:()=>Wt,a9:()=>fo,aA:()=>bt,aB:()=>Uh,aC:()=>Rn,aG:()=>Mr,aJ:()=>Sa,aa:()=>El,ab:()=>wl,ae:()=>Ar,af:()=>Cl,ag:()=>Na,aj:()=>mh,ak:()=>qp,am:()=>Vs,an:()=>Nc,ao:()=>Ut,ap:()=>se,aq:()=>On,ar:()=>Bt,as:()=>ie,at:()=>ig,au:()=>Es,av:()=>Be,aw:()=>Ae,ax:()=>be,ay:()=>oe,az:()=>ta,b:()=>yi,c:()=>Wa,d:()=>vi,e:()=>sE,f:()=>Wr,g:()=>te,h:()=>R,i:()=>yr,j:()=>Ke,k:()=>Ya,l:()=>c_,m:()=>og,o:()=>xe,r:()=>zn,s:()=>l_,u:()=>tg,z:()=>ye});var _=U(8239),q=U(3854),F=U(5452),he=U(4762),ce=U(5601),Ce=U(6034);const xe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ye=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},le=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new ce.Yd("@firebase/auth");function fe(b,...v){_e.logLevel<=ce.in.ERROR&&_e.error(`Auth (${F.SDK_VERSION}): ${b}`,...v)}function ie(b,...v){throw An(b,...v)}function Be(b,...v){return An(b,...v)}function pt(b,v,E){const D=Object.assign(Object.assign({},Fe()),{[v]:E});return new q.LL("auth","Firebase",D).create(v,{appName:b.name})}function ut(b,v,E){if(!(v instanceof E))throw E.name!==v.constructor.name&&ie(b,"argument-error"),pt(b,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function An(b,...v){if("string"!=typeof b){const E=v[0],D=[...v.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(E,...D)}return le.create(b,...v)}function Ae(b,v,...E){if(!b)throw An(v,...E)}function Ye(b){const v="INTERNAL ASSERTION FAILED: "+b;throw fe(v),new Error(v)}function se(b,v){b||Ye(v)}const Te=new Map;function be(b){se(b instanceof Function,"Expected a class definition");let v=Te.get(b);return v?(se(v instanceof b,"Instance stored in cache mismatched with class"),v):(v=new b,Te.set(b,v),v)}function pe(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function vt(){return"http:"===rn()||"https:"===rn()}function rn(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class jt{constructor(v,E){this.shortDelay=v,this.longDelay=E,se(E>v,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,q.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function pr(b,v){se(b.emulator,"Emulator should always be set here");const{url:E}=b.emulator;return v?`${E}${v.startsWith("/")?v.slice(1):v}`:E}class dn{static initialize(v,E,D){this.fetchImpl=v,E&&(this.headersImpl=E),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dr=new jt(3e4,6e4);function zt(b,v){return b.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:b.tenantId}):v}function mn(b,v,E,D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,_.Z)(function*(b,v,E,D,M={}){return Nn(b,M,()=>{let $={},de={};D&&("GET"===v?de=D:$={body:JSON.stringify(D)});const Le=(0,q.xO)(Object.assign({key:b.config.apiKey},de)).slice(1),rt=new(dn.headers());return rt.set("Content-Type","application/json"),rt.set("X-Client-Version",b._getSdkClientVersion()),b.languageCode&&rt.set("X-Firebase-Locale",b.languageCode),dn.fetch()(no(b,b.config.apiHost,E,Le),Object.assign({method:v,headers:rt,referrerPolicy:"no-referrer"},$))})})).apply(this,arguments)}function Nn(b,v,E){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,_.Z)(function*(b,v,E){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},Tr),v);try{const M=new Cn(b),$=yield Promise.race([E(),M.promise]);M.clearNetworkTimeout();const de=yield $.json();if("needConfirmation"in de)throw gr(b,"account-exists-with-different-credential",de);if($.ok&&!("errorMessage"in de))return de;{const Le=$.ok?de.errorMessage:de.error.message,[rt,yt]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw gr(b,"credential-already-in-use",de);if("EMAIL_EXISTS"===rt)throw gr(b,"email-already-in-use",de);const Pt=D[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw pt(b,Pt,yt);ie(b,Pt)}}catch(M){if(M instanceof q.ZR)throw M;ie(b,"network-request-failed")}})).apply(this,arguments)}function Hr(b,v,E,D){return to.apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(b,v,E,D,M={}){const $=yield mn(b,v,E,D,M);return"mfaPendingCredential"in $&&ie(b,"multi-factor-auth-required",{serverResponse:$}),$})).apply(this,arguments)}function no(b,v,E,D){const M=`${v}${E}?${D}`;return b.config.emulator?pr(b.config,M):`${b.config.apiScheme}://${M}`}class Cn{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((E,D)=>{this.timer=setTimeout(()=>D(Be(this.auth,"timeout")),Dr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gr(b,v,E){const D={appName:b.name};E.email&&(D.email=E.email),E.phoneNumber&&(D.phoneNumber=E.phoneNumber);const M=Be(b,v,D);return M.customData._tokenResponse=E,M}function Un(){return(Un=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function gi(b,v){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Sr(b,v){return mi.apply(this,arguments)}function mi(){return(mi=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function ot(b){if(b)try{const v=new Date(Number(b));if(!isNaN(v.getTime()))return v.toUTCString()}catch(v){}}function un(){return(un=(0,_.Z)(function*(b,v=!1){const E=(0,q.m9)(b),D=yield E.getIdToken(v),M=$t(D);Ae(M&&M.exp&&M.auth_time&&M.iat,E.auth,"internal-error");const $="object"==typeof M.firebase?M.firebase:void 0,de=null==$?void 0:$.sign_in_provider;return{claims:M,token:D,authTime:ot(et(M.auth_time)),issuedAtTime:ot(et(M.iat)),expirationTime:ot(et(M.exp)),signInProvider:de||null,signInSecondFactor:(null==$?void 0:$.sign_in_second_factor)||null}})).apply(this,arguments)}function et(b){return 1e3*Number(b)}function $t(b){const[v,E,D]=b.split(".");if(void 0===v||void 0===E||void 0===D)return fe("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,q.tV)(E);return M?JSON.parse(M):(fe("Failed to decode base64 JWT payload"),null)}catch(M){return fe("Caught error parsing JWT payload as JSON",M),null}}function Xe(b,v){return ro.apply(this,arguments)}function ro(){return(ro=(0,_.Z)(function*(b,v,E=!1){if(E)return v;try{return yield v}catch(D){throw D instanceof q.ZR&&Ns(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}function Ns({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Bn{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var E;if(v){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const M=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(v=!1){var E=this;if(!this.isRunning)return;const D=this.getInterval(v);this.timerId=setTimeout((0,_.Z)(function*(){yield E.iteration()}),D)}iteration(){var v=this;return(0,_.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E.code&&v.schedule(!0))}v.schedule()})()}}class jn{constructor(v,E){this.createdAt=v,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=ot(this.lastLoginAt),this.creationTime=ot(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sn(b){return io.apply(this,arguments)}function io(){return(io=(0,_.Z)(function*(b){var v;const E=b.auth,D=yield b.getIdToken(),M=yield Xe(b,Sr(E,{idToken:D}));Ae(null==M?void 0:M.users.length,E,"internal-error");const $=M.users[0];b._notifyReloadListener($);const de=(null===(v=$.providerUserInfo)||void 0===v?void 0:v.length)?Pe($.providerUserInfo):[],Le=J(b.providerData,de),Pt=!!b.isAnonymous&&!(b.email&&$.passwordHash||(null==Le?void 0:Le.length)),Kn={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:Le,metadata:new jn($.createdAt,$.lastLoginAt),isAnonymous:Pt};Object.assign(b,Kn)})).apply(this,arguments)}function Y(){return(Y=(0,_.Z)(function*(b){const v=(0,q.m9)(b);yield sn(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function J(b,v){return[...b.filter(D=>!v.some(M=>M.providerId===D.providerId)),...v]}function Pe(b){return b.map(v=>{var{providerId:E}=v,D=(0,he._T)(v,["providerId"]);return{providerId:E,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function We(){return(We=(0,_.Z)(function*(b,v){const E=yield Nn(b,{},()=>{const D=(0,q.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:M,apiKey:$}=b.config,de=no(b,M,"/v1/token",`key=${$}`);return dn.fetch()(de,{method:"POST",headers:{"X-Client-Version":b._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:D})});return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class gt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Ae(v.idToken,"internal-error"),Ae(void 0!==v.idToken,"internal-error"),Ae(void 0!==v.refreshToken,"internal-error");const E="expiresIn"in v&&void 0!==v.expiresIn?Number(v.expiresIn):function(b){const v=$t(b);return Ae(v,"internal-error"),Ae(void 0!==v.exp,"internal-error"),Ae(void 0!==v.iat,"internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,E)}getToken(v,E=!1){var D=this;return(0,_.Z)(function*(){return Ae(!D.accessToken||D.refreshToken,v,"user-token-expired"),E||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(v,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,E){var D=this;return(0,_.Z)(function*(){const{accessToken:M,refreshToken:$,expiresIn:de}=yield function(b,v){return We.apply(this,arguments)}(v,E);D.updateTokensAndExpiration(M,$,Number(de))})()}updateTokensAndExpiration(v,E,D){this.refreshToken=E||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(v,E){const{refreshToken:D,accessToken:M,expirationTime:$}=E,de=new gt;return D&&(Ae("string"==typeof D,"internal-error",{appName:v}),de.refreshToken=D),M&&(Ae("string"==typeof M,"internal-error",{appName:v}),de.accessToken=M),$&&(Ae("number"==typeof $,"internal-error",{appName:v}),de.expirationTime=$),de}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new gt,this.toJSON())}_performRefresh(){return Ye("not implemented")}}function on(b,v){Ae("string"==typeof b||void 0===b,"internal-error",{appName:v})}class hn{constructor(v){var{uid:E,auth:D,stsTokenManager:M}=v,$=(0,he._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=D,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=$.displayName||null,this.email=$.email||null,this.emailVerified=$.emailVerified||!1,this.phoneNumber=$.phoneNumber||null,this.photoURL=$.photoURL||null,this.isAnonymous=$.isAnonymous||!1,this.tenantId=$.tenantId||null,this.metadata=new jn($.createdAt||void 0,$.lastLoginAt||void 0)}getIdToken(v){var E=this;return(0,_.Z)(function*(){const D=yield Xe(E,E.stsTokenManager.getToken(E.auth,v));return Ae(D,E.auth,"internal-error"),E.accessToken!==D&&(E.accessToken=D,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),D})()}getIdTokenResult(v){return function(b){return un.apply(this,arguments)}(this,v)}reload(){return function(b){return Y.apply(this,arguments)}(this)}_assign(v){this!==v&&(Ae(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(E=>Object.assign({},E)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){return new hn(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(v){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,E=!1){var D=this;return(0,_.Z)(function*(){let M=!1;v.idToken&&v.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(v),M=!0),E&&(yield sn(D)),yield D.auth._persistUserIfCurrent(D),M&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var v=this;return(0,_.Z)(function*(){const E=yield v.getIdToken();return yield Xe(v,function(b,v){return Un.apply(this,arguments)}(v.auth,{idToken:E})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,E){var D,M,$,de,Le,rt,yt,Pt;const Kn=null!==(D=E.displayName)&&void 0!==D?D:void 0,ws=null!==(M=E.email)&&void 0!==M?M:void 0,vo=null!==($=E.phoneNumber)&&void 0!==$?$:void 0,Hh=null!==(de=E.photoURL)&&void 0!==de?de:void 0,ug=null!==(Le=E.tenantId)&&void 0!==Le?Le:void 0,Yc=null!==(rt=E._redirectEventId)&&void 0!==rt?rt:void 0,lg=null!==(yt=E.createdAt)&&void 0!==yt?yt:void 0,m_=null!==(Pt=E.lastLoginAt)&&void 0!==Pt?Pt:void 0,{uid:cg,emailVerified:ui,isAnonymous:xl,providerData:Bu,stsTokenManager:ju}=E;Ae(cg&&ju,v,"internal-error");const Eo=gt.fromJSON(this.name,ju);Ae("string"==typeof cg,v,"internal-error"),on(Kn,v.name),on(ws,v.name),Ae("boolean"==typeof ui,v,"internal-error"),Ae("boolean"==typeof xl,v,"internal-error"),on(vo,v.name),on(Hh,v.name),on(ug,v.name),on(Yc,v.name),on(lg,v.name),on(m_,v.name);const $u=new hn({uid:cg,auth:v,email:ws,emailVerified:ui,displayName:Kn,isAnonymous:xl,photoURL:Hh,phoneNumber:vo,tenantId:ug,stsTokenManager:Eo,createdAt:lg,lastLoginAt:m_});return Bu&&Array.isArray(Bu)&&($u.providerData=Bu.map(Qc=>Object.assign({},Qc))),Yc&&($u._redirectEventId=Yc),$u}static _fromIdTokenResponse(v,E,D=!1){return(0,_.Z)(function*(){const M=new gt;M.updateFromServerResponse(E);const $=new hn({uid:E.localId,auth:v,stsTokenManager:M,isAnonymous:D});return yield sn($),$})()}}const Xn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(E,D){var M=this;return(0,_.Z)(function*(){M.storage[E]=D})()}_get(E){var D=this;return(0,_.Z)(function*(){const M=D.storage[E];return void 0===M?null:M})()}_remove(E){var D=this;return(0,_.Z)(function*(){delete D.storage[E]})()}_addListener(E,D){}_removeListener(E,D){}}return b.type="NONE",b})();function oe(b,v,E){return`firebase:${b}:${v}:${E}`}class Z{constructor(v,E,D){this.persistence=v,this.auth=E,this.userKey=D;const{config:M,name:$}=this.auth;this.fullUserKey=oe(this.userKey,M.apiKey,$),this.fullPersistenceKey=oe("persistence",M.apiKey,$),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,_.Z)(function*(){const E=yield v.persistence._get(v.fullUserKey);return E?hn._fromJSON(v.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var E=this;return(0,_.Z)(function*(){if(E.persistence===v)return;const D=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=v,D?E.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,E,D="authUser"){return(0,_.Z)(function*(){if(!E.length)return new Z(be(Xn),v,D);const M=(yield Promise.all(E.map(function(){var yt=(0,_.Z)(function*(Pt){if(yield Pt._isAvailable())return Pt});return function(Pt){return yt.apply(this,arguments)}}()))).filter(yt=>yt);let $=M[0]||be(Xn);const de=oe(D,v.config.apiKey,v.name);let Le=null;for(const yt of E)try{const Pt=yield yt._get(de);if(Pt){const Kn=hn._fromJSON(v,Pt);yt!==$&&(Le=Kn),$=yt;break}}catch(Pt){}const rt=M.filter(yt=>yt._shouldAllowMigration);return $._shouldAllowMigration&&rt.length?($=rt[0],Le&&(yield $._set(de,Le.toJSON())),yield Promise.all(E.map(function(){var yt=(0,_.Z)(function*(Pt){if(Pt!==$)try{yield Pt._remove(de)}catch(Kn){}});return function(Pt){return yt.apply(this,arguments)}}())),new Z($,v,D)):new Z($,v,D)})()}}function Q(b){const v=b.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(Vt(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(ke(v))return"Firefox";if(v.includes("silk/"))return"Silk";if($n(v))return"Blackberry";if(Or(v))return"Webos";if(ze(v))return"Safari";if((v.includes("chrome/")||_t(v))&&!v.includes("edge/"))return"Chrome";if(Bt(v))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function ke(b=(0,q.z$)()){return/firefox\//i.test(b)}function ze(b=(0,q.z$)()){const v=b.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function _t(b=(0,q.z$)()){return/crios\//i.test(b)}function Vt(b=(0,q.z$)()){return/iemobile/i.test(b)}function Bt(b=(0,q.z$)()){return/android/i.test(b)}function $n(b=(0,q.z$)()){return/blackberry/i.test(b)}function Or(b=(0,q.z$)()){return/webos/i.test(b)}function On(b=(0,q.z$)()){return/iphone|ipad|ipod/i.test(b)}function Ut(b=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function sl(b=(0,q.z$)()){return On(b)||Bt(b)||Or(b)||$n(b)||/windows phone/i.test(b)||Vt(b)}function pc(b,v=[]){let E;switch(b){case"Browser":E=Q((0,q.z$)());break;case"Worker":E=`${Q((0,q.z$)())}-${b}`;break;default:E=b}const D=v.length?v.join(","):"FirebaseCore-web";return`${E}/JsCore/${F.SDK_VERSION}/${D}`}class sr{constructor(v,E){this.app=v,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new so(this),this.idTokenSubscription=new so(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(v,E){var D=this;return E&&(this._popupRedirectResolver=be(E)),this._initializationPromise=this.queue((0,_.Z)(function*(){var M;D._deleted||(D.persistenceManager=yield Z.create(D,v),!D._deleted&&((null===(M=D._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)&&(yield D._popupRedirectResolver._initialize(D)),yield D.initializeCurrentUser(E),!D._deleted&&(D._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,_.Z)(function*(){if(v._deleted)return;const E=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||E){if(v.currentUser&&E&&v.currentUser.uid===E.uid)return v._currentUser._assign(E),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(E)}})()}initializeCurrentUser(v){var E=this;return(0,_.Z)(function*(){var D;let M=yield E.assertedPersistence.getCurrentUser();if(v&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const $=null===(D=E.redirectUser)||void 0===D?void 0:D._redirectEventId,de=null==M?void 0:M._redirectEventId,Le=yield E.tryRedirectSignIn(v);(!$||$===de)&&(null==Le?void 0:Le.user)&&(M=Le.user)}return M?M._redirectEventId?(Ae(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===M._redirectEventId?E.directlySetCurrentUser(M):E.reloadAndSetCurrentUserOrClear(M)):E.reloadAndSetCurrentUserOrClear(M):E.directlySetCurrentUser(null)})()}tryRedirectSignIn(v){var E=this;return(0,_.Z)(function*(){let D=null;try{D=yield E._popupRedirectResolver._completeRedirectFn(E,v,!0)}catch(M){yield E._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(v){var E=this;return(0,_.Z)(function*(){try{yield sn(v)}catch(D){if("auth/network-request-failed"!==D.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var v=this;return(0,_.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var E=this;return(0,_.Z)(function*(){const D=v?(0,q.m9)(v):null;return D&&Ae(D.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(D&&D._clone(E))})()}_updateCurrentUser(v){var E=this;return(0,_.Z)(function*(){if(!E._deleted)return v&&Ae(E.tenantId===v.tenantId,E,"tenant-id-mismatch"),E.queue((0,_.Z)(function*(){yield E.directlySetCurrentUser(v),E.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,_.Z)(function*(){return(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null)})()}setPersistence(v){var E=this;return this.queue((0,_.Z)(function*(){yield E.assertedPersistence.setPersistence(be(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new q.LL("auth","Firebase",v())}onAuthStateChanged(v,E,D){return this.registerStateListener(this.authStateSubscription,v,E,D)}onIdTokenChanged(v,E,D){return this.registerStateListener(this.idTokenSubscription,v,E,D)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,E){var D=this;return(0,_.Z)(function*(){const M=yield D.getOrInitRedirectPersistenceManager(E);return null===v?M.removeCurrentUser():M.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var E=this;return(0,_.Z)(function*(){if(!E.redirectPersistenceManager){const D=v&&be(v)||E._popupRedirectResolver;Ae(D,E,"argument-error"),E.redirectPersistenceManager=yield Z.create(E,[be(D._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(v){var E=this;return(0,_.Z)(function*(){var D,M;return E._isInitialized&&(yield E.queue((0,_.Z)(function*(){}))),(null===(D=E._currentUser)||void 0===D?void 0:D._redirectEventId)===v?E._currentUser:(null===(M=E.redirectUser)||void 0===M?void 0:M._redirectEventId)===v?E.redirectUser:null})()}_persistUserIfCurrent(v){var E=this;return(0,_.Z)(function*(){if(v===E.currentUser)return E.queue((0,_.Z)(function*(){return E.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(E=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,E,D,M){if(this._deleted)return()=>{};const $="function"==typeof E?E:E.next.bind(E),de=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(de,this,"internal-error"),de.then(()=>$(this.currentUser)),"function"==typeof E?v.addObserver(E,D,M):v.addObserver(E)}directlySetCurrentUser(v){var E=this;return(0,_.Z)(function*(){E.currentUser&&E.currentUser!==v&&(E._currentUser._stopProactiveRefresh(),v&&E.isProactiveRefreshEnabled&&v._startProactiveRefresh()),E.currentUser=v,v?yield E.assertedPersistence.setCurrentUser(v):yield E.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=pc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Rn(b){return(0,q.m9)(b)}class so{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,q.ne)(E=>this.observer=E)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ni(b,v,E){const D=Rn(b);Ae(D._canInitEmulator,D,"emulator-config-failed"),Ae(/^https?:\/\//.test(v),D,"invalid-emulator-scheme");const M=!!(null==E?void 0:E.disableWarnings),$=ol(v),{host:de,port:Le}=function(b){const v=ol(b),E=/(\/\/)?([^?#/]+)/.exec(b.substr(v.length));if(!E)return{host:"",port:null};const D=E[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(D);if(M){const $=M[1];return{host:$,port:Qe(D.substr($.length+1))}}{const[$,de]=D.split(":");return{host:$,port:Qe(de)}}}(v);D.config.emulator={url:`${$}//${de}${null===Le?"":`:${Le}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:de,port:Le,protocol:$.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function(){function b(){const v=document.createElement("p"),E=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function ol(b){const v=b.indexOf(":");return v<0?"":b.substr(0,v+1)}function Qe(b){if(!b)return null;const v=Number(b);return isNaN(v)?null:v}class an{constructor(v,E){this.providerId=v,this.signInMethod=E}toJSON(){return Ye("not implemented")}_getIdTokenResponse(v){return Ye("not implemented")}_linkToIdToken(v,E){return Ye("not implemented")}_getReauthenticationResolver(v){return Ye("not implemented")}}function mr(b,v){return ls.apply(this,arguments)}function ls(){return(ls=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:resetPassword",zt(b,v))})).apply(this,arguments)}function Qt(b,v){return oo.apply(this,arguments)}function oo(){return(oo=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Hn(b,v){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:update",zt(b,v))})).apply(this,arguments)}function St(){return(St=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signInWithPassword",zt(b,v))})).apply(this,arguments)}function Os(b,v){return ao.apply(this,arguments)}function ao(){return(ao=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:sendOobCode",zt(b,v))})).apply(this,arguments)}function gc(b,v){return _i.apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(b,v){return Os(b,v)})).apply(this,arguments)}function ei(b,v){return uo.apply(this,arguments)}function uo(){return(uo=(0,_.Z)(function*(b,v){return Os(b,v)})).apply(this,arguments)}function cs(b,v){return ti.apply(this,arguments)}function ti(){return(ti=(0,_.Z)(function*(b,v){return Os(b,v)})).apply(this,arguments)}function bn(b,v){return dh.apply(this,arguments)}function dh(){return(dh=(0,_.Z)(function*(b,v){return Os(b,v)})).apply(this,arguments)}function ds(){return(ds=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signInWithEmailLink",zt(b,v))})).apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signInWithEmailLink",zt(b,v))})).apply(this,arguments)}class lo extends an{constructor(v,E,D,M=null){super("password",D),this._email=v,this._password=E,this._tenantId=M}static _fromEmailAndPassword(v,E){return new lo(v,E,"password")}static _fromEmailAndCode(v,E,D=null){return new lo(v,E,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v;if((null==E?void 0:E.email)&&(null==E?void 0:E.password)){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(v){var E=this;return(0,_.Z)(function*(){switch(E.signInMethod){case"password":return function(b,v){return St.apply(this,arguments)}(v,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(b,v){return ds.apply(this,arguments)}(v,{email:E._email,oobCode:E._password});default:ie(v,"internal-error")}})()}_linkToIdToken(v,E){var D=this;return(0,_.Z)(function*(){switch(D.signInMethod){case"password":return Qt(v,{idToken:E,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function(b,v){return jo.apply(this,arguments)}(v,{idToken:E,email:D._email,oobCode:D._password});default:ie(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function ni(b,v){return fn.apply(this,arguments)}function fn(){return(fn=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signInWithIdp",zt(b,v))})).apply(this,arguments)}class or extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const E=new or(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(E.idToken=v.idToken),v.accessToken&&(E.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(E.nonce=v.nonce),v.pendingToken&&(E.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(E.accessToken=v.oauthToken,E.secret=v.oauthTokenSecret):ie("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:D,signInMethod:M}=E,$=(0,he._T)(E,["providerId","signInMethod"]);if(!D||!M)return null;const de=new or(D,M);return de.idToken=$.idToken||void 0,de.accessToken=$.accessToken||void 0,de.secret=$.secret,de.nonce=$.nonce,de.pendingToken=$.pendingToken||null,de}_getIdTokenResponse(v){return ni(v,this.buildRequest())}_linkToIdToken(v,E){const D=this.buildRequest();return D.idToken=E,ni(v,D)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,ni(v,E)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),v.postBody=(0,q.xO)(E)}return v}}function Zi(b,v){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:sendVerificationCode",zt(b,v))})).apply(this,arguments)}function Ta(){return(Ta=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signInWithPhoneNumber",zt(b,v))})).apply(this,arguments)}function Ms(){return(Ms=(0,_.Z)(function*(b,v){const E=yield Hr(b,"POST","/v1/accounts:signInWithPhoneNumber",zt(b,v));if(E.temporaryProof)throw gr(b,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const r_={USER_NOT_FOUND:"user-not-found"};function mc(){return(mc=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signInWithPhoneNumber",zt(b,Object.assign(Object.assign({},v),{operation:"REAUTH"})),r_)})).apply(this,arguments)}class Da extends an{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,E){return new Da({verificationId:v,verificationCode:E})}static _fromTokenResponse(v,E){return new Da({phoneNumber:v,temporaryProof:E})}_getIdTokenResponse(v){return function(b,v){return Ta.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,E){return function(b,v){return Ms.apply(this,arguments)}(v,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function(b,v){return mc.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:E,verificationId:D,verificationCode:M}=this.params;return v&&E?{temporaryProof:v,phoneNumber:E}:{sessionInfo:D,code:M}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:E,verificationCode:D,phoneNumber:M,temporaryProof:$}=v;return D||E||M||$?new Da({verificationId:E,verificationCode:D,phoneNumber:M,temporaryProof:$}):null}}class _c{constructor(v){var E,D,M,$,de,Le;const rt=(0,q.zd)((0,q.pd)(v)),yt=null!==(E=rt.apiKey)&&void 0!==E?E:null,Pt=null!==(D=rt.oobCode)&&void 0!==D?D:null,Kn=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=rt.mode)&&void 0!==M?M:null);Ae(yt&&Pt&&Kn,"argument-error"),this.apiKey=yt,this.operation=Kn,this.code=Pt,this.continueUrl=null!==($=rt.continueUrl)&&void 0!==$?$:null,this.languageCode=null!==(de=rt.languageCode)&&void 0!==de?de:null,this.tenantId=null!==(Le=rt.tenantId)&&void 0!==Le?Le:null}static parseLink(v){const E=function(b){const v=(0,q.zd)((0,q.pd)(b)).link,E=v?(0,q.zd)((0,q.pd)(v)).deep_link_id:null,D=(0,q.zd)((0,q.pd)(b)).deep_link_id;return(D?(0,q.zd)((0,q.pd)(D)).link:null)||D||E||v||b}(v);try{return new _c(E)}catch(D){return null}}}let yc=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(E,D){return lo._fromEmailAndPassword(E,D)}static credentialWithLink(E,D){const M=_c.parseLink(D);return Ae(M,"argument-error"),lo._fromEmailAndCode(E,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ps{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Tu extends Ps{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class ul extends Tu{static credentialFromJSON(v){const E="string"==typeof v?JSON.parse(v):v;return Ae("providerId"in E&&"signInMethod"in E,"argument-error"),or._fromParams(E)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Ae(v.idToken||v.accessToken,"argument-error"),or._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return ul.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return ul.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:E,oauthAccessToken:D,oauthTokenSecret:M,pendingToken:$,nonce:de,providerId:Le}=v;if(!D&&!M&&!E&&!$||!Le)return null;try{return new ul(Le)._credential({idToken:E,accessToken:D,nonce:de,pendingToken:$})}catch(rt){return null}}}let vc=(()=>{class b extends Tu{constructor(){super("facebook.com")}static credential(E){return or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return b.credential(E.oauthAccessToken)}catch(D){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),fh=(()=>{class b extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(E,D){return or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:D})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:D,oauthAccessToken:M}=E;if(!D&&!M)return null;try{return b.credential(D,M)}catch($){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Hp=(()=>{class b extends Tu{constructor(){super("github.com")}static credential(E){return or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return b.credential(E.oauthAccessToken)}catch(D){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Sa extends an{constructor(v,E){super(v,v),this.pendingToken=E}_getIdTokenResponse(v){return ni(v,this.buildRequest())}_linkToIdToken(v,E){const D=this.buildRequest();return D.idToken=E,ni(v,D)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,ni(v,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:D,signInMethod:M,pendingToken:$}=E;return D&&M&&$&&D===M?new Sa(D,$):null}static _create(v,E){return new Sa(v,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Du=(()=>{class b extends Tu{constructor(){super("twitter.com")}static credential(E,D){return or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:D})}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:D,oauthTokenSecret:M}=E;if(!D||!M)return null;try{return b.credential(D,M)}catch($){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ks(b,v){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signUp",zt(b,v))})).apply(this,arguments)}class Gn{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,E,D,M=!1){return(0,_.Z)(function*(){const $=yield hn._fromIdTokenResponse(v,D,M),de=ph(D);return new Gn({user:$,providerId:de,_tokenResponse:D,operationType:E})})()}static _forOperation(v,E,D){return(0,_.Z)(function*(){yield v._updateTokensIfNecessary(D,!0);const M=ph(D);return new Gn({user:v,providerId:M,_tokenResponse:D,operationType:E})})()}}function ph(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function wc(b){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,_.Z)(function*(b){var v;const E=Rn(b);if(yield E._initializationPromise,null===(v=E.currentUser)||void 0===v?void 0:v.isAnonymous)return new Gn({user:E.currentUser,providerId:null,operationType:"signIn"});const D=yield ks(E,{returnSecureToken:!0}),M=yield Gn._fromIdTokenResponse(E,"signIn",D,!0);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}class $o extends q.ZR{constructor(v,E,D,M){var $;super(E.code,E.message),this.operationType=D,this.user=M,this.name="FirebaseError",Object.setPrototypeOf(this,$o.prototype),this.appName=v.name,this.code=E.code,this.tenantId=null!==($=v.tenantId)&&void 0!==$?$:void 0,this.serverResponse=E.customData.serverResponse}static _fromErrorAndOperation(v,E,D,M){return new $o(v,E,D,M)}}function gh(b,v,E,D){return("reauthenticate"===v?E._getReauthenticationResolver(b):E._getIdTokenResponse(b)).catch($=>{throw"auth/multi-factor-auth-required"===$.code?$o._fromErrorAndOperation(b,$,v,D):$})}function cl(b){return new Set(b.map(({providerId:v})=>v).filter(v=>!!v))}function mh(b,v){return co.apply(this,arguments)}function co(){return(co=(0,_.Z)(function*(b,v){const E=(0,q.m9)(b);yield _r(!0,E,v);const{providerUserInfo:D}=yield gi(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[v]}),M=cl(D||[]);return E.providerData=E.providerData.filter($=>M.has($.providerId)),M.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E})).apply(this,arguments)}function Ho(b,v){return Su.apply(this,arguments)}function Su(){return(Su=(0,_.Z)(function*(b,v,E=!1){const D=yield Xe(b,v._linkToIdToken(b.auth,yield b.getIdToken()),E);return Gn._forOperation(b,"link",D)})).apply(this,arguments)}function _r(b,v,E){return hs.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(b,v,E){yield sn(v);const M=!1===b?"provider-already-linked":"no-such-provider";Ae(cl(v.providerData).has(E)===b,v.auth,M)})).apply(this,arguments)}function Au(b,v){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.Z)(function*(b,v,E=!1){const{auth:D}=b,M="reauthenticate";try{const $=yield Xe(b,gh(D,M,v,b),E);Ae($.idToken,D,"internal-error");const de=$t($.idToken);Ae(de,D,"internal-error");const{sub:Le}=de;return Ae(b.uid===Le,D,"user-mismatch"),Gn._forOperation(b,M,$)}catch($){throw"auth/user-not-found"===(null==$?void 0:$.code)&&ie(D,"user-mismatch"),$}})).apply(this,arguments)}function _h(b,v){return ho.apply(this,arguments)}function ho(){return(ho=(0,_.Z)(function*(b,v,E=!1){const D="signIn",M=yield gh(b,D,v),$=yield Gn._fromIdTokenResponse(b,D,M);return E||(yield b._updateCurrentUser($.user)),$})).apply(this,arguments)}function Ru(b,v){return xn.apply(this,arguments)}function xn(){return(xn=(0,_.Z)(function*(b,v){return _h(Rn(b),v)})).apply(this,arguments)}function ar(b,v){return dl.apply(this,arguments)}function dl(){return(dl=(0,_.Z)(function*(b,v){const E=(0,q.m9)(b);return yield _r(!1,E,v.providerId),Ho(E,v)})).apply(this,arguments)}function hl(b,v){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,_.Z)(function*(b,v){return Au((0,q.m9)(b),v)})).apply(this,arguments)}function yh(b,v){return vh.apply(this,arguments)}function vh(){return(vh=(0,_.Z)(function*(b,v){return Hr(b,"POST","/v1/accounts:signInWithCustomToken",zt(b,v))})).apply(this,arguments)}function Fs(b,v){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,_.Z)(function*(b,v){const E=Rn(b),D=yield yh(E,{token:v,returnSecureToken:!0}),M=yield Gn._fromIdTokenResponse(E,"signIn",D);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}class Aa{constructor(v,E){this.factorId=v,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(v,E){return"phoneInfo"in E?Go._fromServerResponse(v,E):ie(v,"internal-error")}}class Go extends Aa{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,E){return new Go(E)}}function ps(b,v,E){var D;Ae((null===(D=E.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),Ae(void 0===E.dynamicLinkDomain||E.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),v.continueUrl=E.url,v.dynamicLinkDomain=E.dynamicLinkDomain,v.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(Ae(E.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),v.iOSBundleId=E.iOS.bundleId),E.android&&(Ae(E.android.packageName.length>0,b,"missing-android-pkg-name"),v.androidInstallApp=E.android.installApp,v.androidMinimumVersionCode=E.android.minimumVersion,v.androidPackageName=E.android.packageName)}function ii(b,v,E){return fl.apply(this,arguments)}function fl(){return(fl=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b),M={requestType:"PASSWORD_RESET",email:v};E&&ps(D,M,E),yield ei(D,M)})).apply(this,arguments)}function xu(b,v,E){return pl.apply(this,arguments)}function pl(){return(pl=(0,_.Z)(function*(b,v,E){yield mr((0,q.m9)(b),{oobCode:v,newPassword:E})})).apply(this,arguments)}function Ls(b,v){return gl.apply(this,arguments)}function gl(){return(gl=(0,_.Z)(function*(b,v){yield Hn((0,q.m9)(b),{oobCode:v})})).apply(this,arguments)}function gs(b,v){return ft.apply(this,arguments)}function ft(){return(ft=(0,_.Z)(function*(b,v){const E=(0,q.m9)(b),D=yield mr(E,{oobCode:v}),M=D.requestType;switch(Ae(M,E,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(D.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(D.mfaInfo,E,"internal-error");default:Ae(D.email,E,"internal-error")}let $=null;return D.mfaInfo&&($=Aa._fromServerResponse(Rn(E),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:$},operation:M}})).apply(this,arguments)}function ml(b,v){return _l.apply(this,arguments)}function _l(){return(_l=(0,_.Z)(function*(b,v){const{data:E}=yield gs((0,q.m9)(b),v);return E.email})).apply(this,arguments)}function Wo(b,v,E){return yl.apply(this,arguments)}function yl(){return(yl=(0,_.Z)(function*(b,v,E){const D=Rn(b),M=yield ks(D,{returnSecureToken:!0,email:v,password:E}),$=yield Gn._fromIdTokenResponse(D,"signIn",M);return yield D._updateCurrentUser($.user),$})).apply(this,arguments)}function Nu(b,v,E){return Ru((0,q.m9)(b),yc.credential(v,E))}function bc(b,v,E){return vl.apply(this,arguments)}function vl(){return(vl=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b),M={requestType:"EMAIL_SIGNIN",email:v};Ae(E.handleCodeInApp,D,"argument-error"),E&&ps(D,M,E),yield cs(D,M)})).apply(this,arguments)}function Ve(b,v){const E=_c.parseLink(v);return"EMAIL_SIGNIN"===(null==E?void 0:E.operation)}function Wt(b,v,E){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b),M=yc.credentialWithLink(v,E||pe());return Ae(M._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Ru(D,M)})).apply(this,arguments)}function ur(b,v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:createAuthUri",zt(b,v))})).apply(this,arguments)}function fo(b,v){return si.apply(this,arguments)}function si(){return(si=(0,_.Z)(function*(b,v){const D={identifier:v,continueUri:vt()?pe():"http://localhost"},{signinMethods:M}=yield ur((0,q.m9)(b),D);return M||[]})).apply(this,arguments)}function El(b,v){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.Z)(function*(b,v){const E=(0,q.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};v&&ps(E.auth,M,v);const{email:$}=yield gc(E.auth,M);$!==b.email&&(yield b.reload())})).apply(this,arguments)}function wl(b,v,E){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b),$={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:v};E&&ps(D.auth,$,E);const{email:de}=yield bn(D.auth,$);de!==b.email&&(yield b.reload())})).apply(this,arguments)}function xa(b,v){return po.apply(this,arguments)}function po(){return(po=(0,_.Z)(function*(b,v){return mn(b,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Ar(b,v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,_.Z)(function*(b,{displayName:v,photoURL:E}){if(void 0===v&&void 0===E)return;const D=(0,q.m9)(b),$={idToken:yield D.getIdToken(),displayName:v,photoUrl:E,returnSecureToken:!0},de=yield Xe(D,xa(D.auth,$));D.displayName=de.displayName||null,D.photoURL=de.photoUrl||null;const Le=D.providerData.find(({providerId:rt})=>"password"===rt);Le&&(Le.displayName=D.displayName,Le.photoURL=D.photoURL),yield D._updateTokensIfNecessary(de)})).apply(this,arguments)}function Cl(b,v){return Pi((0,q.m9)(b),v,null)}function Na(b,v){return Pi((0,q.m9)(b),null,v)}function Pi(b,v,E){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.Z)(function*(b,v,E){const{auth:D}=b,$={idToken:yield b.getIdToken(),returnSecureToken:!0};v&&($.email=v),E&&($.password=E);const de=yield Xe(b,Qt(D,$));yield b._updateTokensIfNecessary(de,!0)})).apply(this,arguments)}class Ma{constructor(v,E,D={}){this.isNewUser=v,this.providerId=E,this.profile=D}}class Ch extends Ma{constructor(v,E,D,M){super(v,E,D),this.username=M}}class Ic extends Ma{constructor(v,E){super(v,"facebook.com",E)}}class Mu extends Ch{constructor(v,E){super(v,"github.com",E,"string"==typeof(null==E?void 0:E.login)?null==E?void 0:E.login:null)}}class Wp extends Ma{constructor(v,E){super(v,"google.com",E)}}class Pa extends Ch{constructor(v,E,D){super(v,"twitter.com",E,D)}}function qp(b){const{user:v,_tokenResponse:E}=b;return v.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function(b){var v,E;if(!b)return null;const{providerId:D}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},$=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&(null==b?void 0:b.idToken)){const de=null===(E=null===(v=$t(b.idToken))||void 0===v?void 0:v.firebase)||void 0===E?void 0:E.sign_in_provider;if(de)return new Ma($,"anonymous"!==de&&"custom"!==de?de:null)}if(!D)return null;switch(D){case"facebook.com":return new Ic($,M);case"github.com":return new Mu($,M);case"google.com":return new Wp($,M);case"twitter.com":return new Pa($,M,b.screenName||null);case"custom":case"anonymous":return new Ma($,null);default:return new Ma($,D,M)}}(E)}class zo{constructor(v,E){this.type=v,this.credential=E}static _fromIdtoken(v){return new zo("enroll",v)}static _fromMfaPendingCredential(v){return new zo("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var E,D;if(null==v?void 0:v.multiFactorSession){if(null===(E=v.multiFactorSession)||void 0===E?void 0:E.pendingCredential)return zo._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null===(D=v.multiFactorSession)||void 0===D?void 0:D.idToken)return zo._fromIdtoken(v.multiFactorSession.idToken)}return null}}class lr{constructor(v,E,D){this.session=v,this.hints=E,this.signInResolver=D}static _fromError(v,E){const D=Rn(v),M=(E.serverResponse.mfaInfo||[]).map(de=>Aa._fromServerResponse(D,de));Ae(E.serverResponse.mfaPendingCredential,D,"internal-error");const $=zo._fromMfaPendingCredential(E.serverResponse.mfaPendingCredential);return new lr($,M,function(){var de=(0,_.Z)(function*(Le){const rt=yield Le._process(D,$);delete E.serverResponse.mfaInfo,delete E.serverResponse.mfaPendingCredential;const yt=Object.assign(Object.assign({},E.serverResponse),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(E.operationType){case"signIn":const Pt=yield Gn._fromIdTokenResponse(D,E.operationType,yt);return yield D._updateCurrentUser(Pt.user),Pt;case"reauthenticate":return Ae(E.user,D,"internal-error"),Gn._forOperation(E.user,E.operationType,yt);default:ie(D,"internal-error")}});return function(Le){return de.apply(this,arguments)}}())}resolveSignIn(v){var E=this;return(0,_.Z)(function*(){return E.signInResolver(v)})()}}function Vs(b,v){var E;const D=(0,q.m9)(b),M=v;return Ae(v.operationType,D,"argument-error"),Ae(null===(E=M.serverResponse)||void 0===E?void 0:E.mfaPendingCredential,D,"argument-error"),lr._fromError(D,M)}function Nt(b,v){return mn(b,"POST","/v2/accounts/mfaEnrollment:start",zt(b,v))}class Rc{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(D=>Aa._fromServerResponse(v.auth,D)))})}static _fromUser(v){return new Rc(v)}getSession(){var v=this;return(0,_.Z)(function*(){return zo._fromIdtoken(yield v.user.getIdToken())})()}enroll(v,E){var D=this;return(0,_.Z)(function*(){const M=v,$=yield D.getSession(),de=yield Xe(D.user,M._process(D.user.auth,$,E));return yield D.user._updateTokensIfNecessary(de),D.user.reload()})()}unenroll(v){var E=this;return(0,_.Z)(function*(){const D="string"==typeof v?v:v.uid,M=yield E.user.getIdToken(),$=yield Xe(E.user,function(b,v){return mn(b,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(b,v))}(E.user.auth,{idToken:M,mfaEnrollmentId:D}));E.enrolledFactors=E.enrolledFactors.filter(({uid:de})=>de!==D),yield E.user._updateTokensIfNecessary($);try{yield E.user.reload()}catch(de){if("auth/user-token-expired"!==de.code)throw de}})()}}const xc=new WeakMap;function Nc(b){const v=(0,q.m9)(b);return xc.has(v)||xc.set(v,Rc._fromUser(v)),xc.get(v)}const Oc="__sak";class ka{constructor(v,E){this.storage=v,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch(v){return Promise.resolve(!1)}}_set(v,E){return this.storage.setItem(v,JSON.stringify(E)),Promise.resolve()}_get(v){const E=this.storage.getItem(v);return Promise.resolve(E?JSON.parse(E):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}}const yi=(()=>{class b extends ka{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(E,D)=>this.onStorageEvent(E,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,q.z$)();return ze(b)||On(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=sl(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const D of Object.keys(this.listeners)){const M=this.storage.getItem(D),$=this.localCache[D];M!==$&&E(D,$,M)}}onStorageEvent(E,D=!1){if(!E.key)return void this.forAllChangedKeys((Le,rt,yt)=>{this.notifyListeners(Le,yt)});const M=E.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(M);if(E.newValue!==Le)null!==E.newValue?this.storage.setItem(M,E.newValue):this.storage.removeItem(M);else if(this.localCache[M]===E.newValue&&!D)return}const $=()=>{const Le=this.storage.getItem(M);!D&&this.localCache[M]===Le||this.notifyListeners(M,Le)},de=this.storage.getItem(M);(0,q.w1)()&&10===document.documentMode&&de!==E.newValue&&E.newValue!==E.oldValue?setTimeout($,10):$()}notifyListeners(E,D){this.localCache[E]=D;const M=this.listeners[E];if(M)for(const $ of Array.from(M))$(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,D,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:D,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(D)}_removeListener(E,D){this.listeners[E]&&(this.listeners[E].delete(D),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,D){var M=()=>super._set,$=this;return(0,_.Z)(function*(){yield M().call($,E,D),$.localCache[E]=JSON.stringify(D)})()}_get(E){var D=()=>super._get,M=this;return(0,_.Z)(function*(){const $=yield D().call(M,E);return M.localCache[E]=JSON.stringify($),$})()}_remove(E){var D=()=>super._remove,M=this;return(0,_.Z)(function*(){yield D().call(M,E),delete M.localCache[E]})()}}return b.type="LOCAL",b})(),Fa=(()=>{class b extends ka{constructor(){super(window.sessionStorage,"SESSION")}_addListener(E,D){}_removeListener(E,D){}}return b.type="SESSION",b})();let Th=(()=>{class b{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const D=this.receivers.find($=>$.isListeningto(E));if(D)return D;const M=new b(E);return this.receivers.push(M),M}isListeningto(E){return this.eventTarget===E}handleEvent(E){var D=this;return(0,_.Z)(function*(){const M=E,{eventId:$,eventType:de,data:Le}=M.data,rt=D.handlersMap[de];if(!(null==rt?void 0:rt.size))return;M.ports[0].postMessage({status:"ack",eventId:$,eventType:de});const yt=Array.from(rt).map(function(){var Kn=(0,_.Z)(function*(ws){return ws(M.origin,Le)});return function(ws){return Kn.apply(this,arguments)}}()),Pt=yield function(b){return Promise.all(b.map(function(){var v=(0,_.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(D){return{fulfilled:!1,reason:D}}});return function(E){return v.apply(this,arguments)}}()))}(yt);M.ports[0].postMessage({status:"done",eventId:$,eventType:de,response:Pt})})()}_subscribe(E,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(D)}_unsubscribe(E,D){this.handlersMap[E]&&D&&this.handlersMap[E].delete(D),(!D||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Mr(b="",v=10){let E="";for(let D=0;D<v;D++)E+=Math.floor(10*Math.random());return b+E}class Pc{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,E,D=50){var M=this;return(0,_.Z)(function*(){const $="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!$)throw new Error("connection_unavailable");let de,Le;return new Promise((rt,yt)=>{const Pt=Mr("",20);$.port1.start();const Kn=setTimeout(()=>{yt(new Error("unsupported_event"))},D);Le={messageChannel:$,onMessage(ws){const vo=ws;if(vo.data.eventId===Pt)switch(vo.data.status){case"ack":clearTimeout(Kn),de=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(de),rt(vo.data.response);break;default:clearTimeout(Kn),clearTimeout(de),yt(new Error("invalid_response"))}}},M.handlers.add(Le),$.port1.addEventListener("message",Le.onMessage),M.target.postMessage({eventType:v,eventId:Pt,data:E},[$.port2])}).finally(()=>{Le&&M.removeMessageHandler(Le)})})()}}function Wn(){return window}function Pu(){return void 0!==Wn().WorkerGlobalScope&&"function"==typeof Wn().importScripts}function Zo(){return(Zo=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Tl="firebaseLocalStorageDb",La="firebaseLocalStorage",Va="fbase_key";class Ua{constructor(v){this.request=v}toPromise(){return new Promise((v,E)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function Us(b,v){return b.transaction([La],v?"readwrite":"readonly").objectStore(La)}function qn(){const b=indexedDB.open(Tl,1);return new Promise((v,E)=>{b.addEventListener("error",()=>{E(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(La,{keyPath:Va})}catch(M){E(M)}}),b.addEventListener("success",(0,_.Z)(function*(){const D=b.result;D.objectStoreNames.contains(La)?v(D):(D.close(),yield function(){const b=indexedDB.deleteDatabase(Tl);return new Ua(b).toPromise()}(),v(yield qn()))}))})}function Lc(b,v,E){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.Z)(function*(b,v,E){const D=Us(b,!0).put({[Va]:v,value:E});return new Ua(D).toPromise()})).apply(this,arguments)}function ja(){return(ja=(0,_.Z)(function*(b,v){const E=Us(b,!1).get(v),D=yield new Ua(E).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function _s(b,v){const E=Us(b,!0).delete(v);return new Ua(E).toPromise()}const yr=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,_.Z)(function*(){return E.db||(E.db=yield qn()),E.db})()}_withRetries(E){var D=this;return(0,_.Z)(function*(){let M=0;for(;;)try{const $=yield D._openDb();return yield E($)}catch($){if(M++>3)throw $;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,_.Z)(function*(){return Pu()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,_.Z)(function*(){E.receiver=Th._getInstance(Pu()?self:null),E.receiver._subscribe("keyChanged",function(){var D=(0,_.Z)(function*(M,$){return{keyProcessed:(yield E._poll()).includes($.key)}});return function(M,$){return D.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var D=(0,_.Z)(function*(M,$){return["keyChanged"]});return function(M,$){return D.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,_.Z)(function*(){var D,M;if(E.activeServiceWorker=yield function(){return Zo.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new Pc(E.activeServiceWorker);const $=yield E.sender._send("ping",{},800);!$||(null===(D=$[0])||void 0===D?void 0:D.fulfilled)&&(null===(M=$[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var D=this;return(0,_.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:E},D.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const E=yield qn();return yield Lc(E,Oc,"1"),yield _s(E,Oc),!0}catch(E){}return!1})()}_withPendingWrite(E){var D=this;return(0,_.Z)(function*(){D.pendingWrites++;try{yield E()}finally{D.pendingWrites--}})()}_set(E,D){var M=this;return(0,_.Z)(function*(){return M._withPendingWrite((0,_.Z)(function*(){return yield M._withRetries($=>Lc($,E,D)),M.localCache[E]=D,M.notifyServiceWorker(E)}))})()}_get(E){var D=this;return(0,_.Z)(function*(){const M=yield D._withRetries($=>function(b,v){return ja.apply(this,arguments)}($,E));return D.localCache[E]=M,M})()}_remove(E){var D=this;return(0,_.Z)(function*(){return D._withPendingWrite((0,_.Z)(function*(){return yield D._withRetries(M=>_s(M,E)),delete D.localCache[E],D.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,_.Z)(function*(){const D=yield E._withRetries(de=>{const Le=Us(de,!1).getAll();return new Ua(Le).toPromise()});if(!D)return[];if(0!==E.pendingWrites)return[];const M=[],$=new Set;for(const{fbase_key:de,value:Le}of D)$.add(de),JSON.stringify(E.localCache[de])!==JSON.stringify(Le)&&(E.notifyListeners(de,Le),M.push(de));for(const de of Object.keys(E.localCache))E.localCache[de]&&!$.has(de)&&(E.notifyListeners(de,null),M.push(de));return M})()}notifyListeners(E,D){this.localCache[E]=D;const M=this.listeners[E];if(M)for(const $ of Array.from(M))$(D)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(D)}_removeListener(E,D){this.listeners[E]&&(this.listeners[E].delete(D),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Yo(b,v){return mn(b,"POST","/v2/accounts/mfaSignIn:start",zt(b,v))}function Ha(){return(Ha=(0,_.Z)(function*(b){return(yield mn(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qo(b){return new Promise((v,E)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=v,D.onerror=M=>{const $=Be("internal-error");$.customData=M,E($)},D.type="text/javascript",D.charset="UTF-8",function(){var b,v;return null!==(v=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==v?v:document}().appendChild(D)})}function Yp(b){return`__${b}${Math.floor(1e6*Math.random())}`}const js=1e12;class iE{constructor(v){this.auth=v,this.counter=js,this._widgets=new Map}render(v,E){const D=this.counter;return this._widgets.set(D,new Qp(v,this.auth.name,E||{})),this.counter++,D}reset(v){var E;const D=v||js;null===(E=this._widgets.get(D))||void 0===E||E.delete(),this._widgets.delete(D)}getResponse(v){var E;return(null===(E=this._widgets.get(v||js))||void 0===E?void 0:E.getResponse())||""}execute(v){var E=this;return(0,_.Z)(function*(){var D;return null===(D=E._widgets.get(v||js))||void 0===D||D.execute(),""})()}}class Qp{constructor(v,E,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof v?document.getElementById(v):v;Ae(M,"argument-error",{appName:E}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const v=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<50;D++)v.push(E.charAt(Math.floor(Math.random()*E.length)));return v.join("")}();const{callback:v,"expired-callback":E}=this.params;if(v)try{v(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $s=Yp("rcb"),xh=new jt(3e4,6e4);class jc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wn().grecaptcha}load(v,E=""){return Ae((b=E).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),v,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(Wn().grecaptcha):new Promise((D,M)=>{const $=Wn().setTimeout(()=>{M(Be(v,"network-request-failed"))},xh.get());Wn()[$s]=()=>{Wn().clearTimeout($),delete Wn()[$s];const Le=Wn().grecaptcha;if(!Le)return void M(Be(v,"internal-error"));const rt=Le.render;Le.render=(yt,Pt)=>{const Kn=rt(yt,Pt);return this.counter++,Kn},this.hostLanguage=E,D(Le)},Qo(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:$s,render:"explicit",hl:E})}`).catch(()=>{clearTimeout($),M(Be(v,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){return!!Wn().grecaptcha&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fu{load(v){return(0,_.Z)(function*(){return new iE(v)})()}clearedOneInstance(){}}const Ga="recaptcha",Sl={theme:"light",type:"image"};class Hs{constructor(v,E=Object.assign({},Sl),D){this.parameters=E,this.type=Ga,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rn(D),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof v?document.getElementById(v):v;Ae(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fu:new jc,this.validateStartingState()}verify(){var v=this;return(0,_.Z)(function*(){v.assertNotDestroyed();const E=yield v.render(),D=v.getAssertedRecaptcha();return D.getResponse(E)||new Promise($=>{const de=Le=>{!Le||(v.tokenChangeListeners.delete(de),$(Le))};v.tokenChangeListeners.add(de),v.isInvisible&&D.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return E=>{if(this.tokenChangeListeners.forEach(D=>D(E)),"function"==typeof v)v(E);else if("string"==typeof v){const D=Wn()[v];"function"==typeof D&&D(E)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,_.Z)(function*(){if(yield v.init(),!v.widgetId){let E=v.container;if(!v.isInvisible){const D=document.createElement("div");E.appendChild(D),E=D}v.widgetId=v.getAssertedRecaptcha().render(E,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,_.Z)(function*(){Ae(vt()&&!Pu(),v.auth,"internal-error"),yield function(){let b=null;return new Promise(v=>{"complete"!==document.readyState?(b=()=>v(),window.addEventListener("load",b)):v()}).catch(v=>{throw b&&window.removeEventListener("load",b),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const E=yield function(b){return Ha.apply(this,arguments)}(v.auth);Ae(E,v.auth,"internal-error"),v.parameters.sitekey=E})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xp{constructor(v,E){this.verificationId=v,this.onConfirmation=E}confirm(v){const E=Da._fromVerification(this.verificationId,v);return this.onConfirmation(E)}}function l_(b,v,E){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,_.Z)(function*(b,v,E){const D=Rn(b),M=yield Al(D,v,(0,q.m9)(E));return new Xp(M,$=>Ru(D,$))})).apply(this,arguments)}function c_(b,v,E){return eg.apply(this,arguments)}function eg(){return(eg=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b);yield _r(!1,D,"phone");const M=yield Al(D.auth,v,(0,q.m9)(E));return new Xp(M,$=>ar(D,$))})).apply(this,arguments)}function zn(b,v,E){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b),M=yield Al(D.auth,v,(0,q.m9)(E));return new Xp(M,$=>hl(D,$))})).apply(this,arguments)}function Al(b,v,E){return $c.apply(this,arguments)}function $c(){return($c=(0,_.Z)(function*(b,v,E){var D;const M=yield E.verify();try{let $;if(Ae("string"==typeof M,b,"argument-error"),Ae(E.type===Ga,b,"argument-error"),$="string"==typeof v?{phoneNumber:v}:v,"session"in $){const de=$.session;if("phoneNumber"in $)return Ae("enroll"===de.type,b,"internal-error"),(yield Nt(b,{idToken:de.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Ae("signin"===de.type,b,"internal-error");const Le=(null===(D=$.multiFactorHint)||void 0===D?void 0:D.uid)||$.multiFactorUid;return Ae(Le,b,"missing-multi-factor-info"),(yield Yo(b,{mfaPendingCredential:de.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:de}=yield Zi(b,{phoneNumber:$.phoneNumber,recaptchaToken:M});return de}}finally{E._reset()}})).apply(this,arguments)}function tg(b,v){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,_.Z)(function*(b,v){yield Ho((0,q.m9)(b),v)})).apply(this,arguments)}let ng=(()=>{class b{constructor(E){this.providerId=b.PROVIDER_ID,this.auth=Rn(E)}verifyPhoneNumber(E,D){return Al(this.auth,E,(0,q.m9)(D))}static credential(E,D){return Da._fromVerification(E,D)}static credentialFromResult(E){return b.credentialFromTaggedObject(E)}static credentialFromError(E){return b.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:D,temporaryProof:M}=E;return D&&M?Da._fromTokenResponse(D,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Xo(b,v){return v?be(v):(Ae(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Mh extends an{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return ni(v,this._buildIdpRequest())}_linkToIdToken(v,E){return ni(v,this._buildIdpRequest(E))}_getReauthenticationResolver(v){return ni(v,this._buildIdpRequest())}_buildIdpRequest(v){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(E.idToken=v),E}}function Ph(b){return _h(b.auth,new Mh(b),b.bypassAuthState)}function Gc(b){const{auth:v,user:E}=b;return Ae(E,v,"internal-error"),Au(E,new Mh(b),b.bypassAuthState)}function kh(b){return ys.apply(this,arguments)}function ys(){return(ys=(0,_.Z)(function*(b){const{auth:v,user:E}=b;return Ae(E,v,"internal-error"),Ho(E,new Mh(b),b.bypassAuthState)})).apply(this,arguments)}class Fh{constructor(v,E,D,M,$=!1){this.auth=v,this.resolver=D,this.user=M,this.bypassAuthState=$,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var v=this;return new Promise(function(){var E=(0,_.Z)(function*(D,M){v.pendingPromise={resolve:D,reject:M};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch($){v.reject($)}});return function(D,M){return E.apply(this,arguments)}}())}onAuthEvent(v){var E=this;return(0,_.Z)(function*(){const{urlResponse:D,sessionId:M,postBody:$,tenantId:de,error:Le,type:rt}=v;if(Le)return void E.reject(Le);const yt={auth:E.auth,requestUri:D,sessionId:M,tenantId:de||void 0,postBody:$||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(rt)(yt))}catch(Pt){E.reject(Pt)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return Ph;case"linkViaPopup":case"linkViaRedirect":return kh;case"reauthViaPopup":case"reauthViaRedirect":return Gc;default:ie(this.auth,"internal-error")}}resolve(v){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pn=new jt(2e3,1e4);function Wa(b,v,E){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,_.Z)(function*(b,v,E){const D=Rn(b);ut(b,v,Ps);const M=Xo(D,E);return new Yi(D,"signInViaPopup",v,M).executeNotNull()})).apply(this,arguments)}function sE(b,v,E){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b);ut(D.auth,v,Ps);const M=Xo(D.auth,E);return new Yi(D.auth,"reauthViaPopup",v,M,D).executeNotNull()})).apply(this,arguments)}function vi(b,v,E){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b);ut(D.auth,v,Ps);const M=Xo(D.auth,E);return new Yi(D.auth,"linkViaPopup",v,M,D).executeNotNull()})).apply(this,arguments)}let Yi=(()=>{class b extends Fh{constructor(E,D,M,$,de){super(E,D,$,de),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var E=this;return(0,_.Z)(function*(){const D=yield E.execute();return Ae(D,E.auth,"internal-error"),D})()}onExecution(){var E=this;return(0,_.Z)(function*(){se(1===E.filter.length,"Popup operations only handle one event");const D=Mr();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],D),E.authWindow.associatedEvent=D,E.resolver._originValidation(E.auth).catch(M=>{E.reject(M)}),E.resolver._isIframeWebStorageSupported(E.auth,M=>{M||E.reject(Be(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const E=()=>{var D,M;this.pollId=(null===(M=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,pn.get())};E()}}return b.currentPopupAction=null,b})();const oi=new Map;class Vh extends Fh{constructor(v,E,D=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,D),this.eventId=null}execute(){var v=()=>super.execute,E=this;return(0,_.Z)(function*(){let D=oi.get(E.auth._key());if(!D){try{const $=(yield function(b,v){return Wc.apply(this,arguments)}(E.resolver,E.auth))?yield v().call(E):null;D=()=>Promise.resolve($)}catch(M){D=()=>Promise.reject(M)}oi.set(E.auth._key(),D)}return D()})()}onAuthEvent(v){var E=()=>super.onAuthEvent,D=this;return(0,_.Z)(function*(){if("signInViaRedirect"===v.type)return E().call(D,v);if("unknown"!==v.type){if(v.eventId){const M=yield D.auth._redirectUserForId(v.eventId);if(M)return D.user=M,E().call(D,v);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Wc(){return(Wc=(0,_.Z)(function*(b,v){const E=Rl(v),D="true"===(yield Pr(b)._get(E));return yield Pr(b)._remove(E),D})).apply(this,arguments)}function Fi(b,v){return rg.apply(this,arguments)}function rg(){return(rg=(0,_.Z)(function*(b,v){return Pr(b)._set(Rl(v),"true")})).apply(this,arguments)}function Uh(){oi.clear()}function Pr(b){return be(b._redirectPersistence)}function Rl(b){return oe("pendingRedirect",b.config.apiKey,b.name)}function Wr(b,v,E){return function(b,v,E){return S.apply(this,arguments)}(b,v,E)}function S(){return(S=(0,_.Z)(function*(b,v,E){const D=Rn(b);ut(b,v,Ps);const M=Xo(D,E);return yield Fi(M,D),M._openRedirect(D,v,"signInViaRedirect")})).apply(this,arguments)}function R(b,v,E){return function(b,v,E){return G.apply(this,arguments)}(b,v,E)}function G(){return(G=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b);ut(D.auth,v,Ps);const M=Xo(D.auth,E);yield Fi(M,D.auth);const $=yield Rr(D);return M._openRedirect(D.auth,v,"reauthViaRedirect",$)})).apply(this,arguments)}function te(b,v,E){return function(b,v,E){return Ne.apply(this,arguments)}(b,v,E)}function Ne(){return(Ne=(0,_.Z)(function*(b,v,E){const D=(0,q.m9)(b);ut(D.auth,v,Ps);const M=Xo(D.auth,E);yield _r(!1,D,v.providerId),yield Fi(M,D.auth);const $=yield Rr(D);return M._openRedirect(D.auth,v,"linkViaRedirect",$)})).apply(this,arguments)}function Ke(b,v){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,_.Z)(function*(b,v){return yield Rn(b)._initializationPromise,bt(b,v,!1)})).apply(this,arguments)}function bt(b,v){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,_.Z)(function*(b,v,E=!1){const D=Rn(b),M=Xo(D,v),de=yield new Vh(D,M,E).execute();return de&&!E&&(delete de.user._redirectEventId,yield D._persistUserIfCurrent(de.user),yield D._setRedirectUser(null,v)),de})).apply(this,arguments)}function Rr(b){return cr.apply(this,arguments)}function cr(){return(cr=(0,_.Z)(function*(b){const v=Mr(`${b.uid}:::`);return b._redirectEventId=v,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),v})).apply(this,arguments)}class ta{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let E=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(v,D)&&(E=!0,this.sendToConsumer(v,D),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return go(b);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=v,E=!0)),E}sendToConsumer(v,E){var D;if(v.error&&!go(v)){const M=(null===(D=v.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";E.onError(Be(this.auth,M))}else E.onAuthEvent(v)}isEventForConsumer(v,E){const D=null===E.eventId||!!v.eventId&&v.eventId===E.eventId;return E.filter.includes(v.type)&&D}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qa(v))}saveEventToCache(v){this.cachedEventUids.add(qa(v)),this.lastProcessedEventTime=Date.now()}}function qa(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(v=>v).join("-")}function go({type:b,error:v}){return"unknown"===b&&"auth/no-auth-event"===(null==v?void 0:v.code)}function Es(b){return mo.apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(b,v={}){return mn(b,"GET","/v1/projects",v)})).apply(this,arguments)}const na=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pb=/^https?/;function Re(){return(Re=(0,_.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:v}=yield Es(b);for(const E of v)try{if(za(E))return}catch(D){}ie(b,"unauthorized-domain")})).apply(this,arguments)}function za(b){const v=pe(),{protocol:E,hostname:D}=new URL(v);if(b.startsWith("chrome-extension://")){const de=new URL(b);return""===de.hostname&&""===D?"chrome-extension:"===E&&b.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===E&&de.hostname===D}if(!Pb.test(E))return!1;if(na.test(b))return D===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(D)}const wi=new jt(3e4,6e4);function ai(){const b=Wn().___jsl;if(null==b?void 0:b.H)for(const v of Object.keys(b.H))if(b.H[v].r=b.H[v].r||[],b.H[v].L=b.H[v].L||[],b.H[v].r=[...b.H[v].L],b.CP)for(let E=0;E<b.CP.length;E++)b.CP[E]=null}let qc=null;function _o(b){return qc=qc||function(b){return new Promise((v,E)=>{var D,M,$;function de(){ai(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{ai(),E(Be(b,"network-request-failed"))},timeout:wi.get()})}if(null===(M=null===(D=Wn().gapi)||void 0===D?void 0:D.iframes)||void 0===M?void 0:M.Iframe)v(gapi.iframes.getContext());else{if(!(null===($=Wn().gapi)||void 0===$?void 0:$.load)){const Le=Yp("iframefcb");return Wn()[Le]=()=>{gapi.load?de():E(Be(b,"network-request-failed"))},Qo(`https://apis.google.com/js/api.js?onload=${Le}`)}de()}}).catch(v=>{throw qc=null,v})}(b),qc}const it=new jt(5e3,15e3),Vu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},yo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zc(b){const v=b.config;Ae(v.authDomain,b,"auth-domain-config-required");const E=v.emulator?pr(v,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,D={apiKey:v.apiKey,appName:b.name,v:F.SDK_VERSION},M=yo.get(b.config.apiHost);M&&(D.eid=M);const $=b._getFrameworks();return $.length&&(D.fw=$.join(",")),`${E}?${(0,q.xO)(D).slice(1)}`}function Uu(){return(Uu=(0,_.Z)(function*(b){const v=yield _o(b),E=Wn().gapi;return Ae(E,b,"internal-error"),v.open({where:document.body,url:zc(b),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vu,dontclear:!0},D=>new Promise(function(){var M=(0,_.Z)(function*($,de){yield D.restyle({setHideOnLeave:!1});const Le=Be(b,"network-request-failed"),rt=Wn().setTimeout(()=>{de(Le)},it.get());function yt(){Wn().clearTimeout(rt),$(D)}D.ping(yt).then(yt,()=>{de(Le)})});return function($,de){return M.apply(this,arguments)}}()))})).apply(this,arguments)}const Bh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class er{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(v){}}}function ig(b,v,E,D,M,$){Ae(b.config.authDomain,b,"auth-domain-config-required"),Ae(b.config.apiKey,b,"invalid-api-key");const de={apiKey:b.config.apiKey,appName:b.name,authType:E,redirectUrl:D,v:F.SDK_VERSION,eventId:M};if(v instanceof Ps){v.setDefaultLanguage(b.languageCode),de.providerId=v.providerId||"",(0,q.xb)(v.getCustomParameters())||(de.customParameters=JSON.stringify(v.getCustomParameters()));for(const[rt,yt]of Object.entries($||{}))de[rt]=yt}if(v instanceof Tu){const rt=v.getScopes().filter(yt=>""!==yt);rt.length>0&&(de.scopes=rt.join(","))}b.tenantId&&(de.tid=b.tenantId);const Le=de;for(const rt of Object.keys(Le))void 0===Le[rt]&&delete Le[rt];return`${function({config:b}){return b.emulator?pr(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,q.xO)(Le).slice(1)}`}const jh="webStorageSupport",Ya=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fa,this._completeRedirectFn=bt}_openPopup(v,E,D,M){var $=this;return(0,_.Z)(function*(){var de;se(null===(de=$.eventManagers[v._key()])||void 0===de?void 0:de.manager,"_initialize() not called before _openPopup()");const Le=ig(v,E,D,pe(),M);return function(b,v,E,D=500,M=600){const $=Math.max((window.screen.availHeight-M)/2,0).toString(),de=Math.max((window.screen.availWidth-D)/2,0).toString();let Le="";const rt=Object.assign(Object.assign({},Bh),{width:D.toString(),height:M.toString(),top:$,left:de}),yt=(0,q.z$)().toLowerCase();E&&(Le=_t(yt)?"_blank":E),ke(yt)&&(v=v||"http://localhost",rt.scrollbars="yes");const Pt=Object.entries(rt).reduce((ws,[vo,Hh])=>`${ws}${vo}=${Hh},`,"");if(function(b=(0,q.z$)()){var v;return On(b)&&!!(null===(v=window.navigator)||void 0===v?void 0:v.standalone)}(yt)&&"_self"!==Le)return function(b,v){const E=document.createElement("a");E.href=b,E.target=v;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(D)}(v||"",Le),new er(null);const Kn=window.open(v||"",Le,Pt);Ae(Kn,b,"popup-blocked");try{Kn.focus()}catch(ws){}return new er(Kn)}(v,Le,Mr())})()}_openRedirect(v,E,D,M){var $=this;return(0,_.Z)(function*(){return yield $._originValidation(v),b=ig(v,E,D,pe(),M),Wn().location.href=b,new Promise(()=>{});var b})()}_initialize(v){const E=v._key();if(this.eventManagers[E]){const{manager:M,promise:$}=this.eventManagers[E];return M?Promise.resolve(M):(se($,"If manager is not set, promise should be"),$)}const D=this.initAndGetManager(v);return this.eventManagers[E]={promise:D},D}initAndGetManager(v){var E=this;return(0,_.Z)(function*(){const D=yield function(b){return Uu.apply(this,arguments)}(v),M=new ta(v);return D.register("authEvent",$=>(Ae(null==$?void 0:$.authEvent,v,"invalid-auth-event"),{status:M.onEvent($.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[v._key()]={manager:M},E.iframes[v._key()]=D,M})()}_isIframeWebStorageSupported(v,E){this.iframes[v._key()].send(jh,{type:jh},M=>{var $;const de=null===($=null==M?void 0:M[0])||void 0===$?void 0:$[jh];void 0!==de&&E(!!de),ie(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const E=v._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function(b){return Re.apply(this,arguments)}(v)),this.originValidationPromises[E]}get _shouldInitProactively(){return sl()||ze()||On()}};class tr extends class{constructor(v){this.factorId=v}_process(v,E,D){switch(E.type){case"enroll":return this._finalizeEnroll(v,E.credential,D);case"signin":return this._finalizeSignIn(v,E.credential);default:return Ye("unexpected MultiFactorSessionType")}}}{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new tr(v)}_finalizeEnroll(v,E,D){return function(b,v){return mn(b,"POST","/v2/accounts/mfaEnrollment:finalize",zt(b,v))}(v,{idToken:E,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,E){return function(b,v){return mn(b,"POST","/v2/accounts/mfaSignIn:finalize",zt(b,v))}(v,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let og=(()=>{class b{constructor(){}static assertion(E){return tr._fromCredential(E)}}return b.FACTOR_ID="phone",b})();var b;class Kc{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var E=this;return(0,_.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const E=this.auth.onIdTokenChanged(D=>{var M;v((null===(M=D)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,E),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const E=this.internalListeners.get(v);!E||(this.internalListeners.delete(v),E(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}b="Browser",(0,F._registerComponent)(new Ce.wA("auth",(v,{options:E})=>{const D=v.getProvider("app").getImmediate(),{apiKey:M,authDomain:$}=D.options;return(de=>{Ae(M&&!M.includes(":"),"invalid-api-key",{appName:de.name}),Ae(!(null==$?void 0:$.includes(":")),"argument-error",{appName:de.name});const Le={apiKey:M,authDomain:$,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pc(b)},rt=new sr(de,Le);return function(b,v){const E=(null==v?void 0:v.persistence)||[],D=(Array.isArray(E)?E:[E]).map(be);(null==v?void 0:v.errorMap)&&b._updateErrorMap(v.errorMap),b._initializeWithPersistence(D,null==v?void 0:v.popupRedirectResolver)}(rt,E),rt})(D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,E,D)=>{v.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new Ce.wA("auth-internal",v=>{const E=Rn(v.getProvider("auth").getImmediate());return new Kc(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)("@firebase/auth","0.18.2",void 0)},6034:(tt,De,U)=>{"use strict";U.d(De,{wA:()=>F,H0:()=>xe,zt:()=>ce});var _=U(4762),q=U(3854),F=function(){function ee(V,H,ne){this.name=V,this.instanceFactory=H,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ee.prototype.setInstantiationMode=function(V){return this.instantiationMode=V,this},ee.prototype.setMultipleInstances=function(V){return this.multipleInstances=V,this},ee.prototype.setServiceProps=function(V){return this.serviceProps=V,this},ee.prototype.setInstanceCreatedCallback=function(V){return this.onInstanceCreated=V,this},ee}(),he="[DEFAULT]",ce=function(){function ee(V,H){this.name=V,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ee.prototype.get=function(V){var H=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(H)){var ne=new q.BH;if(this.instancesDeferred.set(H,ne),this.isInitialized(H)||this.shouldAutoInitialize())try{var me=this.getOrInitializeService({instanceIdentifier:H});me&&ne.resolve(me)}catch(ye){}}return this.instancesDeferred.get(H).promise},ee.prototype.getImmediate=function(V){var H,ne=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),me=null!==(H=null==V?void 0:V.optional)&&void 0!==H&&H;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(me)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(ye){if(me)return null;throw ye}},ee.prototype.getComponent=function(){return this.component},ee.prototype.setComponent=function(V){var H,ne;if(V.name!==this.name)throw Error("Mismatching Component "+V.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=V,this.shouldAutoInitialize()){if(function(ee){return"EAGER"===ee.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:he})}catch(ie){}try{for(var me=(0,_.XA)(this.instancesDeferred.entries()),ye=me.next();!ye.done;ye=me.next()){var Fe=(0,_.CR)(ye.value,2),ve=Fe[1],_e=this.normalizeInstanceIdentifier(Fe[0]);try{var fe=this.getOrInitializeService({instanceIdentifier:_e});ve.resolve(fe)}catch(ie){}}}catch(ie){H={error:ie}}finally{try{ye&&!ye.done&&(ne=me.return)&&ne.call(me)}finally{if(H)throw H.error}}}},ee.prototype.clearInstance=function(V){void 0===V&&(V=he),this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)},ee.prototype.delete=function(){return(0,_.mG)(this,void 0,void 0,function(){var V;return(0,_.Jh)(this,function(H){switch(H.label){case 0:return V=Array.from(this.instances.values()),[4,Promise.all((0,_.ev)((0,_.ev)([],(0,_.CR)(V.filter(function(ne){return"INTERNAL"in ne}).map(function(ne){return ne.INTERNAL.delete()}))),(0,_.CR)(V.filter(function(ne){return"_delete"in ne}).map(function(ne){return ne._delete()}))))];case 1:return H.sent(),[2]}})})},ee.prototype.isComponentSet=function(){return null!=this.component},ee.prototype.isInitialized=function(V){return void 0===V&&(V=he),this.instances.has(V)},ee.prototype.getOptions=function(V){return void 0===V&&(V=he),this.instancesOptions.get(V)||{}},ee.prototype.initialize=function(V){var H,ne;void 0===V&&(V={});var me=V.options,ye=void 0===me?{}:me,Fe=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(Fe))throw Error(this.name+"("+Fe+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var le=this.getOrInitializeService({instanceIdentifier:Fe,options:ye});try{for(var ve=(0,_.XA)(this.instancesDeferred.entries()),_e=ve.next();!_e.done;_e=ve.next()){var fe=(0,_.CR)(_e.value,2),Be=fe[1];Fe===this.normalizeInstanceIdentifier(fe[0])&&Be.resolve(le)}}catch(ut){H={error:ut}}finally{try{_e&&!_e.done&&(ne=ve.return)&&ne.call(ve)}finally{if(H)throw H.error}}return le},ee.prototype.onInit=function(V,H){var ne,me=this.normalizeInstanceIdentifier(H),ye=null!==(ne=this.onInitCallbacks.get(me))&&void 0!==ne?ne:new Set;ye.add(V),this.onInitCallbacks.set(me,ye);var Fe=this.instances.get(me);return Fe&&V(Fe,me),function(){ye.delete(V)}},ee.prototype.invokeOnInitCallbacks=function(V,H){var ne,me,ye=this.onInitCallbacks.get(H);if(ye)try{for(var Fe=(0,_.XA)(ye),le=Fe.next();!le.done;le=Fe.next()){var ve=le.value;try{ve(V,H)}catch(_e){}}}catch(_e){ne={error:_e}}finally{try{le&&!le.done&&(me=Fe.return)&&me.call(Fe)}finally{if(ne)throw ne.error}}},ee.prototype.getOrInitializeService=function(V){var H=V.instanceIdentifier,ne=V.options,me=void 0===ne?{}:ne,ye=this.instances.get(H);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:Ce(H),options:me}),this.instances.set(H,ye),this.instancesOptions.set(H,me),this.invokeOnInitCallbacks(ye,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ye)}catch(Fe){}return ye||null},ee.prototype.normalizeInstanceIdentifier=function(V){return void 0===V&&(V=he),this.component?this.component.multipleInstances?V:he:V},ee.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ee}();function Ce(ee){return ee===he?void 0:ee}var xe=function(){function ee(V){this.name=V,this.providers=new Map}return ee.prototype.addComponent=function(V){var H=this.getProvider(V.name);if(H.isComponentSet())throw new Error("Component "+V.name+" has already been registered with "+this.name);H.setComponent(V)},ee.prototype.addOrOverwriteComponent=function(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)},ee.prototype.getProvider=function(V){if(this.providers.has(V))return this.providers.get(V);var H=new ce(V,this);return this.providers.set(V,H),H},ee.prototype.getProviders=function(){return Array.from(this.providers.values())},ee}()},5601:(tt,De,U)=>{"use strict";U.d(De,{in:()=>q,Yd:()=>we,Ub:()=>xe,Am:()=>ee});const _=[];var q=(()=>{return(V=q||(q={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",q;var V})();const F={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},he=q.INFO,ce={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Ce=(V,H,...ne)=>{if(H<V.logLevel)return;const me=(new Date).toISOString(),ye=ce[H];if(!ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[ye](`[${me}]  ${V.name}:`,...ne)};class we{constructor(H){this.name=H,this._logLevel=he,this._logHandler=Ce,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...H),this._logHandler(this,q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...H),this._logHandler(this,q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,q.INFO,...H),this._logHandler(this,q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,q.WARN,...H),this._logHandler(this,q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...H),this._logHandler(this,q.ERROR,...H)}}function xe(V){_.forEach(H=>{H.setLogLevel(V)})}function ee(V,H){for(const ne of _){let me=null;H&&H.level&&(me=F[H.level]),ne.userLogHandler=null===V?null:(ye,Fe,...le)=>{const ve=le.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch(fe){return null}}).filter(_e=>_e).join(" ");Fe>=(null!=me?me:ye.logLevel)&&V({level:q[Fe].toLowerCase(),message:ve,args:le,type:ye.name})}}}},3854:(tt,De,U)=>{"use strict";U.d(De,{BH:()=>me,LL:()=>pe,ZR:()=>$e,gQ:()=>gr,zI:()=>Te,hu:()=>q,g5:()=>F,US:()=>Ce,tV:()=>ee,h$:()=>we,$s:()=>Bn,r3:()=>zt,Sg:()=>ye,ne:()=>Xr,p$:()=>V,vZ:()=>Dt,ZB:()=>H,gK:()=>ot,pd:()=>Cn,m9:()=>io,z$:()=>Fe,GJ:()=>Dr,jU:()=>_e,ru:()=>fe,d:()=>Be,xb:()=>Vn,w1:()=>pt,hl:()=>Ye,uI:()=>le,UG:()=>ve,Yr:()=>An,b$:()=>ie,G6:()=>Ae,Mn:()=>ut,w9:()=>Tr,cI:()=>Ln,UI:()=>Nn,xO:()=>to,zd:()=>no,DV:()=>mn,ug:()=>$t,dS:()=>et,Pz:()=>dt,Dv:()=>mi,Wj:()=>Gt,lb:()=>un,eu:()=>se});const q=function(K,Y){if(!K)throw F(Y)},F=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},he=function(K){const Y=[];let J=0;for(let Pe=0;Pe<K.length;Pe++){let ge=K.charCodeAt(Pe);ge<128?Y[J++]=ge:ge<2048?(Y[J++]=ge>>6|192,Y[J++]=63&ge|128):55296==(64512&ge)&&Pe+1<K.length&&56320==(64512&K.charCodeAt(Pe+1))?(ge=65536+((1023&ge)<<10)+(1023&K.charCodeAt(++Pe)),Y[J++]=ge>>18|240,Y[J++]=ge>>12&63|128,Y[J++]=ge>>6&63|128,Y[J++]=63&ge|128):(Y[J++]=ge>>12|224,Y[J++]=ge>>6&63|128,Y[J++]=63&ge|128)}return Y},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,Y){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,Pe=[];for(let ge=0;ge<K.length;ge+=3){const We=K[ge],gt=ge+1<K.length,on=gt?K[ge+1]:0,hn=ge+2<K.length,wt=hn?K[ge+2]:0;let Z=(15&on)<<2|wt>>6,Q=63&wt;hn||(Q=64,gt||(Z=64)),Pe.push(J[We>>2],J[(3&We)<<4|on>>4],J[Z],J[Q])}return Pe.join("")},encodeString(K,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(K):this.encodeByteArray(he(K),Y)},decodeString(K,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(K):function(K){const Y=[];let J=0,Pe=0;for(;J<K.length;){const ge=K[J++];if(ge<128)Y[Pe++]=String.fromCharCode(ge);else if(ge>191&&ge<224){const We=K[J++];Y[Pe++]=String.fromCharCode((31&ge)<<6|63&We)}else if(ge>239&&ge<365){const hn=((7&ge)<<18|(63&K[J++])<<12|(63&K[J++])<<6|63&K[J++])-65536;Y[Pe++]=String.fromCharCode(55296+(hn>>10)),Y[Pe++]=String.fromCharCode(56320+(1023&hn))}else{const We=K[J++],gt=K[J++];Y[Pe++]=String.fromCharCode((15&ge)<<12|(63&We)<<6|63&gt)}}return Y.join("")}(this.decodeStringToByteArray(K,Y))},decodeStringToByteArray(K,Y){this.init_();const J=Y?this.charToByteMapWebSafe_:this.charToByteMap_,Pe=[];for(let ge=0;ge<K.length;){const We=J[K.charAt(ge++)],on=ge<K.length?J[K.charAt(ge)]:0;++ge;const wt=ge<K.length?J[K.charAt(ge)]:64;++ge;const oe=ge<K.length?J[K.charAt(ge)]:64;if(++ge,null==We||null==on||null==wt||null==oe)throw Error();Pe.push(We<<2|on>>4),64!==wt&&(Pe.push(on<<4&240|wt>>2),64!==oe&&Pe.push(wt<<6&192|oe))}return Pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},we=function(K){const Y=he(K);return Ce.encodeByteArray(Y,!0)},xe=function(K){return we(K).replace(/\./g,"")},ee=function(K){try{return Ce.decodeString(K,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function V(K){return H(void 0,K)}function H(K,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return Y}for(const J in Y)!Y.hasOwnProperty(J)||!ne(J)||(K[J]=H(K[J],Y[J]));return K}function ne(K){return"__proto__"!==K}class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,J)=>{this.resolve=Y,this.reject=J})}wrapCallback(Y){return(J,Pe)=>{J?this.reject(J):this.resolve(Pe),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(J):Y(J,Pe))}}}function ye(K,Y){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Pe=Y||"demo-project",ge=K.iat||0,We=K.sub||K.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${Pe}`,aud:Pe,iat:ge,exp:ge+3600,auth_time:ge,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},K);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(gt)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function _e(){return"object"==typeof self&&self.self===self}function fe(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Be(){return Fe().indexOf("Electron/")>=0}function pt(){const K=Fe();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function ut(){return Fe().indexOf("MSAppHost/")>=0}function An(){return!1}function Ae(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){return"object"==typeof indexedDB}function se(){return new Promise((K,Y)=>{try{let J=!0;const Pe="validate-browser-context-for-indexeddb-analytics-module",ge=self.indexedDB.open(Pe);ge.onsuccess=()=>{ge.result.close(),J||self.indexedDB.deleteDatabase(Pe),K(!0)},ge.onupgradeneeded=()=>{J=!1},ge.onerror=()=>{var We;Y((null===(We=ge.error)||void 0===We?void 0:We.message)||"")}}catch(J){Y(J)}})}function Te(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class $e extends Error{constructor(Y,J,Pe){super(J),this.code=Y,this.customData=Pe,this.name="FirebaseError",Object.setPrototypeOf(this,$e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(Y,J,Pe){this.service=Y,this.serviceName=J,this.errors=Pe}create(Y,...J){const Pe=J[0]||{},ge=`${this.service}/${Y}`,We=this.errors[Y],gt=We?function(K,Y){return K.replace(rn,(J,Pe)=>{const ge=Y[Pe];return null!=ge?String(ge):`<${Pe}?>`})}(We,Pe):"Error";return new $e(ge,`${this.serviceName}: ${gt} (${ge}).`,Pe)}}const rn=/\{\$([^}]+)}/g;function Ln(K){return JSON.parse(K)}function dt(K){return JSON.stringify(K)}const jt=function(K){let Y={},J={},Pe={},ge="";try{const We=K.split(".");Y=Ln(ee(We[0])||""),J=Ln(ee(We[1])||""),ge=We[2],Pe=J.d||{},delete J.d}catch(We){}return{header:Y,claims:J,data:Pe,signature:ge}},Tr=function(K){const J=jt(K).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Dr=function(K){const Y=jt(K).claims;return"object"==typeof Y&&!0===Y.admin};function zt(K,Y){return Object.prototype.hasOwnProperty.call(K,Y)}function mn(K,Y){if(Object.prototype.hasOwnProperty.call(K,Y))return K[Y]}function Vn(K){for(const Y in K)if(Object.prototype.hasOwnProperty.call(K,Y))return!1;return!0}function Nn(K,Y,J){const Pe={};for(const ge in K)Object.prototype.hasOwnProperty.call(K,ge)&&(Pe[ge]=Y.call(J,K[ge],ge,K));return Pe}function Dt(K,Y){if(K===Y)return!0;const J=Object.keys(K),Pe=Object.keys(Y);for(const ge of J){if(!Pe.includes(ge))return!1;const We=K[ge],gt=Y[ge];if(Hr(We)&&Hr(gt)){if(!Dt(We,gt))return!1}else if(We!==gt)return!1}for(const ge of Pe)if(!J.includes(ge))return!1;return!0}function Hr(K){return null!==K&&"object"==typeof K}function to(K){const Y=[];for(const[J,Pe]of Object.entries(K))Array.isArray(Pe)?Pe.forEach(ge=>{Y.push(encodeURIComponent(J)+"="+encodeURIComponent(ge))}):Y.push(encodeURIComponent(J)+"="+encodeURIComponent(Pe));return Y.length?"&"+Y.join("&"):""}function no(K){const Y={};return K.replace(/^\?/,"").split("&").forEach(Pe=>{if(Pe){const[ge,We]=Pe.split("=");Y[decodeURIComponent(ge)]=decodeURIComponent(We)}}),Y}function Cn(K){const Y=K.indexOf("?");if(!Y)return"";const J=K.indexOf("#",Y);return K.substring(Y,J>0?J:void 0)}class gr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,J){J||(J=0);const Pe=this.W_;if("string"==typeof Y)for(let oe=0;oe<16;oe++)Pe[oe]=Y.charCodeAt(J)<<24|Y.charCodeAt(J+1)<<16|Y.charCodeAt(J+2)<<8|Y.charCodeAt(J+3),J+=4;else for(let oe=0;oe<16;oe++)Pe[oe]=Y[J]<<24|Y[J+1]<<16|Y[J+2]<<8|Y[J+3],J+=4;for(let oe=16;oe<80;oe++){const Z=Pe[oe-3]^Pe[oe-8]^Pe[oe-14]^Pe[oe-16];Pe[oe]=4294967295&(Z<<1|Z>>>31)}let wt,Xn,ge=this.chain_[0],We=this.chain_[1],gt=this.chain_[2],on=this.chain_[3],hn=this.chain_[4];for(let oe=0;oe<80;oe++){oe<40?oe<20?(wt=on^We&(gt^on),Xn=1518500249):(wt=We^gt^on,Xn=1859775393):oe<60?(wt=We&gt|on&(We|gt),Xn=2400959708):(wt=We^gt^on,Xn=3395469782);const Z=(ge<<5|ge>>>27)+wt+hn+Xn+Pe[oe]&4294967295;hn=on,on=gt,gt=4294967295&(We<<30|We>>>2),We=ge,ge=Z}this.chain_[0]=this.chain_[0]+ge&4294967295,this.chain_[1]=this.chain_[1]+We&4294967295,this.chain_[2]=this.chain_[2]+gt&4294967295,this.chain_[3]=this.chain_[3]+on&4294967295,this.chain_[4]=this.chain_[4]+hn&4294967295}update(Y,J){if(null==Y)return;void 0===J&&(J=Y.length);const Pe=J-this.blockSize;let ge=0;const We=this.buf_;let gt=this.inbuf_;for(;ge<J;){if(0===gt)for(;ge<=Pe;)this.compress_(Y,ge),ge+=this.blockSize;if("string"==typeof Y){for(;ge<J;)if(We[gt]=Y.charCodeAt(ge),++gt,++ge,gt===this.blockSize){this.compress_(We),gt=0;break}}else for(;ge<J;)if(We[gt]=Y[ge],++gt,++ge,gt===this.blockSize){this.compress_(We),gt=0;break}}this.inbuf_=gt,this.total_+=J}digest(){const Y=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ge=this.blockSize-1;ge>=56;ge--)this.buf_[ge]=255&J,J/=256;this.compress_(this.buf_);let Pe=0;for(let ge=0;ge<5;ge++)for(let We=24;We>=0;We-=8)Y[Pe]=this.chain_[ge]>>We&255,++Pe;return Y}}function Xr(K,Y){const J=new Un(K,Y);return J.subscribe.bind(J)}class Un{constructor(Y,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{Y(this)}).catch(Pe=>{this.error(Pe)})}next(Y){this.forEachObserver(J=>{J.next(Y)})}error(Y){this.forEachObserver(J=>{J.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,J,Pe){let ge;if(void 0===Y&&void 0===J&&void 0===Pe)throw new Error("Missing Observer.");ge=function(K,Y){if("object"!=typeof K||null===K)return!1;for(const J of["next","error","complete"])if(J in K&&"function"==typeof K[J])return!0;return!1}(Y)?Y:{next:Y,error:J,complete:Pe},void 0===ge.next&&(ge.next=Sr),void 0===ge.error&&(ge.error=Sr),void 0===ge.complete&&(ge.complete=Sr);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ge.error(this.finalError):ge.complete()}catch(gt){}}),this.observers.push(ge),We}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,Y)}sendOne(Y,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{J(this.observers[Y])}catch(Pe){"undefined"!=typeof console&&console.error&&console.error(Pe)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sr(){}const mi=function(K,Y,J,Pe){let ge;if(Pe<Y?ge="at least "+Y:Pe>J&&(ge=0===J?"none":"no more than "+J),ge)throw new Error(K+" failed: Was called with "+Pe+(1===Pe?" argument.":" arguments.")+" Expects "+ge+".")};function ot(K,Y){return`${K} failed: ${Y} argument `}function Gt(K,Y,J,Pe){if((!Pe||J)&&"function"!=typeof J)throw new Error(ot(K,Y)+"must be a valid function.")}function un(K,Y,J,Pe){if((!Pe||J)&&("object"!=typeof J||null===J))throw new Error(ot(K,Y)+"must be a valid context object.")}const et=function(K){const Y=[];let J=0;for(let Pe=0;Pe<K.length;Pe++){let ge=K.charCodeAt(Pe);if(ge>=55296&&ge<=56319){const We=ge-55296;Pe++,q(Pe<K.length,"Surrogate pair missing trail surrogate."),ge=65536+(We<<10)+(K.charCodeAt(Pe)-56320)}ge<128?Y[J++]=ge:ge<2048?(Y[J++]=ge>>6|192,Y[J++]=63&ge|128):ge<65536?(Y[J++]=ge>>12|224,Y[J++]=ge>>6&63|128,Y[J++]=63&ge|128):(Y[J++]=ge>>18|240,Y[J++]=ge>>12&63|128,Y[J++]=ge>>6&63|128,Y[J++]=63&ge|128)}return Y},$t=function(K){let Y=0;for(let J=0;J<K.length;J++){const Pe=K.charCodeAt(J);Pe<128?Y++:Pe<2048?Y+=2:Pe>=55296&&Pe<=56319?(Y+=4,J++):Y+=3}return Y};function Bn(K,Y=1e3,J=2){const Pe=Y*Math.pow(J,K),ge=Math.round(.5*Pe*(Math.random()-.5)*2);return Math.min(144e5,Pe+ge)}function io(K){return K&&K._delegate?K._delegate:K}},2329:(tt,De,U)=>{"use strict";U.d(De,{Mq:()=>_.getApp,C6:()=>_.getApps});var _=U(5452);(0,_.registerVersion)("firebase","9.1.2","app")},7841:(tt,De,U)=>{"use strict";U.d(De,{Z:()=>_.Z});var _=U(4486);_.Z.registerVersion("firebase","9.1.2","app-compat")},4828:(tt,De,U)=>{"use strict";U.r(De);var _=U(8239),q=U(4486),F=U(1093),he=U(3854),we=(U(5452),U(5601),U(6034));function xe(){return window}function H(){return(H=(0,_.Z)(function*(oe,Z,Q){var ke;const{BuildInfo:ze}=xe();(0,F.ap)(Z.sessionId,"AuthEvent did not contain a session ID");const _t=yield _e(Z.sessionId),Vt={};return(0,F.aq)()?Vt.ibi=ze.packageName:(0,F.ar)()?Vt.apn=ze.packageName:(0,F.as)(oe,"operation-not-supported-in-this-environment"),ze.displayName&&(Vt.appDisplayName=ze.displayName),Vt.sessionId=_t,(0,F.at)(oe,Q,Z.type,void 0,null!==(ke=Z.eventId)&&void 0!==ke?ke:void 0,Vt)})).apply(this,arguments)}function me(){return(me=(0,_.Z)(function*(oe){const{BuildInfo:Z}=xe(),Q={};(0,F.aq)()?Q.iosBundleId=Z.packageName:(0,F.ar)()?Q.androidPackageName=Z.packageName:(0,F.as)(oe,"operation-not-supported-in-this-environment"),yield(0,F.au)(oe,Q)})).apply(this,arguments)}function le(){return(le=(0,_.Z)(function*(oe,Z,Q){const{cordova:ke}=xe();let ze=()=>{};try{yield new Promise((_t,Vt)=>{let Bt=null;function $n(){var Ut;_t();const Ki=null===(Ut=ke.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof Ki&&Ki(),"function"==typeof(null==Q?void 0:Q.close)&&Q.close()}function Or(){Bt||(Bt=window.setTimeout(()=>{Vt((0,F.av)(oe,"redirect-cancelled-by-user"))},2e3))}function On(){"visible"===(null==document?void 0:document.visibilityState)&&Or()}Z.addPassiveListener($n),document.addEventListener("resume",Or,!1),(0,F.ar)()&&document.addEventListener("visibilitychange",On,!1),ze=()=>{Z.removePassiveListener($n),document.removeEventListener("resume",Or,!1),document.removeEventListener("visibilitychange",On,!1),Bt&&window.clearTimeout(Bt)}})}finally{ze()}})).apply(this,arguments)}function _e(oe){return fe.apply(this,arguments)}function fe(){return(fe=(0,_.Z)(function*(oe){const Z=ie(oe),Q=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(Q)).map(ze=>ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ie(oe){if((0,F.ap)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(oe);const Z=new ArrayBuffer(oe.length),Q=new Uint8Array(Z);for(let ke=0;ke<oe.length;ke++)Q[ke]=oe.charCodeAt(ke);return Q}class pt extends F.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(Q=>Q(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,_.Z)(function*(){yield Z.initPromise})()}}function Ae(oe){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,_.Z)(function*(oe){const Z=yield be()._get(Se(oe));return Z&&(yield be()._remove(Se(oe))),Z})).apply(this,arguments)}function Te(){const oe=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Q=0;Q<20;Q++){const ke=Math.floor(Math.random()*Z.length);oe.push(Z.charAt(ke))}return oe.join("")}function be(){return(0,F.ax)(F.b)}function Se(oe){return(0,F.ay)("authEvent",oe.config.apiKey,oe.name)}function vt(oe){if(!(null==oe?void 0:oe.includes("?")))return{};const[Z,...Q]=oe.split("?");return(0,he.zd)(Q.join("?"))}function jt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.av)("no-auth-event")}}function zt(){var oe;return(null===(oe=null==self?void 0:self.location)||void 0===oe?void 0:oe.protocol)||null}function Vn(oe=(0,he.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function no(){try{const oe=self.localStorage,Z=F.aG();if(oe)return oe.setItem(Z,"1"),oe.removeItem(Z),!function(oe=(0,he.z$)()){return(0,he.w1)()&&11===(null==document?void 0:document.documentMode)||function(oe=(0,he.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,he.hl)()}catch(oe){return Cn()&&(0,he.hl)()}return!1}function Cn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function gr(){return("http:"===zt()||"https:"===zt()||(0,he.ru)()||Vn())&&!((0,he.b$)()||(0,he.UG)())&&no()&&!Cn()}function Xr(){return Vn()&&"undefined"!=typeof document}function gi(){return(gi=(0,_.Z)(function*(){return!!Xr()&&new Promise(oe=>{const Z=setTimeout(()=>{oe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),oe(!0)})})})).apply(this,arguments)}const Ht={LOCAL:"local",NONE:"none",SESSION:"session"},Sr=F.aw,mi="persistence";function lt(oe){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,_.Z)(function*(oe){yield oe._initializationPromise;const Z=et(),Q=F.ay(mi,oe.config.apiKey,oe.name);(null==Z?void 0:Z.sessionStorage)&&Z.sessionStorage.setItem(Q,oe._getPersistence())})).apply(this,arguments)}function et(){return"undefined"!=typeof window?window:null}const $t=F.aw;class nt{constructor(){this.browserResolver=F.ax(F.k),this.cordovaResolver=F.ax(class{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aA}_initialize(Z){var Q=this;return(0,_.Z)(function*(){const ke=Z._key();let ze=Q.eventManagers.get(ke);return ze||(ze=new pt(Z),Q.eventManagers.set(ke,ze),Q.attachCallbackListeners(Z,ze)),ze})()}_openPopup(Z){(0,F.as)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,Q,ke,ze){var _t=this;return(0,_.Z)(function*(){!function(oe){var Z,Q,ke,ze,_t,Vt,Bt,$n,Or,On;const Ut=xe();(0,F.aw)("function"==typeof(null===(Z=null==Ut?void 0:Ut.universalLinks)||void 0===Z?void 0:Z.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aw)(void 0!==(null===(Q=null==Ut?void 0:Ut.BuildInfo)||void 0===Q?void 0:Q.packageName),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aw)("function"==typeof(null===(_t=null===(ze=null===(ke=null==Ut?void 0:Ut.cordova)||void 0===ke?void 0:ke.plugins)||void 0===ze?void 0:ze.browsertab)||void 0===_t?void 0:_t.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===($n=null===(Bt=null===(Vt=null==Ut?void 0:Ut.cordova)||void 0===Vt?void 0:Vt.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===$n?void 0:$n.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===(On=null===(Or=null==Ut?void 0:Ut.cordova)||void 0===Or?void 0:Or.InAppBrowser)||void 0===On?void 0:On.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const Vt=yield _t._initialize(Z);yield Vt.initialized(),Vt.resetRedirect(),(0,F.aB)(),yield _t._originValidation(Z);const Bt=function(oe,Z,Q=null){return{type:Z,eventId:Q,urlResponse:null,sessionId:Te(),postBody:null,tenantId:oe.tenantId,error:(0,F.av)(oe,"no-auth-event")}}(Z,ke,ze);yield function(oe,Z){return be()._set(Se(oe),Z)}(Z,Bt);const $n=yield function(oe,Z,Q){return H.apply(this,arguments)}(Z,Bt,Q),Or=yield function(oe){const{cordova:Z}=xe();return new Promise(Q=>{Z.plugins.browsertab.isAvailable(ke=>{let ze=null;ke?Z.plugins.browsertab.openUrl(oe):ze=Z.InAppBrowser.open(oe,(0,F.ao)()?"_blank":"_system","location=yes"),Q(ze)})})}($n);return function(oe,Z,Q){return le.apply(this,arguments)}(Z,Vt,Or)})()}_isIframeWebStorageSupported(Z,Q){throw new Error("Method not implemented.")}_originValidation(Z){const Q=Z._key();return this.originValidationPromises[Q]||(this.originValidationPromises[Q]=function(oe){return me.apply(this,arguments)}(Z)),this.originValidationPromises[Q]}attachCallbackListeners(Z,Q){const{universalLinks:ke,handleOpenURL:ze,BuildInfo:_t}=xe(),Vt=setTimeout((0,_.Z)(function*(){yield Ae(Z),Q.onEvent(jt())}),500),Bt=function(){var On=(0,_.Z)(function*(Ut){clearTimeout(Vt);const Ki=yield Ae(Z);let Vo=null;Ki&&(null==Ut?void 0:Ut.url)&&(Vo=function(oe,Z){var Q,ke;const ze=function(oe){const Z=vt(oe),Q=Z.link?decodeURIComponent(Z.link):void 0,ke=vt(Q).link,ze=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return vt(ze).link||ze||ke||Q||oe}(Z);if(ze.includes("/__/auth/callback")){const _t=vt(ze),Vt=_t.firebaseError?function(oe){try{return JSON.parse(oe)}catch(Z){return null}}(decodeURIComponent(_t.firebaseError)):null,Bt=null===(ke=null===(Q=null==Vt?void 0:Vt.code)||void 0===Q?void 0:Q.split("auth/"))||void 0===ke?void 0:ke[1],$n=Bt?(0,F.av)(Bt):null;return $n?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:$n,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:ze,postBody:null}}return null}(Ki,Ut.url)),Q.onEvent(Vo||jt())});return function(Ki){return On.apply(this,arguments)}}();void 0!==ke&&"function"==typeof ke.subscribe&&ke.subscribe(null,Bt);const $n=ze,Or=`${_t.packageName.toLowerCase()}://`;xe().handleOpenURL=function(){var On=(0,_.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(Or)&&Bt({url:Ut}),"function"==typeof $n)try{$n(Ut)}catch(Ki){console.error(Ki)}});return function(Ut){return On.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aA}_initialize(Z){var Q=this;return(0,_.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,Q,ke,ze){var _t=this;return(0,_.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openPopup(Z,Q,ke,ze)})()}_openRedirect(Z,Q,ke,ze){var _t=this;return(0,_.Z)(function*(){return yield _t.selectUnderlyingResolver(),_t.assertedUnderlyingResolver._openRedirect(Z,Q,ke,ze)})()}_isIframeWebStorageSupported(Z,Q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,Q)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Xr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $t(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,_.Z)(function*(){if(Z.underlyingResolver)return;const Q=yield function(){return gi.apply(this,arguments)}();Z.underlyingResolver=Q?Z.cordovaResolver:Z.browserResolver})()}}function Xe(oe){return oe.unwrap()}function Ns(oe){return jn(oe)}function jn(oe){const{_tokenResponse:Z}=oe instanceof he.ZR?oe.customData:oe;if(!Z)return null;if(!(oe instanceof he.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return F.P.credentialFromResult(oe);const Q=Z.providerId;if(!Q||Q===F.o.PASSWORD)return null;let ke;switch(Q){case F.o.GOOGLE:ke=F.N;break;case F.o.FACEBOOK:ke=F.M;break;case F.o.GITHUB:ke=F.Q;break;case F.o.TWITTER:ke=F.V;break;default:const{oauthIdToken:ze,oauthAccessToken:_t,oauthTokenSecret:Vt,pendingToken:Bt,nonce:$n}=Z;return _t||Vt||ze||Bt?Bt?Q.startsWith("saml.")?F.aJ._create(Q,Bt):F.I._fromParams({providerId:Q,signInMethod:Q,pendingToken:Bt,idToken:ze,accessToken:_t}):new F.T(Q).credential({idToken:ze,accessToken:_t,rawNonce:$n}):null}return oe instanceof he.ZR?ke.credentialFromError(oe):ke.credentialFromResult(oe)}function sn(oe,Z){return Z.catch(Q=>{throw Q instanceof he.ZR&&function(oe,Z){var Q;const ke=null===(Q=Z.customData)||void 0===Q?void 0:Q._tokenResponse;if("auth/multi-factor-auth-required"===Z.code)Z.resolver=new Y(oe,F.am(oe,Z));else if(ke){const ze=jn(Z),_t=Z;ze&&(_t.credential=ze,_t.tenantId=ke.tenantId||void 0,_t.email=ke.email||void 0,_t.phoneNumber=ke.phoneNumber||void 0)}}(oe,Q),Q}).then(Q=>{const ze=Q.user;return{operationType:Q.operationType,credential:Ns(Q),additionalUserInfo:F.ak(Q),user:J.getOrCreate(ze)}})}function io(oe,Z){return K.apply(this,arguments)}function K(){return(K=(0,_.Z)(function*(oe,Z){const Q=yield Z;return{verificationId:Q.verificationId,confirm:ke=>sn(oe,Q.confirm(ke))}})).apply(this,arguments)}class Y{constructor(Z,Q){this.resolver=Q,this.auth=Z.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return sn(Xe(this.auth),this.resolver.resolveSignIn(Z))}}class J{constructor(Z){this._delegate=Z,this.multiFactor=F.an(Z)}static getOrCreate(Z){return J.USER_MAP.has(Z)||J.USER_MAP.set(Z,new J(Z)),J.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var Q=this;return(0,_.Z)(function*(){return sn(Q.auth,F.Y(Q._delegate,Z))})()}linkWithPhoneNumber(Z,Q){var ke=this;return(0,_.Z)(function*(){return io(ke.auth,F.l(ke._delegate,Z,Q))})()}linkWithPopup(Z){var Q=this;return(0,_.Z)(function*(){return sn(Q.auth,F.d(Q._delegate,Z,nt))})()}linkWithRedirect(Z){var Q=this;return(0,_.Z)(function*(){return yield lt(F.aC(Q.auth)),F.g(Q._delegate,Z,nt)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var Q=this;return(0,_.Z)(function*(){return sn(Q.auth,F.Z(Q._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,Q){return io(this.auth,F.r(this._delegate,Z,Q))}reauthenticateWithPopup(Z){return sn(this.auth,F.e(this._delegate,Z,nt))}reauthenticateWithRedirect(Z){var Q=this;return(0,_.Z)(function*(){return yield lt(F.aC(Q.auth)),F.h(Q._delegate,Z,nt)})()}sendEmailVerification(Z){return F.aa(this._delegate,Z)}unlink(Z){var Q=this;return(0,_.Z)(function*(){return yield F.aj(Q._delegate,Z),Q})()}updateEmail(Z){return F.af(this._delegate,Z)}updatePassword(Z){return F.ag(this._delegate,Z)}updatePhoneNumber(Z){return F.u(this._delegate,Z)}updateProfile(Z){return F.ae(this._delegate,Z)}verifyBeforeUpdateEmail(Z,Q){return F.ab(this._delegate,Z,Q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}J.USER_MAP=new WeakMap;const Pe=F.aw;let ge=(()=>{class oe{constructor(Q,ke){if(this.app=Q,ke.isInitialized())return this._delegate=ke.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ze}=Q.options;Pe(ze,"invalid-api-key",{appName:Q.name});let _t=[F.K];if("undefined"!=typeof window){_t=function(oe,Z){const Q=et();if(!(null==Q?void 0:Q.sessionStorage))return[];const ke=F.ay(mi,oe,Z);switch(Q.sessionStorage.getItem(ke)){case Ht.NONE:return[F.K];case Ht.LOCAL:return[F.i,F.a];case Ht.SESSION:return[F.a];default:return[]}}(ze,Q.name);for(const Bt of[F.i,F.b,F.a])_t.includes(Bt)||_t.push(Bt)}Pe(ze,"invalid-api-key",{appName:Q.name});const Vt="undefined"!=typeof window?nt:void 0;this._delegate=ke.initialize({options:{persistence:_t,popupRedirectResolver:Vt}}),this._delegate._updateErrorMap(F.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?J.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Q){this._delegate.languageCode=Q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Q){this._delegate.tenantId=Q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Q,ke){F.E(this._delegate,Q,ke)}applyActionCode(Q){return F.a1(this._delegate,Q)}checkActionCode(Q){return F.a2(this._delegate,Q)}confirmPasswordReset(Q,ke){return F.a0(this._delegate,Q,ke)}createUserWithEmailAndPassword(Q,ke){var ze=this;return(0,_.Z)(function*(){return sn(ze._delegate,F.a4(ze._delegate,Q,ke))})()}fetchProvidersForEmail(Q){return this.fetchSignInMethodsForEmail(Q)}fetchSignInMethodsForEmail(Q){return F.a9(this._delegate,Q)}isSignInWithEmailLink(Q){return F.a7(this._delegate,Q)}getRedirectResult(){var Q=this;return(0,_.Z)(function*(){Pe(gr(),Q._delegate,"operation-not-supported-in-this-environment");const ke=yield F.j(Q._delegate,nt);return ke?sn(Q._delegate,Promise.resolve(ke)):{credential:null,user:null}})()}addFrameworkForLogging(Q){!function(oe,Z){(0,F.aC)(oe)._logFramework(Z)}(this._delegate,Q)}onAuthStateChanged(Q,ke,ze){const{next:_t,error:Vt,complete:Bt}=We(Q,ke,ze);return this._delegate.onAuthStateChanged(_t,Vt,Bt)}onIdTokenChanged(Q,ke,ze){const{next:_t,error:Vt,complete:Bt}=We(Q,ke,ze);return this._delegate.onIdTokenChanged(_t,Vt,Bt)}sendSignInLinkToEmail(Q,ke){return F.a6(this._delegate,Q,ke)}sendPasswordResetEmail(Q,ke){return F.$(this._delegate,Q,ke||void 0)}setPersistence(Q){var ke=this;return(0,_.Z)(function*(){let ze;switch(function(oe,Z){Sr(Object.values(Ht).includes(Z),oe,"invalid-persistence-type"),(0,he.b$)()?Sr(Z!==Ht.SESSION,oe,"unsupported-persistence-type"):(0,he.UG)()?Sr(Z===Ht.NONE,oe,"unsupported-persistence-type"):Cn()?Sr(Z===Ht.NONE||Z===Ht.LOCAL&&(0,he.hl)(),oe,"unsupported-persistence-type"):Sr(Z===Ht.NONE||no(),oe,"unsupported-persistence-type")}(ke._delegate,Q),Q){case Ht.SESSION:ze=F.a;break;case Ht.LOCAL:ze=(yield F.ax(F.i)._isAvailable())?F.i:F.b;break;case Ht.NONE:ze=F.K;break;default:return F.as("argument-error",{appName:ke._delegate.name})}return ke._delegate.setPersistence(ze)})()}signInAndRetrieveDataWithCredential(Q){return this.signInWithCredential(Q)}signInAnonymously(){return sn(this._delegate,F.W(this._delegate))}signInWithCredential(Q){return sn(this._delegate,F.X(this._delegate,Q))}signInWithCustomToken(Q){return sn(this._delegate,F._(this._delegate,Q))}signInWithEmailAndPassword(Q,ke){return sn(this._delegate,F.a5(this._delegate,Q,ke))}signInWithEmailLink(Q,ke){return sn(this._delegate,F.a8(this._delegate,Q,ke))}signInWithPhoneNumber(Q,ke){return io(this._delegate,F.s(this._delegate,Q,ke))}signInWithPopup(Q){var ke=this;return(0,_.Z)(function*(){return Pe(gr(),ke._delegate,"operation-not-supported-in-this-environment"),sn(ke._delegate,F.c(ke._delegate,Q,nt))})()}signInWithRedirect(Q){var ke=this;return(0,_.Z)(function*(){return Pe(gr(),ke._delegate,"operation-not-supported-in-this-environment"),yield lt(ke._delegate),F.f(ke._delegate,Q,nt)})()}updateCurrentUser(Q){return this._delegate.updateCurrentUser(Q)}verifyPasswordResetCode(Q){return F.a3(this._delegate,Q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=Ht,oe})();function We(oe,Z,Q){let ke=oe;"function"!=typeof oe&&({next:ke,error:Z,complete:Q}=oe);const ze=ke;return{next:Vt=>ze(Vt&&J.getOrCreate(Vt)),error:Z,complete:Q}}class gt{constructor(){this.providerId="phone",this._delegate=new F.P(Xe(q.Z.auth()))}static credential(Z,Q){return F.P.credential(Z,Q)}verifyPhoneNumber(Z,Q){return this._delegate.verifyPhoneNumber(Z,Q)}unwrap(){return this._delegate}}gt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,gt.PROVIDER_ID=F.P.PROVIDER_ID;const on=F.aw;var oe;(oe=q.Z).INTERNAL.registerComponent(new we.wA("auth-compat",Z=>{const Q=Z.getProvider("app-compat").getImmediate(),ke=Z.getProvider("auth");return new ge(Q,ke)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.L,FacebookAuthProvider:F.M,GithubAuthProvider:F.Q,GoogleAuthProvider:F.N,OAuthProvider:F.T,PhoneAuthProvider:gt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:class{constructor(Z,Q,ke=q.Z.app()){var ze;on(null===(ze=ke.options)||void 0===ze?void 0:ze.apiKey,"invalid-api-key",{appName:ke.name}),this._delegate=new F.R(Z,Q,ke.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:F.V,Auth:ge,AuthCredential:F.G,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.1.5")},6676:function(tt,De){!function(U){"use strict";function _(ve){return Array.prototype.slice.call(ve)}function q(ve){return new Promise(function(_e,fe){ve.onsuccess=function(){_e(ve.result)},ve.onerror=function(){fe(ve.error)}})}function F(ve,_e,fe){var ie,Be=new Promise(function(pt,ut){q(ie=ve[_e].apply(ve,fe)).then(pt,ut)});return Be.request=ie,Be}function he(ve,_e,fe){var ie=F(ve,_e,fe);return ie.then(function(Be){if(Be)return new V(Be,ie.request)})}function ce(ve,_e,fe){fe.forEach(function(ie){Object.defineProperty(ve.prototype,ie,{get:function(){return this[_e][ie]},set:function(Be){this[_e][ie]=Be}})})}function Ce(ve,_e,fe,ie){ie.forEach(function(Be){Be in fe.prototype&&(ve.prototype[Be]=function(){return F(this[_e],Be,arguments)})})}function we(ve,_e,fe,ie){ie.forEach(function(Be){Be in fe.prototype&&(ve.prototype[Be]=function(){return this[_e][Be].apply(this[_e],arguments)})})}function xe(ve,_e,fe,ie){ie.forEach(function(Be){Be in fe.prototype&&(ve.prototype[Be]=function(){return he(this[_e],Be,arguments)})})}function ee(ve){this._index=ve}function V(ve,_e){this._cursor=ve,this._request=_e}function H(ve){this._store=ve}function ne(ve){this._tx=ve,this.complete=new Promise(function(_e,fe){ve.oncomplete=function(){_e()},ve.onerror=function(){fe(ve.error)},ve.onabort=function(){fe(ve.error)}})}function me(ve,_e,fe){this._db=ve,this.oldVersion=_e,this.transaction=new ne(fe)}function ye(ve){this._db=ve}ce(ee,"_index",["name","keyPath","multiEntry","unique"]),Ce(ee,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),xe(ee,"_index",IDBIndex,["openCursor","openKeyCursor"]),ce(V,"_cursor",["direction","key","primaryKey","value"]),Ce(V,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ve){ve in IDBCursor.prototype&&(V.prototype[ve]=function(){var _e=this,fe=arguments;return Promise.resolve().then(function(){return _e._cursor[ve].apply(_e._cursor,fe),q(_e._request).then(function(ie){if(ie)return new V(ie,_e._request)})})})}),H.prototype.createIndex=function(){return new ee(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new ee(this._store.index.apply(this._store,arguments))},ce(H,"_store",["name","keyPath","indexNames","autoIncrement"]),Ce(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),xe(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),we(H,"_store",IDBObjectStore,["deleteIndex"]),ne.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},ce(ne,"_tx",["objectStoreNames","mode"]),we(ne,"_tx",IDBTransaction,["abort"]),me.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},ce(me,"_db",["name","version","objectStoreNames"]),we(me,"_db",IDBDatabase,["deleteObjectStore","close"]),ye.prototype.transaction=function(){return new ne(this._db.transaction.apply(this._db,arguments))},ce(ye,"_db",["name","version","objectStoreNames"]),we(ye,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ve){[H,ee].forEach(function(_e){ve in _e.prototype&&(_e.prototype[ve.replace("open","iterate")]=function(){var fe=_(arguments),ie=fe[fe.length-1],Be=this._store||this._index,pt=Be[ve].apply(Be,fe.slice(0,-1));pt.onsuccess=function(){ie(pt.result)}})})}),[ee,H].forEach(function(ve){ve.prototype.getAll||(ve.prototype.getAll=function(_e,fe){var ie=this,Be=[];return new Promise(function(pt){ie.iterateCursor(_e,function(ut){ut?(Be.push(ut.value),void 0===fe||Be.length!=fe?ut.continue():pt(Be)):pt(Be)})})})}),U.openDb=function(ve,_e,fe){var ie=F(indexedDB,"open",[ve,_e]),Be=ie.request;return Be&&(Be.onupgradeneeded=function(pt){fe&&fe(new me(Be.result,pt.oldVersion,Be.transaction))}),ie.then(function(pt){return new ye(pt)})},U.deleteDb=function(ve){return F(indexedDB,"deleteDatabase",[ve])},Object.defineProperty(U,"__esModule",{value:!0})}(De)},7574:(tt,De,U)=>{"use strict";U.d(De,{y:()=>H});var _=U(7393),F=U(9181),he=U(6490),Ce=U(6554),we=U(4487);var V=U(2494);let H=(()=>{class me{constructor(Fe){this._isScalar=!1,Fe&&(this._subscribe=Fe)}lift(Fe){const le=new me;return le.source=this,le.operator=Fe,le}subscribe(Fe,le,ve){const{operator:_e}=this,fe=function(me,ye,Fe){if(me){if(me instanceof _.L)return me;if(me[F.b])return me[F.b]()}return me||ye||Fe?new _.L(me,ye,Fe):new _.L(he.c)}(Fe,le,ve);if(fe.add(_e?_e.call(fe,this.source):this.source||V.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),V.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(le){V.v.useDeprecatedSynchronousErrorHandling&&(Fe.syncErrorThrown=!0,Fe.syncErrorValue=le),function(me){for(;me;){const{closed:ye,destination:Fe,isStopped:le}=me;if(ye||le)return!1;me=Fe&&Fe instanceof _.L?Fe:null}return!0}(Fe)?Fe.error(le):console.warn(le)}}forEach(Fe,le){return new(le=ne(le))((ve,_e)=>{let fe;fe=this.subscribe(ie=>{try{Fe(ie)}catch(Be){_e(Be),fe&&fe.unsubscribe()}},_e,ve)})}_subscribe(Fe){const{source:le}=this;return le&&le.subscribe(Fe)}[Ce.L](){return this}pipe(...Fe){return 0===Fe.length?this:function(me){return 0===me.length?we.y:1===me.length?me[0]:function(Fe){return me.reduce((le,ve)=>ve(le),Fe)}}(Fe)(this)}toPromise(Fe){return new(Fe=ne(Fe))((le,ve)=>{let _e;this.subscribe(fe=>_e=fe,fe=>ve(fe),()=>le(_e))})}}return me.create=ye=>new me(ye),me})();function ne(me){if(me||(me=V.v.Promise||Promise),!me)throw new Error("no Promise impl found");return me}},6490:(tt,De,U)=>{"use strict";U.d(De,{c:()=>F});var _=U(2494),q=U(4449);const F={closed:!0,next(he){},error(he){if(_.v.useDeprecatedSynchronousErrorHandling)throw he;(0,q.z)(he)},complete(){}}},9765:(tt,De,U)=>{"use strict";U.d(De,{Yc:()=>we,xQ:()=>xe});var _=U(7574),q=U(7393),F=U(5319),he=U(7971),ce=U(8858),Ce=U(9181);class we extends q.L{constructor(H){super(H),this.destination=H}}let xe=(()=>{class V extends _.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ce.b](){return new we(this)}lift(ne){const me=new ee(this,this);return me.operator=ne,me}next(ne){if(this.closed)throw new he.N;if(!this.isStopped){const{observers:me}=this,ye=me.length,Fe=me.slice();for(let le=0;le<ye;le++)Fe[le].next(ne)}}error(ne){if(this.closed)throw new he.N;this.hasError=!0,this.thrownError=ne,this.isStopped=!0;const{observers:me}=this,ye=me.length,Fe=me.slice();for(let le=0;le<ye;le++)Fe[le].error(ne);this.observers.length=0}complete(){if(this.closed)throw new he.N;this.isStopped=!0;const{observers:ne}=this,me=ne.length,ye=ne.slice();for(let Fe=0;Fe<me;Fe++)ye[Fe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ne){if(this.closed)throw new he.N;return super._trySubscribe(ne)}_subscribe(ne){if(this.closed)throw new he.N;return this.hasError?(ne.error(this.thrownError),F.w.EMPTY):this.isStopped?(ne.complete(),F.w.EMPTY):(this.observers.push(ne),new ce.W(this,ne))}asObservable(){const ne=new _.y;return ne.source=this,ne}}return V.create=(H,ne)=>new ee(H,ne),V})();class ee extends xe{constructor(H,ne){super(),this.destination=H,this.source=ne}next(H){const{destination:ne}=this;ne&&ne.next&&ne.next(H)}error(H){const{destination:ne}=this;ne&&ne.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:ne}=this;return ne?this.source.subscribe(H):F.w.EMPTY}}},8858:(tt,De,U)=>{"use strict";U.d(De,{W:()=>q});var _=U(5319);class q extends _.w{constructor(he,ce){super(),this.subject=he,this.subscriber=ce,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const he=this.subject,ce=he.observers;if(this.subject=null,!ce||0===ce.length||he.isStopped||he.closed)return;const Ce=ce.indexOf(this.subscriber);-1!==Ce&&ce.splice(Ce,1)}}},7393:(tt,De,U)=>{"use strict";U.d(De,{L:()=>we});var _=U(9105),q=U(6490),F=U(5319),he=U(9181),ce=U(2494),Ce=U(4449);class we extends F.w{constructor(V,H,ne){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=q.c;break;case 1:if(!V){this.destination=q.c;break}if("object"==typeof V){V instanceof we?(this.syncErrorThrowable=V.syncErrorThrowable,this.destination=V,V.add(this)):(this.syncErrorThrowable=!0,this.destination=new xe(this,V));break}default:this.syncErrorThrowable=!0,this.destination=new xe(this,V,H,ne)}}[he.b](){return this}static create(V,H,ne){const me=new we(V,H,ne);return me.syncErrorThrowable=!1,me}next(V){this.isStopped||this._next(V)}error(V){this.isStopped||(this.isStopped=!0,this._error(V))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(V){this.destination.next(V)}_error(V){this.destination.error(V),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:V}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=V,this}}class xe extends we{constructor(V,H,ne,me){super(),this._parentSubscriber=V;let ye,Fe=this;(0,_.m)(H)?ye=H:H&&(ye=H.next,ne=H.error,me=H.complete,H!==q.c&&(Fe=Object.create(H),(0,_.m)(Fe.unsubscribe)&&this.add(Fe.unsubscribe.bind(Fe)),Fe.unsubscribe=this.unsubscribe.bind(this))),this._context=Fe,this._next=ye,this._error=ne,this._complete=me}next(V){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;ce.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,V)&&this.unsubscribe():this.__tryOrUnsub(this._next,V)}}error(V){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:ne}=ce.v;if(this._error)ne&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,V),this.unsubscribe()):(this.__tryOrUnsub(this._error,V),this.unsubscribe());else if(H.syncErrorThrowable)ne?(H.syncErrorValue=V,H.syncErrorThrown=!0):(0,Ce.z)(V),this.unsubscribe();else{if(this.unsubscribe(),ne)throw V;(0,Ce.z)(V)}}}complete(){if(!this.isStopped){const{_parentSubscriber:V}=this;if(this._complete){const H=()=>this._complete.call(this._context);ce.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?(this.__tryOrSetError(V,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(V,H){try{V.call(this._context,H)}catch(ne){if(this.unsubscribe(),ce.v.useDeprecatedSynchronousErrorHandling)throw ne;(0,Ce.z)(ne)}}__tryOrSetError(V,H,ne){if(!ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,ne)}catch(me){return ce.v.useDeprecatedSynchronousErrorHandling?(V.syncErrorValue=me,V.syncErrorThrown=!0,!0):((0,Ce.z)(me),!0)}return!1}_unsubscribe(){const{_parentSubscriber:V}=this;this._context=null,this._parentSubscriber=null,V.unsubscribe()}}},5319:(tt,De,U)=>{"use strict";U.d(De,{w:()=>Ce});var _=U(9796),q=U(1555),F=U(9105);const ce=(()=>{function xe(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((V,H)=>`${H+1}) ${V.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return xe.prototype=Object.create(Error.prototype),xe})();class Ce{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:V,_ctorUnsubscribe:H,_unsubscribe:ne,_subscriptions:me}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,V instanceof Ce)V.remove(this);else if(null!==V)for(let ye=0;ye<V.length;++ye)V[ye].remove(this);if((0,F.m)(ne)){H&&(this._unsubscribe=void 0);try{ne.call(this)}catch(ye){ee=ye instanceof ce?we(ye.errors):[ye]}}if((0,_.k)(me)){let ye=-1,Fe=me.length;for(;++ye<Fe;){const le=me[ye];if((0,q.K)(le))try{le.unsubscribe()}catch(ve){ee=ee||[],ve instanceof ce?ee=ee.concat(we(ve.errors)):ee.push(ve)}}}if(ee)throw new ce(ee)}add(ee){let V=ee;if(!ee)return Ce.EMPTY;switch(typeof ee){case"function":V=new Ce(ee);case"object":if(V===this||V.closed||"function"!=typeof V.unsubscribe)return V;if(this.closed)return V.unsubscribe(),V;if(!(V instanceof Ce)){const me=V;V=new Ce,V._subscriptions=[me]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:H}=V;if(null===H)V._parentOrParents=this;else if(H instanceof Ce){if(H===this)return V;V._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return V;H.push(this)}const ne=this._subscriptions;return null===ne?this._subscriptions=[V]:ne.push(V),V}remove(ee){const V=this._subscriptions;if(V){const H=V.indexOf(ee);-1!==H&&V.splice(H,1)}}}var xe;function we(xe){return xe.reduce((ee,V)=>ee.concat(V instanceof ce?V.errors:V),[])}Ce.EMPTY=((xe=new Ce).closed=!0,xe)},2494:(tt,De,U)=>{"use strict";U.d(De,{v:()=>q});let _=!1;const q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const he=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+he.stack)}else _&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_=F},get useDeprecatedSynchronousErrorHandling(){return _}}},5345:(tt,De,U)=>{"use strict";U.d(De,{IY:()=>he,Ds:()=>Ce,ft:()=>xe});var _=U(7393),q=U(7574),F=U(7444);class he extends _.L{constructor(V){super(),this.parent=V}_next(V){this.parent.notifyNext(V)}_error(V){this.parent.notifyError(V),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ce extends _.L{notifyNext(V){this.destination.next(V)}notifyError(V){this.destination.error(V)}notifyComplete(){this.destination.complete()}}function xe(ee,V){if(V.closed)return;if(ee instanceof q.y)return ee.subscribe(V);let H;try{H=(0,F.s)(ee)(V)}catch(ne){V.error(ne)}return H}},2441:(tt,De,U)=>{"use strict";U.d(De,{c:()=>ce,N:()=>Ce});var _=U(9765),q=U(7574),F=U(5319),he=U(1307);class ce extends q.y{constructor(H,ne){super(),this.source=H,this.subjectFactory=ne,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new F.w,H.add(this.source.subscribe(new we(this.getSubject(),this))),H.closed&&(this._connection=null,H=F.w.EMPTY)),H}refCount(){return(0,he.x)()(this)}}const Ce=(()=>{const V=ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:V._subscribe},_isComplete:{value:V._isComplete,writable:!0},getSubject:{value:V.getSubject},connect:{value:V.connect},refCount:{value:V.refCount}}})();class we extends _.Yc{constructor(H,ne){super(H),this.connectable=ne}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const ne=H._connection;H._refCount=0,H._subject=null,H._connection=null,ne&&ne.unsubscribe()}}}},4402:(tt,De,U)=>{"use strict";U.d(De,{D:()=>Fe});var _=U(7574),q=U(7444),F=U(5319),he=U(6554),we=U(4087),xe=U(377),H=U(4072),ne=U(9489);function Fe(le,ve){return ve?function(le,ve){if(null!=le){if(function(le){return le&&"function"==typeof le[he.L]}(le))return function(le,ve){return new _.y(_e=>{const fe=new F.w;return fe.add(ve.schedule(()=>{const ie=le[he.L]();fe.add(ie.subscribe({next(Be){fe.add(ve.schedule(()=>_e.next(Be)))},error(Be){fe.add(ve.schedule(()=>_e.error(Be)))},complete(){fe.add(ve.schedule(()=>_e.complete()))}}))})),fe})}(le,ve);if((0,H.t)(le))return function(le,ve){return new _.y(_e=>{const fe=new F.w;return fe.add(ve.schedule(()=>le.then(ie=>{fe.add(ve.schedule(()=>{_e.next(ie),fe.add(ve.schedule(()=>_e.complete()))}))},ie=>{fe.add(ve.schedule(()=>_e.error(ie)))}))),fe})}(le,ve);if((0,ne.z)(le))return(0,we.r)(le,ve);if(function(le){return le&&"function"==typeof le[xe.hZ]}(le)||"string"==typeof le)return function(le,ve){if(!le)throw new Error("Iterable cannot be null");return new _.y(_e=>{const fe=new F.w;let ie;return fe.add(()=>{ie&&"function"==typeof ie.return&&ie.return()}),fe.add(ve.schedule(()=>{ie=le[xe.hZ](),fe.add(ve.schedule(function(){if(_e.closed)return;let Be,pt;try{const ut=ie.next();Be=ut.value,pt=ut.done}catch(ut){return void _e.error(ut)}pt?_e.complete():(_e.next(Be),this.schedule())}))})),fe})}(le,ve)}throw new TypeError((null!==le&&typeof le||le)+" is not observable")}(le,ve):le instanceof _.y?le:new _.y((0,q.s)(le))}},6693:(tt,De,U)=>{"use strict";U.d(De,{n:()=>he});var _=U(7574),q=U(5015),F=U(4087);function he(ce,Ce){return Ce?(0,F.r)(ce,Ce):new _.y((0,q.V)(ce))}},8002:(tt,De,U)=>{"use strict";U.d(De,{U:()=>q});var _=U(7393);function q(ce,Ce){return function(xe){if("function"!=typeof ce)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return xe.lift(new F(ce,Ce))}}class F{constructor(Ce,we){this.project=Ce,this.thisArg=we}call(Ce,we){return we.subscribe(new he(Ce,this.project,this.thisArg))}}class he extends _.L{constructor(Ce,we,xe){super(Ce),this.project=we,this.count=0,this.thisArg=xe||this}_next(Ce){let we;try{we=this.project.call(this.thisArg,Ce,this.count++)}catch(xe){return void this.destination.error(xe)}this.destination.next(we)}}},3282:(tt,De,U)=>{"use strict";U.d(De,{J:()=>F});var _=U(9773),q=U(4487);function F(he=Number.POSITIVE_INFINITY){return(0,_.zg)(q.y,he)}},9773:(tt,De,U)=>{"use strict";U.d(De,{zg:()=>he});var _=U(8002),q=U(4402),F=U(5345);function he(xe,ee,V=Number.POSITIVE_INFINITY){return"function"==typeof ee?H=>H.pipe(he((ne,me)=>(0,q.D)(xe(ne,me)).pipe((0,_.U)((ye,Fe)=>ee(ne,ye,me,Fe))),V)):("number"==typeof ee&&(V=ee),H=>H.lift(new ce(xe,V)))}class ce{constructor(ee,V=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=V}call(ee,V){return V.subscribe(new Ce(ee,this.project,this.concurrent))}}class Ce extends F.Ds{constructor(ee,V,H=Number.POSITIVE_INFINITY){super(ee),this.project=V,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let V;const H=this.index++;try{V=this.project(ee,H)}catch(ne){return void this.destination.error(ne)}this.active++,this._innerSub(V)}_innerSub(ee){const V=new F.IY(this),H=this.destination;H.add(V);const ne=(0,F.ft)(ee,V);ne!==V&&H.add(ne)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},1307:(tt,De,U)=>{"use strict";U.d(De,{x:()=>q});var _=U(7393);function q(){return function(Ce){return Ce.lift(new F(Ce))}}class F{constructor(Ce){this.connectable=Ce}call(Ce,we){const{connectable:xe}=this;xe._refCount++;const ee=new he(Ce,xe),V=we.subscribe(ee);return ee.closed||(ee.connection=xe.connect()),V}}class he extends _.L{constructor(Ce,we){super(Ce),this.connectable=we}_unsubscribe(){const{connectable:Ce}=this;if(!Ce)return void(this.connection=null);this.connectable=null;const we=Ce._refCount;if(we<=0)return void(this.connection=null);if(Ce._refCount=we-1,we>1)return void(this.connection=null);const{connection:xe}=this,ee=Ce._connection;this.connection=null,ee&&(!xe||ee===xe)&&ee.unsubscribe()}}},4087:(tt,De,U)=>{"use strict";U.d(De,{r:()=>F});var _=U(7574),q=U(5319);function F(he,ce){return new _.y(Ce=>{const we=new q.w;let xe=0;return we.add(ce.schedule(function(){xe!==he.length?(Ce.next(he[xe++]),Ce.closed||we.add(this.schedule())):Ce.complete()})),we})}},377:(tt,De,U)=>{"use strict";U.d(De,{hZ:()=>q});const q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(tt,De,U)=>{"use strict";U.d(De,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(tt,De,U)=>{"use strict";U.d(De,{b:()=>_});const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(tt,De,U)=>{"use strict";U.d(De,{N:()=>q});const q=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},4449:(tt,De,U)=>{"use strict";function _(q){setTimeout(()=>{throw q},0)}U.d(De,{z:()=>_})},4487:(tt,De,U)=>{"use strict";function _(q){return q}U.d(De,{y:()=>_})},9796:(tt,De,U)=>{"use strict";U.d(De,{k:()=>_});const _=Array.isArray||(q=>q&&"number"==typeof q.length)},9489:(tt,De,U)=>{"use strict";U.d(De,{z:()=>_});const _=q=>q&&"number"==typeof q.length&&"function"!=typeof q},9105:(tt,De,U)=>{"use strict";function _(q){return"function"==typeof q}U.d(De,{m:()=>_})},1555:(tt,De,U)=>{"use strict";function _(q){return null!==q&&"object"==typeof q}U.d(De,{K:()=>_})},4072:(tt,De,U)=>{"use strict";function _(q){return!!q&&"function"!=typeof q.subscribe&&"function"==typeof q.then}U.d(De,{t:()=>_})},4869:(tt,De,U)=>{"use strict";function _(q){return q&&"function"==typeof q.schedule}U.d(De,{K:()=>_})},7444:(tt,De,U)=>{"use strict";U.d(De,{s:()=>H});var _=U(5015),q=U(4449),he=U(377),Ce=U(6554),xe=U(9489),ee=U(4072),V=U(1555);const H=ne=>{if(ne&&"function"==typeof ne[Ce.L])return(ne=>me=>{const ye=ne[Ce.L]();if("function"!=typeof ye.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ye.subscribe(me)})(ne);if((0,xe.z)(ne))return(0,_.V)(ne);if((0,ee.t)(ne))return(ne=>me=>(ne.then(ye=>{me.closed||(me.next(ye),me.complete())},ye=>me.error(ye)).then(null,q.z),me))(ne);if(ne&&"function"==typeof ne[he.hZ])return(ne=>me=>{const ye=ne[he.hZ]();for(;;){let Fe;try{Fe=ye.next()}catch(le){return me.error(le),me}if(Fe.done){me.complete();break}if(me.next(Fe.value),me.closed)break}return"function"==typeof ye.return&&me.add(()=>{ye.return&&ye.return()}),me})(ne);{const ye=`You provided ${(0,V.K)(ne)?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ye)}}},5015:(tt,De,U)=>{"use strict";U.d(De,{V:()=>_});const _=q=>F=>{for(let he=0,ce=q.length;he<ce&&!F.closed;he++)F.next(q[he]);F.complete()}},56:(tt,De,U)=>{"use strict";var _=U(639);let q=null;function F(){return q}const we=new _.OlP("DocumentToken");let xe=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,_.Yz7)({factory:ee,token:i,providedIn:"platform"}),i})();function ee(){return(0,_.LFG)(H)}const V=new _.OlP("Location Initialized");let H=(()=>{class i extends xe{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(r){const s=F().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){const s=F().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,s,u){ne()?this._history.pushState(r,s,u):this.location.hash=u}replaceState(r,s,u){ne()?this._history.replaceState(r,s,u):this.location.hash=u}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(we))},i.\u0275prov=(0,_.Yz7)({factory:me,token:i,providedIn:"platform"}),i})();function ne(){return!!window.history.pushState}function me(){return new H((0,_.LFG)(we))}function ye(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function Fe(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function le(i){return i&&"?"!==i[0]?"?"+i:i}let ve=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,_.Yz7)({factory:_e,token:i,providedIn:"root"}),i})();function _e(i){const n=(0,_.LFG)(we).location;return new ie((0,_.LFG)(xe),n&&n.origin||"")}const fe=new _.OlP("appBaseHref");let ie=(()=>{class i extends ve{constructor(r,s){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ye(this._baseHref,r)}path(r=!1){const s=this._platformLocation.pathname+le(this._platformLocation.search),u=this._platformLocation.hash;return u&&r?`${s}${u}`:s}pushState(r,s,u,c){const f=this.prepareExternalUrl(u+le(c));this._platformLocation.pushState(r,s,f)}replaceState(r,s,u,c){const f=this.prepareExternalUrl(u+le(c));this._platformLocation.replaceState(r,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,u;null===(u=(s=this._platformLocation).historyGo)||void 0===u||u.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(xe),_.LFG(fe,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),Be=(()=>{class i extends ve{constructor(r,s){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(r){const s=ye(this._baseHref,r);return s.length>0?"#"+s:s}pushState(r,s,u,c){let f=this.prepareExternalUrl(u+le(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(r,s,f)}replaceState(r,s,u,c){let f=this.prepareExternalUrl(u+le(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(r,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,u;null===(u=(s=this._platformLocation).historyGo)||void 0===u||u.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(xe),_.LFG(fe,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),pt=(()=>{class i{constructor(r,s){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const u=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=Fe(Ae(u)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+le(s))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,Ae(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,s="",u=null){this._platformStrategy.pushState(u,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+le(s)),u)}replaceState(r,s="",u=null){this._platformStrategy.replaceState(u,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+le(s)),u)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var s,u;null===(u=(s=this._platformStrategy).historyGo)||void 0===u||u.call(s,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(u=>u(r,s))}subscribe(r,s,u){return this._subject.subscribe({next:r,error:s,complete:u})}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(ve),_.LFG(xe))},i.normalizeQueryParams=le,i.joinWithSlash=ye,i.stripTrailingSlash=Fe,i.\u0275prov=(0,_.Yz7)({factory:ut,token:i,providedIn:"root"}),i})();function ut(){return new pt((0,_.LFG)(ve),(0,_.LFG)(xe))}function Ae(i){return i.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Zero=0]="Zero",Te[Te.One=1]="One",Te[Te.Two=2]="Two",Te[Te.Few=3]="Few",Te[Te.Many=4]="Many",Te[Te.Other=5]="Other",Te))();const Cn=_.kL8;class mr{}let Qt=(()=>{class i extends mr{constructor(r){super(),this.locale=r}getPluralCategory(r,s){switch(Cn(s||this.locale)(r)){case Te.Zero:return"zero";case Te.One:return"one";case Te.Two:return"two";case Te.Few:return"few";case Te.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.soG))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),_i=(()=>{class i{constructor(r,s){this._viewContainer=r,this._context=new ei,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){uo("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){uo("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.s_b),_.Y36(_.Rgc))},i.\u0275dir=_.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class ei{constructor(){this.$implicit=null,this.ngIf=null}}function uo(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,_.AaK)(n)}'.`)}let Sa=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[{provide:mr,useClass:Qt}]}),i})();function Gn(i){return"server"===i}let $o=(()=>{class i{}return i.\u0275prov=(0,_.Yz7)({token:i,providedIn:"root",factory:()=>new gh((0,_.LFG)(we),window)}),i})();class gh{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let u=s.currentNode;for(;u;){const c=u.shadowRoot;if(c){const f=c.getElementById(n)||c.querySelector(`[name="${n}"]`);if(f)return f}u=s.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),s=r.left+this.window.pageXOffset,u=r.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],u-c[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=cl(this.window.history)||cl(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function cl(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class _r extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new _r,q||(q=i)}onAndCancel(n,r,s){return n.addEventListener(r,s,!1),()=>{n.removeEventListener(r,s,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(hs=hs||document.querySelector("base"),hs?hs.getAttribute("href"):null);return null==r?null:function(i){fs=fs||document.createElement("a"),fs.setAttribute("href",i);const n=fs.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const s=r.indexOf("="),[u,c]=-1==s?[r,""]:[r.slice(0,s),r.slice(s+1)];if(u.trim()===n)return decodeURIComponent(c)}return null}(document.cookie,n)}}let fs,hs=null;const ho=new _.OlP("TRANSITION_ID"),xn=[{provide:_.ip1,useFactory:function(i,n,r){return()=>{r.get(_.CZH).donePromise.then(()=>{const s=F(),u=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let c=0;c<u.length;c++)s.remove(u[c])})}},deps:[ho,we,_.zs3],multi:!0}];class ar{static init(){(0,_.VLi)(new ar)}addToWindow(n){_.dqk.getAngularTestability=(s,u=!0)=>{const c=n.findTestabilityInTree(s,u);if(null==c)throw new Error("Could not find testability for element.");return c},_.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(s=>{const u=_.dqk.getAllAngularTestabilities();let c=u.length,f=!1;const m=function(C){f=f||C,c--,0==c&&s(f)};u.forEach(function(C){C.whenStable(m)})})}findTestabilityInTree(n,r,s){if(null==r)return null;const u=n.getTestability(r);return null!=u?u:s?F().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let dl=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const gs=new _.OlP("EventManagerPlugins");let ft=(()=>{class i{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(u=>u.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,s,u){return this._findPluginFor(s).addEventListener(r,s,u)}addGlobalEventListener(r,s,u){return this._findPluginFor(s).addGlobalEventListener(r,s,u)}getZone(){return this._zone}_findPluginFor(r){const s=this._eventNameToPlugin.get(r);if(s)return s;const u=this._plugins;for(let c=0;c<u.length;c++){const f=u[c];if(f.supports(r))return this._eventNameToPlugin.set(r,f),f}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(gs),_.LFG(_.R0b))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class ml{constructor(n){this._doc=n}addGlobalEventListener(n,r,s){const u=F().getGlobalEventTarget(this._doc,n);if(!u)throw new Error(`Unsupported event target ${u} for event ${r}`);return this.addEventListener(u,r,s)}}let _l=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const s=new Set;r.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),s.add(u))}),this.onStylesAdded(s)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),Wo=(()=>{class i extends _l{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,s,u){r.forEach(c=>{const f=this._doc.createElement("style");f.textContent=c,u.push(s.appendChild(f))})}addHost(r){const s=[];this._addStylesToHost(this._stylesSet,r,s),this._hostNodes.set(r,s)}removeHost(r){const s=this._hostNodes.get(r);s&&s.forEach(yl),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((s,u)=>{this._addStylesToHost(r,u,s)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(yl))}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(we))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();function yl(i){F().remove(i)}const Nu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bc=/%COMP%/g;function fo(i,n,r){for(let s=0;s<n.length;s++){let u=n[s];Array.isArray(u)?fo(i,u,r):(u=u.replace(bc,i),r.push(u))}return r}function si(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let qo=(()=>{class i{constructor(r,s,u){this.eventManager=r,this.sharedStylesHost=s,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new wl(r)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;switch(s.encapsulation){case _.ifc.Emulated:{let u=this.rendererByCompId.get(s.id);return u||(u=new Ar(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,u)),u.applyToHost(r),u}case 1:case _.ifc.ShadowDom:return new Mi(this.eventManager,this.sharedStylesHost,r,s);default:if(!this.rendererByCompId.has(s.id)){const u=fo(s.id,s.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(ft),_.LFG(Wo),_.LFG(_.AFp))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class wl{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(Nu[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,s){n&&n.insertBefore(r,s)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let s="string"==typeof n?document.querySelector(n):n;if(!s)throw new Error(`The selector "${n}" did not match any elements`);return r||(s.textContent=""),s}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,s,u){if(u){r=u+":"+r;const c=Nu[u];c?n.setAttributeNS(c,r,s):n.setAttribute(r,s)}else n.setAttribute(r,s)}removeAttribute(n,r,s){if(s){const u=Nu[s];u?n.removeAttributeNS(u,r):n.removeAttribute(`${s}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,s,u){u&(_.JOm.DashCase|_.JOm.Important)?n.style.setProperty(r,s,u&_.JOm.Important?"important":""):n.style[r]=s}removeStyle(n,r,s){s&_.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,s){n[r]=s}setValue(n,r){n.nodeValue=r}listen(n,r,s){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,si(s)):this.eventManager.addEventListener(n,r,si(s))}}class Ar extends wl{constructor(n,r,s,u){super(n),this.component=s;const c=fo(u+"-"+s.id,s.styles,[]);r.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(bc,u+"-"+s.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(bc,i)}(u+"-"+s.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const s=super.createElement(n,r);return super.setAttribute(s,this.contentAttr,""),s}}class Mi extends wl{constructor(n,r,s,u){super(n),this.sharedStylesHost=r,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=fo(u.id,u.styles,[]);for(let f=0;f<c.length;f++){const m=document.createElement("style");m.textContent=c[f],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,s){return super.insertBefore(this.nodeOrShadowRoot(n),r,s)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Cl=(()=>{class i extends ml{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,u){return r.addEventListener(s,u,!1),()=>this.removeEventListener(r,s,u)}removeEventListener(r,s,u){return r.removeEventListener(s,u)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(we))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const Pa=["alt","control","meta","shift"],o_={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Sc={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Ac=(()=>{class i extends ml{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,s,u){const c=i.parseEventName(s),f=i.eventCallback(c.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(r,c.domEventName,f))}static parseEventName(r){const s=r.toLowerCase().split("."),u=s.shift();if(0===s.length||"keydown"!==u&&"keyup"!==u)return null;const c=i._normalizeKey(s.pop());let f="";if(Pa.forEach(C=>{const T=s.indexOf(C);T>-1&&(s.splice(T,1),f+=C+".")}),f+=c,0!=s.length||0===c.length)return null;const m={};return m.domEventName=u,m.fullKey=f,m}static getEventFullKey(r){let s="",u=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&Tc.hasOwnProperty(n)&&(n=Tc[n]))}return o_[n]||n}(r);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),Pa.forEach(c=>{c!=u&&Sc[c](r)&&(s+=c+".")}),s+=u,s}static eventCallback(r,s,u){return c=>{i.getEventFullKey(c)===r&&u.runGuarded(()=>s(c))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(we))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const Il=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function(){_r.makeCurrent(),ar.init()},multi:!0},{provide:we,useFactory:function(){return(0,_.RDi)(document),document},deps:[]}]),Mc=[[],{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function(){return new _.qLn},deps:[]},{provide:gs,useClass:Cl,multi:!0,deps:[we,_.R0b,_.Lbi]},{provide:gs,useClass:Ac,multi:!0,deps:[we]},[],{provide:qo,useClass:qo,deps:[ft,Wo,_.AFp]},{provide:_.FYo,useExisting:qo},{provide:_l,useExisting:Wo},{provide:Wo,useClass:Wo,deps:[we]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:ft,useClass:ft,deps:[gs,_.R0b]},{provide:class{},useClass:dl,deps:[]},[]];let Kp=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:_.AFp,useValue:r.appId},{provide:ho,useExisting:_.AFp},xn]}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(i,12))},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:Mc,imports:[Sa,_.hGG]}),i})();"undefined"!=typeof window&&window;var qn=U(8939),Lc=U(4346),Bs=U(2515),Ba=U(2669);const ja=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();var _s=U(576);var Sh=U(5960),yr=U(6361),Yo=U(776);let vr=(()=>{class i{constructor(r){r&&(this._subscribe=r)}lift(r){const s=new i;return s.source=this,s.operator=r,s}subscribe(r,s,u){const c=function(i){return i&&i instanceof Bs.Lv||function(i){return i&&(0,yr.m)(i.next)&&(0,yr.m)(i.error)&&(0,yr.m)(i.complete)}(i)&&(0,Ba.Nn)(i)}(r)?r:new Bs.Hp(r,s,u);return(0,Yo.x)(()=>{const{operator:f,source:m}=this;c.add(f?f.call(c,m):m?this._subscribe(c):this._trySubscribe(c))}),c}_trySubscribe(r){try{return this._subscribe(r)}catch(s){r.error(s)}}forEach(r,s){return new(s=Uc(s))((u,c)=>{let f;f=this.subscribe(m=>{try{r(m)}catch(C){c(C),null==f||f.unsubscribe()}},c,u)})}_subscribe(r){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(r)}[ja](){return this}pipe(...r){return function(i){return 0===i.length?_s.y:1===i.length?i[0]:function(r){return i.reduce((s,u)=>u(s),r)}}(r)(this)}toPromise(r){return new(r=Uc(r))((s,u)=>{let c;this.subscribe(f=>c=f,f=>u(f),()=>s(c))})}}return i.create=n=>new i(n),i})();function Uc(i){var n;return null!==(n=null!=i?i:Sh.v.Promise)&&void 0!==n?n:Promise}function Hs(i){return this instanceof Hs?(this.v=i,this):new Hs(i)}function Jo(i,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,s=r.apply(i,n||[]),c=[];return u={},f("next"),f("throw"),f("return"),u[Symbol.asyncIterator]=function(){return this},u;function f(L){s[L]&&(u[L]=function(W){return new Promise(function(re,Me){c.push([L,W,re,Me])>1||m(L,W)})})}function m(L,W){try{!function(L){L.value instanceof Hs?Promise.resolve(L.value.v).then(T,x):O(c[0][2],L)}(s[L](W))}catch(re){O(c[0][3],re)}}function T(L){m("next",L)}function x(L){m("throw",L)}function O(L,W){L(W),c.shift(),c.length&&m(c[0][0],c[0][1])}}function l_(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i[Symbol.asyncIterator];return n?n.call(i):(i=function(i){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&i[n],s=0;if(r)return r.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(c){r[c]=i[c]&&function(f){return new Promise(function(m,C){!function(c,f,m,C){Promise.resolve(C).then(function(T){c({value:T,done:m})},f)}(m,C,(f=i[c](f)).done,f.value)})}}}const $c=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function tg(i){return(0,yr.m)(null==i?void 0:i.then)}function Hc(i){return(0,yr.m)(i[ja])}function ng(i){return Symbol.asyncIterator&&(0,yr.m)(null==i?void 0:i[Symbol.asyncIterator])}function Xo(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Mh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const Ph=Mh();function Gc(i){return(0,yr.m)(null==i?void 0:i[Ph])}function kh(i){return Jo(this,arguments,function*(){const r=i.getReader();try{for(;;){const{value:s,done:u}=yield Hs(r.read());if(u)return yield Hs(void 0);yield yield Hs(s)}}finally{r.releaseLock()}})}function ys(i){return(0,yr.m)(null==i?void 0:i.getReader)}var Fh=U(9249);function pn(i){if(i instanceof vr)return i;if(null!=i){if(Hc(i))return function(i){return new vr(n=>{const r=i[ja]();if((0,yr.m)(r.subscribe))return r.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if($c(i))return function(i){return new vr(n=>{for(let r=0;r<i.length&&!n.closed;r++)n.next(i[r]);n.complete()})}(i);if(tg(i))return function(i){return new vr(n=>{i.then(r=>{n.closed||(n.next(r),n.complete())},r=>n.error(r)).then(null,Fh.h)})}(i);if(ng(i))return vi(i);if(Gc(i))return function(i){return new vr(n=>{for(const r of i)if(n.next(r),n.closed)return;n.complete()})}(i);if(ys(i))return function(i){return vi(kh(i))}(i)}throw Xo(i)}function vi(i){return new vr(n=>{(function(i,n){var r,s,u,c;return function(i,n,r,s){return new(r||(r=Promise))(function(c,f){function m(x){try{T(s.next(x))}catch(O){f(O)}}function C(x){try{T(s.throw(x))}catch(O){f(O)}}function T(x){x.done?c(x.value):function(c){return c instanceof r?c:new r(function(f){f(c)})}(x.value).then(m,C)}T((s=s.apply(i,n||[])).next())})}(this,void 0,void 0,function*(){try{for(r=l_(i);!(s=yield r.next()).done;)if(n.next(s.value),n.closed)return}catch(f){u={error:f}}finally{try{s&&!s.done&&(c=r.return)&&(yield c.call(r))}finally{if(u)throw u.error}}n.complete()})})(i,n).catch(r=>n.error(r))})}var Ei=U(8341),oi=U(8127),Fi=U(768);function Uh(i,n){if(!i)throw new Error("Iterable cannot be null");return new vr(r=>{(0,Fi.f)(r,n,()=>{const s=i[Symbol.asyncIterator]();(0,Fi.f)(r,n,()=>{s.next().then(u=>{u.done?r.complete():r.next(u.value)})},0,!0)})})}function Wr(i,n){return n?function(i,n){if(null!=i){if(Hc(i))return function(i,n){return pn(i).pipe((0,oi.R)(n),(0,Ei.Q)(n))}(i,n);if($c(i))return function(i,n){return new vr(r=>{let s=0;return n.schedule(function(){s===i.length?r.complete():(r.next(i[s++]),r.closed||this.schedule())})})}(i,n);if(tg(i))return function(i,n){return pn(i).pipe((0,oi.R)(n),(0,Ei.Q)(n))}(i,n);if(ng(i))return Uh(i,n);if(Gc(i))return function(i,n){return new vr(r=>{let s;return(0,Fi.f)(r,n,()=>{s=i[Ph](),(0,Fi.f)(r,n,()=>{let u,c;try{({value:u,done:c}=s.next())}catch(f){return void r.error(f)}c?r.complete():r.next(u)},0,!0)}),()=>(0,yr.m)(null==s?void 0:s.return)&&s.return()})}(i,n);if(ys(i))return function(i,n){return Uh(kh(i),n)}(i,n)}throw Xo(i)}(i,n):pn(i)}function S(i){return i[i.length-1]}function P(i){return function(i){return i&&(0,yr.m)(i.schedule)}(S(i))?i.pop():void 0}function te(...i){return Wr(i,P(i))}var ue=U(8797),Ne=U(3201),Ke=U(1894);function Ue(i,n){return(0,Ne.e)((r,s)=>{let u=0;r.subscribe(new Ke.Q(s,c=>{s.next(i.call(n,c,u++))}))})}function Kt(i,n,r=1/0){return(0,yr.m)(n)?Kt((s,u)=>Ue((c,f)=>n(s,c,u,f))(pn(i(s,u))),r):("number"==typeof n&&(r=n),(0,Ne.e)((s,u)=>function(i,n,r,s,u,c,f,m){const C=[];let T=0,x=0,O=!1;const L=()=>{O&&!C.length&&!T&&n.complete()},W=Me=>T<s?re(Me):C.push(Me),re=Me=>{T++;let qe=!1;pn(r(Me,x++)).subscribe(new Ke.Q(n,ht=>{n.next(ht)},()=>{qe=!0},void 0,()=>{if(qe)try{for(T--;C.length&&T<s;){const ht=C.shift();re(ht)}L()}catch(ht){n.error(ht)}}))};return i.subscribe(new Ke.Q(n,W,()=>{O=!0,L()})),()=>{}}(s,u,i,r)))}function Rr(i=1/0){return Kt(_s.y,i)}function Er(...i){return Rr(1)(Wr(i,P(i)))}function ta(...i){const n=P(i);return(0,Ne.e)((r,s)=>{(n?Er(i,r,n):Er(i,r)).subscribe(s)})}function qa(){return(0,Ne.e)((i,n)=>{let r,s=!1;i.subscribe(new Ke.Q(n,u=>{const c=r;r=u,s&&n.next([c,u]),s=!0}))})}function go(i,n,r,s,u){return(c,f)=>{let m=r,C=n,T=0;c.subscribe(new Ke.Q(f,x=>{const O=T++;C=m?i(C,x,O):(m=!0,x),s&&f.next(C)},u&&(()=>{m&&f.next(C),f.complete()})))}}function vs(i,n){return(0,Ne.e)(go(i,n,arguments.length>=2,!0))}function Es(i,n=_s.y){return i=null!=i?i:mo,(0,Ne.e)((r,s)=>{let u,c=!0;r.subscribe(new Ke.Q(s,f=>{const m=n(f);(c||!i(u,m))&&(c=!1,u=m,s.next(f))}))})}function mo(i,n){return i===n}function na(i,n){return(0,Ne.e)((r,s)=>{let u=0;r.subscribe(new Ke.Q(s,c=>i.call(n,c,u++)&&s.next(c)))})}U(4828);var it,dr=U(4486),Re=U(8239),za=U(5452),wi=U(6034),ai=U(5601),j=U(3854),qc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_o={},Ka=Ka||{},mt=qc||self;function Vu(){}function yo(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function zc(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var Uu="closure_uid_"+(1e9*Math.random()>>>0),Bh=0;function h_(i,n,r){return i.call.apply(i.bind,arguments)}function aE(i,n,r){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(n,u)}}return function(){return i.apply(n,arguments)}}function qr(i,n,r){return(qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h_:aE).apply(null,arguments)}function ra(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function er(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(s,u,c){for(var f=Array(arguments.length-2),m=2;m<arguments.length;m++)f[m-2]=arguments[m];return n.prototype[u].apply(s,f)}}function Za(){this.s=this.s,this.o=this.o}var f_={};Za.prototype.s=!1,Za.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,Uu)&&i[Uu]||(i[Uu]=++Bh)}(this);delete f_[i]}},Za.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const p_=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},ig=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const s=i.length,u="string"==typeof i?i.split(""):i;for(let c=0;c<s;c++)c in u&&n.call(r,u[c],c,i)};function jh(i){return Array.prototype.concat.apply([],arguments)}function sg(i){const n=i.length;if(0<n){const r=Array(n);for(let s=0;s<n;s++)r[s]=i[s];return r}return[]}function Ya(i){return/^[\s\xa0]*$/.test(i)}var Ci,$h=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function tr(i,n){return-1!=i.indexOf(n)}function og(i,n){return i<n?-1:i>n?1:0}e:{var lE=mt.navigator;if(lE){var Kc=lE.userAgent;if(Kc){Ci=Kc;break e}}Ci=""}function Zc(i,n,r){for(const s in i)n.call(r,i[s],s,i)}function ag(i){const n={};for(const r in i)n[r]=i[r];return n}var g_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(i,n){let r,s;for(let u=1;u<arguments.length;u++){for(r in s=arguments[u],s)i[r]=s[r];for(let c=0;c<g_.length;c++)r=g_[c],Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}}function v(i){return v[" "](i),i}v[" "]=Vu;var Pt,i,D=tr(Ci,"Opera"),M=tr(Ci,"Trident")||tr(Ci,"MSIE"),$=tr(Ci,"Edge"),de=$||M,Le=tr(Ci,"Gecko")&&!(tr(Ci.toLowerCase(),"webkit")&&!tr(Ci,"Edge"))&&!(tr(Ci,"Trident")||tr(Ci,"MSIE"))&&!tr(Ci,"Edge"),rt=tr(Ci.toLowerCase(),"webkit")&&!tr(Ci,"Edge");function yt(){var i=mt.document;return i?i.documentMode:void 0}e:{var Kn="",ws=(i=Ci,Le?/rv:([^\);]+)(\)|;)/.exec(i):$?/Edge\/([\d\.]+)/.exec(i):M?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):rt?/WebKit\/(\S+)/.exec(i):D?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(ws&&(Kn=ws?ws[1]:""),M){var vo=yt();if(null!=vo&&vo>parseFloat(Kn)){Pt=String(vo);break e}}Pt=Kn}var Hh={};function ug(){return n=Hh,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=$h(String(Pt)).split("."),r=$h("9").split("."),s=Math.max(n.length,r.length);for(let f=0;0==i&&f<s;f++){var u=n[f]||"",c=r[f]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==u[0].length&&0==c[0].length)break;i=og(0==u[1].length?0:parseInt(u[1],10),0==c[1].length?0:parseInt(c[1],10))||og(0==u[2].length,0==c[2].length)||og(u[2],c[2]),u=u[3],c=c[3]}while(0==i)}return 0<=i}();var n}var m_=mt.document&&M&&(yt()||parseInt(Pt,10))||void 0,cg=function(){if(!mt.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{mt.addEventListener("test",Vu,n),mt.removeEventListener("test",Vu,n)}catch(r){}return i}();function ui(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function xl(i,n){if(ui.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(Le){e:{try{v(n.nodeName);var u=!0;break e}catch(c){}u=!1}u||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Bu[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&xl.Z.h.call(this)}}ui.prototype.h=function(){this.defaultPrevented=!0},er(xl,ui);var Bu={2:"touch",3:"pen",4:"mouse"};xl.prototype.h=function(){xl.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ju="closure_listenable_"+(1e6*Math.random()|0),Eo=0;function $u(i,n,r,s,u){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!s,this.ia=u,this.key=++Eo,this.ca=this.fa=!1}function Qc(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function dg(i){this.src=i,this.g={},this.h=0}function __(i,n){var r=n.type;if(r in i.g){var c,s=i.g[r],u=p_(s,n);(c=0<=u)&&Array.prototype.splice.call(s,u,1),c&&(Qc(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function Fb(i,n,r,s){for(var u=0;u<i.length;++u){var c=i[u];if(!c.ca&&c.listener==n&&c.capture==!!r&&c.ia==s)return u}return-1}dg.prototype.add=function(i,n,r,s,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var f=Fb(i,n,s,u);return-1<f?(n=i[f],r||(n.fa=!1)):((n=new $u(n,this.src,c,!!s,u)).fa=r,i.push(n)),n};var Lb="closure_lm_"+(1e6*Math.random()|0),Vb={};function y_(i,n,r,s,u){if(s&&s.once)return cR(i,n,r,s,u);if(Array.isArray(n)){for(var c=0;c<n.length;c++)y_(i,n[c],r,s,u);return null}return r=w_(r),i&&i[ju]?i.N(n,r,zc(s)?!!s.capture:!!s,u):v_(i,n,r,!1,s,u)}function v_(i,n,r,s,u,c){if(!n)throw Error("Invalid event type");var f=zc(u)?!!u.capture:!!u,m=dE(i);if(m||(i[Lb]=m=new dg(i)),(r=m.add(n,r,s,f,c)).proxy)return r;if(s=function(){var n=hR;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=s,s.src=i,s.listener=r,i.addEventListener)cg||(u=f),void 0===u&&(u=!1),i.addEventListener(n.toString(),s,u);else if(i.attachEvent)i.attachEvent(Ub(n.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return r}function cR(i,n,r,s,u){if(Array.isArray(n)){for(var c=0;c<n.length;c++)cR(i,n[c],r,s,u);return null}return r=w_(r),i&&i[ju]?i.O(n,r,zc(s)?!!s.capture:!!s,u):v_(i,n,r,!0,s,u)}function dR(i,n,r,s,u){if(Array.isArray(n))for(var c=0;c<n.length;c++)dR(i,n[c],r,s,u);else s=zc(s)?!!s.capture:!!s,r=w_(r),i&&i[ju]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=Fb(c=i.g[n],r,s,u))&&(Qc(c[r]),Array.prototype.splice.call(c,r,1),0==c.length&&(delete i.g[n],i.h--))):i&&(i=dE(i))&&(n=i.g[n.toString()],i=-1,n&&(i=Fb(n,r,s,u)),(r=-1<i?n[i]:null)&&E_(r))}function E_(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[ju])__(n.i,i);else{var r=i.type,s=i.proxy;n.removeEventListener?n.removeEventListener(r,s,i.capture):n.detachEvent?n.detachEvent(Ub(r),s):n.addListener&&n.removeListener&&n.removeListener(s),(r=dE(n))?(__(r,i),0==r.h&&(r.src=null,n[Lb]=null)):Qc(i)}}}function Ub(i){return i in Vb?Vb[i]:Vb[i]="on"+i}function hR(i,n){if(i.ca)i=!0;else{n=new xl(n,this);var r=i.listener,s=i.ia||i.src;i.fa&&E_(i),i=r.call(s,n)}return i}function dE(i){return(i=i[Lb])instanceof dg?i:null}var hE="__closure_events_fn_"+(1e9*Math.random()>>>0);function w_(i){return"function"==typeof i?i:(i[hE]||(i[hE]=function(n){return i.handleEvent(n)}),i[hE])}function xr(){Za.call(this),this.i=new dg(this),this.P=this,this.I=null}function li(i,n){var r,s=i.I;if(s)for(r=[];s;s=s.I)r.push(s);if(i=i.P,s=n.type||n,"string"==typeof n)n=new ui(n,i);else if(n instanceof ui)n.target=n.target||i;else{var u=n;b(n=new ui(s,i),u)}if(u=!0,r)for(var c=r.length-1;0<=c;c--){var f=n.g=r[c];u=Gh(f,s,!0,n)&&u}if(u=Gh(f=n.g=i,s,!0,n)&&u,u=Gh(f,s,!1,n)&&u,r)for(c=0;c<r.length;c++)u=Gh(f=n.g=r[c],s,!1,n)&&u}function Gh(i,n,r,s){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var u=!0,c=0;c<n.length;++c){var f=n[c];if(f&&!f.ca&&f.capture==r){var m=f.listener,C=f.ia||f.src;f.fa&&__(i.i,f),u=!1!==m.call(C,s)&&u}}return u&&!s.defaultPrevented}er(xr,Za),xr.prototype[ju]=!0,xr.prototype.removeEventListener=function(i,n,r,s){dR(this,i,n,r,s)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],s=0;s<r.length;s++)Qc(r[s]);delete i.g[n],i.h--}}this.I=null},xr.prototype.N=function(i,n,r,s){return this.i.add(String(i),n,!1,r,s)},xr.prototype.O=function(i,n,r,s){return this.i.add(String(i),n,!0,r,s)};var fE=mt.JSON.stringify;function wr(){var i=$b;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var mE,Bb=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new pE,i=>i.reset());class pE{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function jb(i){mt.setTimeout(()=>{throw i},0)}function gE(i,n){mE||function(){var i=mt.Promise.resolve(void 0);mE=function(){i.then(mP)}}(),_E||(mE(),_E=!0),$b.add(i,n)}var _E=!1,$b=new class{constructor(){this.h=this.g=null}add(n,r){const s=Bb.get();s.set(n,r),this.h?this.h.next=s:this.g=s,this.h=s}};function mP(){for(var i;i=wr();){try{i.h.call(i.g)}catch(r){jb(r)}var n=Bb;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}_E=!1}function yE(i,n){xr.call(this),this.h=i||1,this.g=n||mt,this.j=qr(this.kb,this),this.l=Date.now()}function Jc(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function bi(i,n,r){if("function"==typeof i)r&&(i=qr(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=qr(i.handleEvent,i)}return 2147483647<Number(n)?-1:mt.setTimeout(i,n||0)}function C_(i){i.g=bi(()=>{i.g=null,i.i&&(i.i=!1,C_(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}er(yE,xr),(it=yE.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),li(this,"tick"),this.da&&(Jc(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){yE.Z.M.call(this),Jc(this),delete this.g};class Hb extends Za{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:C_(this)}M(){super.M(),this.g&&(mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wh(i){Za.call(this),this.h=i,this.g={}}er(Wh,Za);var Ii=[];function qh(i,n,r,s){Array.isArray(r)||(r&&(Ii[0]=r.toString()),r=Ii);for(var u=0;u<r.length;u++){var c=y_(n,r[u],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function b_(i){Zc(i.g,function(n,r){this.g.hasOwnProperty(r)&&E_(n)},i),i.g={}}function I_(){this.g=!0}function zh(i,n,r,s){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var s=r[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<u.length;f++)u[f]=""}}}return fE(r)}catch(m){return n}}(i,r)+(s?" "+s:"")})}Wh.prototype.M=function(){Wh.Z.M.call(this),b_(this)},Wh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},I_.prototype.Aa=function(){this.g=!1},I_.prototype.info=function(){};var Nl={},qb=null;function T_(){return qb=qb||new xr}function zb(i){ui.call(this,Nl.Ma,i)}function Kh(i){const n=T_();li(n,new zb(n,i))}function D_(i,n){ui.call(this,Nl.STAT_EVENT,i),this.stat=n}function Li(i){const n=T_();li(n,new D_(n,i))}function Kb(i,n){ui.call(this,Nl.Na,i),this.size=n}function S_(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return mt.setTimeout(function(){i()},n)}Nl.Ma="serverreachability",er(zb,ui),Nl.STAT_EVENT="statevent",er(D_,ui),Nl.Na="timingevent",er(Kb,ui);var hg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vE(){}function Xc(){}vE.prototype.h=null;var CE,pg={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function EE(){ui.call(this,"d")}function wE(){ui.call(this,"c")}function A_(){}function Ol(i,n,r,s){this.l=i,this.j=n,this.m=r,this.X=s||1,this.V=new Wh(this),this.P=Yb,this.W=new yE(i=de?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gs}function Gs(){this.i=null,this.g="",this.h=!1}er(EE,ui),er(wE,ui),er(A_,vE),A_.prototype.g=function(){return new XMLHttpRequest},A_.prototype.i=function(){return{}},CE=new A_;var Yb=45e3,bE={},R_={};function x_(i,n,r){i.K=1,i.v=Jh(Qa(n)),i.s=r,i.U=!0,_R(i,null)}function _R(i,n){i.F=Date.now(),gg(i),i.A=Qa(i.v);var r=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),nI(r.h,"t",s),i.C=0,r=i.l.H,i.h=new Gs,i.g=Xa(i.l,r?n:null,!i.s),0<i.O&&(i.L=new Hb(qr(i.Ia,i,i.g),i.O)),qh(i.V,i.g,"readystatechange",i.gb),n=i.H?ag(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),Kh(1),function(i,n,r,s,u,c){i.info(function(){if(i.g)if(c)for(var f="",m=c.split("&"),C=0;C<m.length;C++){var T=m[C].split("=");if(1<T.length){var x=T[0];T=T[1];var O=x.split("_");f=2<=O.length&&"type"==O[1]?f+(x+"=")+T+"&":f+(x+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+n+"\n"+r+"\n"+f})}(i.j,i.u,i.A,i.m,i.X,i.s)}function IE(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Qb(i,n,r){let u,s=!0;for(;!i.I&&i.C<r.length;){if(u=yR(i,r),u==R_){4==n&&(i.o=4,Li(14),s=!1),zh(i.j,i.m,null,"[Incomplete Response]");break}if(u==bE){i.o=4,Li(15),zh(i.j,i.m,r,"[Invalid Chunk]"),s=!1;break}zh(i.j,i.m,u,null),O_(i,u)}IE(i)&&u!=R_&&u!=bE&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,Li(16),s=!1),i.i=i.i&&s,s?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Sg(n),n.L=!0,Li(11))):(zh(i.j,i.m,r,"[Invalid Chunked Response]"),Zh(i),N_(i))}function yR(i,n){var r=i.C,s=n.indexOf("\n",r);return-1==s?R_:(r=Number(n.substring(r,s)),isNaN(r)?bE:(s+=1)+r>n.length?R_:(n=n.substr(s,r),i.C=s+r,n))}function gg(i){i.Y=Date.now()+i.P,ed(i,i.P)}function ed(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=S_(qr(i.eb,i),n)}function Ws(i){i.B&&(mt.clearTimeout(i.B),i.B=null)}function N_(i){0==i.l.G||i.I||UE(i.l,i)}function Zh(i){Ws(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,Jc(i.W),b_(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function O_(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||SE(r.i,i)))if(r.I=i.N,!i.J&&SE(r.i,i)&&3==r.G){try{var s=r.Ca.g.parse(n)}catch(T){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(r.u)r.ta=u[1],0<r.ta-r.U&&37500>u[2]&&r.N&&0==r.A&&!r.v&&(r.v=S_(qr(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;tf(r),U_(r)}VE(r),Li(18)}if(1>=Eg(r.i)&&r.ka){try{r.ka()}catch(T){}r.ka=void 0}}else nf(r,11)}else if((i.J||r.g==i)&&tf(r),!Ya(n))for(u=r.Ca.g.parse(n),n=0;n<u.length;n++){let T=u[n];if(r.U=T[0],T=T[1],2==r.G)if("c"==T[0]){r.J=T[1],r.la=T[2];const x=T[3];null!=x&&(r.ma=x,r.h.info("VER="+r.ma));const O=T[4];null!=O&&(r.za=O,r.h.info("SVER="+r.za));const L=T[5];null!=L&&"number"==typeof L&&0<L&&(r.K=s=1.5*L,r.h.info("backChannelRequestTimeoutMs_="+s)),s=r;const W=i.g;if(W){const re=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(re){var c=s.i;!c.g&&(tr(re,"spdy")||tr(re,"quic")||tr(re,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(P_(c,c.h),c.h=null))}if(s.D){const Me=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(s.sa=Me,In(s.F,s.D,Me))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var f=i;if((s=r).oa=SR(s,s.H?s.la:null,s.W),f.J){AE(s.i,f);var m=f,C=s.K;C&&m.setTimeout(C),m.B&&(Ws(m),gg(m)),s.g=f}else LE(s);0<r.l.length&&Tt(r)}else"stop"!=T[0]&&"close"!=T[0]||nf(r,7);else 3==r.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?nf(r,7):V_(r):"noop"!=T[0]&&r.j&&r.j.wa(T),r.A=0)}Kh(4)}catch(T){}}function wo(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(yo(i)||"string"==typeof i)ig(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(yo(i)||"string"==typeof i){r=[];for(var s=i.length,u=0;u<s;u++)r.push(u)}else for(u in r=[],s=0,i)r[s++]=u;u=(s=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(yo(i)){for(var n=[],r=i.length,s=0;s<r;s++)n.push(i[s]);return n}for(s in n=[],r=0,i)n[r++]=i[s];return n}(i)).length;for(var c=0;c<u;c++)n.call(void 0,s[c],r&&r[c],i)}}function Ml(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var s=0;s<r;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Ml)for(r=i.T(),s=0;s<r.length;s++)this.set(r[s],i.get(r[s]));else for(s in i)this.set(s,i[s])}function mg(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var s=i.g[n];td(i.h,s)&&(i.g[r++]=s),n++}i.g.length=r}if(i.i!=i.g.length){var u={};for(r=n=0;n<i.g.length;)td(u,s=i.g[n])||(i.g[r++]=s,u[s]=1),n++;i.g.length=r}}function td(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(it=Ol.prototype).setTimeout=function(i){this.P=i},it.gb=function(i){i=i.target;const n=this.L;n&&3==Gu(i)?n.l():this.Ia(i)},it.Ia=function(i){try{if(i==this.g)e:{const x=Gu(this.g);var n=this.g.Da();const O=this.g.ba();if(!(3>x)&&(3!=x||de||this.g&&(this.h.h||this.g.ga()||ME(this.g)))){this.I||4!=x||7==n||Kh(8==n||0>=O?3:2),Ws(this);var r=this.g.ba();this.N=r;t:if(IE(this)){var s=ME(this.g);i="";var u=s.length,c=4==Gu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zh(this),N_(this);var f="";break t}this.h.i=new mt.TextDecoder}for(n=0;n<u;n++)this.h.h=!0,i+=this.h.i.decode(s[n],{stream:c&&n==u-1});s.splice(0,u),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==r,function(i,n,r,s,u,c,f){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+n+"\n"+r+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.X,x,r),this.i){if(this.$&&!this.J){t:{if(this.g){var m,C=this.g;if((m=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ya(m)){var T=m;break t}}T=null}if(!(r=T)){this.i=!1,this.o=3,Li(12),Zh(this),N_(this);break e}zh(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,O_(this,r)}this.U?(Qb(this,x,f),de&&this.i&&3==x&&(qh(this.V,this.W,"tick",this.fb),this.W.start())):(zh(this.j,this.m,f,null),O_(this,f)),4==x&&Zh(this),this.i&&!this.I&&(4==x?UE(this.l,this):(this.i=!1,gg(this)))}else 400==r&&0<f.indexOf("Unknown SID")?(this.o=3,Li(12)):(this.o=0,Li(13)),Zh(this),N_(this)}}}catch(x){}},it.fb=function(){if(this.g){var i=Gu(this.g),n=this.g.ga();this.C<n.length&&(Ws(this),Qb(this,i,n),this.i&&4!=i&&gg(this))}},it.cancel=function(){this.I=!0,Zh(this)},it.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(Kh(3),Li(17)),Zh(this),this.o=2,N_(this)):ed(this,this.Y-i)},(it=Ml.prototype).R=function(){mg(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},it.T=function(){return mg(this),this.g.concat()},it.get=function(i,n){return td(this.h,i)?this.h[i]:n},it.set=function(i,n){td(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},it.forEach=function(i,n){for(var r=this.T(),s=0;s<r.length;s++){var u=r[s],c=this.get(u);i.call(n,c,u,this)}};var TE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pl(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Pl){this.g=void 0!==n?n:i.g,Yh(this,i.j),this.s=i.s,Qh(this,i.i),yg(this,i.m),this.l=i.l,n=i.h;var r=new rd;r.i=n.i,n.g&&(r.g=new Ml(n.g),r.h=n.h),vR(this,r),this.o=i.o}else i&&(r=String(i).match(TE))?(this.g=!!n,Yh(this,r[1]||"",!0),this.s=nd(r[2]||""),Qh(this,r[3]||"",!0),yg(this,r[4]),this.l=nd(r[5]||"",!0),vR(this,r[6]||"",!0),this.o=nd(r[7]||"")):(this.g=!!n,this.h=new rd(null,this.g))}function Qa(i){return new Pl(i)}function Yh(i,n,r){i.j=r?nd(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function Qh(i,n,r){i.i=r?nd(n,!0):n}function yg(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function vR(i,n,r){n instanceof rd?(i.h=n,function(i,n){n&&!i.j&&(Hu(i),i.i=null,i.g.forEach(function(r,s){var u=s.toLowerCase();s!=u&&(M_(this,s),nI(this,u,r))},i)),i.j=n}(i.h,i.g)):(r||(n=vg(n,IR)),i.h=new rd(n,i.g))}function In(i,n,r){i.h.set(n,r)}function Jh(i){return In(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function nd(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function vg(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,wR),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function wR(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Pl.prototype.toString=function(){var i=[],n=this.j;n&&i.push(vg(n,Xb,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(vg(n,Xb,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(vg(r,"/"==r.charAt(0)?bR:CR,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",vg(r,eI)),i.join("")};var Xb=/[#\/\?@]/g,CR=/[#\?:]/g,bR=/[#\?]/g,IR=/[#\?@]/g,eI=/#/g;function rd(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function Hu(i){i.g||(i.g=new Ml,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var s=i[r].indexOf("="),u=null;if(0<=s){var c=i[r].substring(0,s);u=i[r].substring(s+1)}else c=i[r];n(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function M_(i,n){Hu(i),n=id(i,n),td(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,td((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&mg(i)))}function tI(i,n){return Hu(i),n=id(i,n),td(i.g.h,n)}function nI(i,n,r){M_(i,n),0<r.length&&(i.i=null,i.g.set(id(i,n),sg(r)),i.h+=r.length)}function id(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function DE(i){this.l=i||iI,i=mt.PerformanceNavigationTiming?0<(i=mt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(mt.g&&mt.g.Ea&&mt.g.Ea()&&mt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=rd.prototype).add=function(i,n){Hu(this),this.i=null,i=id(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},it.forEach=function(i,n){Hu(this),this.g.forEach(function(r,s){ig(r,function(u){i.call(n,u,s,this)},this)},this)},it.T=function(){Hu(this);for(var i=this.g.R(),n=this.g.T(),r=[],s=0;s<n.length;s++)for(var u=i[s],c=0;c<u.length;c++)r.push(n[s]);return r},it.R=function(i){Hu(this);var n=[];if("string"==typeof i)tI(this,i)&&(n=jh(n,this.g.get(id(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=jh(n,i[r])}return n},it.set=function(i,n){return Hu(this),this.i=null,tI(this,i=id(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},it.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var s=n[r],u=encodeURIComponent(String(s));s=this.R(s);for(var c=0;c<s.length;c++){var f=u;""!==s[c]&&(f+="="+encodeURIComponent(String(s[c]))),i.push(f)}}return this.i=i.join("&")};var iI=10;function sI(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Eg(i){return i.h?1:i.g?i.g.size:0}function SE(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function P_(i,n){i.g?i.g.add(n):i.h=n}function AE(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function RE(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return sg(i.i)}function wg(){}function oI(){this.g=new wg}function k_(i,n,r){const s=r||"";try{wo(i,function(u,c){let f=u;zc(u)&&(f=fE(u)),n.push(s+c+"="+encodeURIComponent(f))})}catch(u){throw n.push(s+"type="+encodeURIComponent("_badmap")),u}}function Cg(i,n,r,s,u){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,u(s)}catch(c){}}function od(i){this.l=i.$b||null,this.j=i.ib||!1}function bg(i,n){xr.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=Ig,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}DE.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},wg.prototype.stringify=function(i){return mt.JSON.stringify(i,void 0)},wg.prototype.parse=function(i){return mt.JSON.parse(i,void 0)},er(od,vE),od.prototype.g=function(){return new bg(this.l,this.j)},od.prototype.i=function(i){return function(){return i}}({}),er(bg,xr);var Ig=0;function Xh(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Tg(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ef(i)}function ef(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(it=bg.prototype).open=function(i,n){if(this.readyState!=Ig)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,ef(this)},it.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||mt).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tg(this)),this.readyState=Ig},it.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ef(this)),this.g&&(this.readyState=3,ef(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==mt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xh(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?Tg(this):ef(this),3==this.readyState&&Xh(this)}},it.Ua=function(i){this.g&&(this.response=this.responseText=i,Tg(this))},it.Ta=function(i){this.g&&(this.response=i,Tg(this))},it.ha=function(){this.g&&Tg(this)},it.setRequestHeader=function(i,n){this.v.append(i,n)},it.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(bg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var TR=mt.JSON.parse;function kr(i){xr.call(this),this.headers=new Ml,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xE,this.K=this.L=!1}er(kr,xr);var xE="",NE=/^https?$/i,aI=["POST","PUT"];function uI(i){return"content-type"==i.toLowerCase()}function lI(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,OE(i),L_(i)}function OE(i){i.D||(i.D=!0,li(i,"complete"),li(i,"error"))}function cI(i){if(i.h&&void 0!==Ka&&(!i.C[1]||4!=Gu(i)||2!=i.ba()))if(i.v&&4==Gu(i))bi(i.Fa,0,i);else if(li(i,"readystatechange"),4==Gu(i)){i.h=!1;try{const m=i.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var s;if(s=0===m){var u=String(i.H).match(TE)[1]||null;if(!u&&mt.self&&mt.self.location){var c=mt.self.location.protocol;u=c.substr(0,c.length-1)}s=!NE.test(u?u.toLowerCase():"")}r=s}if(r)li(i,"complete"),li(i,"success");else{i.m=6;try{var f=2<Gu(i)?i.g.statusText:""}catch(C){f=""}i.j=f+" ["+i.ba()+"]",OE(i)}}finally{L_(i)}}}function L_(i,n){if(i.g){Co(i);const r=i.g,s=i.C[0]?Vu:null;i.g=null,i.C=null,n||li(i,"ready");try{r.onreadystatechange=s}catch(u){}}}function Co(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(mt.clearTimeout(i.A),i.A=null)}function Gu(i){return i.g?i.g.readyState:0}function ME(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case xE:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function PE(i,n,r){e:{for(s in r){var s=!1;break e}s=!0}s||(r=function(i){let n="";return Zc(i,function(r,s){n+=s,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):In(i,n,r))}function Dg(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function dI(i){this.za=0,this.l=[],this.h=new I_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dg("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dg("baseRetryDelayMs",5e3,i),this.$a=Dg("retryDelaySeedMs",1e4,i),this.Ya=Dg("forwardChannelMaxRetries",2,i),this.ra=Dg("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new DE(i&&i.concurrentRequestLimit),this.Ca=new oI,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function V_(i){if(hI(i),3==i.G){var n=i.V++,r=Qa(i.F);In(r,"SID",i.J),In(r,"RID",n),In(r,"TYPE","terminate"),kl(i,r),(n=new Ol(i,i.h,n,void 0)).K=2,n.v=Jh(Qa(r)),r=!1,mt.navigator&&mt.navigator.sendBeacon&&(r=mt.navigator.sendBeacon(n.v.toString(),"")),!r&&mt.Image&&((new Image).src=n.v,r=!0),r||(n.g=Xa(n.l,null),n.g.ea(n.v)),n.F=Date.now(),gg(n)}BE(i)}function U_(i){i.g&&(Sg(i),i.g.cancel(),i.g=null)}function hI(i){U_(i),i.u&&(mt.clearTimeout(i.u),i.u=null),tf(i),i.i.cancel(),i.m&&("number"==typeof i.m&&mt.clearTimeout(i.m),i.m=null)}function kE(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&Tt(i)}function Tt(i){sI(i.i)||i.m||(i.m=!0,gE(i.Ha,i),i.C=0)}function FE(i,n){var r;r=n?n.m:i.V++;const s=Qa(i.F);In(s,"SID",i.J),In(s,"RID",r),In(s,"AID",i.U),kl(i,s),i.o&&i.s&&PE(s,i.o,i.s),r=new Ol(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=bo(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),P_(i.i,r),x_(r,s,n)}function kl(i,n){i.j&&wo({},function(r,s){In(n,s,r)})}function bo(i,n,r){r=Math.min(i.l.length,r);var s=i.j?qr(i.j.Oa,i.j,i):null;e:{var u=i.l;let c=-1;for(;;){const f=["count="+r];-1==c?0<r?(c=u[0].h,f.push("ofs="+c)):c=0:f.push("ofs="+c);let m=!0;for(let C=0;C<r;C++){let T=u[C].h;const x=u[C].g;if(T-=c,0>T)c=Math.max(0,u[C].h-100),m=!1;else try{k_(x,f,"req"+T+"_")}catch(O){s&&s(x)}}if(m){s=f.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,s}function LE(i){i.g||i.u||(i.Y=1,gE(i.Ga,i),i.A=0)}function VE(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=S_(qr(i.Ga,i),B_(i,i.A)),i.A++,0))}function Sg(i){null!=i.B&&(mt.clearTimeout(i.B),i.B=null)}function Ja(i){i.g=new Ol(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=Qa(i.oa);In(n,"RID","rpc"),In(n,"SID",i.J),In(n,"CI",i.N?"0":"1"),In(n,"AID",i.U),kl(i,n),In(n,"TYPE","xmlhttp"),i.o&&i.s&&PE(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=Jh(Qa(n)),r.s=null,r.U=!0,_R(r,i)}function tf(i){null!=i.v&&(mt.clearTimeout(i.v),i.v=null)}function UE(i,n){var r=null;if(i.g==n){tf(i),Sg(i),i.g=null;var s=2}else{if(!SE(i.i,n))return;r=n.D,AE(i.i,n),s=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==s){r=n.s?n.s.length:0,n=Date.now()-n.F;var u=i.C;li(s=T_(),new Kb(s,r,n,u)),Tt(i)}else LE(i);else if(3==(u=n.o)||0==u&&0<i.I||!(1==s&&function(i,n){return!(Eg(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=S_(qr(i.Ha,i,n),B_(i,i.C)),i.C++,0)))}(i,n)||2==s&&VE(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),u){case 1:nf(i,5);break;case 4:nf(i,10);break;case 3:nf(i,6);break;default:nf(i,2)}}function B_(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function nf(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var s=qr(i.jb,i);r||(r=new Pl("//www.google.com/images/cleardot.gif"),mt.location&&"http"==mt.location.protocol||Yh(r,"https"),Jh(r)),function(i,n){const r=new I_;if(mt.Image){const s=new Image;s.onload=ra(Cg,r,s,"TestLoadImage: loaded",!0,n),s.onerror=ra(Cg,r,s,"TestLoadImage: error",!1,n),s.onabort=ra(Cg,r,s,"TestLoadImage: abort",!1,n),s.ontimeout=ra(Cg,r,s,"TestLoadImage: timeout",!1,n),mt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else n(!1)}(r.toString(),s)}else Li(2);i.G=0,i.j&&i.j.va(n),BE(i),hI(i)}function BE(i){i.G=0,i.I=-1,i.j&&((0!=RE(i.i).length||0!=i.l.length)&&(i.i.i.length=0,sg(i.l),i.l.length=0),i.j.ua())}function SR(i,n,r){let s=function(i){return i instanceof Pl?Qa(i):new Pl(i,void 0)}(r);if(""!=s.i)n&&Qh(s,n+"."+s.i),yg(s,s.m);else{const u=mt.location;s=function(i,n,r,s){var u=new Pl(null,void 0);return i&&Yh(u,i),n&&Qh(u,n),r&&yg(u,r),s&&(u.l=s),u}(u.protocol,n?n+"."+u.hostname:u.hostname,+u.port,r)}return i.aa&&Zc(i.aa,function(u,c){In(s,c,u)}),r=i.sa,(n=i.D)&&r&&In(s,n,r),In(s,"VER",i.ma),kl(i,s),s}function Xa(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new kr(r&&i.Ba&&!i.qa?new od({ib:!0}):i.qa)).L=i.H,n}function Ag(){}function ad(){if(M&&!(10<=Number(m_)))throw Error("Environmental error: no available transport.")}function Qi(i,n){xr.call(this),this.g=new dI(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!Ya(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Ya(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new ud(this)}function AR(i){EE.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function pI(){wE.call(this),this.status=1}function ud(i){this.g=i}(it=kr.prototype).ea=function(i,n,r,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():CE.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:CE),this.g.onreadystatechange=qr(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(c){return void lI(this,c)}i=r||"";const u=new Ml(this.headers);s&&wo(s,function(c,f){u.set(f,c)}),s=function(i){e:{var n=uI;const r=i.length,s="string"==typeof i?i.split(""):i;for(let u=0;u<r;u++)if(u in s&&n.call(void 0,s[u],u,i)){n=u;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(u.T()),r=mt.FormData&&i instanceof mt.FormData,!(0<=p_(aI,n))||s||r||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(c,f){this.g.setRequestHeader(f,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Co(this),0<this.B&&((this.K=function(i){return M&&ug()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qr(this.pa,this)):this.A=bi(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){lI(this,c)}},it.pa=function(){void 0!==Ka&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},it.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,li(this,"complete"),li(this,"abort"),L_(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),L_(this,!0)),kr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?cI(this):this.cb())},it.cb=function(){cI(this)},it.ba=function(){try{return 2<Gu(this)?this.g.status:-1}catch(i){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},it.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),TR(n)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=dI.prototype).ma=8,it.G=1,it.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},it.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Ol(this,this.h,i,void 0);let c=this.s;if(this.P&&(c?(c=ag(c),b(c,this.P)):c=this.P),null===this.o&&(u.H=c),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var s=this.l[r];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(n+=s)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=bo(this,u,n),In(r=Qa(this.F),"RID",i),In(r,"CVER",22),this.D&&In(r,"X-HTTP-Session-Id",this.D),kl(this,r),this.o&&c&&PE(r,this.o,c),P_(this.i,u),this.Ra&&In(r,"TYPE","init"),this.ja?(In(r,"$req",n),In(r,"SID","null"),u.$=!0,x_(u,r,null)):x_(u,r,n),this.G=2}}else 3==this.G&&(i?FE(this,i):0==this.l.length||sI(this.i)||FE(this))},it.Ga=function(){if(this.u=null,Ja(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=S_(qr(this.bb,this),i)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Li(10),U_(this),Ja(this))},it.ab=function(){null!=this.v&&(this.v=null,U_(this),VE(this),Li(19))},it.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Li(2)):(this.h.info("Failed to ping google.com"),Li(1))},(it=Ag.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},ad.prototype.g=function(i,n){return new Qi(i,n)},er(Qi,xr),Qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),gE(qr(i.hb,i,n))),Li(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=SR(i,null,i.W),Tt(i)},Qi.prototype.close=function(){V_(this.g)},Qi.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,kE(this.g,n)}else this.v?((n={}).__data__=fE(i),kE(this.g,n)):kE(this.g,i)},Qi.prototype.M=function(){this.g.j=null,delete this.j,V_(this.g),delete this.g,Qi.Z.M.call(this)},er(AR,EE),er(pI,wE),er(ud,Ag),ud.prototype.xa=function(){li(this.g,"a")},ud.prototype.wa=function(i){li(this.g,new AR(i))},ud.prototype.va=function(i){li(this.g,new pI(i))},ud.prototype.ua=function(){li(this.g,"b")},ad.prototype.createWebChannel=ad.prototype.g,Qi.prototype.send=Qi.prototype.u,Qi.prototype.open=Qi.prototype.m,Qi.prototype.close=Qi.prototype.close,hg.NO_ERROR=0,hg.TIMEOUT=8,hg.HTTP_ERROR=6,fg.COMPLETE="complete",Xc.EventType=pg,pg.OPEN="a",pg.CLOSE="b",pg.ERROR="c",pg.MESSAGE="d",xr.prototype.listen=xr.prototype.N,kr.prototype.listenOnce=kr.prototype.O,kr.prototype.getLastError=kr.prototype.La,kr.prototype.getLastErrorCode=kr.prototype.Da,kr.prototype.getStatus=kr.prototype.ba,kr.prototype.getResponseJson=kr.prototype.Qa,kr.prototype.getResponseText=kr.prototype.ga,kr.prototype.send=kr.prototype.ea;var vP=_o.createWebChannelTransport=function(){return new ad},RR=_o.getStatEventTarget=function(){return T_()},gI=_o.ErrorCode=hg,mI=_o.EventType=fg,_I=_o.Event=Nl,yI=_o.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jE=_o.FetchXmlHttpFactory=od,$E=_o.WebChannel=Xc,EP=_o.XhrIo=kr;class Vi{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let Rg="9.1.0";const ld=new ai.Yd("@firebase/firestore");function vI(){return ld.logLevel}function Ze(i,...n){if(ld.logLevel<=ai.in.DEBUG){const r=n.map(EI);ld.debug(`Firestore (${Rg}): ${i}`,...r)}}function zr(i,...n){if(ld.logLevel<=ai.in.ERROR){const r=n.map(EI);ld.error(`Firestore (${Rg}): ${i}`,...r)}}function j_(i,...n){if(ld.logLevel<=ai.in.WARN){const r=n.map(EI);ld.warn(`Firestore (${Rg}): ${i}`,...r)}}function EI(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function st(i="Unexpected state"){const n=`FIRESTORE (${Rg}) INTERNAL ASSERTION FAILED: `+i;throw zr(n),new Error(n)}function Ct(i,n){i||st()}function Je(i,n){return i}const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class wI{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class Fl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(Vi.UNAUTHENTICATED))}shutdown(){}}class CI{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class NR{constructor(n){this.t=n,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var s=this;let u=this.i;const c=T=>this.i!==u?(u=this.i,r(T)):Promise.resolve();let f=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Fr,n.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const T=f;n.enqueueRetryable((0,Re.Z)(function*(){yield T.promise,yield c(s.currentUser)}))},C=T=>{Ze("FirebaseCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(T=>C(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?C(T):(Ze("FirebaseCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Fr)}},0),m()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==n?(Ze("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ct("string"==typeof s.accessToken),new wI(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Ct(null===n||"string"==typeof n),new Vi(n)}}class CP{constructor(n,r,s){this.h=n,this.l=r,this.m=s,this.type="FirstParty",this.user=Vi.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class HE{constructor(n,r,s){this.h=n,this.l=r,this.m=s}getToken(){return Promise.resolve(new CP(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(Vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qs{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=s=>this.g(s),this.p=s=>r.writeSequenceNumber(s))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function bI(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}qs.T=-1;class II{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let s="";for(;s.length<20;){const u=bI(40);for(let c=0;c<u.length;++c)s.length<20&&u[c]<r&&(s+=n.charAt(u[c]%n.length))}return s}}function Jt(i,n){return i<n?-1:i>n?1:0}function eu(i,n,r){return i.length===n.length&&i.every((s,u)=>r(s,n[u]))}function cd(i){return i+"\0"}class Lr{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new He(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new He(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new He(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new He(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Lr.fromMillis(Date.now())}static fromDate(n){return Lr.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),s=Math.floor(1e6*(n-1e3*r));return new Lr(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Jt(this.nanoseconds,n.nanoseconds):Jt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(n){this.timestamp=n}static fromTimestamp(n){return new At(n)}static min(){return new At(new Lr(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function rf(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function Io(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function TI(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class sf{constructor(n,r,s){void 0===r?r=0:r>n.length&&st(),void 0===s?s=n.length-r:s>n.length-r&&st(),this.segments=n,this.offset=r,this.len=s}get length(){return this.len}isEqual(n){return 0===sf.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof sf?n.forEach(s=>{r.push(s)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,s=this.limit();r<s;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const s=Math.min(n.length,r.length);for(let u=0;u<s;u++){const c=n.get(u),f=r.get(u);if(c<f)return-1;if(c>f)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class gn extends sf{construct(n,r,s){return new gn(n,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const s of n){if(s.indexOf("//")>=0)throw new He(Ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new gn(r)}static emptyPath(){return new gn([])}}const GE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends sf{construct(n,r,s){return new Kr(n,r,s)}static isValidIdentifier(n){return GE.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(n){const r=[];let s="",u=0;const c=()=>{if(0===s.length)throw new He(Ie.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let f=!1;for(;u<n.length;){const m=n[u];if("\\"===m){if(u+1===n.length)throw new He(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const C=n[u+1];if("\\"!==C&&"."!==C&&"`"!==C)throw new He(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);s+=C,u+=2}else"`"===m?(f=!f,u++):"."!==m||f?(s+=m,u++):(c(),u++)}if(c(),f)throw new He(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Kr(r)}static emptyPath(){return new Kr([])}}class dd{constructor(n){this.fields=n,n.sort(Kr.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return eu(this.fields,n.fields,(r,s)=>r.isEqual(s))}}class ci{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new ci(r)}static fromUint8Array(n){const r=function(s){let u="";for(let c=0;c<s.length;++c)u+=String.fromCharCode(s[c]);return u}(n);return new ci(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Jt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}ci.EMPTY_BYTE_STRING=new ci("");const DI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hd(i){if(Ct(!!i),"string"==typeof i){let n=0;const r=DI.exec(i);if(Ct(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),n=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:n}}return{seconds:Nr(i.seconds),nanos:Nr(i.nanos)}}function Nr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function fd(i){return"string"==typeof i?ci.fromBase64String(i):ci.fromUint8Array(i)}function WE(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function qE(i){const n=i.mapValue.fields.__previous_value__;return WE(n)?qE(n):n}function xg(i){const n=hd(i.mapValue.fields.__local_write_time__.timestampValue);return new Lr(n.seconds,n.nanos)}function pd(i){return null==i}function Ui(i){return 0===i&&1/i==-1/0}function SI(i){return"number"==typeof i&&Number.isInteger(i)&&!Ui(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class at{constructor(n){this.path=n}static fromPath(n){return new at(gn.fromString(n))}static fromName(n){return new at(gn.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===gn.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return gn.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new at(new gn(n.slice()))}}function of(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?WE(i)?4:10:st()}function Wu(i,n){const r=of(i);if(r!==of(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return xg(i).isEqual(xg(n));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const c=hd(s.timestampValue),f=hd(u.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return u=n,fd(i.bytesValue).isEqual(fd(u.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(s,u){return Nr(s.geoPointValue.latitude)===Nr(u.geoPointValue.latitude)&&Nr(s.geoPointValue.longitude)===Nr(u.geoPointValue.longitude)}(i,n);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return Nr(s.integerValue)===Nr(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const c=Nr(s.doubleValue),f=Nr(u.doubleValue);return c===f?Ui(c)===Ui(f):isNaN(c)&&isNaN(f)}return!1}(i,n);case 9:return eu(i.arrayValue.values||[],n.arrayValue.values||[],Wu);case 10:return function(s,u){const c=s.mapValue.fields||{},f=u.mapValue.fields||{};if(rf(c)!==rf(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(void 0===f[m]||!Wu(c[m],f[m])))return!1;return!0}(i,n);default:return st()}var u}function af(i,n){return void 0!==(i.values||[]).find(r=>Wu(r,n))}function Ng(i,n){const r=of(i),s=of(n);if(r!==s)return Jt(r,s);switch(r){case 0:return 0;case 1:return Jt(i.booleanValue,n.booleanValue);case 2:return function(u,c){const f=Nr(u.integerValue||u.doubleValue),m=Nr(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(i,n);case 3:return AI(i.timestampValue,n.timestampValue);case 4:return AI(xg(i),xg(n));case 5:return Jt(i.stringValue,n.stringValue);case 6:return function(u,c){const f=fd(u),m=fd(c);return f.compareTo(m)}(i.bytesValue,n.bytesValue);case 7:return function(u,c){const f=u.split("/"),m=c.split("/");for(let C=0;C<f.length&&C<m.length;C++){const T=Jt(f[C],m[C]);if(0!==T)return T}return Jt(f.length,m.length)}(i.referenceValue,n.referenceValue);case 8:return function(u,c){const f=Jt(Nr(u.latitude),Nr(c.latitude));return 0!==f?f:Jt(Nr(u.longitude),Nr(c.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(u,c){const f=u.values||[],m=c.values||[];for(let C=0;C<f.length&&C<m.length;++C){const T=Ng(f[C],m[C]);if(T)return T}return Jt(f.length,m.length)}(i.arrayValue,n.arrayValue);case 10:return function(u,c){const f=u.fields||{},m=Object.keys(f),C=c.fields||{},T=Object.keys(C);m.sort(),T.sort();for(let x=0;x<m.length&&x<T.length;++x){const O=Jt(m[x],T[x]);if(0!==O)return O;const L=Ng(f[m[x]],C[T[x]]);if(0!==L)return L}return Jt(m.length,T.length)}(i.mapValue,n.mapValue);default:throw st()}}function AI(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return Jt(i,n);const r=hd(i),s=hd(n),u=Jt(r.seconds,s.seconds);return 0!==u?u:Jt(r.nanos,s.nanos)}function Og(i){return H_(i)}function H_(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=hd(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?fd(i.bytesValue).toBase64():"referenceValue"in i?at.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(s){let u="[",c=!0;for(const f of s.values||[])c?c=!1:u+=",",u+=H_(f);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let c="{",f=!0;for(const m of u)f?f=!1:c+=",",c+=`${m}:${H_(s.fields[m])}`;return c+"}"}(i.mapValue):st();var n}function G_(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function zE(i){return!!i&&"integerValue"in i}function KE(i){return!!i&&"arrayValue"in i}function ZE(i){return!!i&&"nullValue"in i}function RI(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Mg(i){return!!i&&"mapValue"in i}function Pg(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return Io(i.mapValue.fields,(r,s)=>n.mapValue.fields[r]=Pg(s)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Pg(i.arrayValue.values[r]);return n}return Object.assign({},i)}class Bi{constructor(n){this.value=n}static empty(){return new Bi({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let s=0;s<n.length-1;++s)if(r=(r.mapValue.fields||{})[n.get(s)],!Mg(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=Pg(r)}setAll(n){let r=Kr.emptyPath(),s={},u=[];n.forEach((f,m)=>{if(!r.isImmediateParentOf(m)){const C=this.getFieldsMap(r);this.applyChanges(C,s,u),s={},u=[],r=m.popLast()}f?s[m.lastSegment()]=Pg(f):u.push(m.lastSegment())});const c=this.getFieldsMap(r);this.applyChanges(c,s,u)}delete(n){const r=this.field(n.popLast());Mg(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return Wu(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<n.length;++s){let u=r.mapValue.fields[n.get(s)];Mg(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[n.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(n,r,s){Io(r,(u,c)=>n[u]=c);for(const u of s)delete n[u]}clone(){return new Bi(Pg(this.value))}}function YE(i){const n=[];return Io(i.fields,(r,s)=>{const u=new Kr([r]);if(Mg(s)){const c=YE(s.mapValue).fields;if(0===c.length)n.push(u);else for(const f of c)n.push(u.child(f))}else n.push(u)}),new dd(n)}class Zn{constructor(n,r,s,u,c){this.key=n,this.documentType=r,this.version=s,this.data=u,this.documentState=c}static newInvalidDocument(n){return new Zn(n,0,At.min(),Bi.empty(),0)}static newFoundDocument(n,r,s){return new Zn(n,1,r,s,0)}static newNoDocument(n,r){return new Zn(n,2,r,Bi.empty(),0)}static newUnknownDocument(n,r){return new Zn(n,3,r,Bi.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof Zn&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new Zn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class OR{constructor(n,r=null,s=[],u=[],c=null,f=null,m=null){this.path=n,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=c,this.startAt=f,this.endAt=m,this.A=null}}function ia(i,n=null,r=[],s=[],u=null,c=null,f=null){return new OR(i,n,r,s,u,c,f)}function gd(i){const n=Je(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(s=>function(i){return i.field.canonicalString()+i.op.toString()+Og(i.value)}(s)).join(","),r+="|ob:",r+=n.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),pd(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=uf(n.startAt)),n.endAt&&(r+="|ub:",r+=uf(n.endAt)),n.A=r}return n.A}function W_(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!UR(i.orderBy[u],n.orderBy[u]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((r=i.filters[u]).op!==(s=n.filters[u]).op||!r.field.isEqual(s.field)||!Wu(r.value,s.value))return!1;var r,s;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!z_(i.startAt,n.startAt)&&z_(i.endAt,n.endAt)}function QE(i){return at.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class ji extends class{}{constructor(n,r,s){super(),this.field=n,this.op=r,this.value=s}static create(n,r,s){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,s):new kR(n,r,s):"array-contains"===r?new LR(n,s):"in"===r?new q_(n,s):"not-in"===r?new XE(n,s):"array-contains-any"===r?new VR(n,s):new ji(n,r,s)}static R(n,r,s){return"in"===r?new FR(n,s):new JE(n,s)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(Ng(r,this.value)):null!==r&&of(this.value)===of(r)&&this.P(Ng(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return st()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class kR extends ji{constructor(n,r,s){super(n,r,s),this.key=at.fromName(s.referenceValue)}matches(n){const r=at.comparator(n.key,this.key);return this.P(r)}}class FR extends ji{constructor(n,r){super(n,"in",r),this.keys=xI(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class JE extends ji{constructor(n,r){super(n,"not-in",r),this.keys=xI(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function xI(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>at.fromName(s.referenceValue))}class LR extends ji{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return KE(r)&&af(r.arrayValue,this.value)}}class q_ extends ji{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&af(this.value.arrayValue,r)}}class XE extends ji{constructor(n,r){super(n,"not-in",r)}matches(n){if(af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!af(this.value.arrayValue,r)}}class VR extends ji{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!KE(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>af(this.value.arrayValue,s))}}class md{constructor(n,r){this.position=n,this.before=r}}function uf(i){return`${i.before?"b":"a"}:${i.position.map(n=>Og(n)).join(",")}`}class _d{constructor(n,r="asc"){this.field=n,this.dir=r}}function UR(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function NI(i,n,r){let s=0;for(let u=0;u<i.position.length;u++){const c=n[u],f=i.position[u];if(s=c.field.isKeyField()?at.comparator(at.fromName(f.referenceValue),r.key):Ng(f,r.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function z_(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Wu(i.position[r],n.position[r]))return!1;return!0}class Ll{constructor(n,r=null,s=[],u=[],c=null,f="F",m=null,C=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=C,this.V=null,this.S=null}}function OI(i,n,r,s,u,c,f,m){return new Ll(i,n,r,s,u,c,f,m)}function yd(i){return new Ll(i)}function kg(i){return!pd(i.limit)&&"F"===i.limitType}function Fg(i){return!pd(i.limit)&&"L"===i.limitType}function K_(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Z_(i){for(const n of i.filters)if(n.v())return n.field;return null}function sa(i){return null!==i.collectionGroup}function qu(i){const n=Je(i);if(null===n.V){n.V=[];const r=Z_(n),s=K_(n);if(null!==r&&null===s)r.isKeyField()||n.V.push(new _d(r)),n.V.push(new _d(Kr.keyField(),"asc"));else{let u=!1;for(const c of n.explicitOrderBy)n.V.push(c),c.field.isKeyField()&&(u=!0);if(!u){const c=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new _d(Kr.keyField(),c))}}}return n.V}function To(i){const n=Je(i);if(!n.S)if("F"===n.limitType)n.S=ia(n.path,n.collectionGroup,qu(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const c of qu(n))r.push(new _d(c.field,"desc"===c.dir?"asc":"desc"));const s=n.endAt?new md(n.endAt.position,!n.endAt.before):null,u=n.startAt?new md(n.startAt.position,!n.startAt.before):null;n.S=ia(n.path,n.collectionGroup,r,n.filters,n.limit,s,u)}return n.S}function MI(i,n,r){return new Ll(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function Y_(i,n){return W_(To(i),To(n))&&i.limitType===n.limitType}function vd(i){return`${gd(To(i))}|lt:${i.limitType}`}function Q_(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(s=r).field.canonicalString()} ${s.op} ${Og(s.value)}`;var s}).join(", ")}]`),pd(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(n+=", startAt: "+uf(i.startAt)),i.endAt&&(n+=", endAt: "+uf(i.endAt)),`Target(${n})`}(To(i))}; limitType=${i.limitType})`}function zu(i,n){return n.isFoundDocument()&&function(r,s){const u=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):at.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(i,n)&&function(r,s){for(const u of r.explicitOrderBy)if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,n)&&function(r,s){for(const u of r.filters)if(!u.matches(s))return!1;return!0}(i,n)&&(s=n,!((r=i).startAt&&!NI(r.startAt,qu(r),s)||r.endAt&&NI(r.endAt,qu(r),s)));var r,s}function lf(i){return(n,r)=>{let s=!1;for(const u of qu(i)){const c=BR(u,n,r);if(0!==c)return c;s=s||u.field.isKeyField()}return 0}}function BR(i,n,r){const s=i.field.isKeyField()?at.comparator(n.key,r.key):function(u,c,f){const m=c.data.field(u),C=f.data.field(u);return null!==m&&null!==C?Ng(m,C):st()}(i.field,n,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return st()}}function J_(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ui(n)?"-0":n}}function ew(i){return{integerValue:""+i}}function PI(i,n){return SI(n)?ew(n):J_(i,n)}class Lg{constructor(){this._=void 0}}function jR(i,n,r){return i instanceof cf?function(s,u){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(c.fields.__previous_value__=u),{mapValue:c}}(r,n):i instanceof Vl?Ed(i,n):i instanceof Ul?FI(i,n):function(s,u){const c=kI(s,u),f=wd(c)+wd(s.C);return zE(c)&&zE(s.C)?ew(f):J_(s.N,f)}(i,n)}function tw(i,n,r){return i instanceof Vl?Ed(i,n):i instanceof Ul?FI(i,n):r}function kI(i,n){return i instanceof df?zE(r=n)||(s=r)&&"doubleValue"in s?n:{integerValue:0}:null;var s,r}class cf extends Lg{}class Vl extends Lg{constructor(n){super(),this.elements=n}}function Ed(i,n){const r=LI(n);for(const s of i.elements)r.some(u=>Wu(u,s))||r.push(s);return{arrayValue:{values:r}}}class Ul extends Lg{constructor(n){super(),this.elements=n}}function FI(i,n){let r=LI(n);for(const s of i.elements)r=r.filter(u=>!Wu(u,s));return{arrayValue:{values:r}}}class df extends Lg{constructor(n,r){super(),this.N=n,this.C=r}}function wd(i){return Nr(i.integerValue||i.doubleValue)}function LI(i){return KE(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Vg{constructor(n,r){this.field=n,this.transform=r}}class HR{constructor(n,r){this.version=n,this.transformResults=r}}class Zr{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new Zr}static exists(n){return new Zr(void 0,n)}static updateTime(n){return new Zr(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function X_(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class Ug{}function nr(i,n,r){i instanceof Cd?function(s,u,c){const f=s.value.clone(),m=UI(s.fieldTransforms,u,c.transformResults);f.setAll(m),u.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(i,n,r):i instanceof bd?function(s,u,c){if(!X_(s.precondition,u))return void u.convertToUnknownDocument(c.version);const f=UI(s.fieldTransforms,u,c.transformResults),m=u.data;m.setAll(VI(s)),m.setAll(f),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function Bg(i,n,r){var u;i instanceof Cd?function(s,u,c){if(!X_(s.precondition,u))return;const f=s.value.clone(),m=nw(s.fieldTransforms,c,u);f.setAll(m),u.convertToFoundDocument(ey(u),f).setHasLocalMutations()}(i,n,r):i instanceof bd?function(s,u,c){if(!X_(s.precondition,u))return;const f=nw(s.fieldTransforms,c,u),m=u.data;m.setAll(VI(s)),m.setAll(f),u.convertToFoundDocument(ey(u),m).setHasLocalMutations()}(i,n,r):X_(i.precondition,u=n)&&u.convertToNoDocument(At.min())}function bP(i,n){let r=null;for(const s of i.fieldTransforms){const u=n.data.field(s.field),c=kI(s.transform,u||null);null!=c&&(null==r&&(r=Bi.empty()),r.set(s.field,c))}return r||null}function tu(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(s=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===s||r&&s&&eu(r,s,(u,c)=>function(i,n){return i.field.isEqual(n.field)&&(s=n.transform,(r=i.transform)instanceof Vl&&s instanceof Vl||r instanceof Ul&&s instanceof Ul?eu(r.elements,s.elements,Wu):r instanceof df&&s instanceof df?Wu(r.C,s.C):r instanceof cf&&s instanceof cf);var r,s}(u,c))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,s}function ey(i){return i.isFoundDocument()?i.version:At.min()}class Cd extends Ug{constructor(n,r,s,u=[]){super(),this.key=n,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}}class bd extends Ug{constructor(n,r,s,u,c=[]){super(),this.key=n,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=c,this.type=1}}function VI(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=i.data.field(r);n.set(r,s)}}),n}function UI(i,n,r){const s=new Map;Ct(i.length===r.length);for(let u=0;u<r.length;u++){const c=i[u],f=c.transform,m=n.data.field(c.field);s.set(c.field,tw(f,m,r[u]))}return s}function nw(i,n,r){const s=new Map;for(const u of i){const c=u.transform,f=r.data.field(u.field);s.set(u.field,jR(c,f,n))}return s}class hf extends Ug{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class ty extends Ug{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class BI{constructor(n){this.count=n}}var Vr,ln;function ff(i){switch(i){case Ie.OK:return st();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return st()}}function ny(i){if(void 0===i)return zr("GRPC error has no .code"),Ie.UNKNOWN;switch(i){case Vr.OK:return Ie.OK;case Vr.CANCELLED:return Ie.CANCELLED;case Vr.UNKNOWN:return Ie.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return Ie.INTERNAL;case Vr.UNAVAILABLE:return Ie.UNAVAILABLE;case Vr.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Vr.NOT_FOUND:return Ie.NOT_FOUND;case Vr.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Vr.ABORTED:return Ie.ABORTED;case Vr.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Vr.DATA_LOSS:return Ie.DATA_LOSS;default:return st()}}(ln=Vr||(Vr={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class Ur{constructor(n,r){this.comparator=n,this.root=r||di.EMPTY}insert(n,r){return new Ur(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,di.BLACK,null,null))}remove(n){return new Ur(this.comparator,this.root.remove(n,this.comparator).copy(null,null,di.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(n,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(n){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(n,s.key);if(0===u)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,s)=>(n(r,s),!1))}toString(){const n=[];return this.inorderTraversal((r,s)=>(n.push(`${r}:${s}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new jg(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new jg(this.root,n,this.comparator,!1)}getReverseIterator(){return new jg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new jg(this.root,n,this.comparator,!0)}}class jg{constructor(n,r,s,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!n.isEmpty();)if(c=r?s(n.key,r):1,u&&(c*=-1),c<0)n=this.isReverse?n.left:n.right;else{if(0===c){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class di{constructor(n,r,s,u,c){this.key=n,this.value=r,this.color=null!=s?s:di.RED,this.left=null!=u?u:di.EMPTY,this.right=null!=c?c:di.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,s,u,c){return new di(null!=n?n:this.key,null!=r?r:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,s){let u=this;const c=s(n,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(n,r,s),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(n,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let s,u=this;if(r(n,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(n,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(n,u.key)){if(u.right.isEmpty())return di.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(n,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const n=this.left.check();if(n!==this.right.check())throw st();return n+(this.isRed()?0:1)}}di.EMPTY=null,di.RED=!0,di.BLACK=!1,di.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(i,n,r,s,u){return this}insert(i,n,r){return new di(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(n){this.comparator=n,this.data=new Ur(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,s)=>(n(r),!1))}forEachInRange(n,r){const s=this.data.getIteratorFrom(n[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,n[1])>=0)return;r(u.key)}}forEachWhile(n,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!n(s.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new jI(this.data.getIterator())}getIteratorFrom(n){return new jI(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(s=>{r=r.add(s)}),r}isEqual(n){if(!(n instanceof hr)||this.size!==n.size)return!1;const r=this.data.getIterator(),s=n.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,c=s.getNext().key;if(0!==this.comparator(u,c))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new hr(this.comparator);return r.data=n,r}}class jI{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const GR=new Ur(at.comparator);function Do(){return GR}const WR=new Ur(at.comparator);function ry(){return WR}const IP=new Ur(at.comparator);function rw(){return IP}const qR=new hr(at.comparator);function Tn(...i){let n=qR;for(const r of i)n=n.add(r);return n}const TP=new hr(Jt);function iw(){return TP}class Id{constructor(n,r,s,u,c){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(n,r){const s=new Map;return s.set(n,$g.createSynthesizedTargetChangeForCurrentChange(n,r)),new Id(At.min(),s,iw(),Do(),Tn())}}class $g{constructor(n,r,s,u,c){this.resumeToken=n,this.current=r,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(n,r){return new $g(ci.EMPTY_BYTE_STRING,r,Tn(),Tn(),Tn())}}class Hg{constructor(n,r,s,u){this.k=n,this.removedTargetIds=r,this.key=s,this.$=u}}class sw{constructor(n,r){this.targetId=n,this.O=r}}class zR{constructor(n,r,s=ci.EMPTY_BYTE_STRING,u=null){this.state=n,this.targetIds=r,this.resumeToken=s,this.cause=u}}class So{constructor(){this.F=0,this.M=ZR(),this.L=ci.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=Tn(),r=Tn(),s=Tn();return this.M.forEach((u,c)=>{switch(c){case 0:n=n.add(u);break;case 2:r=r.add(u);break;case 1:s=s.add(u);break;default:st()}}),new $g(this.L,this.B,n,r,s)}G(){this.U=!1,this.M=ZR()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class DP{constructor(n){this.tt=n,this.et=new Map,this.nt=Do(),this.st=KR(),this.it=new hr(Jt)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const s=this.ut(r);switch(n.state){case 0:this.ht(r)&&s.j(n.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(n.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(r);break;case 3:this.ht(r)&&(s.Z(),s.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),s.j(n.resumeToken));break;default:st()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((s,u)=>{this.ht(u)&&r(u)})}ft(n){const r=n.targetId,s=n.O.count,u=this.dt(r);if(u){const c=u.target;if(QE(c))if(0===s){const f=new at(c.path);this.at(r,f,Zn.newNoDocument(f,At.min()))}else Ct(1===s);else this.wt(r)!==s&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((c,f)=>{const m=this.dt(f);if(m){if(c.current&&QE(m.target)){const C=new at(m.target.path);null!==this.nt.get(C)||this.gt(f,C)||this.at(f,C,Zn.newNoDocument(C,n))}c.K&&(r.set(f,c.W()),c.G())}});let s=Tn();this.st.forEach((c,f)=>{let m=!0;f.forEachWhile(C=>{const T=this.dt(C);return!T||2===T.purpose||(m=!1,!1)}),m&&(s=s.add(c))});const u=new Id(n,r,this.it,this.nt,s);return this.nt=Do(),this.st=KR(),this.it=new hr(Jt),u}ot(n,r){if(!this.ht(n))return;const s=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,s),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,s){if(!this.ht(n))return;const u=this.ut(n);this.gt(n,r)?u.H(r,1):u.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),s&&(this.nt=this.nt.insert(r,s))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new So,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new hr(Jt),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||Ze("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new So),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function KR(){return new Ur(at.comparator)}function ZR(){return new Ur(at.comparator)}const $I={asc:"ASCENDING",desc:"DESCENDING"},HI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class GI{constructor(n,r){this.databaseId=n,this.D=r}}function Gg(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function YR(i,n){return i.D?n.toBase64():n.toUint8Array()}function WI(i,n){return Gg(i,n.toTimestamp())}function Br(i){return Ct(!!i),At.fromTimestamp(function(n){const r=hd(n);return new Lr(r.seconds,r.nanos)}(i))}function ow(i,n){return(r=i,new gn(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function iy(i){const n=gn.fromString(i);return Ct(Dd(n)),n}function Wg(i,n){return ow(i.databaseId,n.path)}function nu(i,n){const r=iy(n);if(r.get(1)!==i.databaseId.projectId)throw new He(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new He(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new at(zI(r))}function aw(i,n){return ow(i.databaseId,n)}function qI(i){const n=iy(i);return 4===n.length?gn.emptyPath():zI(n)}function qg(i){return new gn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function zI(i){return Ct(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function zg(i,n,r){return{name:Wg(i,n),fields:r.value.mapValue.fields}}function Td(i,n,r){const s=nu(i,n.name),u=Br(n.updateTime),c=new Bi({mapValue:{fields:n.fields}}),f=Zn.newFoundDocument(s,u,c);return r&&f.setHasCommittedMutations(),r?f.setHasCommittedMutations():f}function Bl(i,n){let r;if(n instanceof Cd)r={update:zg(i,n.key,n.value)};else if(n instanceof hf)r={delete:Wg(i,n.key)};else if(n instanceof bd)r={update:zg(i,n.key,n.data),updateMask:yf(n.fieldMask)};else{if(!(n instanceof ty))return st();r={verify:Wg(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(s=>function(u,c){const f=c.transform;if(f instanceof cf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Vl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ul)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof df)return{fieldPath:c.field.canonicalString(),increment:f.C};throw st()}(0,s))),n.precondition.isNone||(r.currentDocument=void 0!==(u=n.precondition).updateTime?{updateTime:WI(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:st()),r;var u}function ZI(i,n){const r=n.currentDocument?void 0!==(u=n.currentDocument).updateTime?Zr.updateTime(Br(u.updateTime)):void 0!==u.exists?Zr.exists(u.exists):Zr.none():Zr.none(),s=n.updateTransforms?n.updateTransforms.map(u=>function(c,f){let m=null;"setToServerValue"in f?(Ct("REQUEST_TIME"===f.setToServerValue),m=new cf):"appendMissingElements"in f?m=new Vl(f.appendMissingElements.values||[]):"removeAllFromArray"in f?m=new Ul(f.removeAllFromArray.values||[]):"increment"in f?m=new df(c,f.increment):st();const C=Kr.fromServerFormat(f.fieldPath);return new Vg(C,m)}(i,u)):[];var u;if(n.update){const u=nu(i,n.update.name),c=new Bi({mapValue:{fields:n.update.fields}});if(n.updateMask){const f=new dd((n.updateMask.fieldPaths||[]).map(T=>Kr.fromServerFormat(T)));return new bd(u,c,f,r,s)}return new Cd(u,c,r,s)}if(n.delete){const u=nu(i,n.delete);return new hf(u,r)}if(n.verify){const u=nu(i,n.verify);return new ty(u,r)}return st()}function sy(i,n){return{documents:[aw(i,n.path)]}}function aa(i,n){const r={structuredQuery:{}},s=n.path;null!==n.collectionGroup?(r.parent=aw(i,s),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=aw(i,s.popLast()),r.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(m){if(0===m.length)return;const C=m.map(T=>function(x){if("=="===x.op){if(RI(x.value))return{unaryFilter:{field:ua(x.field),op:"IS_NAN"}};if(ZE(x.value))return{unaryFilter:{field:ua(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(RI(x.value))return{unaryFilter:{field:ua(x.field),op:"IS_NOT_NAN"}};if(ZE(x.value))return{unaryFilter:{field:ua(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(x.field),op:gf(x.op),value:x.value}}}(T));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(n.filters);u&&(r.structuredQuery.where=u);const c=function(m){if(0!==m.length)return m.map(C=>{return{field:ua((T=C).field),direction:uw(T.dir)};var T})}(n.orderBy);c&&(r.structuredQuery.orderBy=c);const f=(C=n.limit,i.D||pd(C)?C:{value:C});var C;return null!==f&&(r.structuredQuery.limit=f),n.startAt&&(r.structuredQuery.startAt=Kg(n.startAt)),n.endAt&&(r.structuredQuery.endAt=Kg(n.endAt)),r}function pf(i){let n=qI(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){Ct(1===s);const x=r.from[0];x.allDescendants?u=x.collectionId:n=n.child(x.collectionId)}let c=[];r.where&&(c=jl(r.where));let f=[];r.orderBy&&(f=r.orderBy.map(x=>{return new _d(la((O=x).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;r.limit&&(m=function(x){let O;return O="object"==typeof x?x.value:x,pd(O)?null:O}(r.limit));let C=null;r.startAt&&(C=zs(r.startAt));let T=null;return r.endAt&&(T=zs(r.endAt)),OI(n,u,f,c,m,"F",C,T)}function jl(i){return i?void 0!==i.unaryFilter?[_f(i)]:void 0!==i.fieldFilter?[mf(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>jl(n)).reduce((n,r)=>n.concat(r)):st():[]}function Kg(i){return{before:i.before,values:i.position}}function zs(i){return new md(i.values||[],!!i.before)}function uw(i){return $I[i]}function gf(i){return HI[i]}function ua(i){return{fieldPath:i.canonicalString()}}function la(i){return Kr.fromServerFormat(i.fieldPath)}function mf(i){return ji.create(la(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return st()}}(i.fieldFilter.op),i.fieldFilter.value)}function _f(i){switch(i.unaryFilter.op){case"IS_NAN":const n=la(i.unaryFilter.field);return ji.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=la(i.unaryFilter.field);return ji.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=la(i.unaryFilter.field);return ji.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=la(i.unaryFilter.field);return ji.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return st()}}function yf(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function Dd(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Hi(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=lw(n)),n=vf(i.get(r),n);return lw(n)}function vf(i,n){let r=n;const s=i.length;for(let u=0;u<s;u++){const c=i.charAt(u);switch(c){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=c}}return r}function lw(i){return i+"\x01\x01"}function ru(i){const n=i.length;if(Ct(n>=2),2===n)return Ct("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),gn.emptyPath();const r=n-2,s=[];let u="";for(let c=0;c<n;){const f=i.indexOf("\x01",c);switch((f<0||f>r)&&st(),i.charAt(f+1)){case"\x01":const m=i.substring(c,f);let C;0===u.length?C=m:(u+=m,C=u,u=""),s.push(C);break;case"\x10":u+=i.substring(c,f),u+="\0";break;case"\x11":u+=i.substring(c,f+1);break;default:st()}c=f+2}return new gn(s)}class YI{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class Cs{constructor(n,r,s){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=s}}Cs.store="owner",Cs.key="owner";class Ku{constructor(n,r,s){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=s}}Ku.store="mutationQueues",Ku.keyPath="userId";class Pn{constructor(n,r,s,u,c){this.userId=n,this.batchId=r,this.localWriteTimeMs=s,this.baseMutations=u,this.mutations=c}}Pn.store="mutations",Pn.keyPath="batchId",Pn.userMutationsIndex="userMutationsIndex",Pn.userMutationsKeyPath=["userId","batchId"];class Ti{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,Hi(r)]}static key(n,r,s){return[n,Hi(r),s]}}Ti.store="documentMutations",Ti.PLACEHOLDER=new Ti;class QI{constructor(n,r){this.path=n,this.readTime=r}}class JI{constructor(n,r){this.path=n,this.version=r}}class Cr{constructor(n,r,s,u,c,f){this.unknownDocument=n,this.noDocument=r,this.document=s,this.hasCommittedMutations=u,this.readTime=c,this.parentPath=f}}Cr.store="remoteDocuments",Cr.readTimeIndex="readTimeIndex",Cr.readTimeIndexPath="readTime",Cr.collectionReadTimeIndex="collectionReadTimeIndex",Cr.collectionReadTimeIndexPath=["parentPath","readTime"];class ca{constructor(n){this.byteSize=n}}ca.store="remoteDocumentGlobal",ca.key="remoteDocumentGlobalKey";class bs{constructor(n,r,s,u,c,f,m){this.targetId=n,this.canonicalId=r,this.readTime=s,this.resumeToken=u,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=f,this.query=m}}bs.store="targets",bs.keyPath="targetId",bs.queryTargetsIndexName="queryTargetsIndex",bs.queryTargetsKeyPath=["canonicalId","targetId"];class hi{constructor(n,r,s){this.targetId=n,this.path=r,this.sequenceNumber=s}}hi.store="targetDocuments",hi.keyPath=["targetId","path"],hi.documentTargetsIndex="documentTargetsIndex",hi.documentTargetsKeyPath=["path","targetId"];class Is{constructor(n,r,s,u){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=s,this.targetCount=u}}Is.key="targetGlobalKey",Is.store="targetGlobal";class Sd{constructor(n,r){this.collectionId=n,this.parent=r}}Sd.store="collectionParents",Sd.keyPath=["collectionId","parent"];class $l{constructor(n,r,s,u){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=s,this.inForeground=u}}$l.store="clientMetadata",$l.keyPath="clientId";class Ef{constructor(n,r,s){this.bundleId=n,this.createTime=r,this.version=s}}Ef.store="bundles",Ef.keyPath="bundleId";class Ad{constructor(n,r,s){this.name=n,this.readTime=r,this.bundledQuery=s}}Ad.store="namedQueries",Ad.keyPath="name";const JR=[Ku.store,Pn.store,Ti.store,Cr.store,bs.store,Cs.store,Is.store,hi.store,$l.store,ca.store,Sd.store,Ef.store,Ad.store],cw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class je{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new je((s,u)=>{this.nextCallback=c=>{this.wrapSuccess(n,c).next(s,u)},this.catchCallback=c=>{this.wrapFailure(r,c).next(s,u)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof je?r:je.resolve(r)}catch(r){return je.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):je.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):je.reject(r)}static resolve(n){return new je((r,s)=>{r(n)})}static reject(n){return new je((r,s)=>{s(n)})}static waitFor(n){return new je((r,s)=>{let u=0,c=0,f=!1;n.forEach(m=>{++u,m.next(()=>{++c,f&&c===u&&r()},C=>s(C))}),f=!0,c===u&&r()})}static or(n){let r=je.resolve(!1);for(const s of n)r=r.next(u=>u?je.resolve(u):s());return r}static forEach(n,r){const s=[];return n.forEach((u,c)=>{s.push(r.call(this,u,c))}),this.waitFor(s)}}class dw{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Fr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new oy(n,r.error)):this.Tt.resolve()},this.transaction.onerror=s=>{const u=hw(s.target.error);this.Tt.reject(new oy(n,u))}}static open(n,r,s,u){try{return new dw(r,n.transaction(u,s))}catch(c){throw new oy(r,c)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(Ze("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new SP(r)}}class da{constructor(n,r,s){this.name=n,this.version=r,this.At=s,12.2===da.Rt((0,j.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Ze("SimpleDb","Removing database:",n),Rd(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,j.hl)())return!1;if(da.Pt())return!0;const n=(0,j.z$)(),r=da.Rt(n),s=0<r&&r<10,u=da.vt(n),c=0<u&&u<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||s||c)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(n){const r=n.match(/Android ([\d.]+)/i),s=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(n){var r=this;return(0,Re.Z)(function*(){return r.db||(Ze("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,u)=>{const c=indexedDB.open(r.name,r.version);c.onsuccess=f=>{s(f.target.result)},c.onblocked=()=>{u(new oy(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const m=f.target.error;u("VersionError"===m.name?new He(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new He(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new oy(n,m))},c.onupgradeneeded=f=>{Ze("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',f.oldVersion),r.At.Ct(f.target.result,c.transaction,f.oldVersion,r.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=s=>r.Nt(s)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,s,u){var c=this;return(0,Re.Z)(function*(){const f="readonly"===r;let m=0;for(;;){++m;try{c.db=yield c.Dt(n);const C=dw.open(c.db,n,f?"readonly":"readwrite",s),T=u(C).catch(x=>(C.abort(x),je.reject(x))).toPromise();return T.catch(()=>{}),yield C.It,T}catch(C){const T="FirebaseError"!==C.name&&m<3;if(Ze("SimpleDb","Transaction failed with error:",C.message,"Retrying:",T),c.close(),!T)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eT{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return Rd(this.kt.delete())}}class oy extends He{constructor(n,r){super(Ie.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function wf(i){return"IndexedDbTransactionError"===i.name}class SP{constructor(n){this.store=n}put(n,r){let s;return void 0!==r?(Ze("SimpleDb","PUT",this.store.name,n,r),s=this.store.put(r,n)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",n),s=this.store.put(n)),Rd(s)}add(n){return Ze("SimpleDb","ADD",this.store.name,n,n),Rd(this.store.add(n))}get(n){return Rd(this.store.get(n)).next(r=>(void 0===r&&(r=null),Ze("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return Ze("SimpleDb","DELETE",this.store.name,n),Rd(this.store.delete(n))}count(){return Ze("SimpleDb","COUNT",this.store.name),Rd(this.store.count())}Lt(n,r){const s=this.cursor(this.options(n,r)),u=[];return this.Bt(s,(c,f)=>{u.push(f)}).next(()=>u)}Ut(n,r){Ze("SimpleDb","DELETE ALL",this.store.name);const s=this.options(n,r);s.qt=!1;const u=this.cursor(s);return this.Bt(u,(c,f,m)=>m.delete())}Kt(n,r){let s;r?s=n:(s={},r=n);const u=this.cursor(s);return this.Bt(u,r)}jt(n){const r=this.cursor({});return new je((s,u)=>{r.onerror=c=>{const f=hw(c.target.error);u(f)},r.onsuccess=c=>{const f=c.target.result;f?n(f.primaryKey,f.value).next(m=>{m?f.continue():s()}):s()}})}Bt(n,r){const s=[];return new je((u,c)=>{n.onerror=f=>{c(f.target.error)},n.onsuccess=f=>{const m=f.target.result;if(!m)return void u();const C=new eT(m),T=r(m.primaryKey,m.value,C);if(T instanceof je){const x=T.catch(O=>(C.done(),je.reject(O)));s.push(x)}C.isDone?u():null===C.Ft?m.continue():m.continue(C.Ft)}}).next(()=>je.waitFor(s))}options(n,r){let s;return void 0!==n&&("string"==typeof n?s=n:r=n),{index:s,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const s=this.store.index(n.index);return n.qt?s.openKeyCursor(n.range,r):s.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function Rd(i){return new je((n,r)=>{i.onsuccess=s=>{n(s.target.result)},i.onerror=s=>{const u=hw(s.target.error);r(u)}})}let XR=!1;function hw(i){const n=da.Rt((0,j.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const s=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XR||(XR=!0,setTimeout(()=>{throw s},0)),s}}return i}class tT extends XI{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function Gi(i,n){const r=Je(i);return da.St(r.Qt,n)}class Zg{constructor(n,r,s,u){this.batchId=n,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(n,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(n.key)&&nr(c,n,s[u])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&Bg(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&Bg(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const s=n.get(r.key),u=s;this.applyToLocalView(u),s.isValidDocument()||u.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),Tn())}isEqual(n){return this.batchId===n.batchId&&eu(this.mutations,n.mutations,(r,s)=>tu(r,s))&&eu(this.baseMutations,n.baseMutations,(r,s)=>tu(r,s))}}class fw{constructor(n,r,s,u){this.batch=n,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(n,r,s){Ct(n.mutations.length===s.length);let u=rw();const c=n.mutations;for(let f=0;f<c.length;f++)u=u.insert(c[f].key,s[f].version);return new fw(n,r,s,u)}}class xd{constructor(n,r,s,u,c=At.min(),f=At.min(),m=ci.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m}withSequenceNumber(n){return new xd(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new xd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new xd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class ex{constructor(n){this.Wt=n}}function nT(i,n){if(n.document)return Td(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=at.fromSegments(n.noDocument.path),s=ha(n.noDocument.readTime),u=Zn.newNoDocument(r,s);return n.hasCommittedMutations?u.setHasCommittedMutations():u}if(n.unknownDocument){const r=at.fromSegments(n.unknownDocument.path),s=ha(n.unknownDocument.version);return Zn.newUnknownDocument(r,s)}return st()}function rT(i,n,r){const s=ay(r),u=n.key.path.popLast().toArray();if(n.isFoundDocument()){const c={name:Wg(m=i.Wt,(C=n).key),fields:C.data.value.mapValue.fields,updateTime:Gg(m,C.version.toTimestamp())};return new Cr(null,null,c,n.hasCommittedMutations,s,u)}var m,C;if(n.isNoDocument()){const c=n.key.path.toArray(),f=Cf(n.version),m=n.hasCommittedMutations;return new Cr(null,new QI(c,f),null,m,s,u)}if(n.isUnknownDocument()){const c=n.key.path.toArray(),f=Cf(n.version);return new Cr(new JI(c,f),null,null,!0,s,u)}return st()}function ay(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function tx(i){const n=new Lr(i[0],i[1]);return At.fromTimestamp(n)}function Cf(i){const n=i.toTimestamp();return new YI(n.seconds,n.nanoseconds)}function ha(i){const n=new Lr(i.seconds,i.nanoseconds);return At.fromTimestamp(n)}function bf(i,n){const r=(n.baseMutations||[]).map(c=>ZI(i.Wt,c));for(let c=0;c<n.mutations.length-1;++c){const f=n.mutations[c];c+1<n.mutations.length&&void 0!==n.mutations[c+1].transform&&(f.updateTransforms=n.mutations[c+1].transform.fieldTransforms,n.mutations.splice(c+1,1),++c)}const s=n.mutations.map(c=>ZI(i.Wt,c)),u=Lr.fromMillis(n.localWriteTimeMs);return new Zg(n.batchId,u,r,s)}function If(i){const n=ha(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?ha(i.lastLimboFreeSnapshotVersion):At.min();let s;var u;return void 0!==i.query.documents?(Ct(1===(u=i.query).documents.length),s=To(yd(qI(u.documents[0])))):s=To(pf(i.query)),new xd(s,i.targetId,0,i.lastListenSequenceNumber,n,r,ci.fromBase64String(i.resumeToken))}function iT(i,n){const r=Cf(n.snapshotVersion),s=Cf(n.lastLimboFreeSnapshotVersion);let u;u=QE(n.target)?sy(i.Wt,n.target):aa(i.Wt,n.target);const c=n.resumeToken.toBase64();return new bs(n.targetId,gd(n.target),r,c,n.sequenceNumber,s,u)}function uy(i){const n=pf({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?MI(n,n.limit,"L"):n}class ly{getBundleMetadata(n,r){return sT(n).get(r).next(s=>{if(s)return{id:(u=s).bundleId,createTime:ha(u.createTime),version:u.version};var u})}saveBundleMetadata(n,r){return sT(n).put({bundleId:(s=r).id,createTime:Cf(Br(s.createTime)),version:s.version});var s}getNamedQuery(n,r){return pw(n).get(r).next(s=>{if(s)return{name:(u=s).name,query:uy(u.bundledQuery),readTime:ha(u.readTime)};var u})}saveNamedQuery(n,r){return pw(n).put({name:(s=r).name,readTime:Cf(Br(s.readTime)),bundledQuery:s.bundledQuery});var s}}function sT(i){return Gi(i,Ef.store)}function pw(i){return Gi(i,Ad.store)}class nx{constructor(){this.Gt=new gw}addToCollectionParentIndex(n,r){return this.Gt.add(r),je.resolve()}getCollectionParents(n,r){return je.resolve(this.Gt.getEntries(r))}}class gw{constructor(){this.index={}}add(n){const r=n.lastSegment(),s=n.popLast(),u=this.index[r]||new hr(gn.comparator),c=!u.has(s);return this.index[r]=u.add(s),c}has(n){const r=n.lastSegment(),s=n.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(n){return(this.index[n]||new hr(gn.comparator)).toArray()}}class rx{constructor(){this.zt=new gw}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const s=r.lastSegment(),u=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const c={collectionId:s,parent:Hi(u)};return oT(n).put(c)}return je.resolve()}getCollectionParents(n,r){const s=[],u=IDBKeyRange.bound([r,""],[cd(r),""],!1,!0);return oT(n).Lt(u).next(c=>{for(const f of c){if(f.collectionId!==r)break;s.push(ru(f.parent))}return s})}}function oT(i){return Gi(i,Sd.store)}const aT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ji{constructor(n,r,s){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(n){return new Ji(n,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uT(i,n,r){const s=i.store(Pn.store),u=i.store(Ti.store),c=[],f=IDBKeyRange.only(r.batchId);let m=0;const C=s.Kt({range:f},(x,O,L)=>(m++,L.delete()));c.push(C.next(()=>{Ct(1===m)}));const T=[];for(const x of r.mutations){const O=Ti.key(n,x.key.path,r.batchId);c.push(u.delete(O)),T.push(x.key)}return je.waitFor(c).next(()=>T)}function Yg(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw st();n=i.noDocument}return JSON.stringify(n).length}Ji.DEFAULT_COLLECTION_PERCENTILE=10,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ji.DEFAULT=new Ji(41943040,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ji.DISABLED=new Ji(-1,0,0);class cy{constructor(n,r,s,u){this.userId=n,this.N=r,this.Ht=s,this.referenceDelegate=u,this.Jt={}}static Yt(n,r,s,u){Ct(""!==n.uid);const c=n.isAuthenticated()?n.uid:"";return new cy(c,r,s,u)}checkEmpty(n){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nd(n).Kt({index:Pn.userMutationsIndex,range:s},(u,c,f)=>{r=!1,f.done()}).next(()=>r)}addMutationBatch(n,r,s,u){const c=Hl(n),f=Nd(n);return f.add({}).next(m=>{Ct("number"==typeof m);const C=new Zg(m,r,s,u),T=function(L,W,re){const Me=re.baseMutations.map(ht=>Bl(L.Wt,ht)),qe=re.mutations.map(ht=>Bl(L.Wt,ht));return new Pn(W,re.batchId,re.localWriteTime.toMillis(),Me,qe)}(this.N,this.userId,C),x=[];let O=new hr((L,W)=>Jt(L.canonicalString(),W.canonicalString()));for(const L of u){const W=Ti.key(this.userId,L.key.path,m);O=O.add(L.key.path.popLast()),x.push(f.put(T)),x.push(c.put(W,Ti.PLACEHOLDER))}return O.forEach(L=>{x.push(this.Ht.addToCollectionParentIndex(n,L))}),n.addOnCommittedListener(()=>{this.Jt[m]=C.keys()}),je.waitFor(x).next(()=>C)})}lookupMutationBatch(n,r){return Nd(n).get(r).next(s=>s?(Ct(s.userId===this.userId),bf(this.N,s)):null)}Xt(n,r){return this.Jt[r]?je.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(s=>{if(s){const u=s.keys();return this.Jt[r]=u,u}return null})}getNextMutationBatchAfterBatchId(n,r){const s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return Nd(n).Kt({index:Pn.userMutationsIndex,range:u},(f,m,C)=>{m.userId===this.userId&&(Ct(m.batchId>=s),c=bf(this.N,m)),C.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Nd(n).Kt({index:Pn.userMutationsIndex,range:r,reverse:!0},(u,c,f)=>{s=c.batchId,f.done()}).next(()=>s)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nd(n).Lt(Pn.userMutationsIndex,r).next(s=>s.map(u=>bf(this.N,u)))}getAllMutationBatchesAffectingDocumentKey(n,r){const s=Ti.prefixForPath(this.userId,r.path),u=IDBKeyRange.lowerBound(s),c=[];return Hl(n).Kt({range:u},(f,m,C)=>{const[T,x,O]=f,L=ru(x);if(T===this.userId&&r.path.isEqual(L))return Nd(n).get(O).next(W=>{if(!W)throw st();Ct(W.userId===this.userId),c.push(bf(this.N,W))});C.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new hr(Jt);const u=[];return r.forEach(c=>{const f=Ti.prefixForPath(this.userId,c.path),m=IDBKeyRange.lowerBound(f),C=Hl(n).Kt({range:m},(T,x,O)=>{const[L,W,re]=T,Me=ru(W);L===this.userId&&c.path.isEqual(Me)?s=s.add(re):O.done()});u.push(C)}),je.waitFor(u).next(()=>this.Zt(n,s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,u=s.length+1,c=Ti.prefixForPath(this.userId,s),f=IDBKeyRange.lowerBound(c);let m=new hr(Jt);return Hl(n).Kt({range:f},(C,T,x)=>{const[O,L,W]=C,re=ru(L);O===this.userId&&s.isPrefixOf(re)?re.length===u&&(m=m.add(W)):x.done()}).next(()=>this.Zt(n,m))}Zt(n,r){const s=[],u=[];return r.forEach(c=>{u.push(Nd(n).get(c).next(f=>{if(null===f)throw st();Ct(f.userId===this.userId),s.push(bf(this.N,f))}))}),je.waitFor(u).next(()=>s)}removeMutationBatch(n,r){return uT(n.Qt,this.userId,r).next(s=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),je.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(n,u))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return je.resolve();const s=IDBKeyRange.lowerBound(Ti.prefixForUser(this.userId)),u=[];return Hl(n).Kt({range:s},(c,f,m)=>{if(c[0]===this.userId){const C=ru(c[1]);u.push(C)}else m.done()}).next(()=>{Ct(0===u.length)})})}containsKey(n,r){return dy(n,this.userId,r)}ee(n){return lT(n).get(this.userId).next(r=>r||new Ku(this.userId,-1,""))}}function dy(i,n,r){const s=Ti.prefixForPath(n,r.path),u=s[1],c=IDBKeyRange.lowerBound(s);let f=!1;return Hl(i).Kt({range:c,qt:!0},(m,C,T)=>{const[x,O,L]=m;x===n&&O===u&&(f=!0),T.done()}).next(()=>f)}function Nd(i){return Gi(i,Pn.store)}function Hl(i){return Gi(i,Ti.store)}function lT(i){return Gi(i,Ku.store)}class Tf{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new Tf(0)}static ie(){return new Tf(-1)}}class Qg{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const s=new Tf(r.highestTargetId);return r.highestTargetId=s.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>At.fromTimestamp(new Lr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,s){return this.re(n).next(u=>(u.highestListenSequenceNumber=r,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.oe(n,u)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(s=>(s.targetCount+=1,this.ce(r,s),this.oe(n,s))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>Df(n).delete(r.targetId)).next(()=>this.re(n)).next(s=>(Ct(s.targetCount>0),s.targetCount-=1,this.oe(n,s)))}removeTargets(n,r,s){let u=0;const c=[];return Df(n).Kt((f,m)=>{const C=If(m);C.sequenceNumber<=r&&null===s.get(C.targetId)&&(u++,c.push(this.removeTargetData(n,C)))}).next(()=>je.waitFor(c)).next(()=>u)}forEachTarget(n,r){return Df(n).Kt((s,u)=>{const c=If(u);r(c)})}re(n){return hy(n).get(Is.key).next(r=>(Ct(null!==r),r))}oe(n,r){return hy(n).put(Is.key,r)}ae(n,r){return Df(n).put(iT(this.N,r))}ce(n,r){let s=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,s=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,s=!0),s}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const s=gd(r),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Df(n).Kt({range:u,index:bs.queryTargetsIndexName},(f,m,C)=>{const T=If(m);W_(r,T.target)&&(c=T,C.done())}).next(()=>c)}addMatchingKeys(n,r,s){const u=[],c=iu(n);return r.forEach(f=>{const m=Hi(f.path);u.push(c.put(new hi(s,m))),u.push(this.referenceDelegate.addReference(n,s,f))}),je.waitFor(u)}removeMatchingKeys(n,r,s){const u=iu(n);return je.forEach(r,c=>{const f=Hi(c.path);return je.waitFor([u.delete([s,f]),this.referenceDelegate.removeReference(n,s,c)])})}removeMatchingKeysForTargetId(n,r){const s=iu(n),u=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(n,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),u=iu(n);let c=Tn();return u.Kt({range:s,qt:!0},(f,m,C)=>{const T=ru(f[1]),x=new at(T);c=c.add(x)}).next(()=>c)}containsKey(n,r){const s=Hi(r.path),u=IDBKeyRange.bound([s],[cd(s)],!1,!0);let c=0;return iu(n).Kt({index:hi.documentTargetsIndex,qt:!0,range:u},([f,m],C,T)=>{0!==f&&(c++,T.done())}).next(()=>c>0)}Et(n,r){return Df(n).get(r).next(s=>s?If(s):null)}}function Df(i){return Gi(i,bs.store)}function hy(i){return Gi(i,Is.store)}function iu(i){return Gi(i,hi.store)}function Od(i){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,Re.Z)(function*(i){if(i.code!==Ie.FAILED_PRECONDITION||i.message!==cw)throw i;Ze("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function fy([i,n],[r,s]){const u=Jt(i,r);return 0===u?Jt(n,s):u}class cT{constructor(n){this.ue=n,this.buffer=new hr(fy),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();fy(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class AP{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const s=this.de?3e5:6e4;Ze("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,Re.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(u){wf(u)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Od(u)}yield r._e(n)}))}}class ix{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(s=>Math.floor(r/100*s))}nthSequenceNumber(n,r){if(0===r)return je.resolve(qs.T);const s=new cT(r);return this.me.forEachTarget(n,u=>s.fe(u.sequenceNumber)).next(()=>this.me.ye(n,u=>s.fe(u))).next(()=>s.maxValue)}removeTargets(n,r,s){return this.me.removeTargets(n,r,s)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(aT)):this.getCacheSize(n).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aT):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let s,u,c,f,m,C,T;const x=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),u=this.params.maximumSequenceNumbersToCollect):u=O,f=Date.now(),this.nthSequenceNumber(n,u))).next(O=>(s=O,m=Date.now(),this.removeTargets(n,s,r))).next(O=>(c=O,C=Date.now(),this.removeOrphanedDocuments(n,s))).next(O=>(T=Date.now(),vI()<=ai.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-x}ms\n\tDetermined least recently used ${u} in `+(m-f)+`ms\n\tRemoved ${c} targets in `+(C-m)+`ms\n\tRemoved ${O} documents in `+(T-C)+`ms\nTotal Duration: ${T-x}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:O})))}}class dT{constructor(n,r){this.db=n,this.garbageCollector=new ix(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(s=>r.next(u=>s+u))}Ee(n){let r=0;return this.ye(n,s=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(s,u)=>r(u))}addReference(n,r,s){return Xg(n,s)}removeReference(n,r,s){return Xg(n,s)}removeTargets(n,r,s){return this.db.getTargetCache().removeTargets(n,r,s)}markPotentiallyOrphaned(n,r){return Xg(n,r)}Ie(n,r){return function(s,u){let c=!1;return lT(s).jt(f=>dy(s,f,u).next(m=>(m&&(c=!0),je.resolve(!m)))).next(()=>c)}(n,r)}removeOrphanedDocuments(n,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let c=0;return this.Te(n,(f,m)=>{if(m<=r){const C=this.Ie(n,f).next(T=>{if(!T)return c++,s.getEntry(n,f).next(()=>(s.removeEntry(f),iu(n).delete([0,Hi(f.path)])))});u.push(C)}}).next(()=>je.waitFor(u)).next(()=>s.apply(n)).next(()=>c)}removeTarget(n,r){const s=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,s)}updateLimboDocument(n,r){return Xg(n,r)}Te(n,r){const s=iu(n);let u,c=qs.T;return s.Kt({index:hi.documentTargetsIndex},([f,m],{path:C,sequenceNumber:T})=>{0===f?(c!==qs.T&&r(new at(ru(u)),c),c=T,u=C):c=qs.T}).next(()=>{c!==qs.T&&r(new at(ru(u)),c)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Xg(i,n){return iu(i).put((s=i.currentSequenceNumber,new hi(0,Hi(n.path),s)));var s}class Sf{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0!==s)for(const[u,c]of s)if(this.equalsFn(u,n))return c}has(n){return void 0!==this.get(n)}set(n,r){const s=this.mapKeyFn(n),u=this.inner[s];if(void 0!==u){for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],n))return void(u[c]=[n,r]);u.push([n,r])}else this.inner[s]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],n))return 1===s.length?delete this.inner[r]:s.splice(u,1),!0;return!1}forEach(n){Io(this.inner,(r,s)=>{for(const[u,c]of s)n(u,c)})}isEmpty(){return TI(this.inner)}}class mw{constructor(){this.changes=new Sf(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:At.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:Zn.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?je.resolve(s.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class _w{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,s){return su(n).put(em(r),s)}removeEntry(n,r){const s=su(n),u=em(r);return s.delete(u)}updateMetadata(n,r){return this.getMetadata(n).next(s=>(s.byteSize+=r,this.Ae(n,s)))}getEntry(n,r){return su(n).get(em(r)).next(s=>this.Re(r,s))}be(n,r){return su(n).get(em(r)).next(s=>({document:this.Re(r,s),size:Yg(s)}))}getEntries(n,r){let s=Do();return this.Pe(n,r,(u,c)=>{const f=this.Re(u,c);s=s.insert(u,f)}).next(()=>s)}ve(n,r){let s=Do(),u=new Ur(at.comparator);return this.Pe(n,r,(c,f)=>{const m=this.Re(c,f);s=s.insert(c,m),u=u.insert(c,Yg(f))}).next(()=>({documents:s,Ve:u}))}Pe(n,r,s){if(r.isEmpty())return je.resolve();const u=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),c=r.getIterator();let f=c.getNext();return su(n).Kt({range:u},(m,C,T)=>{const x=at.fromSegments(m);for(;f&&at.comparator(f,x)<0;)s(f,null),f=c.getNext();f&&f.isEqual(x)&&(s(f,C),f=c.hasNext()?c.getNext():null),f?T.Mt(f.path.toArray()):T.done()}).next(()=>{for(;f;)s(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(n,r,s){let u=Do();const c=r.path.length+1,f={};if(s.isEqual(At.min())){const m=r.path.toArray();f.range=IDBKeyRange.lowerBound(m)}else{const m=r.path.toArray(),C=ay(s);f.range=IDBKeyRange.lowerBound([m,C],!0),f.index=Cr.collectionReadTimeIndex}return su(n).Kt(f,(m,C,T)=>{if(m.length!==c)return;const x=nT(this.N,C);r.path.isPrefixOf(x.key.path)?zu(r,x)&&(u=u.insert(x.key,x)):T.done()}).next(()=>u)}newChangeBuffer(n){return new hT(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return py(n).get(ca.key).next(r=>(Ct(!!r),r))}Ae(n,r){return py(n).put(ca.key,r)}Re(n,r){if(r){const s=nT(this.N,r);if(!s.isNoDocument()||!s.version.isEqual(At.min()))return s}return Zn.newInvalidDocument(n)}}class hT extends mw{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new Sf(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(n){const r=[];let s=0,u=new hr((c,f)=>Jt(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const m=this.De.get(c);if(f.document.isValidDocument()){const C=rT(this.Se.N,f.document,this.getReadTime(c));u=u.add(c.path.popLast()),s+=Yg(C)-m,r.push(this.Se.addEntry(n,c,C))}else if(s-=m,this.trackRemovals){const C=rT(this.Se.N,Zn.newNoDocument(c,At.min()),this.getReadTime(c));r.push(this.Se.addEntry(n,c,C))}else r.push(this.Se.removeEntry(n,c))}),u.forEach(c=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,c))}),r.push(this.Se.updateMetadata(n,s)),je.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(s=>(this.De.set(r,s.size),s.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:s,Ve:u})=>(u.forEach((c,f)=>{this.De.set(c,f)}),s))}}function py(i){return Gi(i,ca.store)}function su(i){return Gi(i,Cr.store)}function em(i){return i.path.toArray()}class sx{constructor(n){this.N=n}Ct(n,r,s,u){Ct(s<u&&s>=0&&u<=11);const c=new dw("createOrUpgrade",r);var m;s<1&&u>=1&&(n.createObjectStore(Cs.store),(m=n).createObjectStore(Ku.store,{keyPath:Ku.keyPath}),m.createObjectStore(Pn.store,{keyPath:Pn.keyPath,autoIncrement:!0}).createIndex(Pn.userMutationsIndex,Pn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(Ti.store),yw(n),function(m){m.createObjectStore(Cr.store)}(n));let f=je.resolve();return s<3&&u>=3&&(0!==s&&(function(m){m.deleteObjectStore(hi.store),m.deleteObjectStore(bs.store),m.deleteObjectStore(Is.store)}(n),yw(n)),f=f.next(()=>function(m){const C=m.store(Is.store),T=new Is(0,0,At.min().toTimestamp(),0);return C.put(Is.key,T)}(c))),s<4&&u>=4&&(0!==s&&(f=f.next(()=>function(m,C){return C.store(Pn.store).Lt().next(T=>{m.deleteObjectStore(Pn.store),m.createObjectStore(Pn.store,{keyPath:Pn.keyPath,autoIncrement:!0}).createIndex(Pn.userMutationsIndex,Pn.userMutationsKeyPath,{unique:!0});const x=C.store(Pn.store),O=T.map(L=>x.put(L));return je.waitFor(O)})}(n,c))),f=f.next(()=>{!function(m){m.createObjectStore($l.store,{keyPath:$l.keyPath})}(n)})),s<5&&u>=5&&(f=f.next(()=>this.Ce(c))),s<6&&u>=6&&(f=f.next(()=>(function(m){m.createObjectStore(ca.store)}(n),this.Ne(c)))),s<7&&u>=7&&(f=f.next(()=>this.xe(c))),s<8&&u>=8&&(f=f.next(()=>this.ke(n,c))),s<9&&u>=9&&(f=f.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(n),function(m){const C=m.objectStore(Cr.store);C.createIndex(Cr.readTimeIndex,Cr.readTimeIndexPath,{unique:!1}),C.createIndex(Cr.collectionReadTimeIndex,Cr.collectionReadTimeIndexPath,{unique:!1})}(r)})),s<10&&u>=10&&(f=f.next(()=>this.$e(c))),s<11&&u>=11&&(f=f.next(()=>{(function(m){m.createObjectStore(Ef.store,{keyPath:Ef.keyPath})})(n),function(m){m.createObjectStore(Ad.store,{keyPath:Ad.keyPath})}(n)})),f}Ne(n){let r=0;return n.store(Cr.store).Kt((s,u)=>{r+=Yg(u)}).next(()=>{const s=new ca(r);return n.store(ca.store).put(ca.key,s)})}Ce(n){const r=n.store(Ku.store),s=n.store(Pn.store);return r.Lt().next(u=>je.forEach(u,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.Lt(Pn.userMutationsIndex,f).next(m=>je.forEach(m,C=>{Ct(C.userId===c.userId);const T=bf(this.N,C);return uT(n,c.userId,T).next(()=>{})}))}))}xe(n){const r=n.store(hi.store),s=n.store(Cr.store);return n.store(Is.store).get(Is.key).next(u=>{const c=[];return s.Kt((f,m)=>{const C=new gn(f),T=[0,Hi(C)];c.push(r.get(T).next(x=>x?je.resolve():r.put(new hi(0,Hi(C),u.highestListenSequenceNumber))))}).next(()=>je.waitFor(c))})}ke(n,r){n.createObjectStore(Sd.store,{keyPath:Sd.keyPath});const s=r.store(Sd.store),u=new gw,c=f=>{if(u.add(f)){const m=f.lastSegment(),C=f.popLast();return s.put({collectionId:m,parent:Hi(C)})}};return r.store(Cr.store).Kt({qt:!0},(f,m)=>{const C=new gn(f);return c(C.popLast())}).next(()=>r.store(Ti.store).Kt({qt:!0},([f,m,C],T)=>{const x=ru(m);return c(x.popLast())}))}$e(n){const r=n.store(bs.store);return r.Kt((s,u)=>{const c=If(u),f=iT(this.N,c);return r.put(f)})}}function yw(i){i.createObjectStore(hi.store,{keyPath:hi.keyPath}).createIndex(hi.documentTargetsIndex,hi.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(bs.store,{keyPath:bs.keyPath}).createIndex(bs.queryTargetsIndexName,bs.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Is.store)}const gy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tm{constructor(n,r,s,u,c,f,m,C,T,x){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=s,this.Oe=c,this.window=f,this.document=m,this.Fe=T,this.Me=x,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=O=>Promise.resolve(),!tm.bt())throw new He(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dT(this,u),this.We=r+"main",this.N=new ex(C),this.Ge=new da(this.We,11,new sx(this.N)),this.ze=new Qg(this.referenceDelegate,this.N),this.Ht=new rx,this.He=new _w(this.N,this.Ht),this.Je=new ly,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===x&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(Ie.FAILED_PRECONDITION,gy);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new qs(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var s=(0,Re.Z)(function*(u){if(r.started)return n(u)});return function(u){return s.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,Re.Z)(function*(s){null===s.newVersion&&(yield n())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,Re.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>my(n).put(new $l(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(wf(n))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Af(n).get(Cs.key).next(r=>je.resolve(this.cn(r)))}un(n){return my(n).delete(this.clientId)}hn(){var n=this;return(0,Re.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Gi(s,$l.store);return u.Lt().next(c=>{const f=n.fn(c,18e5),m=c.filter(C=>-1===f.indexOf(C));return je.forEach(m,C=>u.delete(C.clientId)).next(()=>m)})}).catch(()=>[]);if(n.Ye)for(const s of r)n.Ye.removeItem(n.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?je.resolve(!0):Af(n).get(Cs.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new He(Ie.FAILED_PRECONDITION,gy);return!1}}return!(!this.networkEnabled||!this.inForeground)||my(n).Lt().next(s=>void 0===this.fn(s,5e3).find(u=>{if(this.clientId!==u.clientId){const f=!this.inForeground&&u.inForeground,m=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||f&&m)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Ze("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,Re.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[Cs.store,$l.store],r=>{const s=new tT(r,qs.T);return n.on(s).next(()=>n.un(s))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(s=>this.ln(s.updateTimeMs,r)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>my(n).Lt().next(r=>this.fn(r,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(n){return cy.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,s){let c;return Ze("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",JR,f=>(c=new tT(f,this.Le?this.Le.next():qs.T),"readwrite-primary"===r?this.sn(c).next(m=>!!m||this.rn(c)).next(m=>{if(!m)throw zr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new He(Ie.FAILED_PRECONDITION,cw);return s(c)}).next(m=>this.an(c).next(()=>m)):this.En(c).next(()=>s(c)))).then(f=>(c.raiseOnCommittedEvent(),f))}En(n){return Af(n).get(Cs.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new He(Ie.FAILED_PRECONDITION,gy)})}an(n){const r=new Cs(this.clientId,this.allowTabSynchronization,Date.now());return Af(n).put(Cs.key,r)}static bt(){return da.bt()}on(n){const r=Af(n);return r.get(Cs.key).next(s=>this.cn(s)?(Ze("IndexedDbPersistence","Releasing primary lease."),r.delete(Cs.key)):je.resolve())}ln(n,r){const s=Date.now();return!(n<s-r||n>s&&(zr(`Detected an update time that is in the future: ${n} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,j.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const s=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Ze("IndexedDbPersistence",`Client '${n}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return zr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){zr("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Af(i){return Gi(i,Cs.store)}function my(i){return Gi(i,$l.store)}function vw(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class ox{constructor(n,r){this.progress=n,this.Tn=r}}class Ew{constructor(n,r,s){this.He=n,this.In=r,this.Ht=s}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(s=>this.Rn(n,r,s))}Rn(n,r,s){return this.He.getEntry(n,r).next(u=>{for(const c of s)c.applyToLocalView(u);return u})}bn(n,r){n.forEach((s,u)=>{for(const c of r)c.applyToLocalView(u)})}Pn(n,r){return this.He.getEntries(n,r).next(s=>this.vn(n,s).next(()=>s))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(s=>this.bn(r,s))}getDocumentsMatchingQuery(n,r,s){return at.isDocumentKey((u=r).path)&&null===u.collectionGroup&&0===u.filters.length?this.Vn(n,r.path):sa(r)?this.Sn(n,r,s):this.Dn(n,r,s);var u}Vn(n,r){return this.An(n,new at(r)).next(s=>{let u=ry();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}Sn(n,r,s){const u=r.collectionGroup;let c=ry();return this.Ht.getCollectionParents(n,u).next(f=>je.forEach(f,m=>{const C=(T=r,x=m.child(u),new Ll(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,x;return this.Dn(n,C,s).next(T=>{T.forEach((x,O)=>{c=c.insert(x,O)})})}).next(()=>c))}Dn(n,r,s){let u,c;return this.He.getDocumentsMatchingQuery(n,r,s).next(f=>(u=f,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(f=>(c=f,this.Cn(n,c,u).next(m=>{u=m;for(const C of c)for(const T of C.mutations){const x=T.key;let O=u.get(x);null==O&&(O=Zn.newInvalidDocument(x),u=u.insert(x,O)),Bg(T,O,C.localWriteTime),O.isFoundDocument()||(u=u.remove(x))}}))).next(()=>(u.forEach((f,m)=>{zu(r,m)||(u=u.remove(f))}),u))}Cn(n,r,s){let u=Tn();for(const f of r)for(const m of f.mutations)m instanceof bd&&null===s.get(m.key)&&(u=u.add(m.key));let c=s;return this.He.getEntries(n,u).next(f=>(f.forEach((m,C)=>{C.isFoundDocument()&&(c=c.insert(m,C))}),c))}}class nm{constructor(n,r,s,u){this.targetId=n,this.fromCache=r,this.Nn=s,this.xn=u}static kn(n,r){let s=Tn(),u=Tn();for(const c of r.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new nm(n,r.fromCache,s,u)}}class ww{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,s,u){return 0===(c=r).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||s.isEqual(At.min())?this.Fn(n,r):this.On.Pn(n,u).next(c=>{const f=this.Mn(r,c);return(kg(r)||Fg(r))&&this.Ln(r.limitType,f,u,s)?this.Fn(n,r):(vI()<=ai.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Q_(r)),this.On.getDocumentsMatchingQuery(n,r,s).next(m=>(f.forEach(C=>{m=m.insert(C.key,C)}),m)))});var c}Mn(n,r){let s=new hr(lf(n));return r.forEach((u,c)=>{zu(n,c)&&(s=s.add(c))}),s}Ln(n,r,s,u){if(s.size!==r.size)return!0;const c="F"===n?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}Fn(n,r){return vI()<=ai.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",Q_(r)),this.On.getDocumentsMatchingQuery(n,r,At.min())}}class fT{constructor(n,r,s,u){this.persistence=n,this.Bn=r,this.N=u,this.Un=new Ur(Jt),this.qn=new Sf(c=>gd(c),W_),this.Kn=At.min(),this.In=n.getMutationQueue(s),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new Ew(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function Cw(i,n,r,s){return new fT(i,n,r,s)}function bw(i,n){return _y.apply(this,arguments)}function _y(){return(_y=(0,Re.Z)(function*(i,n){const r=Je(i);let s=r.In,u=r.Qn;const c=yield r.persistence.runTransaction("Handle user change","readonly",f=>{let m;return r.In.getAllMutationBatches(f).next(C=>(m=C,s=r.persistence.getMutationQueue(n),u=new Ew(r.jn,s,r.persistence.getIndexManager()),s.getAllMutationBatches(f))).next(C=>{const T=[],x=[];let O=Tn();for(const L of m){T.push(L.batchId);for(const W of L.mutations)O=O.add(W.key)}for(const L of C){x.push(L.batchId);for(const W of L.mutations)O=O.add(W.key)}return u.Pn(f,O).next(L=>({Wn:L,removedBatchIds:T,addedBatchIds:x}))})});return r.In=s,r.Qn=u,r.Bn.$n(r.Qn),c})).apply(this,arguments)}function pT(i,n){const r=Je(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=n.batch.keys(),c=r.jn.newChangeBuffer({trackRemovals:!0});return function(f,m,C,T){const x=C.batch,O=x.keys();let L=je.resolve();return O.forEach(W=>{L=L.next(()=>T.getEntry(m,W)).next(re=>{const Me=C.docVersions.get(W);Ct(null!==Me),re.version.compareTo(Me)<0&&(x.applyToRemoteDocument(re,C),re.isValidDocument()&&T.addEntry(re,C.commitVersion))})}),L.next(()=>f.In.removeMutationBatch(m,x))}(r,s,n,c).next(()=>c.apply(s)).next(()=>r.In.performConsistencyCheck(s)).next(()=>r.Qn.Pn(s,u))})}function Iw(i){const n=Je(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function gT(i,n){const r=Je(i),s=n.snapshotVersion;let u=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=r.jn.newChangeBuffer({trackRemovals:!0});u=r.Un;const m=[];n.targetChanges.forEach((T,x)=>{const O=u.get(x);if(!O)return;m.push(r.ze.removeMatchingKeys(c,T.removedDocuments,x).next(()=>r.ze.addMatchingKeys(c,T.addedDocuments,x)));const L=T.resumeToken;if(L.approximateByteSize()>0){const W=O.withResumeToken(L,s).withSequenceNumber(c.currentSequenceNumber);u=u.insert(x,W),re=O,qe=T,Ct((Me=W).resumeToken.approximateByteSize()>0),(0===re.resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=3e8||qe.addedDocuments.size+qe.modifiedDocuments.size+qe.removedDocuments.size>0)&&m.push(r.ze.updateTargetData(c,W))}var re,Me,qe});let C=Do();if(n.documentUpdates.forEach((T,x)=>{n.resolvedLimboDocuments.has(T)&&m.push(r.persistence.referenceDelegate.updateLimboDocument(c,T))}),m.push(ax(c,f,n.documentUpdates,s,void 0).next(T=>{C=T})),!s.isEqual(At.min())){const T=r.ze.getLastRemoteSnapshotVersion(c).next(x=>r.ze.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(T)}return je.waitFor(m).next(()=>f.apply(c)).next(()=>r.Qn.vn(c,C)).next(()=>C)}).then(c=>(r.Un=u,c))}function ax(i,n,r,s,u){let c=Tn();return r.forEach(f=>c=c.add(f)),n.getEntries(i,c).next(f=>{let m=Do();return r.forEach((C,T)=>{const x=f.get(C),O=(null==u?void 0:u.get(C))||s;T.isNoDocument()&&T.version.isEqual(At.min())?(n.removeEntry(C,O),m=m.insert(C,T)):!x.isValidDocument()||T.version.compareTo(x.version)>0||0===T.version.compareTo(x.version)&&x.hasPendingWrites?(n.addEntry(T,O),m=m.insert(C,T)):Ze("LocalStore","Ignoring outdated watch update for ",C,". Current version:",x.version," Watch version:",T.version)}),m})}function ux(i,n){const r=Je(i);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(s,n)))}function Rf(i,n){const r=Je(i);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return r.ze.getTargetData(s,n).next(c=>c?(u=c,je.resolve(u)):r.ze.allocateTargetId(s).next(f=>(u=new xd(n,f,0,s.currentSequenceNumber),r.ze.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=r.Un.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.Un=r.Un.insert(s.targetId,s),r.qn.set(n,s.targetId)),s})}function Md(i,n,r){return Tw.apply(this,arguments)}function Tw(){return(Tw=(0,Re.Z)(function*(i,n,r){const s=Je(i),u=s.Un.get(n),c=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,u)))}catch(f){if(!wf(f))throw f;Ze("LocalStore",`Failed to update sequence numbers for target ${n}: ${f}`)}s.Un=s.Un.remove(n),s.qn.delete(u.target)})).apply(this,arguments)}function br(i,n,r){const s=Je(i);let u=At.min(),c=Tn();return s.persistence.runTransaction("Execute query","readonly",f=>function(m,C,T){const x=Je(m),O=x.qn.get(T);return void 0!==O?je.resolve(x.Un.get(O)):x.ze.getTargetData(C,T)}(s,f,To(n)).next(m=>{if(m)return u=m.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(f,m.targetId).next(C=>{c=C})}).next(()=>s.Bn.getDocumentsMatchingQuery(f,n,r?u:At.min(),r?c:Tn())).next(m=>({documents:m,Gn:c})))}function Dw(i,n){const r=Je(i),s=Je(r.ze),u=r.Un.get(n);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",c=>s.Et(c,n).next(f=>f?f.target:null))}function mT(i){const n=Je(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(s,u,c){const f=Je(s);let m=Do(),C=ay(c);const T=su(u),x=IDBKeyRange.lowerBound(C,!0);return T.Kt({index:Cr.readTimeIndex,range:x},(O,L)=>{const W=nT(f.N,L);m=m.insert(W.key,W),C=L.readTime}).next(()=>({Tn:m,readTime:tx(C)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:s})=>(n.Kn=s,r))}function yy(){return(yy=(0,Re.Z)(function*(i){const n=Je(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(s){const u=su(s);let c=At.min();return u.Kt({index:Cr.readTimeIndex,reverse:!0},(f,m,C)=>{m.readTime&&(c=tx(m.readTime)),C.done()}).next(()=>c)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function vy(){return(vy=(0,Re.Z)(function*(i,n,r,s){const u=Je(i);let c=Tn(),f=Do(),m=rw();for(const x of r){const O=n.zn(x.metadata.name);x.document&&(c=c.add(O)),f=f.insert(O,n.Hn(x)),m=m.insert(O,n.Jn(x.metadata.readTime))}const C=u.jn.newChangeBuffer({trackRemovals:!0}),T=yield Rf(u,(x=s,To(yd(gn.fromString(`__bundle__/docs/${x}`)))));var x;return u.persistence.runTransaction("Apply bundle documents","readwrite",x=>ax(x,C,f,At.min(),m).next(O=>(C.apply(x),O)).next(O=>u.ze.removeMatchingKeysForTargetId(x,T.targetId).next(()=>u.ze.addMatchingKeys(x,c,T.targetId)).next(()=>u.Qn.vn(x,O)).next(()=>O)))})).apply(this,arguments)}function _T(i,n){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,Re.Z)(function*(i,n,r=Tn()){const s=yield Rf(i,To(uy(n.bundledQuery))),u=Je(i);return u.persistence.runTransaction("Save named query","readwrite",c=>{const f=Br(n.readTime);if(s.snapshotVersion.compareTo(f)>=0)return u.Je.saveNamedQuery(c,n);const m=s.withResumeToken(ci.EMPTY_BYTE_STRING,f);return u.Un=u.Un.insert(m.targetId,m),u.ze.updateTargetData(c,m).next(()=>u.ze.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>u.ze.addMatchingKeys(c,r,s.targetId)).next(()=>u.Je.saveNamedQuery(c,n))})})).apply(this,arguments)}class dx{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return je.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var s;return this.Yn.set(r.id,{id:(s=r).id,version:s.version,createTime:Br(s.createTime)}),je.resolve()}getNamedQuery(n,r){return je.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(s=r).name,query:uy(s.bundledQuery),readTime:Br(s.readTime)}),je.resolve();var s}}class Sw{constructor(){this.Zn=new hr(Yr.ts),this.es=new hr(Yr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const s=new Yr(n,r);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(n,r){n.forEach(s=>this.addReference(s,r))}removeReference(n,r){this.rs(new Yr(n,r))}os(n,r){n.forEach(s=>this.removeReference(s,r))}cs(n){const r=new at(new gn([])),s=new Yr(r,n),u=new Yr(r,n+1),c=[];return this.es.forEachInRange([s,u],f=>{this.rs(f),c.push(f.key)}),c}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new at(new gn([])),s=new Yr(r,n),u=new Yr(r,n+1);let c=Tn();return this.es.forEachInRange([s,u],f=>{c=c.add(f.key)}),c}containsKey(n){const r=new Yr(n,0),s=this.Zn.firstAfterOrEqual(r);return null!==s&&n.isEqual(s.key)}}class Yr{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return at.comparator(n.key,r.key)||Jt(n.ls,r.ls)}static ns(n,r){return Jt(n.ls,r.ls)||at.comparator(n.key,r.key)}}class hx{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new hr(Yr.ts)}checkEmpty(n){return je.resolve(0===this.In.length)}addMutationBatch(n,r,s,u){const c=this.fs;this.fs++;const f=new Zg(c,r,s,u);this.In.push(f);for(const m of u)this.ds=this.ds.add(new Yr(m.key,c)),this.Ht.addToCollectionParentIndex(n,m.key.path.popLast());return je.resolve(f)}lookupMutationBatch(n,r){return je.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const u=this._s(r+1),c=u<0?0:u;return je.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return je.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const s=new Yr(r,0),u=new Yr(r,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([s,u],f=>{const m=this.ws(f.ls);c.push(m)}),je.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new hr(Jt);return r.forEach(u=>{const c=new Yr(u,0),f=new Yr(u,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,f],m=>{s=s.add(m.ls)})}),je.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,u=s.length+1;let c=s;at.isDocumentKey(c)||(c=c.child(""));const f=new Yr(new at(c),0);let m=new hr(Jt);return this.ds.forEachWhile(C=>{const T=C.key.path;return!!s.isPrefixOf(T)&&(T.length===u&&(m=m.add(C.ls)),!0)},f),je.resolve(this.gs(m))}gs(n){const r=[];return n.forEach(s=>{const u=this.ws(s);null!==u&&r.push(u)}),r}removeMutationBatch(n,r){Ct(0===this.ys(r.batchId,"removed")),this.In.shift();let s=this.ds;return je.forEach(r.mutations,u=>{const c=new Yr(u.key,r.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(n,u.key)}).next(()=>{this.ds=s})}te(n){}containsKey(n,r){const s=new Yr(r,0),u=this.ds.firstAfterOrEqual(s);return je.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(n){return je.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class yT{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new Ur(at.comparator),this.size=0}addEntry(n,r,s){const u=r.key,c=this.docs.get(u),f=c?c.size:0,m=this.ps(r);return this.docs=this.docs.insert(u,{document:r.clone(),size:m,readTime:s}),this.size+=m-f,this.Ht.addToCollectionParentIndex(n,u.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const s=this.docs.get(r);return je.resolve(s?s.document.clone():Zn.newInvalidDocument(r))}getEntries(n,r){let s=Do();return r.forEach(u=>{const c=this.docs.get(u);s=s.insert(u,c?c.document.clone():Zn.newInvalidDocument(u))}),je.resolve(s)}getDocumentsMatchingQuery(n,r,s){let u=Do();const c=new at(r.path.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:m,value:{document:C,readTime:T}}=f.getNext();if(!r.path.isPrefixOf(m.path))break;T.compareTo(s)<=0||zu(r,C)&&(u=u.insert(C.key,C.clone()))}return je.resolve(u)}Es(n,r){return je.forEach(this.docs,s=>r(s))}newChangeBuffer(n){return new RP(this)}getSize(n){return je.resolve(this.size)}}class RP extends mw{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((s,u)=>{u.document.isValidDocument()?r.push(this.Se.addEntry(n,u.document,this.getReadTime(s))):this.Se.removeEntry(s)}),je.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class vT{constructor(n){this.persistence=n,this.Ts=new Sf(r=>gd(r),W_),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Is=0,this.As=new Sw,this.targetCount=0,this.Rs=Tf.se()}forEachTarget(n,r){return this.Ts.forEach((s,u)=>r(u)),je.resolve()}getLastRemoteSnapshotVersion(n){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return je.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(n,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Is&&(this.Is=r),je.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new Tf(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,je.resolve()}updateTargetData(n,r){return this.ae(r),je.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,je.resolve()}removeTargets(n,r,s){let u=0;const c=[];return this.Ts.forEach((f,m)=>{m.sequenceNumber<=r&&null===s.get(m.targetId)&&(this.Ts.delete(f),c.push(this.removeMatchingKeysForTargetId(n,m.targetId)),u++)}),je.waitFor(c).next(()=>u)}getTargetCount(n){return je.resolve(this.targetCount)}getTargetData(n,r){const s=this.Ts.get(r)||null;return je.resolve(s)}addMatchingKeys(n,r,s){return this.As.ss(r,s),je.resolve()}removeMatchingKeys(n,r,s){this.As.os(r,s);const u=this.persistence.referenceDelegate,c=[];return u&&r.forEach(f=>{c.push(u.markPotentiallyOrphaned(n,f))}),je.waitFor(c)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),je.resolve()}getMatchingKeysForTargetId(n,r){const s=this.As.hs(r);return je.resolve(s)}containsKey(n,r){return je.resolve(this.As.containsKey(r))}}class Aw{constructor(n,r){this.bs={},this.Le=new qs(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new vT(this),this.Ht=new nx,this.He=new yT(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new ex(r),this.Je=new dx(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new hx(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,s){Ze("MemoryPersistence","Starting transaction:",n);const u=new ou(this.Le.next());return this.referenceDelegate.vs(),s(u).next(c=>this.referenceDelegate.Vs(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Ss(n,r){return je.or(Object.values(this.bs).map(s=>()=>s.containsKey(n,r)))}}class ou extends XI{constructor(n){super(),this.currentSequenceNumber=n}}class Rw{constructor(n){this.persistence=n,this.Ds=new Sw,this.Cs=null}static Ns(n){return new Rw(n)}get xs(){if(this.Cs)return this.Cs;throw st()}addReference(n,r,s){return this.Ds.addReference(s,r),this.xs.delete(s.toString()),je.resolve()}removeReference(n,r,s){return this.Ds.removeReference(s,r),this.xs.add(s.toString()),je.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),je.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(u=>this.xs.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(n,r.targetId).next(u=>{u.forEach(c=>this.xs.add(c.toString()))}).next(()=>s.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.xs,s=>{const u=at.fromPath(s);return this.ks(n,u).next(c=>{c||r.removeEntry(u)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(s=>{s?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return je.or([()=>je.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function ET(i,n){return`firestore_clients_${i}_${n}`}function fa(i,n,r){let s=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(s+=`_${n.uid}`),s}function Ks(i,n){return`firestore_targets_${i}_${n}`}class Ts{constructor(n,r,s,u){this.user=n,this.batchId=r,this.state=s,this.error=u}static $s(n,r,s){const u=JSON.parse(s);let c,f="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return f&&u.error&&(f="string"==typeof u.error.message&&"string"==typeof u.error.code,f&&(c=new He(u.error.code,u.error.message))),f?new Ts(n,r,u.state,c):(zr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class xf{constructor(n,r,s){this.targetId=n,this.state=r,this.error=s}static $s(n,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new He(s.error.code,s.error.message))),c?new xf(n,s.state,u):(zr("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class rm{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const s=JSON.parse(r);let u="object"==typeof s&&s.activeTargetIds instanceof Array,c=iw();for(let f=0;u&&f<s.activeTargetIds.length;++f)u=SI(s.activeTargetIds[f]),c=c.add(s.activeTargetIds[f]);return u?new rm(n,c):(zr("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class xw{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new xw(r.clientId,r.onlineState):(zr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class Nw{constructor(){this.activeTargetIds=iw()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class Ow{constructor(n,r,s,u,c){this.window=n,this.Oe=r,this.persistenceKey=s,this.Ls=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Ur(Jt),this.started=!1,this.Ks=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=ET(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Nw),this.Ws=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,Re.Z)(function*(){const r=yield n.syncEngine.pn();for(const u of r){if(u===n.Ls)continue;const c=n.getItem(ET(n.persistenceKey,u));if(c){const f=rm.$s(u,c);f&&(n.qs=n.qs.insert(f.clientId,f))}}n.Ys();const s=n.storage.getItem(n.Hs);if(s){const u=n.Xs(s);u&&n.Zs(u)}for(const u of n.Ks)n.Us(u);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((s,u)=>{u.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,s){this.ei(n,r,s),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const s=this.storage.getItem(Ks(this.persistenceKey,n));if(s){const u=xf.$s(n,s);u&&(r=u.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(Ks(this.persistenceKey,n))}updateQueryState(n,r,s){this.ii(n,r,s)}handleUserChange(n,r,s){r.forEach(u=>{this.ni(u)}),this.currentUser=n,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return Ze("SharedClientState","READ",n,r),r}setItem(n,r){Ze("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){Ze("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const s=n;if(s.storageArea===this.storage){if(Ze("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Re.Z)(function*(){if(r.started){if(null!==s.key)if(r.Ws.test(s.key)){if(null==s.newValue){const u=r.ai(s.key);return r.ci(u,null)}{const u=r.ui(s.key,s.newValue);if(u)return r.ci(u.clientId,u)}}else if(r.Gs.test(s.key)){if(null!==s.newValue){const u=r.hi(s.key,s.newValue);if(u)return r.li(u)}}else if(r.zs.test(s.key)){if(null!==s.newValue){const u=r.fi(s.key,s.newValue);if(u)return r.di(u)}}else if(s.key===r.Hs){if(null!==s.newValue){const u=r.Xs(s.newValue);if(u)return r.Zs(u)}}else if(s.key===r.Qs){const u=function(c){let f=qs.T;if(null!=c)try{const m=JSON.parse(c);Ct("number"==typeof m),f=m}catch(m){zr("SharedClientState","Failed to read sequence number from WebStorage",m)}return f}(s.newValue);u!==qs.T&&r.sequenceNumberHandler(u)}else if(s.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,s){const u=new Ts(this.currentUser,n,r,s),c=fa(this.persistenceKey,this.currentUser,n);this.setItem(c,u.Os())}ni(n){const r=fa(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,s){const u=Ks(this.persistenceKey,n),c=new xf(n,r,s);this.setItem(u,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const s=this.ai(n);return rm.$s(s,r)}hi(n,r){const s=this.Gs.exec(n),u=Number(s[1]);return Ts.$s(new Vi(void 0!==s[2]?s[2]:null),u,r)}fi(n,r){const s=this.zs.exec(n),u=Number(s[1]);return xf.$s(u,r)}Xs(n){return xw.$s(n)}li(n){var r=this;return(0,Re.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const s=r?this.qs.insert(n,r):this.qs.remove(n),u=this.ti(this.qs),c=this.ti(s),f=[],m=[];return c.forEach(C=>{u.has(C)||f.push(C)}),u.forEach(C=>{c.has(C)||m.push(C)}),this.syncEngine.gi(f,m).then(()=>{this.qs=s})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=iw();return n.forEach((s,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class wT{constructor(){this.yi=new Nw,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,s){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,s){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new Nw,Promise.resolve()}handleUserChange(n,r,s){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class Mw{Ei(n){}shutdown(){}}class Nf{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class CT{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class px extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,s,u){const c=this.Bi(n,r);Ze("RestConnection","Sending: ",c,s);const f={};return this.Ui(f,u),this.qi(n,c,f,s).then(m=>(Ze("RestConnection","Received: ",m),m),m=>{throw j_("RestConnection",`${n} failed with error: `,m,"url: ",c,"request:",s),m})}Ki(n,r,s,u){return this.Li(n,r,s,u)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Rg,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const s in r.authHeaders)r.authHeaders.hasOwnProperty(s)&&(n[s]=r.authHeaders[s])}Bi(n,r){return`${this.Fi}/v1/${r}:${fx[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,s,u){return new Promise((c,f)=>{const m=new EP;m.listenOnce(mI.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case gI.NO_ERROR:const T=m.getResponseJson();Ze("Connection","XHR received:",JSON.stringify(T)),c(T);break;case gI.TIMEOUT:Ze("Connection",'RPC "'+n+'" timed out'),f(new He(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case gI.HTTP_ERROR:const x=m.getStatus();if(Ze("Connection",'RPC "'+n+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const O=m.getResponseJson().error;if(O&&O.status&&O.message){const L=function(W){const re=W.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(re)>=0?re:Ie.UNKNOWN}(O.status);f(new He(L,O.message))}else f(new He(Ie.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new He(Ie.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ze("Connection",'RPC "'+n+'" completed.')}});const C=JSON.stringify(u);m.send(r,"POST",C,s,15)})}ji(n,r){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],u=vP(),c=RR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new jE({})),this.Ui(f.initMessageHeaders,r),(0,j.uI)()||(0,j.b$)()||(0,j.d)()||(0,j.w1)()||(0,j.Mn)()||(0,j.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=s.join("");Ze("Connection","Creating WebChannel: "+m,f);const C=u.createWebChannel(m,f);let T=!1,x=!1;const O=new CT({vi:W=>{x?Ze("Connection","Not sending because WebChannel is closed:",W):(T||(Ze("Connection","Opening WebChannel transport."),C.open(),T=!0),Ze("Connection","WebChannel sending:",W),C.send(W))},Vi:()=>C.close()}),L=(W,re,Me)=>{W.listen(re,qe=>{try{Me(qe)}catch(ht){setTimeout(()=>{throw ht},0)}})};return L(C,$E.EventType.OPEN,()=>{x||Ze("Connection","WebChannel transport opened.")}),L(C,$E.EventType.CLOSE,()=>{x||(x=!0,Ze("Connection","WebChannel transport closed"),O.$i())}),L(C,$E.EventType.ERROR,W=>{x||(x=!0,j_("Connection","WebChannel transport errored:",W),O.$i(new He(Ie.UNAVAILABLE,"The operation could not be completed")))}),L(C,$E.EventType.MESSAGE,W=>{var re;if(!x){const Me=W.data[0];Ct(!!Me);const qe=Me,ht=qe.error||(null===(re=qe[0])||void 0===re?void 0:re.error);if(ht){Ze("Connection","WebChannel received error:",ht);const Ot=ht.status;let vn=function($r){const bu=Vr[$r];if(void 0!==bu)return ny(bu)}(Ot),nn=ht.message;void 0===vn&&(vn=Ie.INTERNAL,nn="Unknown error status: "+Ot+" with message "+ht.message),x=!0,O.$i(new He(vn,nn)),C.close()}else Ze("Connection","WebChannel received:",Me),O.Oi(Me)}}),L(c,_I.STAT_EVENT,W=>{W.stat===yI.PROXY?Ze("Connection","Detected buffering proxy"):W.stat===yI.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.ki()},0),O}}function Pw(){return"undefined"!=typeof window?window:null}function im(){return"undefined"!=typeof document?document:null}function Wl(i){return new GI(i,!0)}class kw{constructor(n,r,s=1e3,u=1.5,c=6e4){this.Oe=n,this.timerId=r,this.Qi=s,this.Wi=u,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),u=Math.max(0,r-s);u>0&&Ze("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,u,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Fw{constructor(n,r,s,u,c,f){this.Oe=n,this.er=s,this.nr=u,this.credentialsProvider=c,this.listener=f,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new kw(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,Re.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,Re.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var s=this;return(0,Re.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==n?s.rr.reset():r&&r.code===Ie.RESOURCE_EXHAUSTED?(zr(r.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):r&&r.code===Ie.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=n,yield s.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===r&&this.yr(s)},s=>{n(()=>{const u=new He(Ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(u)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{r(()=>this.pr(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}ur(){var n=this;this.state=4,this.rr.Xi((0,Re.Z)(function*(){n.state=0,n.start()}))}pr(n){return Ze("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bT extends Fw{constructor(n,r,s,u,c){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,s,c),this.N=u}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const s="NO_CHANGE"===(C=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:st(),u=n.targetChange.targetIds||[],c=function(C,T){return C.D?(Ct(void 0===T||"string"==typeof T),ci.fromBase64String(T||"")):(Ct(void 0===T||T instanceof Uint8Array),ci.fromUint8Array(T||new Uint8Array))}(i,n.targetChange.resumeToken),f=n.targetChange.cause,m=f&&function(C){const T=void 0===C.code?Ie.UNKNOWN:ny(C.code);return new He(T,C.message||"")}(f);r=new zR(s,u,c,m||null)}else if("documentChange"in n){const s=n.documentChange,u=nu(i,s.document.name),c=Br(s.document.updateTime),f=new Bi({mapValue:{fields:s.document.fields}}),m=Zn.newFoundDocument(u,c,f);r=new Hg(s.targetIds||[],s.removedTargetIds||[],m.key,m)}else if("documentDelete"in n){const s=n.documentDelete,u=nu(i,s.document),c=s.readTime?Br(s.readTime):At.min(),f=Zn.newNoDocument(u,c);r=new Hg([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in n){const s=n.documentRemove,u=nu(i,s.document);r=new Hg([],s.removedTargetIds||[],u,null)}else{if(!("filter"in n))return st();{const s=n.filter,c=new BI(s.count||0);r=new sw(s.targetId,c)}}var C;return r}(this.N,n),s=function(u){if(!("targetChange"in u))return At.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?At.min():c.readTime?Br(c.readTime):At.min()}(n);return this.listener.Tr(r,s)}Ir(n){const r={};r.database=qg(this.N),r.addTarget=function(u,c){let f;const m=c.target;return f=QE(m)?{documents:sy(u,m)}:{query:aa(u,m)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?f.resumeToken=YR(u,c.resumeToken):c.snapshotVersion.compareTo(At.min())>0&&(f.readTime=Gg(u,c.snapshotVersion.toTimestamp())),f}(this.N,n);const s=function(i,n){const r=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);s&&(r.labels=s),this.wr(r)}Ar(n){const r={};r.database=qg(this.N),r.removeTarget=n,this.wr(r)}}class Lw extends Fw{constructor(n,r,s,u,c){super(n,"write_stream_connection_backoff","write_stream_idle",r,s,c),this.N=u,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(Ct(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(Ct(void 0!==n),i.map(r=>function(s,u){let c=Br(s.updateTime?s.updateTime:u);return c.isEqual(At.min())&&(c=Br(u)),new HR(c,s.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),s=Br(n.commitTime);return this.listener.vr(s,r)}return Ct(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=qg(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(s=>Bl(this.N,s))};this.wr(r)}}class Ey extends class{}{constructor(n,r,s){super(),this.credentials=n,this.nr=r,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new He(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,s){return this.Cr(),this.credentials.getToken().then(u=>this.nr.Li(n,r,s,u)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ie.UNAUTHENTICATED&&this.credentials.invalidateToken(),u):new He(Ie.UNKNOWN,u.toString())})}Ki(n,r,s){return this.Cr(),this.credentials.getToken().then(u=>this.nr.Ki(n,r,s,u)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ie.UNAUTHENTICATED&&this.credentials.invalidateToken(),u):new He(Ie.UNKNOWN,u.toString())})}terminate(){this.Dr=!0}}class IT{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(zr(r),this.$r=!1):Ze("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class TT{constructor(n,r,s,u,c){var f=this;this.localStore=n,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=c,this.Qr.Ei(m=>{s.enqueueAndForget((0,Re.Z)(function*(){var C;ql(f)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(C=(0,Re.Z)(function*(T){const x=Je(T);x.Kr.add(4),yield Pd(x),x.Wr.set("Unknown"),x.Kr.delete(4),yield Of(x)}),function(T){return C.apply(this,arguments)})(f))}))}),this.Wr=new IT(s,u)}}function Of(i){return wy.apply(this,arguments)}function wy(){return(wy=(0,Re.Z)(function*(i){if(ql(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Pd(i){return Cy.apply(this,arguments)}function Cy(){return(Cy=(0,Re.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function sm(i,n){const r=Je(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),Bw(r)?Uw(r):kf(r).cr()&&Vw(r,n))}function Mf(i,n){const r=Je(i),s=kf(r);r.qr.delete(n),s.cr()&&DT(r,n),0===r.qr.size&&(s.cr()?s.lr():ql(r)&&r.Wr.set("Unknown"))}function Vw(i,n){i.Gr.Y(n.targetId),kf(i).Ir(n)}function DT(i,n){i.Gr.Y(n),kf(i).Ar(n)}function Uw(i){i.Gr=new DP({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),kf(i).start(),i.Wr.Or()}function Bw(i){return ql(i)&&!kf(i).ar()&&i.qr.size>0}function ql(i){return 0===Je(i).Kr.size}function ST(i){i.Gr=void 0}function gx(i){return jw.apply(this,arguments)}function jw(){return(jw=(0,Re.Z)(function*(i){i.qr.forEach((n,r)=>{Vw(i,n)})})).apply(this,arguments)}function mx(i,n){return $w.apply(this,arguments)}function $w(){return($w=(0,Re.Z)(function*(i,n){ST(i),Bw(i)?(i.Wr.Lr(n),Uw(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function _x(i,n,r){return Hw.apply(this,arguments)}function Hw(){return(Hw=(0,Re.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof zR&&2===n.state&&n.cause)try{yield(s=(0,Re.Z)(function*(u,c){const f=c.cause;for(const m of c.targetIds)u.qr.has(m)&&(yield u.remoteSyncer.rejectListen(m,f),u.qr.delete(m),u.Gr.removeTarget(m))}),function(u,c){return s.apply(this,arguments)})(i,n)}catch(s){Ze("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),s),yield by(i,s)}else if(n instanceof Hg?i.Gr.rt(n):n instanceof sw?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(At.min()))try{const s=yield Iw(i.localStore);r.compareTo(s)>=0&&(yield function(u,c){const f=u.Gr._t(c);return f.targetChanges.forEach((m,C)=>{if(m.resumeToken.approximateByteSize()>0){const T=u.qr.get(C);T&&u.qr.set(C,T.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach(m=>{const C=u.qr.get(m);if(!C)return;u.qr.set(m,C.withResumeToken(ci.EMPTY_BYTE_STRING,C.snapshotVersion)),DT(u,m);const T=new xd(C.target,m,1,C.sequenceNumber);Vw(u,T)}),u.remoteSyncer.applyRemoteEvent(f)}(i,r))}catch(s){Ze("RemoteStore","Failed to raise snapshot:",s),yield by(i,s)}var s})).apply(this,arguments)}function by(i,n,r){return Gw.apply(this,arguments)}function Gw(){return(Gw=(0,Re.Z)(function*(i,n,r){if(!wf(n))throw n;i.Kr.add(1),yield Pd(i),i.Wr.set("Offline"),r||(r=()=>Iw(i.localStore)),i.asyncQueue.enqueueRetryable((0,Re.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield Of(i)}))})).apply(this,arguments)}function AT(i,n){return n().catch(r=>by(i,r,n))}function Pf(i){return Ww.apply(this,arguments)}function Ww(){return(Ww=(0,Re.Z)(function*(i){const n=Je(i),r=Zs(n);let s=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;yx(n);)try{const u=yield ux(n.localStore,s);if(null===u){0===n.Ur.length&&r.lr();break}s=u.batchId,RT(n,u)}catch(u){yield by(n,u)}qw(n)&&zw(n)})).apply(this,arguments)}function yx(i){return ql(i)&&i.Ur.length<10}function RT(i,n){i.Ur.push(n);const r=Zs(i);r.cr()&&r.br&&r.Pr(n.mutations)}function qw(i){return ql(i)&&!Zs(i).ar()&&i.Ur.length>0}function zw(i){Zs(i).start()}function xT(i){return Iy.apply(this,arguments)}function Iy(){return(Iy=(0,Re.Z)(function*(i){Zs(i).Sr()})).apply(this,arguments)}function NT(i){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,Re.Z)(function*(i){const n=Zs(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function OT(i,n,r){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,Re.Z)(function*(i,n,r){const s=i.Ur.shift(),u=fw.from(s,n,r);yield AT(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Pf(i)})).apply(this,arguments)}function Kw(i,n){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,Re.Z)(function*(i,n){var r;n&&Zs(i).br&&(yield(r=(0,Re.Z)(function*(s,u){if(ff(c=u.code)&&c!==Ie.ABORTED){const f=s.Ur.shift();Zs(s).hr(),yield AT(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,u)),yield Pf(s)}var c}),function(s,u){return r.apply(this,arguments)})(i,n)),qw(i)&&zw(i)})).apply(this,arguments)}function Zu(i,n){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,Re.Z)(function*(i,n){const r=Je(i);n?(r.Kr.delete(2),yield Of(r)):n||(r.Kr.add(2),yield Pd(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function kf(i){return i.zr||(i.zr=function(n,r,s){const u=Je(n);return u.Cr(),new bT(r,u.nr,u.credentials,u.N,s)}(i.datastore,i.asyncQueue,{Si:gx.bind(null,i),Ci:mx.bind(null,i),Tr:_x.bind(null,i)}),i.jr.push(function(){var n=(0,Re.Z)(function*(r){r?(i.zr.hr(),Bw(i)?Uw(i):i.Wr.set("Unknown")):(yield i.zr.stop(),ST(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function Zs(i){return i.Hr||(i.Hr=function(n,r,s){const u=Je(n);return u.Cr(),new Lw(r,u.nr,u.credentials,u.N,s)}(i.datastore,i.asyncQueue,{Si:xT.bind(null,i),Ci:Kw.bind(null,i),Vr:NT.bind(null,i),vr:OT.bind(null,i)}),i.jr.push(function(){var n=(0,Re.Z)(function*(r){r?(i.Hr.hr(),yield Pf(i)):(yield i.Hr.stop(),i.Ur.length>0&&(Ze("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class MT{constructor(n,r,s,u,c){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=c,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(n,r,s,u,c){const f=Date.now()+s,m=new MT(n,r,f,u,c);return m.start(s),m}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(Ie.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zl(i,n){if(zr("AsyncQueue",`${n}: ${i}`),wf(i))return new He(Ie.UNAVAILABLE,`${n}: ${i}`);throw i}class om{constructor(n){this.comparator=n?(r,s)=>n(r,s)||at.comparator(r.key,s.key):(r,s)=>at.comparator(r.key,s.key),this.keyedMap=ry(),this.sortedSet=new Ur(this.comparator)}static emptySet(n){return new om(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,s)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof om)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),s=n.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,c=s.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const s=new om;return s.comparator=this.comparator,s.keyedMap=n,s.sortedSet=r,s}}class Yw{constructor(){this.Jr=new Ur(at.comparator)}track(n){const r=n.doc.key,s=this.Jr.get(r);s?0!==n.type&&3===s.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==s.type?this.Jr=this.Jr.insert(r,{type:s.type,doc:n.doc}):2===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===s.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===s.type?this.Jr=this.Jr.remove(r):1===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:1,doc:s.doc}):0===n.type&&1===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):st():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,s)=>{n.push(s)}),n}}class kd{constructor(n,r,s,u,c,f,m,C){this.query=n,this.docs=r,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=C}static fromInitialDocuments(n,r,s,u){const c=[];return r.forEach(f=>{c.push({type:0,doc:f})}),new kd(n,r,om.emptySet(r),c,s,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&Y_(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,s=n.docChanges;if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==s[u].type||!r[u].doc.isEqual(s[u].doc))return!1;return!0}}class xP{constructor(){this.Xr=void 0,this.listeners=[]}}class Et{constructor(){this.queries=new Sf(n=>vd(n),Y_),this.onlineState="Unknown",this.Zr=new Set}}function Qw(i,n){return Jw.apply(this,arguments)}function Jw(){return(Jw=(0,Re.Z)(function*(i,n){const r=Je(i),s=n.query;let u=!1,c=r.queries.get(s);if(c||(u=!0,c=new xP),u)try{c.Xr=yield r.onListen(s)}catch(f){const m=zl(f,`Initialization of query '${Q_(n.query)}' failed`);return void n.onError(m)}r.queries.set(s,c),c.listeners.push(n),n.eo(r.onlineState),c.Xr&&n.no(c.Xr)&&Lf(r)})).apply(this,arguments)}function Xw(i,n){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,Re.Z)(function*(i,n){const r=Je(i),s=n.query;let u=!1;const c=r.queries.get(s);if(c){const f=c.listeners.indexOf(n);f>=0&&(c.listeners.splice(f,1),u=0===c.listeners.length)}if(u)return r.queries.delete(s),r.onUnlisten(s)})).apply(this,arguments)}function vx(i,n){const r=Je(i);let s=!1;for(const u of n){const f=r.queries.get(u.query);if(f){for(const m of f.listeners)m.no(u)&&(s=!0);f.Xr=u}}s&&Lf(r)}function Ay(i,n,r){const s=Je(i),u=s.queries.get(n);if(u)for(const c of u.listeners)c.onError(r);s.queries.delete(n)}function Lf(i){i.Zr.forEach(n=>{n.next()})}class rr{constructor(n,r,s){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(n){if(!this.options.includeMetadataChanges){const s=[];for(const u of n.docChanges)3!==u.type&&s.push(u);n=new kd(n.query,n.docs,n.oldDocs,s,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=kd.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class NP{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class e0{constructor(n){this.N=n}zn(n){return nu(this.N,n)}Hn(n){return n.metadata.exists?Td(this.N,n.document,!1):Zn.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return Br(n)}}class t0{constructor(n,r,s){this.lo=n,this.localStore=r,this.N=s,this.queries=[],this.documents=[],this.progress=PT(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,s=new e0(this.N);for(const u of n)if(u.metadata.queries){const c=s.zn(u.metadata.name);for(const f of u.metadata.queries){const m=(r.get(f)||Tn()).add(c);r.set(f,m)}}return r}complete(){var n=this;return(0,Re.Z)(function*(){const r=yield function(i,n,r,s){return vy.apply(this,arguments)}(n.localStore,new e0(n.N),n.documents,n.lo.id),s=n.wo(n.documents);for(const u of n.queries)yield _T(n.localStore,u,s.get(u.name));return n.progress.taskState="Success",new ox(Object.assign({},n.progress),r)})()}}function PT(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class n0{constructor(n){this.key=n}}class r0{constructor(n){this.key=n}}class s0{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=Tn(),this.mutatedKeys=Tn(),this.po=lf(n),this.Eo=new om(this.po)}get To(){return this._o}Io(n,r){const s=r?r.Ao:new Yw,u=r?r.Eo:this.Eo;let c=r?r.mutatedKeys:this.mutatedKeys,f=u,m=!1;const C=kg(this.query)&&u.size===this.query.limit?u.last():null,T=Fg(this.query)&&u.size===this.query.limit?u.first():null;if(n.inorderTraversal((x,O)=>{const L=u.get(x),W=zu(this.query,O)?O:null,re=!!L&&this.mutatedKeys.has(L.key),Me=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let qe=!1;L&&W?L.data.isEqual(W.data)?re!==Me&&(s.track({type:3,doc:W}),qe=!0):this.Ro(L,W)||(s.track({type:2,doc:W}),qe=!0,(C&&this.po(W,C)>0||T&&this.po(W,T)<0)&&(m=!0)):!L&&W?(s.track({type:0,doc:W}),qe=!0):L&&!W&&(s.track({type:1,doc:L}),qe=!0,(C||T)&&(m=!0)),qe&&(W?(f=f.add(W),c=Me?c.add(x):c.delete(x)):(f=f.delete(x),c=c.delete(x)))}),kg(this.query)||Fg(this.query))for(;f.size>this.query.limit;){const x=kg(this.query)?f.last():f.first();f=f.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{Eo:f,Ao:s,Ln:m,mutatedKeys:c}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,s){const u=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const c=n.Ao.Yr();c.sort((T,x)=>function(O,L){const W=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return W(O)-W(L)}(T.type,x.type)||this.po(T.doc,x.doc)),this.bo(s);const f=r?this.Po():[],m=0===this.yo.size&&this.current?1:0,C=m!==this.mo;return this.mo=m,0!==c.length||C?{snapshot:new kd(this.query,n.Eo,u,c,n.mutatedKeys,0===m,C,!1),vo:f}:{vo:f}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Yw,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=Tn(),this.Eo.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const r=[];return n.forEach(s=>{this.yo.has(s)||r.push(new r0(s))}),this.yo.forEach(s=>{n.has(s)||r.push(new n0(s))}),r}So(n){this._o=n.Gn,this.yo=Tn();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return kd.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class kT{constructor(n,r,s){this.query=n,this.targetId=r,this.view=s}}class Ex{constructor(n){this.key=n,this.Co=!1}}class wx{constructor(n,r,s,u,c,f){this.localStore=n,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.No={},this.xo=new Sf(m=>vd(m),Y_),this.ko=new Map,this.$o=new Set,this.Oo=new Ur(at.comparator),this.Fo=new Map,this.Mo=new Sw,this.Lo={},this.Bo=new Map,this.Uo=Tf.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function Cx(i,n){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,Re.Z)(function*(i,n){const r=v0(i);let s,u;const c=r.xo.get(n);if(c)s=c.targetId,r.sharedClientState.addLocalQueryTarget(s),u=c.view.Do();else{const f=yield Rf(r.localStore,To(n)),m=r.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,u=yield o0(r,n,s,"current"===m),r.isPrimaryClient&&sm(r.remoteStore,f)}return u})).apply(this,arguments)}function o0(i,n,r,s){return a0.apply(this,arguments)}function a0(){return(a0=(0,Re.Z)(function*(i,n,r,s){i.Ko=(x,O,L)=>{return(W=(0,Re.Z)(function*(re,Me,qe,ht){let Ot=Me.view.Io(qe);Ot.Ln&&(Ot=yield br(re.localStore,Me.query,!1).then(({documents:$r})=>Me.view.Io($r,Ot)));const vn=ht&&ht.targetChanges.get(Me.targetId),nn=Me.view.applyChanges(Ot,re.isPrimaryClient,vn);return UT(re,Me.targetId,nn.vo),nn.snapshot}),function(re,Me,qe,ht){return W.apply(this,arguments)})(i,x,O,L);var W};const u=yield br(i.localStore,n,!0),c=new s0(n,u.Gn),f=c.Io(u.documents),m=$g.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==i.onlineState),C=c.applyChanges(f,i.isPrimaryClient,m);UT(i,r,C.vo);const T=new kT(n,r,c);return i.xo.set(n,T),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),C.snapshot})).apply(this,arguments)}function bx(i,n){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,Re.Z)(function*(i,n){const r=Je(i),s=r.xo.get(n),u=r.ko.get(s.targetId);if(u.length>1)return r.ko.set(s.targetId,u.filter(c=>!Y_(c,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Md(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),Mf(r.remoteStore,s.targetId),Bf(r,s.targetId)}).catch(Od))):(Bf(r,s.targetId),yield Md(r.localStore,s.targetId,!0))})).apply(this,arguments)}function Ry(){return(Ry=(0,Re.Z)(function*(i,n,r){const s=lm(i);try{const u=yield function(c,f){const m=Je(c),C=Lr.now(),T=f.reduce((O,L)=>O.add(L.key),Tn());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",O=>m.Qn.Pn(O,T).next(L=>{x=L;const W=[];for(const re of f){const Me=bP(re,x.get(re.key));null!=Me&&W.push(new bd(re.key,Me,YE(Me.value.mapValue),Zr.exists(!0)))}return m.In.addMutationBatch(O,C,W,f)})).then(O=>(O.applyToLocalDocumentSet(x),{batchId:O.batchId,changes:x}))}(s.localStore,n);s.sharedClientState.addPendingMutation(u.batchId),function(c,f,m){let C=c.Lo[c.currentUser.toKey()];C||(C=new Ur(Jt)),C=C.insert(f,m),c.Lo[c.currentUser.toKey()]=C}(s,u.batchId,r),yield au(s,u.changes),yield Pf(s.remoteStore)}catch(u){const c=zl(u,"Failed to persist write");r.reject(c)}})).apply(this,arguments)}function u0(i,n){return l0.apply(this,arguments)}function l0(){return(l0=(0,Re.Z)(function*(i,n){const r=Je(i);try{const s=yield gT(r.localStore,n);n.targetChanges.forEach((u,c)=>{const f=r.Fo.get(c);f&&(Ct(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?f.Co=!0:u.modifiedDocuments.size>0?Ct(f.Co):u.removedDocuments.size>0&&(Ct(f.Co),f.Co=!1))}),yield au(r,s,n)}catch(s){yield Od(s)}})).apply(this,arguments)}function Uf(i,n,r){const s=Je(i);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const u=[];s.xo.forEach((c,f)=>{const m=f.view.eo(n);m.snapshot&&u.push(m.snapshot)}),function(c,f){const m=Je(c);m.onlineState=f;let C=!1;m.queries.forEach((T,x)=>{for(const O of x.listeners)O.eo(f)&&(C=!0)}),C&&Lf(m)}(s.eventManager,n),u.length&&s.No.Tr(u),s.onlineState=n,s.isPrimaryClient&&s.sharedClientState.setOnlineState(n)}}function am(i,n,r){return c0.apply(this,arguments)}function c0(){return(c0=(0,Re.Z)(function*(i,n,r){const s=Je(i);s.sharedClientState.updateQueryState(n,"rejected",r);const u=s.Fo.get(n),c=u&&u.key;if(c){let f=new Ur(at.comparator);f=f.insert(c,Zn.newNoDocument(c,At.min()));const m=Tn().add(c),C=new Id(At.min(),new Map,new hr(Jt),f,m);yield u0(s,C),s.Oo=s.Oo.remove(c),s.Fo.delete(n),BT(s)}else yield Md(s.localStore,n,!1).then(()=>Bf(s,n,r)).catch(Od)})).apply(this,arguments)}function Ix(i,n){return d0.apply(this,arguments)}function d0(){return(d0=(0,Re.Z)(function*(i,n){const r=Je(i),s=n.batch.batchId;try{const u=yield pT(r.localStore,n);f0(r,s,null),Ny(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield au(r,u)}catch(u){yield Od(u)}})).apply(this,arguments)}function LT(i,n,r){return xy.apply(this,arguments)}function xy(){return(xy=(0,Re.Z)(function*(i,n,r){const s=Je(i);try{const u=yield function(c,f){const m=Je(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let T;return m.In.lookupMutationBatch(C,f).next(x=>(Ct(null!==x),T=x.keys(),m.In.removeMutationBatch(C,x))).next(()=>m.In.performConsistencyCheck(C)).next(()=>m.Qn.Pn(C,T))})}(s.localStore,n);f0(s,n,r),Ny(s,n),s.sharedClientState.updateMutationState(n,"rejected",r),yield au(s,u)}catch(u){yield Od(u)}})).apply(this,arguments)}function h0(){return(h0=(0,Re.Z)(function*(i,n){const r=Je(i);ql(r.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const f=Je(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>f.In.getHighestUnacknowledgedBatchId(m))}(r.localStore);if(-1===s)return void n.resolve();const u=r.Bo.get(s)||[];u.push(n),r.Bo.set(s,u)}catch(s){const u=zl(s,"Initialization of waitForPendingWrites() operation failed");n.reject(u)}})).apply(this,arguments)}function Ny(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function f0(i,n,r){const s=Je(i);let u=s.Lo[s.currentUser.toKey()];if(u){const c=u.get(n);c&&(r?c.reject(r):c.resolve(),u=u.remove(n)),s.Lo[s.currentUser.toKey()]=u}}function Bf(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const s of i.ko.get(n))i.xo.delete(s),r&&i.No.jo(s,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(s=>{i.Mo.containsKey(s)||Tx(i,s)})}function Tx(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(Mf(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),BT(i))}function UT(i,n,r){for(const s of r)s instanceof n0?(i.Mo.addReference(s.key,n),OP(i,s)):s instanceof r0?(Ze("SyncEngine","Document no longer in limbo: "+s.key),i.Mo.removeReference(s.key,n),i.Mo.containsKey(s.key)||Tx(i,s.key)):st()}function OP(i,n){const r=n.key,s=r.path.canonicalString();i.Oo.get(r)||i.$o.has(s)||(Ze("SyncEngine","New document in limbo: "+r),i.$o.add(s),BT(i))}function BT(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new at(gn.fromString(n)),s=i.Uo.next();i.Fo.set(s,new Ex(r)),i.Oo=i.Oo.insert(r,s),sm(i.remoteStore,new xd(To(yd(r.path)),s,2,qs.T))}}function au(i,n,r){return jf.apply(this,arguments)}function jf(){return(jf=(0,Re.Z)(function*(i,n,r){const s=Je(i),u=[],c=[],f=[];var m;s.xo.isEmpty()||(s.xo.forEach((m,C)=>{f.push(s.Ko(C,n,r).then(T=>{if(T){s.isPrimaryClient&&s.sharedClientState.updateQueryState(C.targetId,T.fromCache?"not-current":"current"),u.push(T);const x=nm.kn(C.targetId,T);c.push(x)}}))}),yield Promise.all(f),s.No.Tr(u),yield(m=(0,Re.Z)(function*(C,T){const x=Je(C);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>je.forEach(T,L=>je.forEach(L.Nn,W=>x.persistence.referenceDelegate.addReference(O,L.targetId,W)).next(()=>je.forEach(L.xn,W=>x.persistence.referenceDelegate.removeReference(O,L.targetId,W)))))}catch(O){if(!wf(O))throw O;Ze("LocalStore","Failed to update sequence numbers: "+O)}for(const O of T){const L=O.targetId;if(!O.fromCache){const W=x.Un.get(L),Me=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);x.Un=x.Un.insert(L,Me)}}}),function(C,T){return m.apply(this,arguments)})(s.localStore,c))})).apply(this,arguments)}function Dx(i,n){return p0.apply(this,arguments)}function p0(){return(p0=(0,Re.Z)(function*(i,n){const r=Je(i);if(!r.currentUser.isEqual(n)){Ze("SyncEngine","User change. New user:",n.toKey());const s=yield bw(r.localStore,n);r.currentUser=n,(u=r).Bo.forEach(f=>{f.forEach(m=>{m.reject(new He(Ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Bo.clear(),r.sharedClientState.handleUserChange(n,s.removedBatchIds,s.addedBatchIds),yield au(r,s.Wn)}var u})).apply(this,arguments)}function jT(i,n){const r=Je(i),s=r.Fo.get(n);if(s&&s.Co)return Tn().add(s.key);{let u=Tn();const c=r.ko.get(n);if(!c)return u;for(const f of c){const m=r.xo.get(f);u=u.unionWith(m.view.To)}return u}}function um(i,n){return g0.apply(this,arguments)}function g0(){return(g0=(0,Re.Z)(function*(i,n){const r=Je(i),s=yield br(r.localStore,n.query,!0),u=n.view.So(s);return r.isPrimaryClient&&UT(r,n.targetId,u.vo),u})).apply(this,arguments)}function Sx(i){return m0.apply(this,arguments)}function m0(){return(m0=(0,Re.Z)(function*(i){const n=Je(i);return mT(n.localStore).then(r=>au(n,r))})).apply(this,arguments)}function Ax(i,n,r,s){return _0.apply(this,arguments)}function _0(){return(_0=(0,Re.Z)(function*(i,n,r,s){const u=Je(i),c=yield function(f,m){const C=Je(f),T=Je(C.In);return C.persistence.runTransaction("Lookup mutation documents","readonly",x=>T.Xt(x,m).next(O=>O?C.Qn.Pn(x,O):je.resolve(null)))}(u.localStore,n);var m;null!==c?("pending"===r?yield Pf(u.remoteStore):"acknowledged"===r||"rejected"===r?(f0(u,n,s||null),Ny(u,n),m=n,Je(Je(u.localStore).In).te(m)):st(),yield au(u,c)):Ze("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function y0(){return(y0=(0,Re.Z)(function*(i,n){const r=Je(i);if(v0(r),lm(r),!0===n&&!0!==r.qo){const s=r.sharedClientState.getAllActiveQueryTargets(),u=yield HT(r,s.toArray());r.qo=!0,yield Zu(r.remoteStore,!0);for(const c of u)sm(r.remoteStore,c)}else if(!1===n&&!1!==r.qo){const s=[];let u=Promise.resolve();r.ko.forEach((c,f)=>{r.sharedClientState.isLocalQueryTarget(f)?s.push(f):u=u.then(()=>(Bf(r,f),Md(r.localStore,f,!0))),Mf(r.remoteStore,f)}),yield u,yield HT(r,s),function(c){const f=Je(c);f.Fo.forEach((m,C)=>{Mf(f.remoteStore,C)}),f.Mo.us(),f.Fo=new Map,f.Oo=new Ur(at.comparator)}(r),r.qo=!1,yield Zu(r.remoteStore,!1)}})).apply(this,arguments)}function HT(i,n,r){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,Re.Z)(function*(i,n,r){const s=Je(i),u=[],c=[];for(const f of n){let m;const C=s.ko.get(f);if(C&&0!==C.length){m=yield Rf(s.localStore,To(C[0]));for(const T of C){const x=s.xo.get(T),O=yield um(s,x);O.snapshot&&c.push(O.snapshot)}}else{const T=yield Dw(s.localStore,f);m=yield Rf(s.localStore,T),yield o0(s,GT(T),f,!1)}u.push(m)}return s.No.Tr(c),u})).apply(this,arguments)}function GT(i){return OI(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function WT(i){const n=Je(i);return Je(Je(n.localStore).persistence).pn()}function Rx(i,n,r,s){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,Re.Z)(function*(i,n,r,s){const u=Je(i);if(u.qo)Ze("SyncEngine","Ignoring unexpected query state notification.");else if(u.ko.has(n))switch(r){case"current":case"not-current":{const c=yield mT(u.localStore),f=Id.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield au(u,c,f);break}case"rejected":yield Md(u.localStore,n,!0),Bf(u,n,s);break;default:st()}})).apply(this,arguments)}function xx(i,n,r){return My.apply(this,arguments)}function My(){return(My=(0,Re.Z)(function*(i,n,r){const s=v0(i);if(s.qo){for(const u of n){if(s.ko.has(u)){Ze("SyncEngine","Adding an already active target "+u);continue}const c=yield Dw(s.localStore,u),f=yield Rf(s.localStore,c);yield o0(s,GT(c),f.targetId,!1),sm(s.remoteStore,f)}for(const u of r)s.ko.has(u)&&(yield Md(s.localStore,u,!1).then(()=>{Mf(s.remoteStore,u),Bf(s,u)}).catch(Od))}})).apply(this,arguments)}function v0(i){const n=Je(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=u0.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=jT.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=am.bind(null,n),n.No.Tr=vx.bind(null,n.eventManager),n.No.jo=Ay.bind(null,n.eventManager),n}function lm(i){const n=Je(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Ix.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=LT.bind(null,n),n}class E0{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,Re.Z)(function*(){r.N=Wl(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return Cw(this.persistence,new ww,n.initialUser,this.N)}Go(n){return new Aw(Rw.Ns,this.N)}Wo(n){return new wT}terminate(){var n=this;return(0,Re.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class w0 extends E0{constructor(n,r,s){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,s=this;return(0,Re.Z)(function*(){yield r().call(s,n),yield function(i){return yy.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,n),yield lm(s.Jo.syncEngine),yield Pf(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(n){return Cw(this.persistence,new ww,n.initialUser,this.N)}zo(n){return new AP(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=vw(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ji.withCacheSize(this.cacheSizeBytes):Ji.DEFAULT;return new tm(this.synchronizeTabs,r,n.clientId,s,n.asyncQueue,Pw(),im(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new wT}}class Ox extends w0{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,s=this;return(0,Re.Z)(function*(){yield r().call(s,n);const u=s.Jo.syncEngine;s.sharedClientState instanceof Ow&&(s.sharedClientState.syncEngine={_i:Ax.bind(null,u),mi:Rx.bind(null,u),gi:xx.bind(null,u),pn:WT.bind(null,u),wi:Sx.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var c=(0,Re.Z)(function*(f){yield function(i,n){return y0.apply(this,arguments)}(s.Jo.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):f||s.gcScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}Wo(n){const r=Pw();if(!Ow.bt(r))throw new He(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=vw(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Ow(r,n.asyncQueue,s,n.clientId,n.initialUser)}}class C0{initialize(n,r){var s=this;return(0,Re.Z)(function*(){s.localStore||(s.localStore=n.localStore,s.sharedClientState=n.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!n.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Uf(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Dx.bind(null,s.syncEngine),yield Zu(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Et}createDatastore(n){const r=Wl(n.databaseInfo.databaseId),s=new px(n.databaseInfo);return new Ey(n.credentials,s,r)}createRemoteStore(n){return r=this.localStore,s=this.datastore,u=n.asyncQueue,c=m=>Uf(this.syncEngine,m,0),f=Nf.bt()?new Nf:new Mw,new TT(r,s,u,c,f);var r,s,u,c,f}createSyncEngine(n,r){return function(s,u,c,f,m,C,T){const x=new wx(s,u,c,f,m,C);return T&&(x.qo=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,Re.Z)(function*(r){const s=Je(r);Ze("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield Pd(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function qT(i,n=10240){let r=0;return{read:()=>(0,Re.Z)(function*(){if(r<i.byteLength){const s={value:i.slice(r,r+n),done:!1};return r+=n,s}return{done:!0}})(),cancel:()=>(0,Re.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $f{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class Mx{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Fr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,Re.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,Re.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,Re.Z)(function*(){const r=yield n.na();if(null===r)return null;const s=n.ta.decode(r),u=Number(s);isNaN(u)&&n.sa(`length string (${s}) is not valid number`);const c=yield n.ia(u);return new NP(JSON.parse(c),r.length+u)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,Re.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const s=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),s})()}ia(n){var r=this;return(0,Re.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const s=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),s})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,Re.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const s=new Uint8Array(n.buffer.length+r.value.length);s.set(n.buffer),s.set(r.value,n.buffer.length),n.buffer=s}return r.done})()}}class zT{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,Re.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new He(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,Re.Z)(function*(c,f){const m=Je(c),C=qg(m.N)+"/documents",T={documents:f.map(W=>Wg(m.N,W))},x=yield m.Ki("BatchGetDocuments",C,T),O=new Map;x.forEach(W=>{const re=function(i,n){return"found"in n?function(r,s){Ct(!!s.found);const u=nu(r,s.found.name),c=Br(s.found.updateTime),f=new Bi({mapValue:{fields:s.found.fields}});return Zn.newFoundDocument(u,c,f)}(i,n):"missing"in n?function(r,s){Ct(!!s.missing),Ct(!!s.readTime);const u=nu(r,s.missing),c=Br(s.readTime);return Zn.newNoDocument(u,c)}(i,n):st()}(m.N,W);O.set(re.key.toString(),re)});const L=[];return f.forEach(W=>{const re=O.get(W.toString());Ct(!!re),L.push(re)}),L}),function(c,f){return u.apply(this,arguments)})(r.datastore,n);var u;return s.forEach(u=>r.recordVersion(u)),s})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(n.toString())}delete(n){this.write(new hf(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,Re.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var s;n.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,u)=>{const c=at.fromPath(u);n.mutations.push(new ty(c,n.precondition(c)))}),yield(s=(0,Re.Z)(function*(u,c){const f=Je(u),m=qg(f.N)+"/documents",C={writes:c.map(T=>Bl(f.N,T))};yield f.Li("Commit",m,C)}),function(u,c){return s.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw st();r=At.min()}const s=this.readVersions.get(n.key.toString());if(s){if(!r.isEqual(s))throw new He(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?Zr.updateTime(r):Zr.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(At.min()))throw new He(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zr.updateTime(r)}return Zr.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class Px{constructor(n,r,s,u){this.asyncQueue=n,this.datastore=r,this.updateFunction=s,this.deferred=u,this.aa=5,this.rr=new kw(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,Re.Z)(function*(){const r=new zT(n.datastore),s=n.ua(r);s&&s.then(u=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(u)}).catch(c=>{n.ha(c)}))}).catch(u=>{n.ha(u)})}))}ua(n){try{const r=this.updateFunction(n);return!pd(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!ff(r)}return!1}}class kx{constructor(n,r,s){var u=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vi.UNAUTHENTICATED,this.clientId=II.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var c=(0,Re.Z)(function*(f){Ze("FirestoreClient","Received user=",f.uid),yield u.credentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,Re.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(s){const u=zl(s,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function KT(i,n){return b0.apply(this,arguments)}function b0(){return(b0=(0,Re.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let s=r.initialUser;i.setCredentialChangeListener(function(){var u=(0,Re.Z)(function*(c){s.isEqual(c)||(yield bw(n.localStore,c),s=c)});return function(c){return u.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function ZT(i,n){return I0.apply(this,arguments)}function I0(){return(I0=(0,Re.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield T0(i);Ze("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield n.initialize(r,s),i.setCredentialChangeListener(u=>{return(c=(0,Re.Z)(function*(f,m){const C=Je(f);C.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const T=ql(C);C.Kr.add(3),yield Pd(C),T&&C.Wr.set("Unknown"),yield C.remoteSyncer.handleCredentialChange(m),C.Kr.delete(3),yield Of(C)}),function(f,m){return c.apply(this,arguments)})(n.remoteStore,u);var c}),i.onlineComponents=n})).apply(this,arguments)}function T0(i){return D0.apply(this,arguments)}function D0(){return(D0=(0,Re.Z)(function*(i){return i.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield KT(i,new E0)),i.offlineComponents})).apply(this,arguments)}function cm(i){return Py.apply(this,arguments)}function Py(){return(Py=(0,Re.Z)(function*(i){return i.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield ZT(i,new C0)),i.onlineComponents})).apply(this,arguments)}function YT(i){return T0(i).then(n=>n.persistence)}function S0(i){return T0(i).then(n=>n.localStore)}function A0(i){return cm(i).then(n=>n.remoteStore)}function R0(i){return cm(i).then(n=>n.syncEngine)}function Hf(i){return x0.apply(this,arguments)}function x0(){return(x0=(0,Re.Z)(function*(i){const n=yield cm(i),r=n.eventManager;return r.onListen=Cx.bind(null,n.syncEngine),r.onUnlisten=bx.bind(null,n.syncEngine),r})).apply(this,arguments)}function ky(i,n,r={}){const s=new Fr;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(u,c,f,m,C){const T=new $f({next:O=>{c.enqueueAndForget(()=>Xw(u,x));const L=O.docs.has(f);!L&&O.fromCache?C.reject(new He(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&O.fromCache&&m&&"server"===m.source?C.reject(new He(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(O)},error:O=>C.reject(O)}),x=new rr(yd(f.path),T,{includeMetadataChanges:!0,uo:!0});return Qw(u,x)}(yield Hf(i),i.asyncQueue,n,r,s)})),s.promise}function JT(i,n,r={}){const s=new Fr;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(u,c,f,m,C){const T=new $f({next:O=>{c.enqueueAndForget(()=>Xw(u,x)),O.fromCache&&"server"===m.source?C.reject(new He(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(O)},error:O=>C.reject(O)}),x=new rr(f,T,{includeMetadataChanges:!0,uo:!0});return Qw(u,x)}(yield Hf(i),i.asyncQueue,n,r,s)})),s.promise}class eD{constructor(n,r,s,u,c,f,m,C){this.databaseId=n,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.useFetchStreams=C}}class Ld{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Ld&&n.projectId===this.projectId&&n.database===this.database}}const P0=new Map;function tD(i,n,r){if(!r)throw new He(Ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function nD(i,n,r,s){if(!0===n&&!0===s)throw new He(Ie.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Vd(i){if(!at.isDocumentKey(i))throw new He(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ux(i){if(at.isDocumentKey(i))throw new He(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Gf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":st()}function Xt(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new He(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Gf(i);throw new He(Ie.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function rD(i,n){if(n<=0)throw new He(Ie.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class Ud{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new He(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new He(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,nD("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class dm{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ud({}),this._settingsFrozen=!1,n instanceof Ld?this._databaseId=n:(this._app=n,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new He(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ld(s.options.projectId)}(n))}get app(){if(!this._app)throw new He(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new He(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ud(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new Fl;switch(r.type){case"gapi":const s=r.client;return Ct(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new HE(s,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new He(Ie.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=P0.get(n);r&&(Ze("ComponentProvider","Removing Datastore"),P0.delete(n),r.terminate())}(this),Promise.resolve()}}class Yn{constructor(n,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Yn(this.firestore,n,this._key)}}class Qn{constructor(n,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=n}withConverter(n){return new Qn(this.firestore,n,this._query)}}class pa extends Qn{constructor(n,r,s){super(n,r,yd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Yn(this.firestore,null,new at(n))}withConverter(n){return new pa(this.firestore,n,this._path)}}function Bx(i,n,...r){if(i=(0,j.m9)(i),tD("collection","path",n),i instanceof dm){const s=gn.fromString(n,...r);return Ux(s),new pa(i,null,s)}{if(!(i instanceof Yn||i instanceof pa))throw new He(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(gn.fromString(n,...r));return Ux(s),new pa(i.firestore,null,s)}}function Ly(i,n,...r){if(i=(0,j.m9)(i),1===arguments.length&&(n=II.I()),tD("doc","path",n),i instanceof dm){const s=gn.fromString(n,...r);return Vd(s),new Yn(i,null,new at(s))}{if(!(i instanceof Yn||i instanceof pa))throw new He(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(gn.fromString(n,...r));return Vd(s),new Yn(i.firestore,i instanceof pa?i.converter:null,new at(s))}}function iD(i,n){return i=(0,j.m9)(i),n=(0,j.m9)(n),(i instanceof Yn||i instanceof pa)&&(n instanceof Yn||n instanceof pa)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function jx(i,n){return i=(0,j.m9)(i),n=(0,j.m9)(n),i instanceof Qn&&n instanceof Qn&&i.firestore===n.firestore&&Y_(i._query,n._query)&&i.converter===n.converter}class $x{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new kw(this,"async_queue_retry"),this.Ea=()=>{const r=im();r&&Ze("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=im();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=im();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Fr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,Re.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!wf(r))throw r;Ze("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(s=>{throw this.ma=s,this.ga=!1,zr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=r,r}enqueueAfterDelay(n,r,s){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const u=MT.createAndSchedule(this,n,r,s,c=>this.Ra(c));return this._a.push(u),u}Ta(){this.ma&&st()}verifyOperationInProgress(){}ba(){var n=this;return(0,Re.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function k0(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const s=n;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class Hx{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,s){this._progressObserver={next:n,error:r,complete:s}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class fr extends dm{constructor(n,r){super(n,r),this.type="firestore",this._queue=new $x,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Wx(this),this._firestoreClient.terminate()}}function Qr(i){return i._firestoreClient||Wx(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Wx(i){var n;const r=i._freezeSettings(),s=(c=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new eD(i._databaseId,c,i._persistenceKey,(m=r).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var c,m;i._firestoreClient=new kx(i._credentials,i._queue,s)}function oD(i,n,r){const s=new Fr;return i.asyncQueue.enqueue((0,Re.Z)(function*(){try{yield KT(i,r),yield ZT(i,n),s.resolve()}catch(u){if(!("FirebaseError"===(c=u).name?c.code===Ie.FAILED_PRECONDITION||c.code===Ie.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),s.reject(u)}var c})).then(()=>s.promise)}function dD(i){if(i._initialized||i._terminated)throw new He(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uu{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new He(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Ys{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Ys(ci.fromBase64String(n))}catch(r){throw new He(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new Ys(ci.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class ga{constructor(n){this._methodName=n}}class Uy{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new He(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new He(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Jt(this._lat,n._lat)||Jt(this._long,n._long)}}const Zx=/^__.*__$/;class kP{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return null!==this.fieldMask?new bd(n,this.data,this.fieldMask,r,this.fieldTransforms):new Cd(n,this.data,r,this.fieldTransforms)}}class hD{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return new bd(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function fD(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class By{constructor(n,r,s,u,c,f){this.settings=n,this.databaseId=r,this.N=s,this.ignoreUndefinedProperties=u,void 0===c&&this.Sa(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new By(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),u=this.Ca({path:s,xa:!1});return u.ka(n),u}$a(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),u=this.Ca({path:s,xa:!1});return u.Sa(),u}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return $y(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(fD(this.Da)&&Zx.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class Yx{constructor(n,r,s){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=s||Wl(n)}Ba(n,r,s,u=!1){return new By({Da:n,methodName:r,La:s,path:Kr.emptyPath(),xa:!1,Ma:u},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Bd(i){const n=i._freezeSettings(),r=Wl(i._databaseId);return new Yx(i._databaseId,!!n.ignoreUndefinedProperties,r)}function jy(i,n,r,s,u,c={}){const f=i.Ba(c.merge||c.mergeFields?2:0,n,r,u);$0("Data must be an object, but it was:",f,s);const m=Zl(s,f);let C,T;if(c.merge)C=new dd(f.fieldMask),T=f.fieldTransforms;else if(c.mergeFields){const x=[];for(const O of c.mergeFields){const L=mD(n,O,r);if(!f.contains(L))throw new He(Ie.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);_D(x,L)||x.push(L)}C=new dd(x),T=f.fieldTransforms.filter(O=>C.covers(O.field))}else C=null,T=f.fieldTransforms;return new kP(new Bi(m),C,T)}class hm extends ga{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof hm}}function pD(i,n,r){return new By({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class V0 extends ga{_toFieldTransform(n){return new Vg(n.path,new cf)}isEqual(n){return n instanceof V0}}class FP extends ga{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=pD(this,n,!0),s=this.Ua.map(c=>lu(c,r)),u=new Vl(s);return new Vg(n.path,u)}isEqual(n){return this===n}}class Qx extends ga{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=pD(this,n,!0),s=this.Ua.map(c=>lu(c,r)),u=new Ul(s);return new Vg(n.path,u)}isEqual(n){return this===n}}class fm extends ga{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new df(n.N,PI(n.N,this.qa));return new Vg(n.path,r)}isEqual(n){return this===n}}function U0(i,n,r,s){const u=i.Ba(1,n,r);$0("Data must be an object, but it was:",u,s);const c=[],f=Bi.empty();Io(s,(C,T)=>{const x=Wf(n,C,r);T=(0,j.m9)(T);const O=u.$a(x);if(T instanceof hm)c.push(x);else{const L=lu(T,O);null!=L&&(c.push(x),f.set(x,L))}});const m=new dd(c);return new hD(f,m,u.fieldTransforms)}function B0(i,n,r,s,u,c){const f=i.Ba(1,n,r),m=[mD(n,s,r)],C=[u];if(c.length%2!=0)throw new He(Ie.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<c.length;L+=2)m.push(mD(n,c[L])),C.push(c[L+1]);const T=[],x=Bi.empty();for(let L=m.length-1;L>=0;--L)if(!_D(T,m[L])){const W=m[L];let re=C[L];re=(0,j.m9)(re);const Me=f.$a(W);if(re instanceof hm)T.push(W);else{const qe=lu(re,Me);null!=qe&&(T.push(W),x.set(W,qe))}}const O=new dd(T);return new hD(x,O,f.fieldTransforms)}function gD(i,n,r,s=!1){return lu(r,i.Ba(s?4:3,n))}function lu(i,n){if(j0(i=(0,j.m9)(i)))return $0("Unsupported field value:",n,i),Zl(i,n);if(i instanceof ga)return function(r,s){if(!fD(s.Da))throw s.Fa(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,s){const u=[];let c=0;for(const f of r){let m=lu(f,s.Oa(c));null==m&&(m={nullValue:"NULL_VALUE"}),u.push(m),c++}return{arrayValue:{values:u}}}(i,n)}return function(r,s){if(null===(r=(0,j.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return PI(s.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const u=Lr.fromDate(r);return{timestampValue:Gg(s.N,u)}}if(r instanceof Lr){const u=new Lr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gg(s.N,u)}}if(r instanceof Uy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ys)return{bytesValue:YR(s.N,r._byteString)};if(r instanceof Yn){const u=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw s.Fa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ow(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Fa(`Unsupported field value: ${Gf(r)}`)}(i,n)}function Zl(i,n){const r={};return TI(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Io(i,(s,u)=>{const c=lu(u,n.Na(s));null!=c&&(r[s]=c)}),{mapValue:{fields:r}}}function j0(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Lr||i instanceof Uy||i instanceof Ys||i instanceof Yn||i instanceof ga)}function $0(i,n,r){if(!j0(r)||"object"!=typeof(s=r)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Gf(r);throw n.Fa("an object"===s?i+" a custom object":i+" "+s)}var s}function mD(i,n,r){if((n=(0,j.m9)(n))instanceof uu)return n._internalPath;if("string"==typeof n)return Wf(i,n);throw $y("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const Jx=new RegExp("[~\\*/\\[\\]]");function Wf(i,n,r){if(n.search(Jx)>=0)throw $y(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new uu(...n.split("."))._internalPath}catch(s){throw $y(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function $y(i,n,r,s,u){const c=s&&!s.isEmpty(),f=void 0!==u;let m=`Function ${n}() called with invalid data`;r&&(m+=" (via `toFirestore()`)"),m+=". ";let C="";return(c||f)&&(C+=" (found",c&&(C+=` in field ${s}`),f&&(C+=` in document ${u}`),C+=")"),new He(Ie.INVALID_ARGUMENT,m+i+C)}function _D(i,n){return i.some(r=>r.isEqual(n))}class qf{constructor(n,r,s,u,c){this._firestore=n,this._userDataWriter=r,this._key=s,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(zf("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class yD extends qf{data(){return super.data()}}function zf(i,n){return"string"==typeof n?Wf(i,n):n instanceof uu?n._internalPath:n._delegate._internalPath}class Yl{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class cu extends qf{constructor(n,r,s,u,c,f){super(n,r,s,u,f),this._firestore=n,this._firestoreImpl=n,this.metadata=c}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const s=this._document.data.field(zf("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class pm extends cu{data(n={}){return super.data(n)}}class Ql{constructor(n,r,s,u){this._firestore=n,this._userDataWriter=r,this._snapshot=u,this.metadata=new Yl(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(s=>{n.call(r,new pm(this._firestore,this._userDataWriter,s.key,s,new Yl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new He(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new pm(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Yl(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>u||3!==f.type).map(f=>{const m=new pm(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Yl(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let C=-1,T=-1;return 0!==f.type&&(C=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),T=c.indexOf(f.doc.key)),{type:vD(f.type),doc:m,oldIndex:C,newIndex:T}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function vD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function ED(i,n){return i instanceof cu&&n instanceof cu?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof Ql&&n instanceof Ql&&i._firestore===n._firestore&&jx(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function H0(i){if(Fg(i)&&0===i.explicitOrderBy.length)throw new He(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jl{}function ma(i,...n){for(const r of n)i=r._apply(i);return i}class LP extends Jl{constructor(n,r,s){super(),this.Ka=n,this.ja=r,this.Qa=s,this.type="where"}_apply(n){const r=Bd(n.firestore),s=function(u,c,f,m,C,T,x){let O;if(C.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new He(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on FieldPath.documentId().`);if("in"===T||"not-in"===T){CD(x,T);const W=[];for(const re of x)W.push(Xx(m,u,re));O={arrayValue:{values:W}}}else O=Xx(m,u,x)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||CD(x,T),O=gD(f,"where",x,"in"===T||"not-in"===T);const L=ji.create(C,T,O);return function(W,re){if(re.v()){const qe=Z_(W);if(null!==qe&&!qe.isEqual(re.field))throw new He(Ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${qe.toString()}' and '${re.field.toString()}'`);const ht=K_(W);null!==ht&&bD(0,re.field,ht)}const Me=function(qe,ht){for(const Ot of qe.filters)if(ht.indexOf(Ot.op)>=0)return Ot.op;return null}(W,function(qe){switch(qe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(re.op));if(null!==Me)throw new He(Ie.INVALID_ARGUMENT,Me===re.op?`Invalid query. You cannot use more than one '${re.op.toString()}' filter.`:`Invalid query. You cannot use '${re.op.toString()}' filters with '${Me.toString()}' filters.`)}(u,L),L}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Qn(n.firestore,n.converter,function(u,c){const f=u.filters.concat([c]);return new Ll(u.path,u.collectionGroup,u.explicitOrderBy.slice(),f,u.limit,u.limitType,u.startAt,u.endAt)}(n._query,s))}}class En extends Jl{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(s,u,c){if(null!==s.startAt)throw new He(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new He(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new _d(u,c);return function(m,C){if(null===K_(m)){const T=Z_(m);null!==T&&bD(0,T,C.field)}}(s,f),f}(n._query,this.Ka,this.Wa);return new Qn(n.firestore,n.converter,function(s,u){const c=s.explicitOrderBy.concat([u]);return new Ll(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(n._query,r))}}class jd extends Jl{constructor(n,r,s){super(),this.type=n,this.Ga=r,this.za=s}_apply(n){return new Qn(n.firestore,n.converter,MI(n._query,this.Ga,this.za))}}class Rt extends Jl{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=W0(n,this.type,this.Ha,this.Ja);return new Qn(n.firestore,n.converter,(u=r,new Ll((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class ec extends Jl{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=W0(n,this.type,this.Ha,this.Ja);return new Qn(n.firestore,n.converter,(u=r,new Ll((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function W0(i,n,r,s){if(r[0]=(0,j.m9)(r[0]),r[0]instanceof qf)return function(u,c,f,m,C){if(!m)throw new He(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const T=[];for(const x of qu(u))if(x.field.isKeyField())T.push(G_(c,m.key));else{const O=m.data.field(x.field);if(WE(O))throw new He(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const L=x.field.canonicalString();throw new He(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}T.push(O)}return new md(T,C)}(i._query,i.firestore._databaseId,n,r[0]._document,s);{const u=Bd(i.firestore);return function(c,f,m,C,T,x){const O=c.explicitOrderBy;if(T.length>O.length)throw new He(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let W=0;W<T.length;W++){const re=T[W];if(O[W].field.isKeyField()){if("string"!=typeof re)throw new He(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof re}`);if(!sa(c)&&-1!==re.indexOf("/"))throw new He(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${C}() must be a plain document ID, but '${re}' contains a slash.`);const Me=c.path.child(gn.fromString(re));if(!at.isDocumentKey(Me))throw new He(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${C}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const qe=new at(Me);L.push(G_(f,qe))}else{const Me=gD(m,C,re);L.push(Me)}}return new md(L,x)}(i._query,i.firestore._databaseId,u,n,r,s)}}function Xx(i,n,r){if("string"==typeof(r=(0,j.m9)(r))){if(""===r)throw new He(Ie.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sa(n)&&-1!==r.indexOf("/"))throw new He(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=n.path.child(gn.fromString(r));if(!at.isDocumentKey(s))throw new He(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return G_(i,new at(s))}if(r instanceof Yn)return G_(i,r._key);throw new He(Ie.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(r)}.`)}function CD(i,n){if(!Array.isArray(i)||0===i.length)throw new He(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new He(Ie.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function bD(i,n,r){if(!r.isEqual(n))throw new He(Ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Ds{convertValue(n,r="none"){switch(of(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Nr(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(fd(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw st()}}convertObject(n,r){const s={};return Io(n.fields,(u,c)=>{s[u]=this.convertValue(c,r)}),s}convertGeoPoint(n){return new Uy(Nr(n.latitude),Nr(n.longitude))}convertArray(n,r){return(n.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(n,r){switch(r){case"previous":const s=qE(n);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(xg(n));default:return null}}convertTimestamp(n){const r=hd(n);return new Lr(r.seconds,r.nanos)}convertDocumentKey(n,r){const s=gn.fromString(n);Ct(Dd(s));const u=new Ld(s.get(1),s.get(3)),c=new at(s.popFirst(5));return u.isEqual(r)||zr(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}function kn(i,n,r){let s;return s=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,s}class _a extends Ds{constructor(n){super(),this.firestore=n}convertBytes(n){return new Ys(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Yn(this.firestore,null,r)}}class q0{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Bd(n)}set(n,r,s){this._verifyNotCommitted();const u=tc(n,this._firestore),c=kn(u.converter,r,s),f=jy(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,s);return this._mutations.push(f.toMutation(u._key,Zr.none())),this}update(n,r,s,...u){this._verifyNotCommitted();const c=tc(n,this._firestore);let f;return f="string"==typeof(r=(0,j.m9)(r))||r instanceof uu?B0(this._dataReader,"WriteBatch.update",c._key,r,s,u):U0(this._dataReader,"WriteBatch.update",c._key,r),this._mutations.push(f.toMutation(c._key,Zr.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=tc(n,this._firestore);return this._mutations=this._mutations.concat(new hf(r._key,Zr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tc(i,n){if((i=(0,j.m9)(i)).firestore!==n)throw new He(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Yu extends Ds{constructor(n){super(),this.firestore=n}convertBytes(n){return new Ys(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Yn(this.firestore,null,r)}}function z0(i,n,r){i=Xt(i,Yn);const s=Xt(i.firestore,fr),u=kn(i.converter,n,r);return Yf(s,[jy(Bd(s),"setDoc",i._key,u,null!==i.converter,r).toMutation(i._key,Zr.none())])}function Hy(i,n,r,...s){i=Xt(i,Yn);const u=Xt(i.firestore,fr),c=Bd(u);let f;return f="string"==typeof(n=(0,j.m9)(n))||n instanceof uu?B0(c,"updateDoc",i._key,n,r,s):U0(c,"updateDoc",i._key,n),Yf(u,[f.toMutation(i._key,Zr.exists(!0))])}function Z0(i,...n){var r,s,u;i=(0,j.m9)(i);let c={includeMetadataChanges:!1},f=0;"object"!=typeof n[f]||k0(n[f])||(c=n[f],f++);const m={includeMetadataChanges:c.includeMetadataChanges};if(k0(n[f])){const O=n[f];n[f]=null===(r=O.next)||void 0===r?void 0:r.bind(O),n[f+1]=null===(s=O.error)||void 0===s?void 0:s.bind(O),n[f+2]=null===(u=O.complete)||void 0===u?void 0:u.bind(O)}let C,T,x;if(i instanceof Yn)T=Xt(i.firestore,fr),x=yd(i._key.path),C={next:O=>{n[f]&&n[f](Qf(T,i,O))},error:n[f+1],complete:n[f+2]};else{const O=Xt(i,Qn);T=Xt(O.firestore,fr),x=O._query;const L=new Yu(T);C={next:W=>{n[f]&&n[f](new Ql(T,L,O,W))},error:n[f+1],complete:n[f+2]},H0(i._query)}return function(O,L,W,re){const Me=new $f(re),qe=new rr(L,Me,W);return O.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return Qw(yield Hf(O),qe)})),()=>{Me.Xo(),O.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return Xw(yield Hf(O),qe)}))}}(Qr(T),x,m,C)}function Yf(i,n){return function(r,s){const u=new Fr;return r.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(i,n,r){return Ry.apply(this,arguments)}(yield R0(r),s,u)})),u.promise}(Qr(i),n)}function Qf(i,n,r){const s=r.docs.get(n._key),u=new Yu(i);return new cu(i,u,n._key,s,new Yl(r.hasPendingWrites,r.fromCache),n.converter)}class TD extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Bd(n)}get(n){const r=tc(n,this._firestore),s=new _a(this._firestore);return this._transaction.lookup([r._key]).then(u=>{if(!u||1!==u.length)return st();const c=u[0];if(c.isFoundDocument())return new qf(this._firestore,s,c.key,c,r.converter);if(c.isNoDocument())return new qf(this._firestore,s,r._key,null,r.converter);throw st()})}set(n,r,s){const u=tc(n,this._firestore),c=kn(u.converter,r,s),f=jy(this._dataReader,"Transaction.set",u._key,c,null!==u.converter,s);return this._transaction.set(u._key,f),this}update(n,r,s,...u){const c=tc(n,this._firestore);let f;return f="string"==typeof(r=(0,j.m9)(r))||r instanceof uu?B0(this._dataReader,"Transaction.update",c._key,r,s,u):U0(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,f),this}delete(n){const r=tc(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=tc(n,this._firestore),s=new Yu(this._firestore);return super.get(n).then(u=>new cu(this._firestore,s,r._key,u._document,new Yl(!1,!1),r.converter))}}function Hd(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new He("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function AD(){if("undefined"==typeof Uint8Array)throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function RD(){if("undefined"==typeof atob)throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){Rg=i})(za.SDK_VERSION),(0,za._registerComponent)(new wi.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),s=new fr(r,new NR(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),s._setSettings(n),s},"PUBLIC")),(0,za.registerVersion)("@firebase/firestore","3.1.0",void 0);class vm{constructor(n){this._delegate=n}static fromBase64String(n){return RD(),new vm(Ys.fromBase64String(n))}static fromUint8Array(n){return AD(),new vm(Ys.fromUint8Array(n))}toBase64(){return RD(),this._delegate.toBase64()}toUint8Array(){return AD(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xD(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(i)}class rN{enableIndexedDbPersistence(n,r){return function(i,n){dD(i=Xt(i,fr));const r=Qr(i),s=i._freezeSettings(),u=new C0;return oD(r,u,new w0(u,s.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){dD(i=Xt(i,fr));const n=Qr(i),r=i._freezeSettings(),s=new C0;return oD(n,s,new Ox(s,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new He(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Fr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{yield(r=(0,Re.Z)(function*(s){if(!da.bt())return Promise.resolve();const u=s+"main";yield da.delete(u)}),function(s){return r.apply(this,arguments)})(vw(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class Di{constructor(n,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},n instanceof Ld||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&j_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,s={}){!function(i,n,r,s={}){var u;const c=(i=Xt(i,dm))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==n&&j_("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:`${n}:${r}`,ssl:!1})),s.mockUserToken){let f,m;if("string"==typeof s.mockUserToken)f=s.mockUserToken,m=Vi.MOCK_USER;else{f=(0,j.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new He(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Vi(C)}i._credentials=new CI(new wI(f,m))}}(this._delegate,n,r,s)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Re.Z)(function*(){const n=yield YT(i),r=yield A0(i);return n.setNetworkEnabled(!0),function(s){const u=Je(s);return u.Kr.delete(0),Of(u)}(r)}))}(Qr(i=Xt(i,fr)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Re.Z)(function*(){const n=yield YT(i),r=yield A0(i);return n.setNetworkEnabled(!1),(s=(0,Re.Z)(function*(u){const c=Je(u);c.Kr.add(0),yield Pd(c),c.Wr.set("Offline")}),function(u){return s.apply(this,arguments)})(r);var s}))}(Qr(i=Xt(i,fr)))}(this._delegate)}enablePersistence(n){let r=!1,s=!1;return n&&(r=!!n.synchronizeTabs,s=!!n.experimentalForceOwningTab,nD("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(i,n){return h0.apply(this,arguments)}(yield R0(n),r)})),r.promise}(Qr(i=Xt(i,fr)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new $f(n);return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return s=yield Hf(i),u=r,Je(s).Zr.add(u),void u.next();var s,u})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return s=yield Hf(i),u=r,void Je(s).Zr.delete(u);var s,u}))}}(Qr(i=Xt(i,fr)),k0(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Jf(this,Bx(this._delegate,n))}catch(r){throw Xi(r,"collection()","Firestore.collection()")}}doc(n){try{return new Ro(this,Ly(this._delegate,n))}catch(r){throw Xi(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new es(this,function(i,n){if(i=Xt(i,dm),tD("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new He(Ie.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qn(i,null,(r=n,new Ll(gn.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw Xi(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Fr;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){const s=yield(u=i,cm(u).then(c=>c.datastore));var u;new Px(i.asyncQueue,s,n,r).run()})),r.promise}(Qr(i),r=>n(new TD(i,r)))}(this._delegate,r=>n(new qy(this,r)))}batch(){return Qr(this._delegate),new ND(new q0(this._delegate,n=>Yf(this._delegate,n)))}loadBundle(n){return function(i,n){const r=Qr(i=Xt(i,fr)),s=new Hx;return function(i,n,r,s){const u=function(c,f){let m;return m="string"==typeof c?(new TextEncoder).encode(c):c,C=function(C,T){if(C instanceof Uint8Array)return qT(C,T);if(C instanceof ArrayBuffer)return qT(new Uint8Array(C),T);if(C instanceof ReadableStream)return C.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Mx(C,f);var C}(r,Wl(n));i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){!function(i,n,r){const s=Je(i);var u;(u=(0,Re.Z)(function*(c,f,m){try{const C=yield f.getMetadata();if(yield function(L,W){const re=Je(L),Me=Br(W.createTime);return re.persistence.runTransaction("hasNewerBundle","readonly",qe=>re.Je.getBundleMetadata(qe,W.id)).then(qe=>!!qe&&qe.createTime.compareTo(Me)>=0)}(c.localStore,C))return yield f.close(),void m._completeWith((L=C,{taskState:"Success",documentsLoaded:L.totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}));m._updateProgress(PT(C));const T=new t0(C,c.localStore,f.N);let x=yield f.Qo();for(;x;){const L=yield T.fo(x);L&&m._updateProgress(L),x=yield f.Qo()}const O=yield T.complete();yield au(c,O.Tn,void 0),yield function(L,W){const re=Je(L);return re.persistence.runTransaction("Save bundle","readwrite",Me=>re.Je.saveBundleMetadata(Me,W))}(c.localStore,C),m._completeWith(O.progress)}catch(C){j_("SyncEngine",`Loading bundle failed with ${C}`),m._failWith(C)}var L}),function(c,f,m){return u.apply(this,arguments)})(s,n,r).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield R0(i),u,s)}))}(r,i._databaseId,n,s),s}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,Re.Z)(function*(){return function(r,s){const u=Je(r);return u.persistence.runTransaction("Get named query","readonly",c=>u.Je.getNamedQuery(c,s))}(yield S0(i),n)}))}(Qr(i=Xt(i,fr)),n).then(r=>r?new Qn(i,null,r.query):null)}(this._delegate,n).then(r=>r?new es(this,r):null)}}class Wy extends Ds{constructor(n){super(),this.firestore=n}convertBytes(n){return new vm(new Ys(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return Ro.forKey(r,this.firestore,null)}}class qy{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new Wy(n)}get(n){const r=Xf(n);return this._delegate.get(r).then(s=>new Wd(this._firestore,new cu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(n,r,s){const u=Xf(n);return s?(Hd("Transaction.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(n,r,s,...u){const c=Xf(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...u),this}delete(n){const r=Xf(n);return this._delegate.delete(r),this}}class ND{constructor(n){this._delegate=n}set(n,r,s){const u=Xf(n);return s?(Hd("WriteBatch.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(n,r,s,...u){const c=Xf(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...u),this}delete(n){const r=Xf(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Gd{constructor(n,r,s){this._firestore=n,this._userDataWriter=r,this._delegate=s}fromFirestore(n,r){const s=new pm(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new Em(this._firestore,s),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const s=Gd.INSTANCES;let u=s.get(n);u||(u=new WeakMap,s.set(n,u));let c=u.get(r);return c||(c=new Gd(n,new Wy(n),r),u.set(r,c)),c}}Gd.INSTANCES=new WeakMap;class Ro{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Wy(n)}static forPath(n,r,s){if(n.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Ro(r,new Yn(r._delegate,s,new at(n)))}static forKey(n,r,s){return new Ro(r,new Yn(r._delegate,s,n))}get id(){return this._delegate.id}get parent(){return new Jf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Jf(this.firestore,Bx(this._delegate,n))}catch(r){throw Xi(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,j.m9)(n))instanceof Yn&&iD(this._delegate,n)}set(n,r){r=Hd("DocumentReference.set",r);try{return r?z0(this._delegate,n,r):z0(this._delegate,n)}catch(s){throw Xi(s,"setDoc()","DocumentReference.set()")}}update(n,r,...s){try{return 1===arguments.length?Hy(this._delegate,n):Hy(this._delegate,n,r,...s)}catch(u){throw Xi(u,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return Yf(Xt(i.firestore,fr),[new hf(i._key,Zr.none())])}(this._delegate)}onSnapshot(...n){const r=OD(n),s=MD(n,u=>new Wd(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Z0(this._delegate,r,s)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Xt(i,Yn);const n=Xt(i.firestore,fr),r=Qr(n),s=new Yu(n);return function(i,n){const r=new Fr;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(s=(0,Re.Z)(function*(u,c,f){try{const m=yield function(C,T){const x=Je(C);return x.persistence.runTransaction("read document","readonly",O=>x.Qn.An(O,T))}(u,c);m.isFoundDocument()?f.resolve(m):m.isNoDocument()?f.resolve(null):f.reject(new He(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const C=zl(m,`Failed to get document '${c} from cache`);f.reject(C)}}),function(u,c,f){return s.apply(this,arguments)})(yield S0(i),n,r);var s})),r.promise}(r,i._key).then(u=>new cu(n,s,i._key,u,new Yl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Xt(i,Yn);const n=Xt(i.firestore,fr);return ky(Qr(n),i._key,{source:"server"}).then(r=>Qf(n,i,r))}(this._delegate):function(i){i=Xt(i,Yn);const n=Xt(i.firestore,fr);return ky(Qr(n),i._key).then(r=>Qf(n,i,r))}(this._delegate),r.then(s=>new Wd(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(n){return new Ro(this.firestore,this._delegate.withConverter(n?Gd.getInstance(this.firestore,n):null))}}function Xi(i,n,r){return i.message=i.message.replace(n,r),i}function OD(i){for(const n of i)if("object"==typeof n&&!xD(n))return n;return{}}function MD(i,n){var r,s;let u;return u=xD(i[0])?i[0]:xD(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{u.next&&u.next(n(c))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Wd{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new Ro(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return ED(this._delegate,n._delegate)}}class Em extends Wd{data(n){const r=this._delegate.data(n);return function(i,n){i||st()}(void 0!==r),r}}class es{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Wy(n)}where(n,r,s){try{return new es(this.firestore,ma(this._delegate,function(i,n,r){const s=n,u=zf("where",i);return new LP(u,s,r)}(n,r,s)))}catch(u){throw Xi(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new es(this.firestore,ma(this._delegate,function(i,n="asc"){const r=n,s=zf("orderBy",i);return new En(s,r)}(n,r)))}catch(s){throw Xi(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new es(this.firestore,ma(this._delegate,function(i){return rD("limit",i),new jd("limit",i,"F")}(n)))}catch(r){throw Xi(r,"limit()","Query.limit()")}}limitToLast(n){try{return new es(this.firestore,ma(this._delegate,function(i){return rD("limitToLast",i),new jd("limitToLast",i,"L")}(n)))}catch(r){throw Xi(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new es(this.firestore,ma(this._delegate,function(...i){return new Rt("startAt",i,!0)}(...n)))}catch(r){throw Xi(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new es(this.firestore,ma(this._delegate,function(...i){return new Rt("startAfter",i,!1)}(...n)))}catch(r){throw Xi(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new es(this.firestore,ma(this._delegate,function(...i){return new ec("endBefore",i,!0)}(...n)))}catch(r){throw Xi(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new es(this.firestore,ma(this._delegate,function(...i){return new ec("endAt",i,!1)}(...n)))}catch(r){throw Xi(r,"endAt()","Query.endAt()")}}isEqual(n){return jx(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Xt(i,Qn);const n=Xt(i.firestore,fr),r=Qr(n),s=new Yu(n);return function(i,n){const r=new Fr;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(s=(0,Re.Z)(function*(u,c,f){try{const m=yield br(u,c,!0),C=new s0(c,m.Gn),T=C.Io(m.documents),x=C.applyChanges(T,!1);f.resolve(x.snapshot)}catch(m){const C=zl(m,`Failed to execute query '${c} against cache`);f.reject(C)}}),function(u,c,f){return s.apply(this,arguments)})(yield S0(i),n,r);var s})),r.promise}(r,i._query).then(u=>new Ql(n,s,i,u))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Xt(i,Qn);const n=Xt(i.firestore,fr),r=Qr(n),s=new Yu(n);return JT(r,i._query,{source:"server"}).then(u=>new Ql(n,s,i,u))}(this._delegate):function(i){i=Xt(i,Qn);const n=Xt(i.firestore,fr),r=Qr(n),s=new Yu(n);return H0(i._query),JT(r,i._query).then(u=>new Ql(n,s,i,u))}(this._delegate),r.then(s=>new wm(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...n){const r=OD(n),s=MD(n,u=>new wm(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Z0(this._delegate,r,s)}withConverter(n){return new es(this.firestore,this._delegate.withConverter(n?Gd.getInstance(this.firestore,n):null))}}class PD{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Em(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wm{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new Em(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new PD(this._firestore,r))}forEach(n,r){this._delegate.forEach(s=>{n.call(r,new Em(this._firestore,s))})}isEqual(n){return ED(this._delegate,n._delegate)}}class Jf extends es{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Ro(this.firestore,n):null}doc(n){try{return new Ro(this.firestore,void 0===n?Ly(this._delegate):Ly(this._delegate,n))}catch(r){throw Xi(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=Xt(i.firestore,fr),s=Ly(i),u=kn(i.converter,n);return Yf(r,[jy(Bd(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,Zr.exists(!1))]).then(()=>s)}(this._delegate,n).then(r=>new Ro(this.firestore,r))}isEqual(n){return iD(this._delegate,n._delegate)}withConverter(n){return new Jf(this.firestore,this._delegate.withConverter(n?Gd.getInstance(this.firestore,n):null))}}function Xf(i){return Xt(i,Yn)}class J0{constructor(...n){this._delegate=new uu(...n)}static documentId(){return new J0(Kr.keyField().canonicalString())}isEqual(n){return(n=(0,j.m9)(n))instanceof uu&&this._delegate._internalPath.isEqual(n._internalPath)}}class qd{constructor(n){this._delegate=n}static serverTimestamp(){const n=new V0("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new qd(n)}static delete(){const n=new hm("deleteField");return n._methodName="FieldValue.delete",new qd(n)}static arrayUnion(...n){const r=function(...i){return new FP("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new qd(r)}static arrayRemove(...n){const r=function(...i){return new Qx("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new qd(r)}static increment(n){const r=function(i){return new fm("increment",i)}(n);return r._methodName="FieldValue.increment",new qd(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const sN={Firestore:Di,GeoPoint:Uy,Timestamp:Lr,Blob:vm,Transaction:qy,WriteBatch:ND,DocumentReference:Ro,DocumentSnapshot:Wd,Query:es,QueryDocumentSnapshot:Em,QuerySnapshot:wm,CollectionReference:Jf,FieldPath:J0,FieldValue:qd,setLogLevel:function(i){!function(i){ld.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,n){i.INTERNAL.registerComponent(new wi.wA("firestore-compat",r=>((n,r)=>new Di(n,r,new rN))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},sN)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(dr.Z);var kD=U(9753);const Cm=(0,kD.d)(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var uN=U(8208);let zy=(()=>{class i extends vr{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const s=new X0(this,this);return s.operator=r,s}_throwIfClosed(){if(this.closed)throw new Cm}next(r){(0,Yo.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const s=this.observers.slice();for(const u of s)u.next(r)}})}error(r){(0,Yo.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:s}=this;for(;s.length;)s.shift().error(r)}})}complete(){(0,Yo.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:s,isStopped:u,observers:c}=this;return s||u?Ba.Lc:(c.push(r),new Ba.w0(()=>(0,uN.P)(c,r)))}_checkFinalizedStatuses(r){const{hasError:s,thrownError:u,isStopped:c}=this;s?r.error(u):c&&r.complete()}asObservable(){const r=new vr;return r.source=this,r}}return i.create=(n,r)=>new X0(n,r),i})();class X0 extends zy{constructor(n,r){super(),this.destination=n,this.source=r}next(n){var r,s;null===(s=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===s||s.call(r,n)}error(n){var r,s;null===(s=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===s||s.call(r,n)}complete(){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===r||r.call(n)}_subscribe(n){var r,s;return null!==(s=null===(r=this.source)||void 0===r?void 0:r.subscribe(n))&&void 0!==s?s:Ba.Lc}}const zd=new vr(i=>i.complete());function eC(...i){const n=P(i),r=function(i,n){return"number"==typeof S(i)?i.pop():1/0}(i),s=i;return s.length?1===s.length?pn(s[0]):Rr(r)(Wr(s,n)):zd}function Qu(i,n){return(0,Ne.e)((r,s)=>{let u=null,c=0,f=!1;const m=()=>f&&!u&&s.complete();r.subscribe(new Ke.Q(s,C=>{null==u||u.unsubscribe();let T=0;const x=c++;pn(i(C,x)).subscribe(u=new Ke.Q(s,O=>s.next(n?n(C,O,x,T++):O),()=>{u=null,m()}))},()=>{f=!0,m()}))})}var lN=U(1373);class cN extends zy{constructor(n=1/0,r=1/0,s=lN.l){super(),this._bufferSize=n,this._windowTime=r,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,r)}next(n){const{isStopped:r,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:c,_windowTime:f}=this;r||(s.push(n),!u&&s.push(c.now()+f)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(n),{_infiniteTimeWindow:s,_buffer:u}=this,c=u.slice();for(let f=0;f<c.length&&!n.closed;f+=s?1:2)n.next(c[f]);return this._checkFinalizedStatuses(n),r}_trimBuffer(){const{_bufferSize:n,_timestampProvider:r,_buffer:s,_infiniteTimeWindow:u}=this,c=(u?1:2)*n;if(n<1/0&&c<s.length&&s.splice(0,s.length-c),!u){const f=r.now();let m=0;for(let C=1;C<s.length&&s[C]<=f;C+=2)m=C;m&&s.splice(0,m+1)}}}function LD(i){return i<=0?()=>zd:(0,Ne.e)((n,r)=>{let s=0;n.subscribe(new Ke.Q(r,u=>{++s<=i&&(r.next(u),i<=s&&r.complete())}))})}function tC(i={}){const{connector:n=(()=>new zy),resetOnError:r=!0,resetOnComplete:s=!0,resetOnRefCountZero:u=!0}=i;return c=>{let f=null,m=null,C=null,T=0,x=!1,O=!1;const L=()=>{null==m||m.unsubscribe(),m=null},W=()=>{L(),f=C=null,x=O=!1},re=()=>{const Me=f;W(),null==Me||Me.unsubscribe()};return(0,Ne.e)((Me,qe)=>{T++,!O&&!x&&L();const ht=C=null!=C?C:n();qe.add(()=>{T--,0===T&&!O&&!x&&(m=nC(re,u))}),ht.subscribe(qe),f||(f=new Bs.Hp({next:Ot=>ht.next(Ot),error:Ot=>{O=!0,L(),m=nC(W,r,Ot),ht.error(Ot)},complete:()=>{x=!0,L(),m=nC(W,s),ht.complete()}}),Wr(Me).subscribe(f))})(c)}}function nC(i,n,...r){return!0===n?(i(),null):!1===n?null:n(...r).pipe(LD(1)).subscribe(()=>i())}function VD(i,n,r){var s,u;let c,f=!1;return i&&"object"==typeof i?(c=null!==(s=i.bufferSize)&&void 0!==s?s:1/0,n=null!==(u=i.windowTime)&&void 0!==u?u:1/0,f=!!i.refCount,r=i.scheduler):c=null!=i?i:1/0,tC({connector:()=>new cN(c,n,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}const dN=(0,kD.d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function HP(i){return(0,Ne.e)((n,r)=>{let s=!1;n.subscribe(new Ke.Q(r,u=>{s=!0,r.next(u)},()=>{s||r.next(i),r.complete()}))})}function GP(i=rC){return(0,Ne.e)((n,r)=>{let s=!1;n.subscribe(new Ke.Q(r,u=>{s=!0,r.next(u)},()=>s?r.complete():r.error(i())))})}function rC(){return new dN}function UD(i,n){return(0,yr.m)(n)?Qu(()=>i,n):Qu(()=>i)}U(2329);const GD=new Map,WD={activated:!1,tokenObservers:[]},_N={initialized:!1,enabled:!1};function Ss(i){return GD.get(i)||WD}function hu(i,n){GD.set(i,n)}function Zy(){return _N}class QP{constructor(n,r,s,u,c){if(this.operation=n,this.retryPolicy=r,this.getWaitDuration=s,this.lowerBound=u,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=u,u>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(n){var r=this;return(0,Re.Z)(function*(){r.stop();try{r.pending=new j.BH,yield function(i){return new Promise(n=>{setTimeout(n,i)})}(r.getNextRun(n)),r.pending.resolve(),yield r.pending.promise,r.pending=new j.BH,yield r.operation(),r.pending.resolve(),yield r.pending.promise,r.process(!0).catch(()=>{})}catch(s){r.retryPolicy(s)?r.process(!1).catch(()=>{}):r.stop()}})()}getNextRun(n){if(n)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}}const ts=new j.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function YD(i){if(!Ss(i).activated)throw ts.create("use-before-activation",{appName:i.name})}function QD(i,n){return iC.apply(this,arguments)}function iC(){return(iC=(0,Re.Z)(function*({url:i,body:n},r){const s={"Content-Type":"application/json"},u=r.getImmediate({optional:!0});u&&(s["X-Firebase-Client"]=u.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(n),headers:s};let f,m;try{f=yield fetch(i,c)}catch(O){throw ts.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==f.status)throw ts.create("fetch-status-error",{httpStatus:f.status});try{m=yield f.json()}catch(O){throw ts.create("fetch-parse-error",{originalErrorMessage:O.message})}const C=m.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const T=1e3*Number(C[1]),x=Date.now();return{token:m.attestationToken,expireTimeMillis:x+T,issuedAtTimeMillis:x}})).apply(this,arguments)}function wN(i,n){const{projectId:r,appId:s,apiKey:u}=i.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${r}/apps/${s}:exchangeDebugToken?key=${u}`,body:{debug_token:n}}}const Tm="firebase-app-check-store";let Dm=null;function sC(){return Dm||(Dm=new Promise((i,n)=>{try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{i(s.target.result)},r.onerror=s=>{var u;n(ts.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{const u=s.target.result;switch(s.oldVersion){case 0:u.createObjectStore(Tm,{keyPath:"compositeKey"})}}}catch(r){n(ts.create("storage-open",{originalErrorMessage:r.message}))}}),Dm)}function oC(){return(oC=(0,Re.Z)(function*(i,n){const s=(yield sC()).transaction(Tm,"readwrite"),c=s.objectStore(Tm).put({compositeKey:i,value:n});return new Promise((f,m)=>{c.onsuccess=C=>{f()},s.onerror=C=>{var T;m(ts.create("storage-set",{originalErrorMessage:null===(T=C.target.error)||void 0===T?void 0:T.message}))}})})).apply(this,arguments)}const Yy=new ai.Yd("@firebase/app-check");function iS(i,n){return(0,j.hl)()?function(i,n){return function(i,n){return oC.apply(this,arguments)}(function(i){return`${i.options.appId}-${i.name}`}(i),n)}(i,n).catch(r=>{Yy.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}function sS(){return Zy().enabled}function Am(){return lC.apply(this,arguments)}function lC(){return(lC=(0,Re.Z)(function*(){const i=Zy();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const JP={error:"UNKNOWN_ERROR"};function cC(i){return j.US.encodeString(JSON.stringify(i),!1)}function tp(i){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,Re.Z)(function*(i,n=!1){const r=i.app;YD(r);const s=Ss(r);let c,f,u=s.token;if(!u){const m=yield s.cachedTokenPromise;m&&xm(m)&&(u=m,hu(r,Object.assign(Object.assign({},s),{token:u})),oS(r,{token:u.token}))}if(!n&&u&&xm(u))return{token:u.token};if(sS()){const m=yield QD(wN(r,yield Am()),i.platformLoggerProvider);return yield iS(r,m),hu(r,Object.assign(Object.assign({},s),{token:m})),{token:m.token}}try{u=yield s.provider.getToken()}catch(m){Yy.error(m),c=m}return u?(f={token:u.token},hu(r,Object.assign(Object.assign({},s),{token:u})),yield iS(r,u)):f=SN(c),oS(r,f),f})).apply(this,arguments)}function Rm(i,n){const r=Ss(i),s=r.tokenObservers.filter(u=>u.next!==n);0===s.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),hu(i,Object.assign(Object.assign({},r),{tokenObservers:s}))}function oS(i,n){const r=Ss(i).tokenObservers;for(const s of r)try{"EXTERNAL"===s.type&&null!=n.error?s.error(n.error):s.next(n)}catch(u){}}function xm(i){return i.expireTimeMillis-Date.now()>0}function SN(i){return{token:cC(JP),error:i}}class aS{constructor(n,r){this.app=n,this.platformLoggerProvider=r}_delete(){const{tokenObservers:n}=Ss(this.app);for(const r of n)Rm(this.app,r.next);return Promise.resolve()}}const tv="app-check-internal";(0,za._registerComponent)(new wi.wA("app-check",i=>function(i,n){return new aS(i,n)}(i.getProvider("app").getImmediate(),i.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,n,r)=>{i.getProvider(tv).initialize()})),(0,za._registerComponent)(new wi.wA(tv,i=>function(i){return{getToken:n=>tp(i,n),addTokenListener:n=>function(i,n,r,s){const{app:u}=i,c=Ss(u),f={next:r,error:s,type:n},m=Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,f]});if(!m.tokenRefresher){const C=function(i){const{app:n}=i;return new QP((0,Re.Z)(function*(){let s;if(s=Ss(n).token?yield tp(i,!0):yield tp(i),s.error)throw s.error}),()=>!0,()=>{const r=Ss(n);if(r.token){let s=r.token.issuedAtTimeMillis+.5*(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,r.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(i);m.tokenRefresher=C}if(!m.tokenRefresher.isRunning()&&c.isTokenAutoRefreshEnabled&&m.tokenRefresher.start(),c.token&&xm(c.token)){const C=c.token;Promise.resolve().then(()=>r({token:C.token})).catch(()=>{})}else null==c.token&&c.cachedTokenPromise.then(C=>{C&&xm(C)&&r({token:C.token})}).catch(()=>{});hu(u,m)}(i,"INTERNAL",n),removeTokenListener:n=>Rm(i.app,n)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,za.registerVersion)("@firebase/app-check","0.4.2");class nv{constructor(){return(0,ue.vb)("app-check")}}"undefined"!=typeof window&&window;var Yd=U(7841);const ov=new _.OlP("angularfire2.auth.use-emulator"),av=new _.OlP("angularfire2.auth.settings"),pC=new _.OlP("angularfire2.auth.tenant-id"),uv=new _.OlP("angularfire2.auth.langugage-code"),lv=new _.OlP("angularfire2.auth.use-device-language"),gC=new _.OlP("angularfire.auth.persistence"),mC=(i,n,r,s,u,c,f,m)=>(0,qn.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const C=n.runOutsideAngular(()=>i.auth());if(r&&C.useEmulator(...r),s&&(C.tenantId=s),C.languageCode=u,c&&C.useDeviceLanguage(),f)for(const[T,x]of Object.entries(f))C.settings[T]=x;return m&&C.setPersistence(m),C},[r,s,u,c,f,m]);let fu=(()=>{class i{constructor(r,s,u,c,f,m,C,T,x,O,L,W){const re=new zy,Me=te(void 0).pipe((0,Ei.Q)(f.outsideAngular),Qu(()=>c.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,4828)))),Ue(()=>(0,qn.on)(r,c,s)),Ue(qe=>mC(qe,c,m,T,x,O,C,L)),VD({bufferSize:1,refCount:!1}));if(Gn(u))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{Me.pipe(function(i,n){const r=arguments.length>=2;return s=>s.pipe(i?na((u,c)=>i(u,c,s)):_s.y,LD(1),r?HP(n):GP(()=>new dN))}()).subscribe();const ht=Me.pipe(Qu(nn=>nn.getRedirectResult().then($r=>$r,()=>null)),ue.iC,VD({bufferSize:1,refCount:!1})),Ot=Me.pipe(Qu(nn=>new vr($r=>({unsubscribe:c.runOutsideAngular(()=>nn.onAuthStateChanged(bu=>$r.next(bu),bu=>$r.error(bu),()=>$r.complete()))})))),vn=Me.pipe(Qu(nn=>new vr($r=>({unsubscribe:c.runOutsideAngular(()=>nn.onIdTokenChanged(bu=>$r.next(bu),bu=>$r.error(bu),()=>$r.complete()))}))));this.authState=ht.pipe(UD(Ot),(0,oi.R)(f.outsideAngular),(0,Ei.Q)(f.insideAngular)),this.user=ht.pipe(UD(vn),(0,oi.R)(f.outsideAngular),(0,Ei.Q)(f.insideAngular)),this.idToken=this.user.pipe(Qu(nn=>nn?Wr(nn.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Qu(nn=>nn?Wr(nn.getIdTokenResult()):te(null))),this.credential=eC(ht,re,this.authState.pipe(na(nn=>!nn))).pipe(Ue(nn=>(null==nn?void 0:nn.user)?nn:null),(0,oi.R)(f.outsideAngular),(0,Ei.Q)(f.insideAngular))}return(0,qn.pX)(this,Me,c,{spy:{apply:(qe,ht,Ot)=>{(qe.startsWith("signIn")||qe.startsWith("createUser"))&&Ot.then(vn=>re.next(vn))}}})}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(qn.Dh),_.LFG(qn.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ue.HU),_.LFG(ov,8),_.LFG(av,8),_.LFG(pC,8),_.LFG(uv,8),_.LFG(lv,8),_.LFG(gC,8),_.LFG(nv,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),FN=(()=>{class i{constructor(){Yd.Z.registerVersion("angularfire",ue.q4.full,"auth-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[fu]}),i})();function _C(i,n){return function(i,n=Lc.z){return new vr(r=>{let s;return null!=n?n.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},r)}):s=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=s&&s()}})}(i,n)}function cv(i,n){return _C(i,n).pipe(Ue(r=>({payload:r,type:"query"})))}function dv(i,n){return cv(i,n).pipe(ta(void 0),qa(),Ue(([r,s])=>{const u=s.payload.docChanges(),c=u.map(f=>({type:f.type,payload:f}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((f,m)=>{const C=u.find(x=>x.doc.ref.isEqual(f.ref)),T=null==r?void 0:r.payload.docs.find(x=>x.ref.isEqual(f.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(f.metadata)||!C&&T&&JSON.stringify(T.metadata)===JSON.stringify(f.metadata)||c.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:f}})}),c}))}function IS(i,n,r){return dv(i,r).pipe(vs((s,u)=>function(i,n,r){return n.forEach(s=>{r.indexOf(s.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return hv(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return hv(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return hv(i,n.oldIndex,1)}return i}(i,s))}),i}(s,u.map(c=>c.payload),n),[]),Es(),Ue(s=>s.map(u=>({type:u.type,payload:u}))))}function hv(i,n,r,...s){const u=i.slice();return u.splice(n,r,...s),u}function VN(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class UN{constructor(n,r,s){this.ref=n,this.query=r,this.afs=s}stateChanges(n){let r=dv(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe(Ue(s=>s.filter(u=>n.indexOf(u.type)>-1)))),r.pipe(ta(void 0),qa(),na(([s,u])=>u.length>0||!s),Ue(([s,u])=>u),ue.iC)}auditTrail(n){return this.stateChanges(n).pipe(vs((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=VN(n);return IS(this.query,r,this.afs.schedulers.outsideAngular).pipe(ue.iC)}valueChanges(n={}){return cv(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(r=>r.payload.docs.map(s=>n.idField?Object.assign(Object.assign({},s.data()),{[n.idField]:s.id}):s.data())),ue.iC)}get(n){return Wr(this.query.get(n)).pipe(ue.iC)}add(n){return this.ref.add(n)}doc(n){return new BN(this.ref.doc(n),this.afs)}}class BN{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const s=this.ref.collection(n),{ref:u,query:c}=HN(s,r);return new UN(u,c,this.afs)}snapshotChanges(){return function(i,n){return _C(i,n).pipe(ta(void 0),qa(),Ue(([r,s])=>s.exists?(null==r?void 0:r.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ue.iC)}valueChanges(n={}){return this.snapshotChanges().pipe(Ue(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return Wr(this.ref.get(n)).pipe(ue.iC)}}class ok{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?dv(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(r=>r.filter(s=>n.indexOf(s.type)>-1)),na(r=>r.length>0),ue.iC):dv(this.query,this.afs.schedulers.outsideAngular).pipe(ue.iC)}auditTrail(n){return this.stateChanges(n).pipe(vs((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=VN(n);return IS(this.query,r,this.afs.schedulers.outsideAngular).pipe(ue.iC)}valueChanges(n={}){return cv(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(s=>s.payload.docs.map(u=>n.idField?Object.assign({[n.idField]:u.id},u.data()):u.data())),ue.iC)}get(n){return Wr(this.query.get(n)).pipe(ue.iC)}}const jN=new _.OlP("angularfire2.enableFirestorePersistence"),$N=new _.OlP("angularfire2.firestore.persistenceSettings"),ak=new _.OlP("angularfire2.firestore.settings"),uk=new _.OlP("angularfire2.firestore.use-emulator");function HN(i,n=(r=>r)){return{query:n(i),ref:i}}let GN=(()=>{class i{constructor(r,s,u,c,f,m,C,T,x,O,L,W,re,Me,qe,ht,Ot){this.schedulers=C;const vn=(0,qn.on)(r,m,s),nn=x;O&&mC(vn,m,L,re,Me,qe,W,ht),[this.firestore,this.persistenceEnabled$]=(0,qn.cc)(`${vn.name}.firestore`,"AngularFirestore",vn.name,()=>{const $r=m.runOutsideAngular(()=>vn.firestore());if(c&&$r.settings(c),nn&&$r.useEmulator(...nn),u&&!Gn(f)){const bu=()=>{try{return Wr($r.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(jH){return"undefined"!=typeof console&&console.warn(jH),te(!1)}};return[$r,m.runOutsideAngular(bu)]}return[$r,te(!1)]},[c,nn,u])}collection(r,s){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:c,query:f}=HN(u,s),m=this.schedulers.ngZone.run(()=>c);return new UN(m,f,this)}collectionGroup(r,s){const u=s||(f=>f),c=this.firestore.collectionGroup(r);return new ok(u(c),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>s);return new BN(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(qn.Dh),_.LFG(qn.xv,8),_.LFG(jN,8),_.LFG(ak,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ue.HU),_.LFG($N,8),_.LFG(uk,8),_.LFG(fu,8),_.LFG(ov,8),_.LFG(av,8),_.LFG(pC,8),_.LFG(uv,8),_.LFG(lv,8),_.LFG(gC,8),_.LFG(nv,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),lk=(()=>{class i{constructor(){Yd.Z.registerVersion("angularfire",ue.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:jN,useValue:!0},{provide:$N,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[GN]}),i})();var ck=U(9361);let yC="";function TS(i){yC=i}class WN{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,r){null==r?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,j.Pz)(r))}get(n){const r=this.domStorage_.getItem(this.prefixedName_(n));return null==r?null:(0,j.cI)(r)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class gk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,r){null==r?delete this.cache_[n]:this.cache_[n]=r}get(n){return(0,j.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const qN=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const n=window[i];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new WN(n)}}catch(n){}return new gk},rp=qN("localStorage"),vC=qN("sessionStorage"),ip=new ai.Yd("@firebase/database"),DS=function(){let i=1;return function(){return i++}}(),zN=function(i){const n=(0,j.dS)(i),r=new j.gQ;r.update(n);const s=r.digest();return j.US.encodeByteArray(s)},fv=function(...i){let n="";for(let r=0;r<i.length;r++){const s=i[r];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?n+=fv.apply(null,s):n+="object"==typeof s?(0,j.Pz)(s):s,n+=" "}return n};let sp=null,KN=!0;const SS=function(i,n){(0,j.hu)(!n||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(ip.logLevel=ai.in.VERBOSE,sp=ip.log.bind(ip),n&&vC.set("logging_enabled",!0)):"function"==typeof i?sp=i:(sp=null,vC.remove("logging_enabled"))},Si=function(...i){if(!0===KN&&(KN=!1,null===sp&&!0===vC.get("logging_enabled")&&SS(!0)),sp){const n=fv.apply(null,i);sp(n)}},Nm=function(i){return function(...n){Si(i,...n)}},Om=function(...i){const n="FIREBASE INTERNAL ERROR: "+fv(...i);ip.error(n)},ns=function(...i){const n=`FIREBASE FATAL ERROR: ${fv(...i)}`;throw ip.error(n),new Error(n)},qi=function(...i){const n="FIREBASE WARNING: "+fv(...i);ip.warn(n)},pv=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},pu="[MIN_NAME]",ya="[MAX_NAME]",nc=function(i,n){if(i===n)return 0;if(i===pu||n===ya)return-1;if(n===pu||i===ya)return 1;{const r=CC(i),s=CC(n);return null!==r?null!==s?r-s==0?i.length-n.length:r-s:-1:null!==s?1:i<n?-1:1}},mk=function(i,n){return i===n?0:i<n?-1:1},op=function(i,n){if(n&&i in n)return n[i];throw new Error("Missing required key ("+i+") in object: "+(0,j.Pz)(n))},ap=function(i){if("object"!=typeof i||null===i)return(0,j.Pz)(i);const n=[];for(const s in i)n.push(s);n.sort();let r="{";for(let s=0;s<n.length;s++)0!==s&&(r+=","),r+=(0,j.Pz)(n[s]),r+=":",r+=ap(i[n[s]]);return r+="}",r},wC=function(i,n){const r=i.length;if(r<=n)return[i];const s=[];for(let u=0;u<r;u+=n)s.push(i.substring(u,u+n>r?r:u+n));return s};function Ai(i,n){for(const r in i)i.hasOwnProperty(r)&&n(r,i[r])}const YN=function(i){(0,j.hu)(!pv(i),"Invalid JSON number");const s=1023;let u,c,f,m,C;0===i?(c=0,f=0,u=1/i==-1/0?1:0):(u=i<0,(i=Math.abs(i))>=Math.pow(2,1-s)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),s),c=m+s,f=Math.round(i*Math.pow(2,52-m)-Math.pow(2,52))):(c=0,f=Math.round(i/Math.pow(2,-1074))));const T=[];for(C=52;C;C-=1)T.push(f%2?1:0),f=Math.floor(f/2);for(C=11;C;C-=1)T.push(c%2?1:0),c=Math.floor(c/2);T.push(u?1:0),T.reverse();const x=T.join("");let O="";for(C=0;C<64;C+=8){let L=parseInt(x.substr(C,8),2).toString(16);1===L.length&&(L="0"+L),O+=L}return O.toLowerCase()},gv=new RegExp("^-?(0*)\\d{1,10}$"),AS=-2147483648,RS=2147483647,CC=function(i){if(gv.test(i)){const n=Number(i);if(n>=AS&&n<=RS)return n}return null},rc=function(i){try{i()}catch(n){setTimeout(()=>{throw qi("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},mv=function(i,n){const r=setTimeout(i,n);return"object"==typeof r&&r.unref&&r.unref(),r};class vk{constructor(n,r){this.appName_=n,this.appCheckProvider=r,this.appCheck=null==r?void 0:r.getImmediate({optional:!0}),this.appCheck||null==r||r.get().then(s=>this.appCheck=s)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((r,s)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(s=>s.addTokenListener(n))}notifyForInvalidToken(){qi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XN{constructor(n,r,s){this.appName_=n,this.firebaseOptions_=r,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(u=>this.auth_=u)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(r=>r&&"auth/token-not-initialized"===r.code?(Si("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,s)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(r=>r.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(r=>r.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qi(n)}}let _v=(()=>{class i{constructor(r){this.accessToken=r}getToken(r){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(r){r(this.accessToken)}removeTokenChangeListener(r){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const up=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yv="websocket",MS="long_polling";class rs{constructor(n,r,s,u,c=!1,f="",m=!1){this.secure=r,this.namespace=s,this.webSocketOnly=u,this.nodeAdmin=c,this.persistenceKey=f,this.includeNamespaceInQueryParams=m,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rp.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&rp.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function vv(i,n,r){let s;if((0,j.hu)("string"==typeof n,"typeof type must == string"),(0,j.hu)("object"==typeof r,"typeof params must == object"),n===yv)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(n!==MS)throw new Error("Unknown connection type: "+n);s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(r.ns=i.namespace);const u=[];return Ai(r,(c,f)=>{u.push(c+"="+f)}),s+u.join("&")}class iO{constructor(){this.counters_={}}incrementCounter(n,r=1){(0,j.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}get(){return(0,j.p$)(this.counters_)}}const IC={},Pm={};function Ev(i){const n=i.toString();return IC[n]||(IC[n]=new iO),IC[n]}class sO{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,r){for(this.pendingResponses[n]=r;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let u=0;u<s.length;++u)s[u]&&rc(()=>{this.onMessage_(s[u])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class km{constructor(n,r,s,u,c,f,m){this.connId=n,this.repoInfo=r,this.applicationId=s,this.appCheckToken=u,this.authToken=c,this.transportSessionId=f,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nm(n),this.stats_=Ev(r),this.urlFn=C=>(this.appCheckToken&&(C.ac=this.appCheckToken),vv(r,MS,C))}open(n,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new sO(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,j.Yr)()||"complete"===document.readyState)i();else{let n=!1;const r=function(){document.body?n||(n=!0,i()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new RC((...c)=>{const[f,m,C,T,x]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===f)this.id=m,this.password=C;else{if("close"!==f)throw new Error("Unrecognized command received: "+f);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[f,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(f,m)},()=>{this.onClosed_()},this.urlFn);const s={start:"t"};s.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(s.cb=this.scriptTagHolder.uniqueCallbackIdentifier),s.v="5",this.transportSessionId&&(s.s=this.transportSessionId),this.lastSessionId&&(s.ls=this.lastSessionId),this.applicationId&&(s.p=this.applicationId),this.appCheckToken&&(s.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&up.test(location.hostname)&&(s.r="f");const u=this.urlFn(s);this.log_("Connecting via long-poll to "+u),this.scriptTagHolder.addTag(u,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){km.forceAllow_=!0}static forceDisallow(){km.forceDisallow_=!0}static isAvailable(){return!((0,j.Yr)()||!km.forceAllow_&&(km.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const r=(0,j.Pz)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=(0,j.h$)(r),u=wC(s,1840);for(let c=0;c<u.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,u.length,u[c]),this.curSegmentNum++}addDisconnectPingFrame(n,r){if((0,j.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=n,s.pw=r,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const r=(0,j.Pz)(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class RC{constructor(n,r,s,u){if(this.onDisconnect=s,this.urlFn=u,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,j.Yr)())this.commandCB=n,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=DS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=RC.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(m){Si("frame writing exception"),m.stack&&Si(m.stack),Si(m)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||Si("No IE domain setting required")}catch(r){const s=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let r=this.urlFn(n),s="",u=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const f=this.pendingSegs.shift();s=s+"&seg"+u+"="+f.seg+"&ts"+u+"="+f.ts+"&d"+u+"="+f.d,u++}return r+=s,this.addLongPollTag_(r,this.currentSerial),!0}return!1}enqueueSegment(n,r,s){this.pendingSegs.push({seg:n,ts:r,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(n,r){this.outstandingRequests.add(r);const s=()=>{this.outstandingRequests.delete(r),this.newRequest_()},u=setTimeout(s,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(u),s()})}addTag(n,r){(0,j.Yr)()?this.doNodeLongPoll(n,r):setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=n,s.onload=s.onreadystatechange=function(){const u=s.readyState;(!u||"loaded"===u||"complete"===u)&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),r())},s.onerror=()=>{Si("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(s){}},Math.floor(1))}}let Fm=null;"undefined"!=typeof MozWebSocket?Fm=MozWebSocket:"undefined"!=typeof WebSocket&&(Fm=WebSocket);let lp=(()=>{class i{constructor(r,s,u,c,f,m,C){this.connId=r,this.applicationId=u,this.appCheckToken=c,this.authToken=f,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nm(this.connId),this.stats_=Ev(s),this.connURL=i.connectionURL_(s,m,C,c),this.nodeAdmin=s.nodeAdmin}static connectionURL_(r,s,u,c){const f={v:"5"};return!(0,j.Yr)()&&"undefined"!=typeof location&&location.hostname&&up.test(location.hostname)&&(f.r="f"),s&&(f.s=s),u&&(f.ls=u),c&&(f.ac=c),vv(r,yv,f)}open(r,s){this.onDisconnect=s,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rp.set("previous_websocket_failure",!0);try{if((0,j.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${yC}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const f=process.env,m=0===this.connURL.indexOf("wss://")?f.HTTPS_PROXY||f.https_proxy:f.HTTP_PROXY||f.http_proxy;m&&(c.proxy={origin:m}),this.mySock=new Fm(this.connURL,[],c)}else this.mySock=new Fm(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(u){this.log_("Error instantiating WebSocket.");const c=u.message||u.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=u=>{this.handleIncomingFrame(u)},this.mySock.onerror=u=>{this.log_("WebSocket error.  Closing connection.");const c=u.message||u.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const u=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);u&&u.length>1&&parseFloat(u[1])<4.4&&(r=!0)}return!r&&null!==Fm&&!i.forceDisallow_}static previouslyFailed(){return rp.isInMemoryStorage||!0===rp.get("previous_websocket_failure")}markConnectionHealthy(){rp.remove("previous_websocket_failure")}appendFrame_(r){if(this.frames.push(r),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const u=(0,j.cI)(s);this.onMessage(u)}}handleNewFrameCount_(r){this.totalFrames=r,this.frames=[]}extractFrameCount_(r){if((0,j.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){const s=Number(r);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),r}handleIncomingFrame(r){if(null===this.mySock)return;const s=r.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(s);else{const u=this.extractFrameCount_(s);null!==u&&this.appendFrame_(u)}}send(r){this.resetKeepAlive();const s=(0,j.Pz)(r);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const u=wC(s,16384);u.length>1&&this.sendString_(String(u.length));for(let c=0;c<u.length;c++)this.sendString_(u[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(r){try{this.mySock.send(r)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})();class xC{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[km,lp]}initTransports_(n){const r=lp&&lp.isAvailable();let s=r&&!lp.previouslyFailed();if(n.webSocketOnly&&(r||qi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[lp];else{const u=this.transports_=[];for(const c of xC.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class MC{constructor(n,r,s,u,c,f,m,C,T,x){this.id=n,this.repoInfo_=r,this.applicationId_=s,this.appCheckToken_=u,this.authToken_=c,this.onMessage_=f,this.onReady_=m,this.onDisconnect_=C,this.onKill_=T,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nm("c:"+this.id+":"),this.transportManager_=new xC(r),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,s)},Math.floor(0));const u=n.healthyTimeout||0;u>0&&(this.healthyTimeout_=mv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(u)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return r=>{n===this.conn_?this.onConnectionLost_(r):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return r=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(r):n===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const r=n.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const r=op("t",n),s=op("d",n);if("c"===r)this.onSecondaryControl_(s);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const r=op("t",n),s=op("d",n);"c"===r?this.onControl_(s):"d"===r&&this.onDataMessage_(s)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const r=op("t",n);if("d"in n){const s=n.d;if("h"===r)this.onHandshake_(s);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let u=0;u<this.pendingDataMessages.length;++u)this.onDataMessage_(this.pendingDataMessages[u]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(s):"r"===r?this.onReset_(s):"e"===r?Om("Server Error: "+s):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Om("Unknown control packet command: "+r)}}onHandshake_(n){const r=n.ts,s=n.v,u=n.h;this.sessionId=n.s,this.repoInfo_.host=u,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==s&&qi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,s),mv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,r){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class PC{put(n,r,s,u){}merge(n,r,s,u){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,r,s){}onDisconnectMerge(n,r,s){}onDisconnectCancel(n,r){}reportStats(n){}}class HS{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,j.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...r){if(Array.isArray(this.listeners_[n])){const s=[...this.listeners_[n]];for(let u=0;u<s.length;u++)s[u].callback.apply(s[u].context,r)}}on(n,r,s){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:s});const u=this.getInitialEvent(n);u&&r.apply(s,u)}off(n,r,s){this.validateEventType_(n);const u=this.listeners_[n]||[];for(let c=0;c<u.length;c++)if(u[c].callback===r&&(!s||s===u[c].context))return void u.splice(c,1)}validateEventType_(n){(0,j.hu)(this.allowedEvents_.find(r=>r===n),"Unknown event: "+n)}}class bv extends HS{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,j.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bv}getInitialEvent(n){return(0,j.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class _n{constructor(n,r){if(void 0===r){this.pieces_=n.split("/");let s=0;for(let u=0;u<this.pieces_.length;u++)this.pieces_[u].length>0&&(this.pieces_[s]=this.pieces_[u],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=r}toString(){let n="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(n+="/"+this.pieces_[r]);return n||"/"}}function yn(){return new _n("")}function qt(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function ic(i){return i.pieces_.length-i.pieceNum_}function Dn(i){let n=i.pieceNum_;return n<i.pieces_.length&&n++,new _n(i.pieces_,n)}function jr(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function cp(i,n=0){return i.pieces_.slice(i.pieceNum_+n)}function kC(i){if(i.pieceNum_>=i.pieces_.length)return null;const n=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)n.push(i.pieces_[r]);return new _n(n,0)}function ir(i,n){const r=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)r.push(i.pieces_[s]);if(n instanceof _n)for(let s=n.pieceNum_;s<n.pieces_.length;s++)r.push(n.pieces_[s]);else{const s=n.split("/");for(let u=0;u<s.length;u++)s[u].length>0&&r.push(s[u])}return new _n(r,0)}function kt(i){return i.pieceNum_>=i.pieces_.length}function is(i,n){const r=qt(i),s=qt(n);if(null===r)return n;if(r===s)return is(Dn(i),Dn(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+i+")")}function yO(i,n){const r=cp(i,0),s=cp(n,0);for(let u=0;u<r.length&&u<s.length;u++){const c=nc(r[u],s[u]);if(0!==c)return c}return r.length===s.length?0:r.length<s.length?-1:1}function Iv(i,n){if(ic(i)!==ic(n))return!1;for(let r=i.pieceNum_,s=n.pieceNum_;r<=i.pieces_.length;r++,s++)if(i.pieces_[r]!==n.pieces_[s])return!1;return!0}function fi(i,n){let r=i.pieceNum_,s=n.pieceNum_;if(ic(i)>ic(n))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==n.pieces_[s])return!1;++r,++s}return!0}class qS{constructor(n,r){this.errorPrefix_=r,this.parts_=cp(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=(0,j.ug)(this.parts_[s]);zS(this)}}function zS(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gu(i))}function gu(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class VC extends HS{constructor(){let n,r;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(r="visibilitychange",n="hidden"):void 0!==document.mozHidden?(r="mozvisibilitychange",n="mozHidden"):void 0!==document.msHidden?(r="msvisibilitychange",n="msHidden"):void 0!==document.webkitHidden&&(r="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const s=!document[n];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new VC}getInitialEvent(n){return(0,j.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const Qd=1e3;let BC,Jd=(()=>{class i extends PC{constructor(r,s,u,c,f,m,C,T){if(super(),this.repoInfo_=r,this.applicationId_=s,this.onDataUpdate_=u,this.onConnectStatus_=c,this.onServerInfoUpdate_=f,this.authTokenProvider_=m,this.appCheckTokenProvider_=C,this.authOverride_=T,this.id=i.nextPersistentConnectionId_++,this.log_=Nm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,T&&!(0,j.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VC.getInstance().on("visible",this.onVisible_,this),-1===r.host.indexOf("fblocal")&&bv.getInstance().on("online",this.onOnline_,this)}sendRequest(r,s,u){const c=++this.requestNumber_,f={r:c,a:r,b:s};this.log_((0,j.Pz)(f)),(0,j.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(f),u&&(this.requestCBHash_[c]=u)}get(r){this.initConnection_();const s=new j.BH,u={p:r._path.toString(),q:r._queryObject},c={action:"g",request:u,onComplete:m=>{const C=m.d;"ok"===m.s?(this.onDataUpdate_(u.p,C,!1,null),s.resolve(C)):s.reject(C)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const f=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[f];void 0===m||c!==m||(delete this.outstandingGets_[f],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+f+" timed out on connection"),s.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(f),s.promise}listen(r,s,u,c){this.initConnection_();const f=r._queryIdentifier,m=r._path.toString();this.log_("Listen called for "+m+" "+f),this.listens.has(m)||this.listens.set(m,new Map),(0,j.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,j.hu)(!this.listens.get(m).has(f),"listen() called twice for same path/queryId.");const C={onComplete:c,hashFn:s,query:r,tag:u};this.listens.get(m).set(f,C),this.connected_&&this.sendListen_(C)}sendGet_(r){const s=this.outstandingGets_[r];this.sendRequest("g",s.request,u=>{delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(u)})}sendListen_(r){const s=r.query,u=s._path.toString(),c=s._queryIdentifier;this.log_("Listen on "+u+" for "+c);const f={p:u};r.tag&&(f.q=s._queryObject,f.t=r.tag),f.h=r.hashFn(),this.sendRequest("q",f,C=>{const T=C.d,x=C.s;i.warnOnListenWarnings_(T,s),(this.listens.get(u)&&this.listens.get(u).get(c))===r&&(this.log_("listen response",C),"ok"!==x&&this.removeListen_(u,c),r.onComplete&&r.onComplete(x,T))})}static warnOnListenWarnings_(r,s){if(r&&"object"==typeof r&&(0,j.r3)(r,"w")){const u=(0,j.DV)(r,"w");if(Array.isArray(u)&&~u.indexOf("no_index")){const c='".indexOn": "'+s._queryParams.getIndex().toString()+'"',f=s._path.toString();qi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${f} to your security rules for better performance.`)}}}refreshAuthToken(r){this.authToken_=r,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(r)}reduceReconnectDelayIfAdminCredential_(r){(r&&40===r.length||(0,j.GJ)(r))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(r){this.appCheckToken_=r,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const r=this.authToken_,s=(0,j.w9)(r)?"auth":"gauth",u={cred:r};null===this.authOverride_?u.noauth=!0:"object"==typeof this.authOverride_&&(u.authvar=this.authOverride_),this.sendRequest(s,u,c=>{const f=c.s,m=c.d||"error";this.authToken_===r&&("ok"===f?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(f,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},r=>{const s=r.s,u=r.d||"error";"ok"===s?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,u)})}unlisten(r,s){const u=r._path.toString(),c=r._queryIdentifier;this.log_("Unlisten called for "+u+" "+c),(0,j.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(u,c)&&this.connected_&&this.sendUnlisten_(u,c,r._queryObject,s)}sendUnlisten_(r,s,u,c){this.log_("Unlisten on "+r+" for "+s);const f={p:r};c&&(f.q=u,f.t=c),this.sendRequest("n",f)}onDisconnectPut(r,s,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",r,s,u):this.onDisconnectRequestQueue_.push({pathString:r,action:"o",data:s,onComplete:u})}onDisconnectMerge(r,s,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",r,s,u):this.onDisconnectRequestQueue_.push({pathString:r,action:"om",data:s,onComplete:u})}onDisconnectCancel(r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",r,null,s):this.onDisconnectRequestQueue_.push({pathString:r,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(r,s,u,c){const f={p:s,d:u};this.log_("onDisconnect "+r,f),this.sendRequest(r,f,m=>{c&&setTimeout(()=>{c(m.s,m.d)},Math.floor(0))})}put(r,s,u,c){this.putInternal("p",r,s,u,c)}merge(r,s,u,c){this.putInternal("m",r,s,u,c)}putInternal(r,s,u,c,f){this.initConnection_();const m={p:s,d:u};void 0!==f&&(m.h=f),this.outstandingPuts_.push({action:r,request:m,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+s)}sendPut_(r){const s=this.outstandingPuts_[r].action,u=this.outstandingPuts_[r].request,c=this.outstandingPuts_[r].onComplete;this.outstandingPuts_[r].queued=this.connected_,this.sendRequest(s,u,f=>{this.log_(s+" response",f),delete this.outstandingPuts_[r],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(f.s,f.d)})}reportStats(r){if(this.connected_){const s={c:r};this.log_("reportStats",s),this.sendRequest("s",s,u=>{"ok"!==u.s&&this.log_("reportStats","Error sending stats: "+u.d)})}}onDataMessage_(r){if("r"in r){this.log_("from server: "+(0,j.Pz)(r));const s=r.r,u=this.requestCBHash_[s];u&&(delete this.requestCBHash_[s],u(r.b))}else{if("error"in r)throw"A server-side error has occurred: "+r.error;"a"in r&&this.onDataPush_(r.a,r.b)}}onDataPush_(r,s){this.log_("handleServerMessage",r,s),"d"===r?this.onDataUpdate_(s.p,s.d,!1,s.t):"m"===r?this.onDataUpdate_(s.p,s.d,!0,s.t):"c"===r?this.onListenRevoked_(s.p,s.q):"ac"===r?this.onAuthRevoked_(s.s,s.d):"apc"===r?this.onAppCheckRevoked_(s.s,s.d):"sd"===r?this.onSecurityDebugPacket_(s):Om("Unrecognized action received from server: "+(0,j.Pz)(r)+"\nAre you using the latest client?")}onReady_(r,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(r),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(r){(0,j.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(r))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(r){r&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qd,this.realtime_||this.scheduleConnect_(0)),this.visible_=r}onOnline_(r){r?(this.log_("Browser went online."),this.reconnectDelay_=Qd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const r=(new Date).getTime()-this.lastConnectionAttemptTime_;let s=Math.max(0,this.reconnectDelay_-r);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var r=this;return(0,Re.Z)(function*(){if(r.shouldReconnect_()){r.log_("Making a connection attempt"),r.lastConnectionAttemptTime_=(new Date).getTime(),r.lastConnectionEstablishedTime_=null;const s=r.onDataMessage_.bind(r),u=r.onReady_.bind(r),c=r.onRealtimeDisconnect_.bind(r),f=r.id+":"+i.nextConnectionId_++,m=r.lastSessionId;let C=!1,T=null;const x=function(){T?T.close():(C=!0,c())};r.realtime_={close:x,sendRequest:function(W){(0,j.hu)(T,"sendRequest call when we're not connected not allowed."),T.sendRequest(W)}};const L=r.forceTokenRefresh_;r.forceTokenRefresh_=!1;try{const[W,re]=yield Promise.all([r.authTokenProvider_.getToken(L),r.appCheckTokenProvider_.getToken(L)]);C?Si("getToken() completed but was canceled"):(Si("getToken() completed. Creating connection."),r.authToken_=W&&W.accessToken,r.appCheckToken_=re&&re.token,T=new MC(f,r.repoInfo_,r.applicationId_,r.appCheckToken_,r.authToken_,s,u,c,Me=>{qi(Me+" ("+r.repoInfo_.toString()+")"),r.interrupt("server_kill")},m))}catch(W){r.log_("Failed to get token: "+W),C||(r.repoInfo_.nodeAdmin&&qi(W),x())}}})()}interrupt(r){Si("Interrupting connection for reason: "+r),this.interruptReasons_[r]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(r){Si("Resuming connection for reason: "+r),delete this.interruptReasons_[r],(0,j.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Qd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(r){const s=r-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let r=0;r<this.outstandingPuts_.length;r++){const s=this.outstandingPuts_[r];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[r],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(r,s){let u;u=s?s.map(f=>ap(f)).join("$"):"default";const c=this.removeListen_(r,u);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(r,s){const u=new _n(r).toString();let c;if(this.listens.has(u)){const f=this.listens.get(u);c=f.get(s),f.delete(s),0===f.size&&this.listens.delete(u)}else c=void 0;return c}onAuthRevoked_(r,s){Si("Auth token revoked: "+r+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===r||"permission_denied"===r)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(r,s){Si("App check token revoked: "+r+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===r||"permission_denied"===r)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(r){this.securityDebugCallback_?this.securityDebugCallback_(r):"msg"in r&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const r of this.listens.values())for(const s of r.values())this.sendListen_(s);for(let r=0;r<this.outstandingPuts_.length;r++)this.outstandingPuts_[r]&&this.sendPut_(r);for(;this.onDisconnectRequestQueue_.length;){const r=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(r.action,r.pathString,r.data,r.onComplete)}for(let r=0;r<this.outstandingGets_.length;r++)this.outstandingGets_[r]&&this.sendGet_(r)}sendConnectStats_(){const r={};let s="js";(0,j.Yr)()&&(s=this.repoInfo_.nodeAdmin?"admin_node":"node"),r["sdk."+s+"."+yC.replace(/\./g,"-")]=1,(0,j.uI)()?r["framework.cordova"]=1:(0,j.b$)()&&(r["framework.reactnative"]=1),this.reportStats(r)}shouldReconnect_(){const r=bv.getInstance().currentlyOnline();return(0,j.xb)(this.interruptReasons_)&&r}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Zt{constructor(n,r){this.name=n,this.node=r}static Wrap(n,r){return new Zt(n,r)}}class UC{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,r){const s=new Zt(pu,n),u=new Zt(pu,r);return 0!==this.compare(s,u)}minPost(){return Zt.MIN}}class ZS extends UC{static get __EMPTY_NODE(){return BC}static set __EMPTY_NODE(n){BC=n}compare(n,r){return nc(n.name,r.name)}isDefinedOn(n){throw(0,j.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,r){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(ya,BC)}makePost(n,r){return(0,j.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new Zt(n,BC)}toString(){return".key"}}const mu=new ZS;class Tv{constructor(n,r,s,u,c=null){this.isReverse_=u,this.resultGenerator_=c,this.nodeStack_=[];let f=1;for(;!n.isEmpty();)if(n=n,f=r?s(n.key,r):1,u&&(f*=-1),f<0)n=this.isReverse_?n.left:n.right;else{if(0===f){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let r,n=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let $C,Ea=(()=>{class i{constructor(r,s,u,c,f){this.key=r,this.value=s,this.color=null!=u?u:i.RED,this.left=null!=c?c:Qs.EMPTY_NODE,this.right=null!=f?f:Qs.EMPTY_NODE}copy(r,s,u,c,f){return new i(null!=r?r:this.key,null!=s?s:this.value,null!=u?u:this.color,null!=c?c:this.left,null!=f?f:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,s,u){let c=this;const f=u(r,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(r,s,u),null):0===f?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(r,s,u)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qs.EMPTY_NODE;let r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.removeMin_(),null),r.fixUp_()}remove(r,s){let u,c;if(u=this,s(r,u.key)<0)!u.left.isEmpty()&&!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.remove(r,s),null);else{if(u.left.isRed_()&&(u=u.rotateRight_()),!u.right.isEmpty()&&!u.right.isRed_()&&!u.right.left.isRed_()&&(u=u.moveRedRight_()),0===s(r,u.key)){if(u.right.isEmpty())return Qs.EMPTY_NODE;c=u.right.min_(),u=u.copy(c.key,c.value,null,null,u.right.removeMin_())}u=u.copy(null,null,null,null,u.right.remove(r,s))}return u.fixUp_()}isRed_(){return this.color}fixUp_(){let r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}moveRedLeft_(){let r=this.colorFlip_();return r.right.left.isRed_()&&(r=r.copy(null,null,null,null,r.right.rotateRight_()),r=r.rotateLeft_(),r=r.colorFlip_()),r}moveRedRight_(){let r=this.colorFlip_();return r.left.left.isRed_()&&(r=r.rotateRight_(),r=r.colorFlip_()),r}rotateLeft_(){const r=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight_(){const r=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip_(){const r=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,s)}checkMaxDepth_(){const r=this.check_();return Math.pow(2,r)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Qs{constructor(n,r=Qs.EMPTY_NODE){this.comparator_=n,this.root_=r}insert(n,r){return new Qs(this.comparator_,this.root_.insert(n,r,this.comparator_).copy(null,null,Ea.BLACK,null,null))}remove(n){return new Qs(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Ea.BLACK,null,null))}get(n){let r,s=this.root_;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}getPredecessorKey(n){let r,s=this.root_,u=null;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r){if(s.left.isEmpty())return u?u.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}r<0?s=s.left:r>0&&(u=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Tv(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,r){return new Tv(this.root_,n,this.comparator_,!1,r)}getReverseIteratorFrom(n,r){return new Tv(this.root_,n,this.comparator_,!0,r)}getReverseIterator(n){return new Tv(this.root_,null,this.comparator_,!0,n)}}function bO(i,n){return nc(i.name,n.name)}function jC(i,n){return nc(i,n)}Qs.EMPTY_NODE=new class{copy(n,r,s,u,c){return this}insert(n,r,s){return new Ea(n,r,null)}remove(n,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const IO=function(i){return"number"==typeof i?"number:"+YN(i):"string:"+i},YS=function(i){if(i.isLeafNode()){const n=i.val();(0,j.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,j.r3)(n,".sv"),"Priority must be a string or number.")}else(0,j.hu)(i===$C||i.isEmpty(),"priority of unexpected type.");(0,j.hu)(i===$C||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let QS,JS,XS,dp=(()=>{class i{constructor(r,s=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=r,this.priorityNode_=s,this.lazyHash_=null,(0,j.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),YS(this.priorityNode_)}static set __childrenNodeConstructor(r){QS=r}static get __childrenNodeConstructor(){return QS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(r){return new i(this.value_,r)}getImmediateChild(r){return".priority"===r?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(r){return kt(r)?this:".priority"===qt(r)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(r,s){return null}updateImmediateChild(r,s){return".priority"===r?this.updatePriority(s):s.isEmpty()&&".priority"!==r?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,s).updatePriority(this.priorityNode_)}updateChild(r,s){const u=qt(r);return null===u?s:s.isEmpty()&&".priority"!==u?this:((0,j.hu)(".priority"!==u||1===ic(r),".priority must be the last token in a path"),this.updateImmediateChild(u,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dn(r),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(r,s){return!1}val(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let r="";this.priorityNode_.isEmpty()||(r+="priority:"+IO(this.priorityNode_.val())+":");const s=typeof this.value_;r+=s+":",r+="number"===s?YN(this.value_):this.value_,this.lazyHash_=zN(r)}return this.lazyHash_}getValue(){return this.value_}compareTo(r){return r===i.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof i.__childrenNodeConstructor?-1:((0,j.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}compareToLeafNode_(r){const s=typeof r.value_,u=typeof this.value_,c=i.VALUE_TYPE_ORDER.indexOf(s),f=i.VALUE_TYPE_ORDER.indexOf(u);return(0,j.hu)(c>=0,"Unknown leaf type: "+s),(0,j.hu)(f>=0,"Unknown leaf type: "+u),c===f?"object"===u?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:f-c}withIndex(){return this}isIndexed(){return!0}equals(r){if(r===this)return!0;if(r.isLeafNode()){const s=r;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Fn=new class extends UC{compare(n,r){const s=n.node.getPriority(),u=r.node.getPriority(),c=s.compareTo(u);return 0===c?nc(n.name,r.name):c}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,r){return!n.getPriority().equals(r.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(ya,new dp("[PRIORITY-POST]",XS))}makePost(n,r){const s=JS(n);return new Zt(r,new dp("[PRIORITY-POST]",s))}toString(){return".priority"}},SO=Math.log(2);class Dk{constructor(n){this.count=parseInt(Math.log(n+1)/SO,10),this.current_=this.count-1;const u=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&u}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Dv=function(i,n,r,s){i.sort(n);const u=function(C,T){const x=T-C;let O,L;if(0===x)return null;if(1===x)return O=i[C],L=r?r(O):O,new Ea(L,O.node,Ea.BLACK,null,null);{const W=parseInt(x/2,10)+C,re=u(C,W),Me=u(W+1,T);return O=i[W],L=r?r(O):O,new Ea(L,O.node,Ea.BLACK,re,Me)}},m=function(C){let T=null,x=null,O=i.length;const L=function(re,Me){const qe=O-re,ht=O;O-=re;const Ot=u(qe+1,ht),vn=i[qe],nn=r?r(vn):vn;W(new Ea(nn,vn.node,Me,null,Ot))},W=function(re){T?(T.left=re,T=re):(x=re,T=re)};for(let re=0;re<C.count;++re){const Me=C.nextBitIsOne(),qe=Math.pow(2,C.count-(re+1));Me?L(qe,Ea.BLACK):(L(qe,Ea.BLACK),L(qe,Ea.RED))}return x}(new Dk(i.length));return new Qs(s||n,m)};let HC;const hp={};class Js{constructor(n,r){this.indexes_=n,this.indexSet_=r}static get Default(){return(0,j.hu)(hp&&Fn,"ChildrenNode.ts has not been loaded"),HC=HC||new Js({".priority":hp},{".priority":Fn}),HC}get(n){const r=(0,j.DV)(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof Qs?r:null}hasIndex(n){return(0,j.r3)(this.indexSet_,n.toString())}addIndex(n,r){(0,j.hu)(n!==mu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let u=!1;const c=r.getIterator(Zt.Wrap);let m,f=c.getNext();for(;f;)u=u||n.isDefinedOn(f.node),s.push(f),f=c.getNext();m=u?Dv(s,n.getCompare()):hp;const C=n.toString(),T=Object.assign({},this.indexSet_);T[C]=n;const x=Object.assign({},this.indexes_);return x[C]=m,new Js(x,T)}addToIndexes(n,r){const s=(0,j.UI)(this.indexes_,(u,c)=>{const f=(0,j.DV)(this.indexSet_,c);if((0,j.hu)(f,"Missing index implementation for "+c),u===hp){if(f.isDefinedOn(n.node)){const m=[],C=r.getIterator(Zt.Wrap);let T=C.getNext();for(;T;)T.name!==n.name&&m.push(T),T=C.getNext();return m.push(n),Dv(m,f.getCompare())}return hp}{const m=r.get(n.name);let C=u;return m&&(C=C.remove(new Zt(n.name,m))),C.insert(n,n.node)}});return new Js(s,this.indexSet_)}removeFromIndexes(n,r){const s=(0,j.UI)(this.indexes_,u=>{if(u===hp)return u;{const c=r.get(n.name);return c?u.remove(new Zt(n.name,c)):u}});return new Js(s,this.indexSet_)}}let fp,Ft=(()=>{class i{constructor(r,s,u){this.children_=r,this.priorityNode_=s,this.indexMap_=u,this.lazyHash_=null,this.priorityNode_&&YS(this.priorityNode_),this.children_.isEmpty()&&(0,j.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fp||(fp=new i(new Qs(jC),null,Js.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fp}updatePriority(r){return this.children_.isEmpty()?this:new i(this.children_,r,this.indexMap_)}getImmediateChild(r){if(".priority"===r)return this.getPriority();{const s=this.children_.get(r);return null===s?fp:s}}getChild(r){const s=qt(r);return null===s?this:this.getImmediateChild(s).getChild(Dn(r))}hasChild(r){return null!==this.children_.get(r)}updateImmediateChild(r,s){if((0,j.hu)(s,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(s);{const u=new Zt(r,s);let c,f;s.isEmpty()?(c=this.children_.remove(r),f=this.indexMap_.removeFromIndexes(u,this.children_)):(c=this.children_.insert(r,s),f=this.indexMap_.addToIndexes(u,this.children_));const m=c.isEmpty()?fp:this.priorityNode_;return new i(c,m,f)}}updateChild(r,s){const u=qt(r);if(null===u)return s;{(0,j.hu)(".priority"!==qt(r)||1===ic(r),".priority must be the last token in a path");const c=this.getImmediateChild(u).updateChild(Dn(r),s);return this.updateImmediateChild(u,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(r){if(this.isEmpty())return null;const s={};let u=0,c=0,f=!0;if(this.forEachChild(Fn,(m,C)=>{s[m]=C.val(r),u++,f&&i.INTEGER_REGEXP_.test(m)?c=Math.max(c,Number(m)):f=!1}),!r&&f&&c<2*u){const m=[];for(const C in s)m[C]=s[C];return m}return r&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(null===this.lazyHash_){let r="";this.getPriority().isEmpty()||(r+="priority:"+IO(this.getPriority().val())+":"),this.forEachChild(Fn,(s,u)=>{const c=u.hash();""!==c&&(r+=":"+s+":"+c)}),this.lazyHash_=""===r?"":zN(r)}return this.lazyHash_}getPredecessorChildName(r,s,u){const c=this.resolveIndex_(u);if(c){const f=c.getPredecessorKey(new Zt(r,s));return f?f.name:null}return this.children_.getPredecessorKey(r)}getFirstChildName(r){const s=this.resolveIndex_(r);if(s){const u=s.minKey();return u&&u.name}return this.children_.minKey()}getFirstChild(r){const s=this.getFirstChildName(r);return s?new Zt(s,this.children_.get(s)):null}getLastChildName(r){const s=this.resolveIndex_(r);if(s){const u=s.maxKey();return u&&u.name}return this.children_.maxKey()}getLastChild(r){const s=this.getLastChildName(r);return s?new Zt(s,this.children_.get(s)):null}forEachChild(r,s){const u=this.resolveIndex_(r);return u?u.inorderTraversal(c=>s(c.name,c.node)):this.children_.inorderTraversal(s)}getIterator(r){return this.getIteratorFrom(r.minPost(),r)}getIteratorFrom(r,s){const u=this.resolveIndex_(s);if(u)return u.getIteratorFrom(r,c=>c);{const c=this.children_.getIteratorFrom(r.name,Zt.Wrap);let f=c.peek();for(;null!=f&&s.compare(f,r)<0;)c.getNext(),f=c.peek();return c}}getReverseIterator(r){return this.getReverseIteratorFrom(r.maxPost(),r)}getReverseIteratorFrom(r,s){const u=this.resolveIndex_(s);if(u)return u.getReverseIteratorFrom(r,c=>c);{const c=this.children_.getReverseIteratorFrom(r.name,Zt.Wrap);let f=c.peek();for(;null!=f&&s.compare(f,r)>0;)c.getNext(),f=c.peek();return c}}compareTo(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===Sv?-1:0}withIndex(r){if(r===mu||this.indexMap_.hasIndex(r))return this;{const s=this.indexMap_.addIndex(r,this.children_);return new i(this.children_,this.priorityNode_,s)}}isIndexed(r){return r===mu||this.indexMap_.hasIndex(r)}equals(r){if(r===this)return!0;if(r.isLeafNode())return!1;{const s=r;if(this.getPriority().equals(s.getPriority())){if(this.children_.count()===s.children_.count()){const u=this.getIterator(Fn),c=s.getIterator(Fn);let f=u.getNext(),m=c.getNext();for(;f&&m;){if(f.name!==m.name||!f.node.equals(m.node))return!1;f=u.getNext(),m=c.getNext()}return null===f&&null===m}return!1}return!1}}resolveIndex_(r){return r===mu?null:this.indexMap_.get(r.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const Sv=new class extends Ft{constructor(){super(new Qs(jC),Ft.EMPTY_NODE,Js.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Ft.EMPTY_NODE}isEmpty(){return!1}};function Ir(i,n=null){if(null===i)return Ft.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(n=i[".priority"]),(0,j.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new dp(i,Ir(n));if(i instanceof Array){let r=Ft.EMPTY_NODE;return Ai(i,(s,u)=>{if((0,j.r3)(i,s)&&"."!==s.substring(0,1)){const c=Ir(u);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(s,c))}}),r.updatePriority(Ir(n))}{const r=[];let s=!1;if(Ai(i,(f,m)=>{if("."!==f.substring(0,1)){const C=Ir(m);C.isEmpty()||(s=s||!C.getPriority().isEmpty(),r.push(new Zt(f,C)))}}),0===r.length)return Ft.EMPTY_NODE;const c=Dv(r,bO,f=>f.name,jC);if(s){const f=Dv(r,Fn.getCompare());return new Ft(c,Ir(n),new Js({".priority":f},{".priority":Fn}))}return new Ft(c,Ir(n),Js.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(pu,Ft.EMPTY_NODE)},MAX:{value:new Zt(ya,Sv)}}),ZS.__EMPTY_NODE=Ft.EMPTY_NODE,dp.__childrenNodeConstructor=Ft,function(i){$C=i}(Sv),function(i){XS=i}(Sv),function(i){JS=i}(Ir);class Um extends UC{constructor(n){super(),this.indexPath_=n,(0,j.hu)(!kt(n)&&".priority"!==qt(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,r){const s=this.extractChild(n.node),u=this.extractChild(r.node),c=s.compareTo(u);return 0===c?nc(n.name,r.name):c}makePost(n,r){const s=Ir(n),u=Ft.EMPTY_NODE.updateChild(this.indexPath_,s);return new Zt(r,u)}maxPost(){const n=Ft.EMPTY_NODE.updateChild(this.indexPath_,Sv);return new Zt(ya,n)}toString(){return cp(this.indexPath_,0).join("/")}}const GC=new class extends UC{compare(n,r){const s=n.node.compareTo(r.node);return 0===s?nc(n.name,r.name):s}isDefinedOn(n){return!0}indexedValueChanged(n,r){return!n.equals(r)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(n,r){const s=Ir(n);return new Zt(r,s)}toString(){return".value"}},pp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xO=function(){let i=0;const n=[];return function(r){const s=r===i;let u;i=r;const c=new Array(8);for(u=7;u>=0;u--)c[u]=pp.charAt(r%64),r=Math.floor(r/64);(0,j.hu)(0===r,"Cannot push at time == 0");let f=c.join("");if(s){for(u=11;u>=0&&63===n[u];u--)n[u]=0;n[u]++}else for(u=0;u<12;u++)n[u]=Math.floor(64*Math.random());for(u=0;u<12;u++)f+=pp.charAt(n[u]);return(0,j.hu)(20===f.length,"nextPushId: Length should be 20."),f}}(),No=function(i){if(i===""+RS)return"-";const n=CC(i);if(null!=n)return""+(n+1);const r=new Array(i.length);for(let f=0;f<r.length;f++)r[f]=i.charAt(f);if(r.length<786)return r.push("-"),r.join("");let s=r.length-1;for(;s>=0&&"z"===r[s];)s--;if(-1===s)return ya;const c=pp.charAt(pp.indexOf(r[s])+1);return r[s]=c,r.slice(0,s+1).join("")},NO=function(i){if(i===""+AS)return pu;const n=CC(i);if(null!=n)return""+(n-1);const r=new Array(i.length);for(let s=0;s<r.length;s++)r[s]=i.charAt(s);return"-"===r[r.length-1]?1===r.length?""+RS:(delete r[r.length-1],r.join("")):(r[r.length-1]=pp.charAt(pp.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function WC(i){return{type:"value",snapshotNode:i}}function gp(i,n){return{type:"child_added",snapshotNode:n,childName:i}}function mp(i,n){return{type:"child_removed",snapshotNode:n,childName:i}}function _p(i,n,r){return{type:"child_changed",snapshotNode:n,childName:i,oldSnap:r}}class Bm{constructor(n){this.index_=n}updateChild(n,r,s,u,c,f){(0,j.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=n.getImmediateChild(r);return m.getChild(u).equals(s.getChild(u))&&m.isEmpty()===s.isEmpty()||(null!=f&&(s.isEmpty()?n.hasChild(r)?f.trackChildChange(mp(r,m)):(0,j.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?f.trackChildChange(gp(r,s)):f.trackChildChange(_p(r,s,m))),n.isLeafNode()&&s.isEmpty())?n:n.updateImmediateChild(r,s).withIndex(this.index_)}updateFullNode(n,r,s){return null!=s&&(n.isLeafNode()||n.forEachChild(Fn,(u,c)=>{r.hasChild(u)||s.trackChildChange(mp(u,c))}),r.isLeafNode()||r.forEachChild(Fn,(u,c)=>{if(n.hasChild(u)){const f=n.getImmediateChild(u);f.equals(c)||s.trackChildChange(_p(u,c,f))}else s.trackChildChange(gp(u,c))})),r.withIndex(this.index_)}updatePriority(n,r){return n.isEmpty()?Ft.EMPTY_NODE:n.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Xd{constructor(n){this.indexedFilter_=new Bm(n.getIndex()),this.index_=n.getIndex(),this.startPost_=Xd.getStartPost_(n),this.endPost_=Xd.getEndPost_(n)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){return this.index_.compare(this.getStartPost(),n)<=0&&this.index_.compare(n,this.getEndPost())<=0}updateChild(n,r,s,u,c,f){return this.matches(new Zt(r,s))||(s=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,s,u,c,f)}updateFullNode(n,r,s){r.isLeafNode()&&(r=Ft.EMPTY_NODE);let u=r.withIndex(this.index_);u=u.updatePriority(Ft.EMPTY_NODE);const c=this;return r.forEachChild(Fn,(f,m)=>{c.matches(new Zt(f,m))||(u=u.updateImmediateChild(f,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,u,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}return n.getIndex().maxPost()}}class qC{constructor(n){this.rangedFilter_=new Xd(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft()}updateChild(n,r,s,u,c,f){return this.rangedFilter_.matches(new Zt(r,s))||(s=Ft.EMPTY_NODE),n.getImmediateChild(r).equals(s)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,s,u,c,f):this.fullLimitUpdateChild_(n,r,s,c,f)}updateFullNode(n,r,s){let u;if(r.isLeafNode()||r.isEmpty())u=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){let c;u=Ft.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;c.hasNext()&&f<this.limit_;){const m=c.getNext();let C;if(C=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!C)break;u=u.updateImmediateChild(m.name,m.node),f++}}else{let c,f,m,C;if(u=r.withIndex(this.index_),u=u.updatePriority(Ft.EMPTY_NODE),this.reverse_){C=u.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),f=this.rangedFilter_.getStartPost();const O=this.index_.getCompare();m=(L,W)=>O(W,L)}else C=u.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),f=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let T=0,x=!1;for(;C.hasNext();){const O=C.getNext();!x&&m(c,O)<=0&&(x=!0),x&&T<this.limit_&&m(O,f)<=0?T++:u=u.updateImmediateChild(O.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,u,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,r,s,u,c){let f;if(this.reverse_){const O=this.index_.getCompare();f=(L,W)=>O(W,L)}else f=this.index_.getCompare();const m=n;(0,j.hu)(m.numChildren()===this.limit_,"");const C=new Zt(r,s),T=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),x=this.rangedFilter_.matches(C);if(m.hasChild(r)){const O=m.getImmediateChild(r);let L=u.getChildAfterChild(this.index_,T,this.reverse_);for(;null!=L&&(L.name===r||m.hasChild(L.name));)L=u.getChildAfterChild(this.index_,L,this.reverse_);const W=null==L?1:f(L,C);if(x&&!s.isEmpty()&&W>=0)return null!=c&&c.trackChildChange(_p(r,s,O)),m.updateImmediateChild(r,s);{null!=c&&c.trackChildChange(mp(r,O));const Me=m.updateImmediateChild(r,Ft.EMPTY_NODE);return null!=L&&this.rangedFilter_.matches(L)?(null!=c&&c.trackChildChange(gp(L.name,L.node)),Me.updateImmediateChild(L.name,L.node)):Me}}return s.isEmpty()?n:x&&f(T,C)>=0?(null!=c&&(c.trackChildChange(mp(T.name,T.node)),c.trackChildChange(gp(r,s))),m.updateImmediateChild(r,s).updateImmediateChild(T.name,Ft.EMPTY_NODE)):n}}class eh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,j.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,j.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ya}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,j.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fn}copy(){const n=new eh;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function zC(i,n,r){const s=i.copy();return s.startSet_=!0,void 0===n&&(n=null),s.indexStartValue_=n,null!=r?(s.startNameSet_=!0,s.indexStartName_=r):(s.startNameSet_=!1,s.indexStartName_=""),s}function Rv(i,n,r){const s=i.copy();return s.endSet_=!0,void 0===n&&(n=null),s.indexEndValue_=n,void 0!==r?(s.endNameSet_=!0,s.indexEndName_=r):(s.endNameSet_=!1,s.indexEndName_=""),s}function xv(i,n){const r=i.copy();return r.index_=n,r}function oA(i){const n={};if(i.isDefault())return n;let r;return i.index_===Fn?r="$priority":i.index_===GC?r="$value":i.index_===mu?r="$key":((0,j.hu)(i.index_ instanceof Um,"Unrecognized index type!"),r=i.index_.toString()),n.orderBy=(0,j.Pz)(r),i.startSet_&&(n.startAt=(0,j.Pz)(i.indexStartValue_),i.startNameSet_&&(n.startAt+=","+(0,j.Pz)(i.indexStartName_))),i.endSet_&&(n.endAt=(0,j.Pz)(i.indexEndValue_),i.endNameSet_&&(n.endAt+=","+(0,j.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?n.limitToFirst=i.limit_:n.limitToLast=i.limit_),n}function Nv(i){const n={};if(i.startSet_&&(n.sp=i.indexStartValue_,i.startNameSet_&&(n.sn=i.indexStartName_)),i.endSet_&&(n.ep=i.indexEndValue_,i.endNameSet_&&(n.en=i.indexEndName_)),i.limitSet_){n.l=i.limit_;let r=i.viewFrom_;""===r&&(r=i.isViewFromLeft()?"l":"r"),n.vf=r}return i.index_!==Fn&&(n.i=i.index_.toString()),n}class Ov extends PC{constructor(n,r,s,u){super(),this.repoInfo_=n,this.onDataUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=u,this.log_=Nm("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,r){return void 0!==r?"tag$"+r:((0,j.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,r,s,u){const c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);const f=Ov.getListenId_(n,s),m={};this.listens_[f]=m;const C=oA(n._queryParams);this.restRequest_(c+".json",C,(T,x)=>{let O=x;if(404===T&&(O=null,T=null),null===T&&this.onDataUpdate_(c,O,!1,s),(0,j.DV)(this.listens_,f)===m){let L;L=T?401===T?"permission_denied":"rest_error:"+T:"ok",u(L,null)}})}unlisten(n,r){const s=Ov.getListenId_(n,r);delete this.listens_[s]}get(n){const r=oA(n._queryParams),s=n._path.toString(),u=new j.BH;return this.restRequest_(s+".json",r,(c,f)=>{let m=f;404===c&&(m=null,c=null),null===c?(this.onDataUpdate_(s,m,!1,null),u.resolve(m)):u.reject(new Error(m))}),u.promise}refreshAuthToken(n){}restRequest_(n,r={},s){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([u,c])=>{u&&u.accessToken&&(r.auth=u.accessToken),c&&c.token&&(r.ac=c.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,j.xO)(r);this.log_("Sending REST request for "+f);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(s&&4===m.readyState){this.log_("REST Response for "+f+" received. status:",m.status,"response:",m.responseText);let C=null;if(m.status>=200&&m.status<300){try{C=(0,j.cI)(m.responseText)}catch(T){qi("Failed to parse JSON response for "+f+": "+m.responseText)}s(null,C)}else 401!==m.status&&404!==m.status&&qi("Got unsuccessful REST response for "+f+" Status: "+m.status),s(m.status);s=null}},m.open("GET",f,!0),m.send()})}}class ss{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}function sc(){return{value:null,children:new Map}}function Ju(i,n,r){if(kt(n))i.value=r,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(n,r);else{const s=qt(n);i.children.has(s)||i.children.set(s,sc()),Ju(i.children.get(s),n=Dn(n),r)}}function Mv(i,n){if(kt(n))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const r=i.value;return i.value=null,r.forEachChild(Fn,(s,u)=>{Ju(i,new _n(s),u)}),Mv(i,n)}}if(i.children.size>0){const r=qt(n);return n=Dn(n),i.children.has(r)&&Mv(i.children.get(r),n)&&i.children.delete(r),0===i.children.size}return!0}function yp(i,n,r){null!==i.value?r(n,i.value):function(i,n){i.children.forEach((r,s)=>{n(s,r)})}(i,(s,u)=>{yp(u,new _n(n.toString()+"/"+s),r)})}class aA{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),r=Object.assign({},n);return this.last_&&Ai(this.last_,(s,u)=>{r[s]=r[s]-u}),this.last_=n,r}}class FO{constructor(n,r){this.server_=r,this.statsToReport_={},this.statsListener_=new aA(n);const s=1e4+2e4*Math.random();mv(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const n=this.statsListener_.get(),r={};let s=!1;Ai(n,(u,c)=>{c>0&&(0,j.r3)(this.statsToReport_,u)&&(r[u]=c,s=!0)}),s&&this.server_.reportStats(r),mv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Oo=(()=>(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Oo||(Oo={})),Oo))();function YC(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class kv{constructor(n,r,s){this.path=n,this.affectedTree=r,this.revert=s,this.type=Oo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(kt(this.path)){if(null!=this.affectedTree.value)return(0,j.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new _n(n));return new kv(yn(),r,this.revert)}}return(0,j.hu)(qt(this.path)===n,"operationForChild called for unrelated child."),new kv(Dn(this.path),this.affectedTree,this.revert)}}class Mo{constructor(n,r){this.source=n,this.path=r,this.type=Oo.LISTEN_COMPLETE}operationForChild(n){return kt(this.path)?new Mo(this.source,yn()):new Mo(this.source,Dn(this.path))}}class Ca{constructor(n,r,s){this.source=n,this.path=r,this.snap=s,this.type=Oo.OVERWRITE}operationForChild(n){return kt(this.path)?new Ca(this.source,yn(),this.snap.getImmediateChild(n)):new Ca(this.source,Dn(this.path),this.snap)}}class oc{constructor(n,r,s){this.source=n,this.path=r,this.children=s,this.type=Oo.MERGE}operationForChild(n){if(kt(this.path)){const r=this.children.subtree(new _n(n));return r.isEmpty()?null:r.value?new Ca(this.source,yn(),r.value):new oc(this.source,yn(),r)}return(0,j.hu)(qt(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new oc(this.source,Dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ac{constructor(n,r,s){this.node_=n,this.fullyInitialized_=r,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(kt(n))return this.isFullyInitialized()&&!this.filtered_;const r=qt(n);return this.isCompleteForChild(r)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class LO{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function th(i,n,r,s,u,c){const f=s.filter(m=>m.type===r);f.sort((m,C)=>function(i,n,r){if(null==n.childName||null==r.childName)throw(0,j.g5)("Should only compare child_ events.");const s=new Zt(n.childName,n.snapshotNode),u=new Zt(r.childName,r.snapshotNode);return i.index_.compare(s,u)}(i,m,C)),f.forEach(m=>{const C=function(i,n,r){return"value"===n.type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,i.index_)),n}(i,m,c);u.forEach(T=>{T.respondsTo(m.type)&&n.push(T.createEvent(C,i.query_))})})}function $m(i,n){return{eventCache:i,serverCache:n}}function Hm(i,n,r,s){return $m(new ac(n,r,s),i.serverCache)}function lA(i,n,r,s){return $m(i.eventCache,new ac(n,r,s))}function Fv(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function os(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let nh;class Sn{constructor(n,r=(()=>(nh||(nh=new Qs(mk)),nh))()){this.value=n,this.children=r}static fromObject(n){let r=new Sn(null);return Ai(n,(s,u)=>{r=r.set(new _n(s),u)}),r}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,r){if(null!=this.value&&r(this.value))return{path:yn(),value:this.value};if(kt(n))return null;{const s=qt(n),u=this.children.get(s);if(null!==u){const c=u.findRootMostMatchingPathAndValue(Dn(n),r);return null!=c?{path:ir(new _n(s),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(kt(n))return this;{const r=qt(n),s=this.children.get(r);return null!==s?s.subtree(Dn(n)):new Sn(null)}}set(n,r){if(kt(n))return new Sn(r,this.children);{const s=qt(n),c=(this.children.get(s)||new Sn(null)).set(Dn(n),r),f=this.children.insert(s,c);return new Sn(this.value,f)}}remove(n){if(kt(n))return this.children.isEmpty()?new Sn(null):new Sn(null,this.children);{const r=qt(n),s=this.children.get(r);if(s){const u=s.remove(Dn(n));let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),null===this.value&&c.isEmpty()?new Sn(null):new Sn(this.value,c)}return this}}get(n){if(kt(n))return this.value;{const r=qt(n),s=this.children.get(r);return s?s.get(Dn(n)):null}}setTree(n,r){if(kt(n))return r;{const s=qt(n),c=(this.children.get(s)||new Sn(null)).setTree(Dn(n),r);let f;return f=c.isEmpty()?this.children.remove(s):this.children.insert(s,c),new Sn(this.value,f)}}fold(n){return this.fold_(yn(),n)}fold_(n,r){const s={};return this.children.inorderTraversal((u,c)=>{s[u]=c.fold_(ir(n,u),r)}),r(n,this.value,s)}findOnPath(n,r){return this.findOnPath_(n,yn(),r)}findOnPath_(n,r,s){const u=!!this.value&&s(r,this.value);if(u)return u;if(kt(n))return null;{const c=qt(n),f=this.children.get(c);return f?f.findOnPath_(Dn(n),ir(r,c),s):null}}foreachOnPath(n,r){return this.foreachOnPath_(n,yn(),r)}foreachOnPath_(n,r,s){if(kt(n))return this;{this.value&&s(r,this.value);const u=qt(n),c=this.children.get(u);return c?c.foreachOnPath_(Dn(n),ir(r,u),s):new Sn(null)}}foreach(n){this.foreach_(yn(),n)}foreach_(n,r){this.children.inorderTraversal((s,u)=>{u.foreach_(ir(n,s),r)}),this.value&&r(n,this.value)}foreachChild(n){this.children.inorderTraversal((r,s)=>{s.value&&n(r,s.value)})}}class zi{constructor(n){this.writeTree_=n}static empty(){return new zi(new Sn(null))}}function Gm(i,n,r){if(kt(n))return new zi(new Sn(r));{const s=i.writeTree_.findRootMostValueAndPath(n);if(null!=s){const u=s.path;let c=s.value;const f=is(u,n);return c=c.updateChild(f,r),new zi(i.writeTree_.set(u,c))}{const u=new Sn(r),c=i.writeTree_.setTree(n,u);return new zi(c)}}}function QC(i,n,r){let s=i;return Ai(r,(u,c)=>{s=Gm(s,ir(n,u),c)}),s}function cA(i,n){if(kt(n))return zi.empty();{const r=i.writeTree_.setTree(n,new Sn(null));return new zi(r)}}function Lv(i,n){return null!=uc(i,n)}function uc(i,n){const r=i.writeTree_.findRootMostValueAndPath(n);return null!=r?i.writeTree_.get(r.path).getChild(is(r.path,n)):null}function JC(i){const n=[],r=i.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(Fn,(s,u)=>{n.push(new Zt(s,u))}):i.writeTree_.children.inorderTraversal((s,u)=>{null!=u.value&&n.push(new Zt(s,u.value))}),n}function Xu(i,n){if(kt(n))return i;{const r=uc(i,n);return new zi(null!=r?new Sn(r):i.writeTree_.subtree(n))}}function Wm(i){return i.writeTree_.isEmpty()}function Ep(i,n){return dA(yn(),i.writeTree_,n)}function dA(i,n,r){if(null!=n.value)return r.updateChild(i,n.value);{let s=null;return n.children.inorderTraversal((u,c)=>{".priority"===u?((0,j.hu)(null!==c.value,"Priority writes must always be leaf nodes"),s=c.value):r=dA(ir(i,u),c,r)}),!r.getChild(i).isEmpty()&&null!==s&&(r=r.updateChild(ir(i,".priority"),s)),r}}function qm(i,n){return d(n,i)}function Ak(i,n){if(i.snap)return fi(i.path,n);for(const r in i.children)if(i.children.hasOwnProperty(r)&&fi(ir(i.path,r),n))return!0;return!1}function xk(i){return i.visible}function $O(i,n,r){let s=zi.empty();for(let u=0;u<i.length;++u){const c=i[u];if(n(c)){const f=c.path;let m;if(c.snap)fi(r,f)?(m=is(r,f),s=Gm(s,m,c.snap)):fi(f,r)&&(m=is(f,r),s=Gm(s,yn(),c.snap.getChild(m)));else{if(!c.children)throw(0,j.g5)("WriteRecord should have .snap or .children");if(fi(r,f))m=is(r,f),s=QC(s,m,c.children);else if(fi(f,r))if(m=is(f,r),kt(m))s=QC(s,yn(),c.children);else{const C=(0,j.DV)(c.children,qt(m));if(C){const T=C.getChild(Dn(m));s=Gm(s,yn(),T)}}}}}return s}function hA(i,n,r,s,u){if(s||u){const c=Xu(i.visibleWrites,n);return!u&&Wm(c)?r:u||null!=r||Lv(c,yn())?Ep($O(i.allWrites,function(T){return(T.visible||u)&&(!s||!~s.indexOf(T.writeId))&&(fi(T.path,n)||fi(n,T.path))},n),r||Ft.EMPTY_NODE):null}{const c=uc(i.visibleWrites,n);if(null!=c)return c;{const f=Xu(i.visibleWrites,n);return Wm(f)?r:null!=r||Lv(f,yn())?Ep(f,r||Ft.EMPTY_NODE):null}}}function eb(i,n,r,s){return hA(i.writeTree,i.treePath,n,r,s)}function fA(i,n){return function(i,n,r){let s=Ft.EMPTY_NODE;const u=uc(i.visibleWrites,n);if(u)return u.isLeafNode()||u.forEachChild(Fn,(c,f)=>{s=s.updateImmediateChild(c,f)}),s;if(r){const c=Xu(i.visibleWrites,n);return r.forEachChild(Fn,(f,m)=>{const C=Ep(Xu(c,new _n(f)),m);s=s.updateImmediateChild(f,C)}),JC(c).forEach(f=>{s=s.updateImmediateChild(f.name,f.node)}),s}return JC(Xu(i.visibleWrites,n)).forEach(f=>{s=s.updateImmediateChild(f.name,f.node)}),s}(i.writeTree,i.treePath,n)}function WO(i,n,r,s){return function(i,n,r,s,u){(0,j.hu)(s||u,"Either existingEventSnap or existingServerSnap must exist");const c=ir(n,r);if(Lv(i.visibleWrites,c))return null;{const f=Xu(i.visibleWrites,c);return Wm(f)?u.getChild(r):Ep(f,u.getChild(r))}}(i.writeTree,i.treePath,n,r,s)}function tb(i,n){return function(i,n){return uc(i.visibleWrites,n)}(i.writeTree,ir(i.treePath,n))}function a(i,n,r){return function(i,n,r,s){const u=ir(n,r),c=uc(i.visibleWrites,u);return null!=c?c:s.isCompleteForChild(r)?Ep(Xu(i.visibleWrites,u),s.getNode().getImmediateChild(r)):null}(i.writeTree,i.treePath,n,r)}function l(i,n){return d(ir(i.treePath,n),i.writeTree)}function d(i,n){return{treePath:i,writeTree:n}}class h{constructor(){this.changeMap=new Map}trackChildChange(n){const r=n.type,s=n.childName;(0,j.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,j.hu)(".priority"!==s,"Only non-priority child changes can be tracked.");const u=this.changeMap.get(s);if(u){const c=u.type;if("child_added"===r&&"child_removed"===c)this.changeMap.set(s,_p(s,n.snapshotNode,u.snapshotNode));else if("child_removed"===r&&"child_added"===c)this.changeMap.delete(s);else if("child_removed"===r&&"child_changed"===c)this.changeMap.set(s,mp(s,u.oldSnap));else if("child_changed"===r&&"child_added"===c)this.changeMap.set(s,gp(s,n.snapshotNode));else{if("child_changed"!==r||"child_changed"!==c)throw(0,j.g5)("Illegal combination of changes: "+n+" occurred after "+u);this.changeMap.set(s,_p(s,n.snapshotNode,u.oldSnap))}}else this.changeMap.set(s,n)}getChanges(){return Array.from(this.changeMap.values())}}const y=new class{getCompleteChild(n){return null}getChildAfterChild(n,r,s){return null}};class w{constructor(n,r,s=null){this.writes_=n,this.viewCache_=r,this.optCompleteServerCache_=s}getCompleteChild(n){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);{const s=null!=this.optCompleteServerCache_?new ac(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return a(this.writes_,n,s)}}getChildAfterChild(n,r,s){const u=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:os(this.viewCache_),c=function(i,n,r,s,u,c){return function(i,n,r,s,u,c,f){let m;const C=Xu(i.visibleWrites,n),T=uc(C,yn());if(null!=T)m=T;else{if(null==r)return[];m=Ep(C,r)}if(m=m.withIndex(f),m.isEmpty()||m.isLeafNode())return[];{const x=[],O=f.getCompare(),L=c?m.getReverseIteratorFrom(s,f):m.getIteratorFrom(s,f);let W=L.getNext();for(;W&&x.length<u;)0!==O(W,s)&&x.push(W),W=L.getNext();return x}}(i.writeTree,i.treePath,n,r,s,u,c)}(this.writes_,u,r,1,s,n);return 0===c.length?null:c[0]}}function B(i,n,r,s,u,c){const f=n.eventCache;if(null!=tb(s,r))return n;{let m,C;if(kt(r))if((0,j.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const T=os(n),O=fA(s,T instanceof Ft?T:Ft.EMPTY_NODE);m=i.filter.updateFullNode(n.eventCache.getNode(),O,c)}else{const T=eb(s,os(n));m=i.filter.updateFullNode(n.eventCache.getNode(),T,c)}else{const T=qt(r);if(".priority"===T){(0,j.hu)(1===ic(r),"Can't have a priority with additional path components");const x=f.getNode();C=n.serverCache.getNode();const O=WO(s,r,x,C);m=null!=O?i.filter.updatePriority(x,O):f.getNode()}else{const x=Dn(r);let O;if(f.isCompleteForChild(T)){C=n.serverCache.getNode();const L=WO(s,r,f.getNode(),C);O=null!=L?f.getNode().getImmediateChild(T).updateChild(x,L):f.getNode().getImmediateChild(T)}else O=a(s,T,n.serverCache);m=null!=O?i.filter.updateChild(f.getNode(),T,O,x,u,c):f.getNode()}}return Hm(n,m,f.isFullyInitialized()||kt(r),i.filter.filtersNodes())}}function z(i,n,r,s,u,c,f,m){const C=n.serverCache;let T;const x=f?i.filter:i.filter.getIndexedFilter();if(kt(r))T=x.updateFullNode(C.getNode(),s,null);else if(x.filtersNodes()&&!C.isFiltered()){const W=C.getNode().updateChild(r,s);T=x.updateFullNode(C.getNode(),W,null)}else{const W=qt(r);if(!C.isCompleteForPath(r)&&ic(r)>1)return n;const re=Dn(r),qe=C.getNode().getImmediateChild(W).updateChild(re,s);T=".priority"===W?x.updatePriority(C.getNode(),qe):x.updateChild(C.getNode(),W,qe,re,y,null)}const O=lA(n,T,C.isFullyInitialized()||kt(r),x.filtersNodes());return B(i,O,r,u,new w(u,O,c),m)}function X(i,n,r,s,u,c,f){const m=n.eventCache;let C,T;const x=new w(u,n,c);if(kt(r))T=i.filter.updateFullNode(n.eventCache.getNode(),s,f),C=Hm(n,T,!0,i.filter.filtersNodes());else{const O=qt(r);if(".priority"===O)T=i.filter.updatePriority(n.eventCache.getNode(),s),C=Hm(n,T,m.isFullyInitialized(),m.isFiltered());else{const L=Dn(r),W=m.getNode().getImmediateChild(O);let re;if(kt(L))re=s;else{const Me=x.getCompleteChild(O);re=null!=Me?".priority"===jr(L)&&Me.getChild(kC(L)).isEmpty()?Me:Me.updateChild(L,s):Ft.EMPTY_NODE}C=W.equals(re)?n:Hm(n,i.filter.updateChild(m.getNode(),O,re,L,x,f),m.isFullyInitialized(),i.filter.filtersNodes())}}return C}function Ee(i,n){return i.eventCache.isCompleteForChild(n)}function Ge(i,n,r){return r.foreach((s,u)=>{n=n.updateChild(s,u)}),n}function Oe(i,n,r,s,u,c,f,m){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let T,C=n;T=kt(r)?s:new Sn(null).setTree(r,s);const x=n.serverCache.getNode();return T.children.inorderTraversal((O,L)=>{if(x.hasChild(O)){const re=Ge(0,n.serverCache.getNode().getImmediateChild(O),L);C=z(i,C,new _n(O),re,u,c,f,m)}}),T.children.inorderTraversal((O,L)=>{const W=!n.serverCache.isCompleteForChild(O)&&void 0===L.value;if(!x.hasChild(O)&&!W){const Me=Ge(0,n.serverCache.getNode().getImmediateChild(O),L);C=z(i,C,new _n(O),Me,u,c,f,m)}}),C}class Jr{constructor(n,r){this.query_=n,this.eventRegistrations_=[];const s=this.query_._queryParams,u=new Bm(s.getIndex()),c=function(i){return i.loadsAllData()?new Bm(i.getIndex()):i.hasLimit()?new qC(i):new Xd(i)}(s);this.processor_=function(i){return{filter:i}}(c);const f=r.serverCache,m=r.eventCache,C=u.updateFullNode(Ft.EMPTY_NODE,f.getNode(),null),T=c.updateFullNode(Ft.EMPTY_NODE,m.getNode(),null),x=new ac(C,f.isFullyInitialized(),u.filtersNodes()),O=new ac(T,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=$m(O,x),this.eventGenerator_=new LO(this.query_)}get query(){return this.query_}}function wp(i,n){const r=os(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!kt(n)&&!r.getImmediateChild(qt(n)).isEmpty())?r.getChild(n):null}function ih(i){return 0===i.eventRegistrations_.length}function Vv(i,n,r){const s=[];if(r){(0,j.hu)(null==n,"A cancel should cancel all event registrations.");const u=i.query._path;i.eventRegistrations_.forEach(c=>{const f=c.createCancelEvent(r,u);f&&s.push(f)})}if(n){let u=[];for(let c=0;c<i.eventRegistrations_.length;++c){const f=i.eventRegistrations_[c];if(f.matches(n)){if(n.hasAnyCallback()){u=u.concat(i.eventRegistrations_.slice(c+1));break}}else u.push(f)}i.eventRegistrations_=u}else i.eventRegistrations_=[];return s}function Uv(i,n,r,s){n.type===Oo.MERGE&&null!==n.source.queryId&&((0,j.hu)(os(i.viewCache_),"We should always have a full cache before handling merges"),(0,j.hu)(Fv(i.viewCache_),"Missing event cache, even though we have a server cache"));const u=i.viewCache_,c=function(i,n,r,s,u){const c=new h;let f,m;if(r.type===Oo.OVERWRITE){const T=r;T.source.fromUser?f=X(i,n,T.path,T.snap,s,u,c):((0,j.hu)(T.source.fromServer,"Unknown source."),m=T.source.tagged||n.serverCache.isFiltered()&&!kt(T.path),f=z(i,n,T.path,T.snap,s,u,m,c))}else if(r.type===Oo.MERGE){const T=r;T.source.fromUser?f=function(i,n,r,s,u,c,f){let m=n;return s.foreach((C,T)=>{const x=ir(r,C);Ee(n,qt(x))&&(m=X(i,m,x,T,u,c,f))}),s.foreach((C,T)=>{const x=ir(r,C);Ee(n,qt(x))||(m=X(i,m,x,T,u,c,f))}),m}(i,n,T.path,T.children,s,u,c):((0,j.hu)(T.source.fromServer,"Unknown source."),m=T.source.tagged||n.serverCache.isFiltered(),f=Oe(i,n,T.path,T.children,s,u,m,c))}else if(r.type===Oo.ACK_USER_WRITE){const T=r;f=T.revert?function(i,n,r,s,u,c){let f;if(null!=tb(s,r))return n;{const m=new w(s,n,u),C=n.eventCache.getNode();let T;if(kt(r)||".priority"===qt(r)){let x;if(n.serverCache.isFullyInitialized())x=eb(s,os(n));else{const O=n.serverCache.getNode();(0,j.hu)(O instanceof Ft,"serverChildren would be complete if leaf node"),x=fA(s,O)}x=x,T=i.filter.updateFullNode(C,x,c)}else{const x=qt(r);let O=a(s,x,n.serverCache);null==O&&n.serverCache.isCompleteForChild(x)&&(O=C.getImmediateChild(x)),T=null!=O?i.filter.updateChild(C,x,O,Dn(r),m,c):n.eventCache.getNode().hasChild(x)?i.filter.updateChild(C,x,Ft.EMPTY_NODE,Dn(r),m,c):C,T.isEmpty()&&n.serverCache.isFullyInitialized()&&(f=eb(s,os(n)),f.isLeafNode()&&(T=i.filter.updateFullNode(T,f,c)))}return f=n.serverCache.isFullyInitialized()||null!=tb(s,yn()),Hm(n,T,f,i.filter.filtersNodes())}}(i,n,T.path,s,u,c):function(i,n,r,s,u,c,f){if(null!=tb(u,r))return n;const m=n.serverCache.isFiltered(),C=n.serverCache;if(null!=s.value){if(kt(r)&&C.isFullyInitialized()||C.isCompleteForPath(r))return z(i,n,r,C.getNode().getChild(r),u,c,m,f);if(kt(r)){let T=new Sn(null);return C.getNode().forEachChild(mu,(x,O)=>{T=T.set(new _n(x),O)}),Oe(i,n,r,T,u,c,m,f)}return n}{let T=new Sn(null);return s.foreach((x,O)=>{const L=ir(r,x);C.isCompleteForPath(L)&&(T=T.set(x,C.getNode().getChild(L)))}),Oe(i,n,r,T,u,c,m,f)}}(i,n,T.path,T.affectedTree,s,u,c)}else{if(r.type!==Oo.LISTEN_COMPLETE)throw(0,j.g5)("Unknown operation type: "+r.type);f=function(i,n,r,s,u){const c=n.serverCache;return B(i,lA(n,c.getNode(),c.isFullyInitialized()||kt(r),c.isFiltered()),r,s,y,u)}(i,n,r.path,s,c)}const C=c.getChanges();return function(i,n,r){const s=n.eventCache;if(s.isFullyInitialized()){const u=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=Fv(i);(r.length>0||!i.eventCache.isFullyInitialized()||u&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&r.push(WC(Fv(n)))}}(n,f,C),{viewCache:f,changes:C}}(i.processor_,u,n,r,s);return function(i,n){(0,j.hu)(n.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,j.hu)(n.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,c.viewCache),(0,j.hu)(c.viewCache.serverCache.isFullyInitialized()||!u.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,Bv(i,c.changes,c.viewCache.eventCache.getNode(),null)}function Bv(i,n,r,s){return function(i,n,r,s){const u=[],c=[];return n.forEach(f=>{"child_changed"===f.type&&i.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&c.push(function(i,n){return{type:"child_moved",snapshotNode:n,childName:i}}(f.childName,f.snapshotNode))}),th(i,u,"child_removed",n,s,r),th(i,u,"child_added",n,s,r),th(i,u,"child_moved",c,s,r),th(i,u,"child_changed",n,s,r),th(i,u,"value",n,s,r),u}(i.eventGenerator_,n,r,s?[s]:i.eventRegistrations_)}let bp,gA;class kk{constructor(){this.views=new Map}}function qO(i,n,r,s){const u=n.source.queryId;if(null!==u){const c=i.views.get(u);return(0,j.hu)(null!=c,"SyncTree gave us an op for an invalid query."),Uv(c,n,r,s)}{let c=[];for(const f of i.views.values())c=c.concat(Uv(f,n,r,s));return c}}function Fk(i,n,r,s,u){const f=i.views.get(n._queryIdentifier);if(!f){let m=eb(r,u?s:null),C=!1;m?C=!0:s instanceof Ft?(m=fA(r,s),C=!1):(m=Ft.EMPTY_NODE,C=!1);const T=$m(new ac(m,C,!1),new ac(s,u,!1));return new Jr(n,T)}return f}function Lk(i){const n=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||n.push(r);return n}function Ip(i,n){let r=null;for(const s of i.views.values())r=r||wp(s,n);return r}function Vk(i,n){return n._queryParams.loadsAllData()?pA(i):i.views.get(n._queryIdentifier)}function Uk(i,n){return null!=Vk(i,n)}function Tp(i){return null!=pA(i)}function pA(i){for(const n of i.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let aV=1;class Bk{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Sn(null),this.pendingWriteTree_={visibleWrites:zi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zO(i,n,r,s,u){return function(i,n,r,s,u){(0,j.hu)(s>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===u&&(u=!0),i.allWrites.push({path:n,snap:r,writeId:s,visible:u}),u&&(i.visibleWrites=Gm(i.visibleWrites,n,r)),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s,u),u?jv(i,new Ca({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r)):[]}function Dp(i,n,r=!1){const s=function(i,n){for(let r=0;r<i.allWrites.length;r++){const s=i.allWrites[r];if(s.writeId===n)return s}return null}(i.pendingWriteTree_,n);if(function(i,n){const r=i.allWrites.findIndex(m=>m.writeId===n);(0,j.hu)(r>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[r];i.allWrites.splice(r,1);let u=s.visible,c=!1,f=i.allWrites.length-1;for(;u&&f>=0;){const m=i.allWrites[f];m.visible&&(f>=r&&Ak(m,s.path)?u=!1:fi(s.path,m.path)&&(c=!0)),f--}return!!u&&(c?(function(i){i.visibleWrites=$O(i.allWrites,xk,yn()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(s.snap?i.visibleWrites=cA(i.visibleWrites,s.path):Ai(s.children,C=>{i.visibleWrites=cA(i.visibleWrites,ir(s.path,C))}),!0))}(i.pendingWriteTree_,n)){let c=new Sn(null);return null!=s.snap?c=c.set(yn(),!0):Ai(s.children,f=>{c=c.set(new _n(f),!0)}),jv(i,new kv(s.path,c,r))}return[]}function rb(i,n,r){return jv(i,new Ca({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}function KO(i,n,r,s){const u=n._path,c=i.syncPointTree_.get(u);let f=[];if(c&&("default"===n._queryIdentifier||Uk(c,n))){const m=function(i,n,r,s){const u=n._queryIdentifier,c=[];let f=[];const m=Tp(i);if("default"===u)for(const[C,T]of i.views.entries())f=f.concat(Vv(T,r,s)),ih(T)&&(i.views.delete(C),T.query._queryParams.loadsAllData()||c.push(T.query));else{const C=i.views.get(u);C&&(f=f.concat(Vv(C,r,s)),ih(C)&&(i.views.delete(u),C.query._queryParams.loadsAllData()||c.push(C.query)))}return m&&!Tp(i)&&c.push(new((0,j.hu)(bp,"Reference.ts has not been loaded"),bp)(n._repo,n._path)),{removed:c,events:f}}(c,n,r,s);(function(i){return 0===i.views.size})(c)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const C=m.removed;f=m.events;const T=-1!==C.findIndex(O=>O._queryParams.loadsAllData()),x=i.syncPointTree_.findOnPath(u,(O,L)=>Tp(L));if(T&&!x){const O=i.syncPointTree_.subtree(u);if(!O.isEmpty()){const L=function(i){return i.fold((n,r,s)=>{if(r&&Tp(r))return[pA(r)];{let u=[];return r&&(u=Lk(r)),Ai(s,(c,f)=>{u=u.concat(f)}),u}})}(O);for(let W=0;W<L.length;++W){const re=L[W],Me=re.query,qe=Gk(i,re);i.listenProvider_.startListening(ib(Me),_A(i,Me),qe.hashFn,qe.onComplete)}}}if(!x&&C.length>0&&!s)if(T){const O=null;i.listenProvider_.stopListening(ib(n),O)}else C.forEach(O=>{const L=i.queryToTagMap.get(yA(O));i.listenProvider_.stopListening(ib(O),L)});!function(i,n){for(let r=0;r<n.length;++r){const s=n[r];if(!s._queryParams.loadsAllData()){const u=yA(s),c=i.queryToTagMap.get(u);i.queryToTagMap.delete(u),i.tagToQueryMap.delete(c)}}}(i,C)}return f}function jk(i,n,r){const s=n._path;let u=null,c=!1;i.syncPointTree_.foreachOnPath(s,(O,L)=>{const W=is(O,s);u=u||Ip(L,W),c=c||Tp(L)});let m,f=i.syncPointTree_.get(s);f?(c=c||Tp(f),u=u||Ip(f,yn())):(f=new kk,i.syncPointTree_=i.syncPointTree_.set(s,f)),null!=u?m=!0:(m=!1,u=Ft.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((L,W)=>{const re=Ip(W,yn());re&&(u=u.updateImmediateChild(L,re))}));const C=Uk(f,n);if(!C&&!n._queryParams.loadsAllData()){const O=yA(n);(0,j.hu)(!i.queryToTagMap.has(O),"View does not exist, but we have a tag");const L=aV++;i.queryToTagMap.set(O,L),i.tagToQueryMap.set(L,O)}let x=function(i,n,r,s,u,c){const f=Fk(i,n,s,u,c);return i.views.has(n._queryIdentifier)||i.views.set(n._queryIdentifier,f),function(i,n){i.eventRegistrations_.push(n)}(f,r),function(i,n){const r=i.viewCache_.eventCache,s=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Fn,(c,f)=>{s.push(gp(c,f))}),r.isFullyInitialized()&&s.push(WC(r.getNode())),Bv(i,s,r.getNode(),n)}(f,r)}(f,n,r,qm(i.pendingWriteTree_,s),u,m);if(!C&&!c){const O=Vk(f,n);x=x.concat(function(i,n,r){const s=n._path,u=_A(i,n),c=Gk(i,r),f=i.listenProvider_.startListening(ib(n),u,c.hashFn,c.onComplete),m=i.syncPointTree_.subtree(s);if(u)(0,j.hu)(!Tp(m.value),"If we're adding a query, it shouldn't be shadowed");else{const C=m.fold((T,x,O)=>{if(!kt(T)&&x&&Tp(x))return[pA(x).query];{let L=[];return x&&(L=L.concat(Lk(x).map(W=>W.query))),Ai(O,(W,re)=>{L=L.concat(re)}),L}});for(let T=0;T<C.length;++T){const x=C[T];i.listenProvider_.stopListening(ib(x),_A(i,x))}}return f}(i,n,O))}return x}function mA(i,n,r){const u=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(n,(f,m)=>{const T=Ip(m,is(f,n));if(T)return T});return hA(u,n,c,r,!0)}function jv(i,n){return $k(n,i.syncPointTree_,null,qm(i.pendingWriteTree_,yn()))}function $k(i,n,r,s){if(kt(i.path))return Hk(i,n,r,s);{const u=n.get(yn());null==r&&null!=u&&(r=Ip(u,yn()));let c=[];const f=qt(i.path),m=i.operationForChild(f),C=n.children.get(f);if(C&&m){const T=r?r.getImmediateChild(f):null,x=l(s,f);c=c.concat($k(m,C,T,x))}return u&&(c=c.concat(qO(u,i,s,r))),c}}function Hk(i,n,r,s){const u=n.get(yn());null==r&&null!=u&&(r=Ip(u,yn()));let c=[];return n.children.inorderTraversal((f,m)=>{const C=r?r.getImmediateChild(f):null,T=l(s,f),x=i.operationForChild(f);x&&(c=c.concat(Hk(x,m,C,T)))}),u&&(c=c.concat(qO(u,i,s,r))),c}function Gk(i,n){const r=n.query,s=_A(i,r);return{hashFn:()=>(function(i){return i.viewCache_.serverCache.getNode()}(n)||Ft.EMPTY_NODE).hash(),onComplete:u=>{if("ok"===u)return s?function(i,n,r){const s=ZO(i,r);if(s){const u=YO(s),c=u.path,f=u.queryId,m=is(c,n);return QO(i,c,new Mo(YC(f),m))}return[]}(i,r._path,s):function(i,n){return jv(i,new Mo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(i,r._path);{const c=function(i,n){let r="Unknown Error";"too_big"===i?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?r="Client doesn't have permission to access the desired data.":"unavailable"===i&&(r="The service is unavailable");const s=new Error(i+" at "+n._path.toString()+": "+r);return s.code=i.toUpperCase(),s}(u,r);return KO(i,r,null,c)}}}}function _A(i,n){const r=yA(n);return i.queryToTagMap.get(r)}function yA(i){return i._path.toString()+"$"+i._queryIdentifier}function ZO(i,n){return i.tagToQueryMap.get(n)}function YO(i){const n=i.indexOf("$");return(0,j.hu)(-1!==n&&n<i.length-1,"Bad queryKey."),{queryId:i.substr(n+1),path:new _n(i.substr(0,n))}}function QO(i,n,r){const s=i.syncPointTree_.get(n);return(0,j.hu)(s,"Missing sync point for query tag that we're tracking"),qO(s,r,qm(i.pendingWriteTree_,n),null)}function ib(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new((0,j.hu)(gA,"Reference.ts has not been loaded"),gA)(i._repo,i._path):i}class JO{constructor(n){this.node_=n}getImmediateChild(n){const r=this.node_.getImmediateChild(n);return new JO(r)}node(){return this.node_}}class XO{constructor(n,r){this.syncTree_=n,this.path_=r}getImmediateChild(n){const r=ir(this.path_,n);return new XO(this.syncTree_,r)}node(){return mA(this.syncTree_,this.path_)}}const Wk=function(i,n,r){return i&&"object"==typeof i?((0,j.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?EV(i[".sv"],n,r):"object"==typeof i[".sv"]?wV(i[".sv"],n):void(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},EV=function(i,n,r){switch(i){case"timestamp":return r.timestamp;default:(0,j.hu)(!1,"Unexpected server value: "+i)}},wV=function(i,n,r){i.hasOwnProperty("increment")||(0,j.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;"number"!=typeof s&&(0,j.hu)(!1,"Unexpected increment value: "+s);const u=n.node();if((0,j.hu)(null!=u,"Expected ChildrenNode.EMPTY_NODE for nulls"),!u.isLeafNode())return s;const f=u.getValue();return"number"!=typeof f?s:f+s},qk=function(i,n,r,s){return tM(n,new XO(r,i),s)},eM=function(i,n,r){return tM(i,new JO(n),r)};function tM(i,n,r){const s=i.getPriority().val(),u=Wk(s,n.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const f=i,m=Wk(f.getValue(),n,r);return m!==f.getValue()||u!==f.getPriority().val()?new dp(m,Ir(u)):i}{const f=i;return c=f,u!==f.getPriority().val()&&(c=c.updatePriority(new dp(u))),f.forEachChild(Fn,(m,C)=>{const T=tM(C,n.getImmediateChild(m),r);T!==C&&(c=c.updateImmediateChild(m,T))}),c}}class nM{constructor(n="",r=null,s={children:{},childCount:0}){this.name=n,this.parent=r,this.node=s}}function vA(i,n){let r=n instanceof _n?n:new _n(n),s=i,u=qt(r);for(;null!==u;){const c=(0,j.DV)(s.node.children,u)||{children:{},childCount:0};s=new nM(u,s,c),r=Dn(r),u=qt(r)}return s}function Km(i){return i.node.value}function rM(i,n){i.node.value=n,iM(i)}function zk(i){return i.node.childCount>0}function EA(i,n){Ai(i.node.children,(r,s)=>{n(new nM(r,i,s))})}function Kk(i,n,r,s){r&&!s&&n(i),EA(i,u=>{Kk(u,n,!0,s)}),r&&s&&n(i)}function sb(i){return new _n(null===i.parent?i.name:sb(i.parent)+"/"+i.name)}function iM(i){null!==i.parent&&function(i,n,r){const s=function(i){return void 0===Km(i)&&!zk(i)}(r),u=(0,j.r3)(i.node.children,n);s&&u?(delete i.node.children[n],i.node.childCount--,iM(i)):!s&&!u&&(i.node.children[n]=r.node,i.node.childCount++,iM(i))}(i.parent,i.name,i)}const TV=/[\[\].#$\/\u0000-\u001F\u007F]/,DV=/[\[\].#$\u0000-\u001F\u007F]/,sM=10485760,wA=function(i){return"string"==typeof i&&0!==i.length&&!TV.test(i)},Zk=function(i){return"string"==typeof i&&0!==i.length&&!DV.test(i)},ob=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!pv(i)||i&&"object"==typeof i&&(0,j.r3)(i,".sv")},lc=function(i,n,r,s){s&&void 0===n||ab((0,j.gK)(i,"value"),n,r)},ab=function(i,n,r){const s=r instanceof _n?new qS(r,i):r;if(void 0===n)throw new Error(i+"contains undefined "+gu(s));if("function"==typeof n)throw new Error(i+"contains a function "+gu(s)+" with contents = "+n.toString());if(pv(n))throw new Error(i+"contains "+n.toString()+" "+gu(s));if("string"==typeof n&&n.length>sM/3&&(0,j.ug)(n)>sM)throw new Error(i+"contains a string greater than "+sM+" utf8 bytes "+gu(s)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let u=!1,c=!1;if(Ai(n,(f,m)=>{if(".value"===f)u=!0;else if(".priority"!==f&&".sv"!==f&&(c=!0,!wA(f)))throw new Error(i+" contains an invalid key ("+f+") "+gu(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(i,n){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(n),i.byteLength_+=(0,j.ug)(n),zS(i)})(s,f),ab(i,m,s),function(i){const n=i.parts_.pop();i.byteLength_-=(0,j.ug)(n),i.parts_.length>0&&(i.byteLength_-=1)}(s)}),u&&c)throw new Error(i+' contains ".value" child '+gu(s)+" in addition to actual children.")}},Yk=function(i,n,r,s){if(s&&void 0===n)return;const u=(0,j.gK)(i,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(u+" must be an object containing the children to replace.");const c=[];Ai(n,(f,m)=>{const C=new _n(f);if(ab(u,m,ir(r,C)),".priority"===jr(C)&&!ob(m))throw new Error(u+"contains an invalid value for '"+C.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(C)}),function(i,n){let r,s;for(r=0;r<n.length;r++){s=n[r];const c=cp(s);for(let f=0;f<c.length;f++)if((".priority"!==c[f]||f!==c.length-1)&&!wA(c[f]))throw new Error(i+"contains an invalid key ("+c[f]+") in path "+s.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(yO);let u=null;for(r=0;r<n.length;r++){if(s=n[r],null!==u&&fi(u,s))throw new Error(i+"contains a path "+u.toString()+" that is ancestor of another path "+s.toString());u=s}}(u,c)},oM=function(i,n,r){if(!r||void 0!==n){if(pv(n))throw new Error((0,j.gK)(i,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ob(n))throw new Error((0,j.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ub=function(i,n,r,s){if(!(s&&void 0===r||wA(r)))throw new Error((0,j.gK)(i,n)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},lb=function(i,n,r,s){if(!(s&&void 0===r||Zk(r)))throw new Error((0,j.gK)(i,n)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_u=function(i,n){if(".info"===qt(n))throw new Error(i+" failed = Can't modify data under /.info/")},Qk=function(i,n){const r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!wA(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Zk(i)}(r))throw new Error((0,j.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function CA(i,n){let r=null;for(let s=0;s<n.length;s++){const u=n[s],c=u.getPath();null!==r&&!Iv(c,r.path)&&(i.eventLists_.push(r),r=null),null===r&&(r={events:[],path:c}),r.events.push(u)}r&&i.eventLists_.push(r)}function aM(i,n,r){CA(i,r),Jk(i,s=>Iv(s,n))}function yu(i,n,r){CA(i,r),Jk(i,s=>fi(s,n)||fi(n,s))}function Jk(i,n){i.recursionDepth_++;let r=!0;for(let s=0;s<i.eventLists_.length;s++){const u=i.eventLists_[s];u&&(n(u.path)?(NV(i.eventLists_[s]),i.eventLists_[s]=null):r=!1)}r&&(i.eventLists_=[]),i.recursionDepth_--}function NV(i){for(let n=0;n<i.events.length;n++){const r=i.events[n];if(null!==r){i.events[n]=null;const s=r.getEventRunner();sp&&Si("event: "+r.toString()),rc(s)}}}const Xk="repo_interrupt";class MV{constructor(n,r,s,u){this.repoInfo_=n,this.forceRestClient_=r,this.authTokenProvider_=s,this.appCheckProvider_=u,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sc(),this.transactionQueueTree_=new nM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function e1(i){const r=i.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+r}function cb(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:e1(i)})}function t1(i,n,r,s,u){i.dataUpdateCount++;const c=new _n(n);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(n,r):r;let f=[];if(u)if(s){const C=(0,j.UI)(r,T=>Ir(T));f=function(i,n,r,s){const u=ZO(i,s);if(u){const c=YO(u),f=c.path,m=c.queryId,C=is(f,n),T=Sn.fromObject(r);return QO(i,f,new oc(YC(m),C,T))}return[]}(i.serverSyncTree_,c,C,u)}else{const C=Ir(r);f=function(i,n,r,s){const u=ZO(i,s);if(null!=u){const c=YO(u),f=c.path,m=c.queryId,C=is(f,n);return QO(i,f,new Ca(YC(m),C,r))}return[]}(i.serverSyncTree_,c,C,u)}else if(s){const C=(0,j.UI)(r,T=>Ir(T));f=function(i,n,r){const s=Sn.fromObject(r);return jv(i,new oc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,s))}(i.serverSyncTree_,c,C)}else{const C=Ir(r);f=rb(i.serverSyncTree_,c,C)}let m=c;f.length>0&&(m=Hv(i,c)),yu(i.eventQueue_,m,f)}function n1(i,n){uM(i,"connected",n),!1===n&&function(i){$v(i,"onDisconnectEvents");const n=cb(i),r=sc();yp(i.onDisconnect_,yn(),(u,c)=>{const f=qk(u,c,i.serverSyncTree_,n);Ju(r,u,f)});let s=[];yp(r,yn(),(u,c)=>{s=s.concat(rb(i.serverSyncTree_,u,c));const f=hM(i,u);Hv(i,f)}),i.onDisconnect_=sc(),yu(i.eventQueue_,yn(),s)}(i)}function uM(i,n,r){const s=new _n("/.info/"+n),u=Ir(r);i.infoData_.updateSnapshot(s,u);const c=rb(i.infoSyncTree_,s,u);yu(i.eventQueue_,s,c)}function bA(i){return i.nextWriteId_++}function lM(i,n,r,s,u){$v(i,"set",{path:n.toString(),value:r,priority:s});const c=cb(i),f=Ir(r,s),m=mA(i.serverSyncTree_,n),C=eM(f,m,c),T=bA(i),x=zO(i.serverSyncTree_,n,C,T,!0);CA(i.eventQueue_,x),i.server_.put(n.toString(),f.val(!0),(L,W)=>{const re="ok"===L;re||qi("set at "+n+" failed: "+L);const Me=Dp(i.serverSyncTree_,T,!re);yu(i.eventQueue_,n,Me),Sp(0,u,L,W)});const O=hM(i,n);Hv(i,O),yu(i.eventQueue_,O,[])}function UV(i,n,r){i.server_.onDisconnectCancel(n.toString(),(s,u)=>{"ok"===s&&Mv(i.onDisconnect_,n),Sp(0,r,s,u)})}function r1(i,n,r,s){const u=Ir(r);i.server_.onDisconnectPut(n.toString(),u.val(!0),(c,f)=>{"ok"===c&&Ju(i.onDisconnect_,n,u),Sp(0,s,c,f)})}function cM(i,n,r){let s;s=".info"===qt(n._path)?KO(i.infoSyncTree_,n,r):KO(i.serverSyncTree_,n,r),aM(i.eventQueue_,n._path,s)}function i1(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Xk)}function $v(i,...n){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),Si(r,...n)}function Sp(i,n,r,s){n&&rc(()=>{if("ok"===r)n(null);else{const u=(r||"error").toUpperCase();let c=u;s&&(c+=": "+s);const f=new Error(c);f.code=u,n(f)}})}function dM(i,n,r){return mA(i.serverSyncTree_,n,r)||Ft.EMPTY_NODE}function IA(i,n=i.transactionQueueTree_){if(n||TA(i,n),Km(n)){const r=o1(i,n);(0,j.hu)(r.length>0,"Sending zero length transaction queue"),r.every(u=>0===u.status)&&function(i,n,r){const s=r.map(T=>T.currentWriteId),u=dM(i,n,s);let c=u;const f=u.hash();for(let T=0;T<r.length;T++){const x=r[T];(0,j.hu)(0===x.status,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const O=is(n,x.path);c=c.updateChild(O,x.currentOutputSnapshotRaw)}const m=c.val(!0),C=n;i.server_.put(C.toString(),m,T=>{$v(i,"transaction put response",{path:C.toString(),status:T});let x=[];if("ok"===T){const O=[];for(let L=0;L<r.length;L++)r[L].status=2,x=x.concat(Dp(i.serverSyncTree_,r[L].currentWriteId)),r[L].onComplete&&O.push(()=>r[L].onComplete(null,!0,r[L].currentOutputSnapshotResolved)),r[L].unwatcher();TA(i,vA(i.transactionQueueTree_,n)),IA(i,i.transactionQueueTree_),yu(i.eventQueue_,n,x);for(let L=0;L<O.length;L++)rc(O[L])}else{if("datastale"===T)for(let O=0;O<r.length;O++)r[O].status=3===r[O].status?4:0;else{qi("transaction at "+C.toString()+" failed: "+T);for(let O=0;O<r.length;O++)r[O].status=4,r[O].abortReason=T}Hv(i,n)}},f)}(i,sb(n),r)}else zk(n)&&EA(n,r=>{IA(i,r)})}function Hv(i,n){const r=s1(i,n),s=sb(r);return function(i,n,r){if(0===n.length)return;const s=[];let u=[];const f=n.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<n.length;m++){const C=n[m],T=is(r,C.path);let O,x=!1;if((0,j.hu)(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===C.status)x=!0,O=C.abortReason,u=u.concat(Dp(i.serverSyncTree_,C.currentWriteId,!0));else if(0===C.status)if(C.retryCount>=25)x=!0,O="maxretry",u=u.concat(Dp(i.serverSyncTree_,C.currentWriteId,!0));else{const L=dM(i,C.path,f);C.currentInputSnapshot=L;const W=n[m].update(L.val());if(void 0!==W){ab("transaction failed: Data returned ",W,C.path);let re=Ir(W);"object"==typeof W&&null!=W&&(0,j.r3)(W,".priority")||(re=re.updatePriority(L.getPriority()));const qe=C.currentWriteId,ht=cb(i),Ot=eM(re,L,ht);C.currentOutputSnapshotRaw=re,C.currentOutputSnapshotResolved=Ot,C.currentWriteId=bA(i),f.splice(f.indexOf(qe),1),u=u.concat(zO(i.serverSyncTree_,C.path,Ot,C.currentWriteId,C.applyLocally)),u=u.concat(Dp(i.serverSyncTree_,qe,!0))}else x=!0,O="nodata",u=u.concat(Dp(i.serverSyncTree_,C.currentWriteId,!0))}yu(i.eventQueue_,r,u),u=[],x&&(n[m].status=2,setTimeout(n[m].unwatcher,Math.floor(0)),n[m].onComplete&&s.push("nodata"===O?()=>n[m].onComplete(null,!1,n[m].currentInputSnapshot):()=>n[m].onComplete(new Error(O),!1,null)))}TA(i,i.transactionQueueTree_);for(let m=0;m<s.length;m++)rc(s[m]);IA(i,i.transactionQueueTree_)}(i,o1(i,r),s),s}function s1(i,n){let r,s=i.transactionQueueTree_;for(r=qt(n);null!==r&&void 0===Km(s);)s=vA(s,r),r=qt(n=Dn(n));return s}function o1(i,n){const r=[];return a1(i,n,r),r.sort((s,u)=>s.order-u.order),r}function a1(i,n,r){const s=Km(n);if(s)for(let u=0;u<s.length;u++)r.push(s[u]);EA(n,u=>{a1(i,u,r)})}function TA(i,n){const r=Km(n);if(r){let s=0;for(let u=0;u<r.length;u++)2!==r[u].status&&(r[s]=r[u],s++);r.length=s,rM(n,r.length>0?r:void 0)}EA(n,s=>{TA(i,s)})}function hM(i,n){const r=sb(s1(i,n)),s=vA(i.transactionQueueTree_,n);return function(i,n,r){let s=i.parent;for(;null!==s;){if(n(s))return!0;s=s.parent}}(s,u=>{fM(i,u)}),fM(i,s),Kk(s,u=>{fM(i,u)}),r}function fM(i,n){const r=Km(n);if(r){const s=[];let u=[],c=-1;for(let f=0;f<r.length;f++)3===r[f].status||(1===r[f].status?((0,j.hu)(c===f-1,"All SENT items should be at beginning of queue."),c=f,r[f].status=3,r[f].abortReason="set"):((0,j.hu)(0===r[f].status,"Unexpected transaction status in abort"),r[f].unwatcher(),u=u.concat(Dp(i.serverSyncTree_,r[f].currentWriteId,!0)),r[f].onComplete&&s.push(r[f].onComplete.bind(null,new Error("set"),!1,null))));-1===c?rM(n,void 0):r.length=c+1,yu(i.eventQueue_,sb(n),u);for(let f=0;f<s.length;f++)rc(s[f])}}const pM=function(i,n){const r=ZV(i),s=r.namespace;return"firebase.com"===r.domain&&ns(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||"undefined"===s)&&"localhost"!==r.domain&&ns("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rs(r.host,r.secure,s,n,"ws"===r.scheme||"wss"===r.scheme,"",s!==r.subdomain),path:new _n(r.pathString)}},ZV=function(i){let n="",r="",s="",u="",c="",f=!0,m="https",C=443;if("string"==typeof i){let T=i.indexOf("//");T>=0&&(m=i.substring(0,T-1),i=i.substring(T+2));let x=i.indexOf("/");-1===x&&(x=i.length);let O=i.indexOf("?");-1===O&&(O=i.length),n=i.substring(0,Math.min(x,O)),x<O&&(u=function(i){let n="";const r=i.split("/");for(let s=0;s<r.length;s++)if(r[s].length>0){let u=r[s];try{u=decodeURIComponent(u.replace(/\+/g," "))}catch(c){}n+="/"+u}return n}(i.substring(x,O)));const L=function(i){const n={};"?"===i.charAt(0)&&(i=i.substring(1));for(const r of i.split("&")){if(0===r.length)continue;const s=r.split("=");2===s.length?n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):qi(`Invalid query segment '${r}' in query '${i}'`)}return n}(i.substring(Math.min(i.length,O)));T=n.indexOf(":"),T>=0?(f="https"===m||"wss"===m,C=parseInt(n.substring(T+1),10)):T=n.length;const W=n.slice(0,T);if("localhost"===W.toLowerCase())r="localhost";else if(W.split(".").length<=2)r=W;else{const re=n.indexOf(".");s=n.substring(0,re).toLowerCase(),r=n.substring(re+1),c=s}"ns"in L&&(c=L.ns)}return{host:n,port:C,domain:r,subdomain:s,secure:f,scheme:m,pathString:u,namespace:c}};class u1{constructor(n,r,s,u){this.eventType=n,this.eventRegistration=r,this.snapshot=s,this.prevName=u}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,j.Pz)(this.snapshot.exportVal())}}class l1{constructor(n,r,s){this.eventRegistration=n,this.error=r,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class c1{constructor(n,r){this.snapshotCallback=n,this.cancelCallback=r}onValue(n,r){this.snapshotCallback.call(null,n,r)}onCancel(n){return(0,j.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class d1{constructor(n,r){this._repo=n,this._path=r}cancel(){const n=new j.BH;return UV(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){_u("OnDisconnect.remove",this._path);const n=new j.BH;return r1(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){_u("OnDisconnect.set",this._path),lc("OnDisconnect.set",n,this._path,!1);const r=new j.BH;return r1(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}setWithPriority(n,r){_u("OnDisconnect.setWithPriority",this._path),lc("OnDisconnect.setWithPriority",n,this._path,!1),oM("OnDisconnect.setWithPriority",r,!1);const s=new j.BH;return function(i,n,r,s,u){const c=Ir(r,s);i.server_.onDisconnectPut(n.toString(),c.val(!0),(f,m)=>{"ok"===f&&Ju(i.onDisconnect_,n,c),Sp(0,u,f,m)})}(this._repo,this._path,n,r,s.wrapCallback(()=>{})),s.promise}update(n){_u("OnDisconnect.update",this._path),Yk("OnDisconnect.update",n,this._path,!1);const r=new j.BH;return function(i,n,r,s){if((0,j.xb)(r))return Si("onDisconnect().update() called with empty data.  Don't do anything."),void Sp(0,s,"ok",void 0);i.server_.onDisconnectMerge(n.toString(),r,(u,c)=>{"ok"===u&&Ai(r,(f,m)=>{const C=Ir(m);Ju(i.onDisconnect_,ir(n,f),C)}),Sp(0,s,u,c)})}(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}}class ko{constructor(n,r,s,u){this._repo=n,this._path=r,this._queryParams=s,this._orderByCalled=u}get key(){return kt(this._path)?null:jr(this._path)}get ref(){return new vu(this._repo,this._path)}get _queryIdentifier(){const n=Nv(this._queryParams),r=ap(n);return"{}"===r?"default":r}get _queryObject(){return Nv(this._queryParams)}isEqual(n){if(!((n=(0,j.m9)(n))instanceof ko))return!1;const r=this._repo===n._repo,s=Iv(this._path,n._path);return r&&s&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(i){let n="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)""!==i.pieces_[r]&&(n+="/"+encodeURIComponent(String(i.pieces_[r])));return n||"/"}(this._path)}}function DA(i,n){if(!0===i._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function Ap(i){let n=null,r=null;if(i.hasStart()&&(n=i.getIndexStartValue()),i.hasEnd()&&(r=i.getIndexEndValue()),i.getIndex()===mu){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",u="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==pu)throw new Error(s);if("string"!=typeof n)throw new Error(u)}if(i.hasEnd()){if(i.getIndexEndName()!==ya)throw new Error(s);if("string"!=typeof r)throw new Error(u)}}else if(i.getIndex()===Fn){if(null!=n&&!ob(n)||null!=r&&!ob(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,j.hu)(i.getIndex()instanceof Um||i.getIndex()===GC,"unknown index type."),null!=n&&"object"==typeof n||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SA(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vu extends ko{constructor(n,r){super(n,r,new eh,!1)}get parent(){const n=kC(this._path);return null===n?null:new vu(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class Zm{constructor(n,r,s){this._node=n,this.ref=r,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const r=new _n(n),s=Ym(this.ref,n);return new Zm(this._node.getChild(r),s,Fn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(s,u)=>n(new Zm(u,Ym(this.ref,s),Fn)))}hasChild(n){const r=new _n(n);return!this._node.getChild(r).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function h1(i,n){return(i=(0,j.m9)(i))._checkNotDeleted("ref"),void 0!==n?Ym(i._root,n):i._root}function f1(i,n){(i=(0,j.m9)(i))._checkNotDeleted("refFromURL");const r=pM(n,i._repo.repoInfo_.nodeAdmin);Qk("refFromURL",r);const s=r.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&s.host!==i._repo.repoInfo_.host&&ns("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+i._repo.repoInfo_.host+")"),h1(i,r.path.toString())}function Ym(i,n){return null===qt((i=(0,j.m9)(i))._path)?((r=n)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),lb("child","path",r,!1)):lb("child","path",n,!1),new vu(i._repo,ir(i._path,n));var r}function gM(i,n){i=(0,j.m9)(i),_u("set",i._path),lc("set",n,i._path,!1);const r=new j.BH;return lM(i._repo,i._path,n,null,r.wrapCallback(()=>{})),r.promise}function eU(i,n){Yk("update",n,i._path,!1);const r=new j.BH;return function(i,n,r,s){$v(i,"update",{path:n.toString(),value:r});let u=!0;const c=cb(i),f={};if(Ai(r,(m,C)=>{u=!1,f[m]=qk(ir(n,m),Ir(C),i.serverSyncTree_,c)}),u)Si("update() called with empty data.  Don't do anything."),Sp(0,s,"ok",void 0);else{const m=bA(i),C=function(i,n,r,s){!function(i,n,r,s){(0,j.hu)(s>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:n,children:r,writeId:s,visible:!0}),i.visibleWrites=QC(i.visibleWrites,n,r),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s);const u=Sn.fromObject(r);return jv(i,new oc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,u))}(i.serverSyncTree_,n,f,m);CA(i.eventQueue_,C),i.server_.merge(n.toString(),r,(T,x)=>{const O="ok"===T;O||qi("update at "+n+" failed: "+T);const L=Dp(i.serverSyncTree_,m,!O),W=L.length>0?Hv(i,n):n;yu(i.eventQueue_,W,L),Sp(0,s,T,x)}),Ai(r,T=>{const x=hM(i,ir(n,T));Hv(i,x)}),yu(i.eventQueue_,n,[])}}(i._repo,i._path,n,r.wrapCallback(()=>{})),r.promise}function tU(i){return function(i,n){const r=function(i,n){const r=n._path;let s=null;i.syncPointTree_.foreachOnPath(r,(T,x)=>{const O=is(T,r);s=s||Ip(x,O)});let u=i.syncPointTree_.get(r);u?s=s||Ip(u,yn()):(u=new kk,i.syncPointTree_=i.syncPointTree_.set(r,u));const c=null!=s,f=c?new ac(s,!0,!1):null;return function(i){return Fv(i.viewCache_)}(Fk(u,n,qm(i.pendingWriteTree_,n._path),c?f.getNode():Ft.EMPTY_NODE,c))}(i.serverSyncTree_,n);return null!=r?Promise.resolve(r):i.server_.get(n).then(s=>{const u=Ir(s).withIndex(n._queryParams.getIndex()),c=rb(i.serverSyncTree_,n._path,u);return aM(i.eventQueue_,n._path,c),Promise.resolve(u)},s=>($v(i,"get for query "+(0,j.Pz)(n)+" failed: "+s),Promise.reject(new Error(s))))}((i=(0,j.m9)(i))._repo,i).then(n=>new Zm(n,new vu(i._repo,i._path),i._queryParams.getIndex()))}class AA{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,r){const s=r._queryParams.getIndex();return new u1("value",this,new Zm(n.snapshotNode,new vu(r._repo,r._path),s))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new l1(this,n,r):null}matches(n){return n instanceof AA&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class RA{constructor(n,r){this.eventType=n,this.callbackContext=r}respondsTo(n){let r="children_added"===n?"child_added":n;return r="children_removed"===r?"child_removed":r,this.eventType===r}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new l1(this,n,r):null}createEvent(n,r){(0,j.hu)(null!=n.childName,"Child events should have a childName.");const s=Ym(new vu(r._repo,r._path),n.childName),u=r._queryParams.getIndex();return new u1(n.type,this,new Zm(n.snapshotNode,s,u),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof RA&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function db(i,n,r,s,u){let c;if("object"==typeof s&&(c=void 0,u=s),"function"==typeof s&&(c=s),u&&u.onlyOnce){const C=r,T=(x,O)=>{cM(i._repo,i,m),C(x,O)};T.userCallback=r.userCallback,T.context=r.context,r=T}const f=new c1(r,c||void 0),m="value"===n?new AA(f):new RA(n,f);return function(i,n,r){let s;s=".info"===qt(n._path)?jk(i.infoSyncTree_,n,r):jk(i.serverSyncTree_,n,r),aM(i.eventQueue_,n._path,s)}(i._repo,i,m),()=>cM(i._repo,i,m)}function mM(i,n,r,s){return db(i,"value",n,r,s)}function p1(i,n,r,s){return db(i,"child_added",n,r,s)}function g1(i,n,r,s){return db(i,"child_changed",n,r,s)}function m1(i,n,r,s){return db(i,"child_moved",n,r,s)}function _1(i,n,r,s){return db(i,"child_removed",n,r,s)}function y1(i,n,r){let s=null;const u=r?new c1(r):null;"value"===n?s=new AA(u):n&&(s=new RA(n,u)),cM(i._repo,i,s)}class el{}class v1 extends el{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){lc("endAt",this._value,n._path,!0);const r=Rv(n._queryParams,this._value,this._key);if(SA(r),Ap(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ko(n._repo,n._path,r,n._orderByCalled)}}class rU extends el{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){lc("endBefore",this._value,n._path,!1);const r=function(i,n,r){let s,u;return i.index_===mu?("string"==typeof n&&(n=NO(n)),u=Rv(i,n,r)):(s=null==r?pu:NO(r),u=Rv(i,n,s)),u.endBeforeSet_=!0,u}(n._queryParams,this._value,this._key);if(SA(r),Ap(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ko(n._repo,n._path,r,n._orderByCalled)}}class E1 extends el{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){lc("startAt",this._value,n._path,!0);const r=zC(n._queryParams,this._value,this._key);if(SA(r),Ap(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ko(n._repo,n._path,r,n._orderByCalled)}}class oU extends el{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){lc("startAfter",this._value,n._path,!1);const r=function(i,n,r){let s;if(i.index_===mu)"string"==typeof n&&(n=No(n)),s=zC(i,n,r);else{let u;u=null==r?ya:No(r),s=zC(i,n,u)}return s.startAfterSet_=!0,s}(n._queryParams,this._value,this._key);if(SA(r),Ap(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ko(n._repo,n._path,r,n._orderByCalled)}}class uU extends el{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ko(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="l",r}(n._queryParams,this._limit),n._orderByCalled)}}class cU extends el{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ko(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="r",r}(n._queryParams,this._limit),n._orderByCalled)}}class hU extends el{constructor(n){super(),this._path=n}_apply(n){DA(n,"orderByChild");const r=new _n(this._path);if(kt(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new Um(r),u=xv(n._queryParams,s);return Ap(u),new ko(n._repo,n._path,u,!0)}}class pU extends el{_apply(n){DA(n,"orderByKey");const r=xv(n._queryParams,mu);return Ap(r),new ko(n._repo,n._path,r,!0)}}class mU extends el{_apply(n){DA(n,"orderByPriority");const r=xv(n._queryParams,Fn);return Ap(r),new ko(n._repo,n._path,r,!0)}}class yU extends el{_apply(n){DA(n,"orderByValue");const r=xv(n._queryParams,GC);return Ap(r),new ko(n._repo,n._path,r,!0)}}class EU extends el{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){if(lc("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new v1(this._value,this._key)._apply(new E1(this._value,this._key)._apply(n))}}function tl(i,...n){let r=(0,j.m9)(i);for(const s of n)r=s._apply(r);return r}(function(i){(0,j.hu)(!bp,"__referenceConstructor has already been defined"),bp=i})(vu),function(i){(0,j.hu)(!gA,"__referenceConstructor has already been defined"),gA=i}(vu);const _M={};function C1(i,n,r,s,u){let c=s||i.options.databaseURL;void 0===c&&(i.options.projectId||ns("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Si("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let C,T,f=pM(c,u),m=f.repoInfo;"undefined"!=typeof process&&(T=process.env.FIREBASE_DATABASE_EMULATOR_HOST),T?(C=!0,c=`http://${T}?ns=${m.namespace}`,f=pM(c,u),m=f.repoInfo):C=!f.repoInfo.secure;const x=u&&C?new _v(_v.OWNER):new XN(i.name,i.options,n);Qk("Invalid Firebase Database URL",f),kt(f.path)||ns("Database URL must point to the root of a Firebase Database (not including a child path).");const O=function(i,n,r,s){let u=_M[n.name];u||(u={},_M[n.name]=u);let c=u[i.toURLString()];return c&&ns("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new MV(i,false,r,s),u[i.toURLString()]=c,c}(m,i,x,new vk(i.name,r));return new SU(O,i)}class SU{constructor(n,r){this._repoInternal=n,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(i,n,r){if(i.stats_=Ev(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new Ov(i.repoInfo_,(s,u,c,f)=>{t1(i,s,u,c,f)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>n1(i,!0),0);else{if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,j.Pz)(r)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new Jd(i.repoInfo_,n,(s,u,c,f)=>{t1(i,s,u,c,f)},s=>{n1(i,s)},s=>{!function(i,n){Ai(n,(r,s)=>{uM(i,r,s)})}(i,s)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=function(i,n){const r=i.toString();return Pm[r]||(Pm[r]=n()),Pm[r]}(i.repoInfo_,()=>new FO(i.stats_,i.server_)),i.infoData_=new ss,i.infoSyncTree_=new Bk({startListening:(s,u,c,f)=>{let m=[];const C=i.infoData_.getNode(s._path);return C.isEmpty()||(m=rb(i.infoSyncTree_,s._path,C),setTimeout(()=>{f("ok")},0)),m},stopListening:()=>{}}),uM(i,"connected",!1),i.serverSyncTree_=new Bk({startListening:(s,u,c,f)=>(i.server_.listen(s,c,u,(m,C)=>{const T=f(m,C);yu(i.eventQueue_,s._path,T)}),[]),stopListening:(s,u)=>{i.server_.unlisten(s,u)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vu(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(i,n){const r=_M[n];(!r||r[i.key]!==i)&&ns(`Database ${n}(${i.repoInfo_}) has already been deleted.`),i1(i),delete r[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&ns("Cannot call "+n+" on a deleted database.")}}function NU(i,n){SS(i,n)}class FU{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Jd.prototype.simpleListen=function(i,n){this.sendRequest("q",{p:i},n)},Jd.prototype.echo=function(i,n){this.sendRequest("echo",{d:i},n)},TS(za.SDK_VERSION),(0,za._registerComponent)(new wi.wA("database",(n,{instanceIdentifier:r})=>C1(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),r),"PUBLIC").setMultipleInstances(!0)),(0,za.registerVersion)("@firebase/database","0.12.1",void 0);const BU=new ai.Yd("@firebase/database-compat"),b1=function(i){BU.warn("FIREBASE WARNING: "+i)};class HU{constructor(n){this._delegate=n}cancel(n){(0,j.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,j.Wj)("OnDisconnect.cancel","onComplete",n,!0);const r=this._delegate.cancel();return n&&r.then(()=>n(null),s=>n(s)),r}remove(n){(0,j.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,j.Wj)("OnDisconnect.remove","onComplete",n,!0);const r=this._delegate.remove();return n&&r.then(()=>n(null),s=>n(s)),r}set(n,r){(0,j.Dv)("OnDisconnect.set",1,2,arguments.length),(0,j.Wj)("OnDisconnect.set","onComplete",r,!0);const s=this._delegate.set(n);return r&&s.then(()=>r(null),u=>r(u)),s}setWithPriority(n,r,s){(0,j.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,j.Wj)("OnDisconnect.setWithPriority","onComplete",s,!0);const u=this._delegate.setWithPriority(n,r);return s&&u.then(()=>s(null),c=>s(c)),u}update(n,r){if((0,j.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const u={};for(let c=0;c<n.length;++c)u[""+c]=n[c];n=u,b1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,j.Wj)("OnDisconnect.update","onComplete",r,!0);const s=this._delegate.update(n);return r&&s.then(()=>r(null),u=>r(u)),s}}class GU{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return(0,j.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rp{constructor(n,r){this._database=n,this._delegate=r}val(){return(0,j.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,j.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,j.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,j.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,j.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),lb("DataSnapshot.child","path",n,!1),new Rp(this._database,this._delegate.child(n))}hasChild(n){return(0,j.Dv)("DataSnapshot.hasChild",1,1,arguments.length),lb("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,j.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,j.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,j.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(r=>n(new Rp(this._database,r)))}hasChildren(){return(0,j.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,j.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,j.Dv)("DataSnapshot.ref",0,0,arguments.length),new ba(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class as{constructor(n,r){this.database=n,this._delegate=r}on(n,r,s,u){var c;(0,j.Dv)("Query.on",2,4,arguments.length),(0,j.Wj)("Query.on","callback",r,!1);const f=as.getCancelAndContextArgs_("Query.on",s,u),m=(T,x)=>{r.call(f.context,new Rp(this.database,T),x)};m.userCallback=r,m.context=f.context;const C=null===(c=f.cancel)||void 0===c?void 0:c.bind(f.context);switch(n){case"value":return mM(this._delegate,m,C),r;case"child_added":return p1(this._delegate,m,C),r;case"child_removed":return _1(this._delegate,m,C),r;case"child_changed":return g1(this._delegate,m,C),r;case"child_moved":return m1(this._delegate,m,C),r;default:throw new Error((0,j.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,r,s){if((0,j.Dv)("Query.off",0,3,arguments.length),function(i,n,r){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,j.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,j.Wj)("Query.off","callback",r,!0),(0,j.lb)("Query.off","context",s,!0),r){const u=()=>{};u.userCallback=r,u.context=s,y1(this._delegate,n,u)}else y1(this._delegate,n)}get(){return tU(this._delegate).then(n=>new Rp(this.database,n))}once(n,r,s,u){(0,j.Dv)("Query.once",1,4,arguments.length),(0,j.Wj)("Query.once","callback",r,!0);const c=as.getCancelAndContextArgs_("Query.once",s,u),f=new j.BH,m=(T,x)=>{const O=new Rp(this.database,T);r&&r.call(c.context,O,x),f.resolve(O)};m.userCallback=r,m.context=c.context;const C=T=>{c.cancel&&c.cancel.call(c.context,T),f.reject(T)};switch(n){case"value":mM(this._delegate,m,C,{onlyOnce:!0});break;case"child_added":p1(this._delegate,m,C,{onlyOnce:!0});break;case"child_removed":_1(this._delegate,m,C,{onlyOnce:!0});break;case"child_changed":g1(this._delegate,m,C,{onlyOnce:!0});break;case"child_moved":m1(this._delegate,m,C,{onlyOnce:!0});break;default:throw new Error((0,j.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return f.promise}limitToFirst(n){return(0,j.Dv)("Query.limitToFirst",1,1,arguments.length),new as(this.database,tl(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new uU(i)}(n)))}limitToLast(n){return(0,j.Dv)("Query.limitToLast",1,1,arguments.length),new as(this.database,tl(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cU(i)}(n)))}orderByChild(n){return(0,j.Dv)("Query.orderByChild",1,1,arguments.length),new as(this.database,tl(this._delegate,function(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return lb("orderByChild","path",i,!1),new hU(i)}(n)))}orderByKey(){return(0,j.Dv)("Query.orderByKey",0,0,arguments.length),new as(this.database,tl(this._delegate,new pU))}orderByPriority(){return(0,j.Dv)("Query.orderByPriority",0,0,arguments.length),new as(this.database,tl(this._delegate,new mU))}orderByValue(){return(0,j.Dv)("Query.orderByValue",0,0,arguments.length),new as(this.database,tl(this._delegate,new yU))}startAt(n=null,r){return(0,j.Dv)("Query.startAt",0,2,arguments.length),new as(this.database,tl(this._delegate,function(i=null,n){return ub("startAt","key",n,!0),new E1(i,n)}(n,r)))}startAfter(n=null,r){return(0,j.Dv)("Query.startAfter",0,2,arguments.length),new as(this.database,tl(this._delegate,function(i,n){return ub("startAfter","key",n,!0),new oU(i,n)}(n,r)))}endAt(n=null,r){return(0,j.Dv)("Query.endAt",0,2,arguments.length),new as(this.database,tl(this._delegate,function(i,n){return ub("endAt","key",n,!0),new v1(i,n)}(n,r)))}endBefore(n=null,r){return(0,j.Dv)("Query.endBefore",0,2,arguments.length),new as(this.database,tl(this._delegate,function(i,n){return ub("endBefore","key",n,!0),new rU(i,n)}(n,r)))}equalTo(n,r){return(0,j.Dv)("Query.equalTo",1,2,arguments.length),new as(this.database,tl(this._delegate,function(i,n){return ub("equalTo","key",n,!0),new EU(i,n)}(n,r)))}toString(){return(0,j.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,j.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,j.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof as))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,r,s){const u={cancel:void 0,context:void 0};if(r&&s)u.cancel=r,(0,j.Wj)(n,"cancel",u.cancel,!0),u.context=s,(0,j.lb)(n,"context",u.context,!0);else if(r)if("object"==typeof r&&null!==r)u.context=r;else{if("function"!=typeof r)throw new Error((0,j.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");u.cancel=r}return u}get ref(){return new ba(this.database,new vu(this._delegate._repo,this._delegate._path))}}class ba extends as{constructor(n,r){super(n,new ko(r._repo,r._path,new eh,!1)),this.database=n,this._delegate=r}getKey(){return(0,j.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,j.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new ba(this.database,Ym(this._delegate,n))}getParent(){(0,j.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new ba(this.database,n):null}getRoot(){return(0,j.Dv)("Reference.root",0,0,arguments.length),new ba(this.database,this._delegate.root)}set(n,r){(0,j.Dv)("Reference.set",1,2,arguments.length),(0,j.Wj)("Reference.set","onComplete",r,!0);const s=gM(this._delegate,n);return r&&s.then(()=>r(null),u=>r(u)),s}update(n,r){if((0,j.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const u={};for(let c=0;c<n.length;++c)u[""+c]=n[c];n=u,b1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_u("Reference.update",this._delegate._path),(0,j.Wj)("Reference.update","onComplete",r,!0);const s=eU(this._delegate,n);return r&&s.then(()=>r(null),u=>r(u)),s}setWithPriority(n,r,s){(0,j.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,j.Wj)("Reference.setWithPriority","onComplete",s,!0);const u=function(i,n,r){if(_u("setWithPriority",i._path),lc("setWithPriority",n,i._path,!1),oM("setWithPriority",r,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const s=new j.BH;return lM(i._repo,i._path,n,r,s.wrapCallback(()=>{})),s.promise}(this._delegate,n,r);return s&&u.then(()=>s(null),c=>s(c)),u}remove(n){(0,j.Dv)("Reference.remove",0,1,arguments.length),(0,j.Wj)("Reference.remove","onComplete",n,!0);const r=function(i){return _u("remove",i._path),gM(i,null)}(this._delegate);return n&&r.then(()=>n(null),s=>n(s)),r}transaction(n,r,s){(0,j.Dv)("Reference.transaction",1,3,arguments.length),(0,j.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,j.Wj)("Reference.transaction","onComplete",r,!0),function(i,n,r,s){if(void 0!==r&&"boolean"!=typeof r)throw new Error((0,j.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,s);const u=function(i,n,r){var s;if(i=(0,j.m9)(i),_u("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const u=null===(s=null==r?void 0:r.applyLocally)||void 0===s||s,c=new j.BH,m=mM(i,()=>{});return function(i,n,r,s,u,c){$v(i,"transaction on "+n);const f={path:n,update:r,onComplete:s,status:null,order:DS(),applyLocally:c,retryCount:0,unwatcher:u,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=dM(i,n,void 0);f.currentInputSnapshot=m;const C=f.update(m.val());if(void 0===C)f.unwatcher(),f.currentOutputSnapshotRaw=null,f.currentOutputSnapshotResolved=null,f.onComplete&&f.onComplete(null,!1,f.currentInputSnapshot);else{ab("transaction failed: Data returned ",C,f.path),f.status=0;const T=vA(i.transactionQueueTree_,n),x=Km(T)||[];let O;x.push(f),rM(T,x),"object"==typeof C&&null!==C&&(0,j.r3)(C,".priority")?(O=(0,j.DV)(C,".priority"),(0,j.hu)(ob(O),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):O=(mA(i.serverSyncTree_,n)||Ft.EMPTY_NODE).getPriority().val();const L=cb(i),W=Ir(C,O),re=eM(W,m,L);f.currentOutputSnapshotRaw=W,f.currentOutputSnapshotResolved=re,f.currentWriteId=bA(i);const Me=zO(i.serverSyncTree_,n,re,f.currentWriteId,f.applyLocally);yu(i.eventQueue_,n,Me),IA(i,i.transactionQueueTree_)}}(i._repo,i._path,n,(C,T,x)=>{let O=null;C?c.reject(C):(O=new Zm(x,new vu(i._repo,i._path),Fn),c.resolve(new FU(T,O)))},m,u),c.promise}(this._delegate,n,{applyLocally:s}).then(c=>new GU(c.committed,new Rp(this.database,c.snapshot)));return r&&u.then(c=>r(null,c.committed,c.snapshot),c=>r(c,!1,null)),u}setPriority(n,r){(0,j.Dv)("Reference.setPriority",1,2,arguments.length),(0,j.Wj)("Reference.setPriority","onComplete",r,!0);const s=function(i,n){i=(0,j.m9)(i),_u("setPriority",i._path),oM("setPriority",n,!1);const r=new j.BH;return lM(i._repo,ir(i._path,".priority"),n,null,r.wrapCallback(()=>{})),r.promise}(this._delegate,n);return r&&s.then(()=>r(null),u=>r(u)),s}push(n,r){(0,j.Dv)("Reference.push",0,2,arguments.length),(0,j.Wj)("Reference.push","onComplete",r,!0);const s=function(i,n){i=(0,j.m9)(i),_u("push",i._path),lc("push",n,i._path,!0);const r=e1(i._repo),s=xO(r),u=Ym(i,s),c=Ym(i,s);let f;return f=null!=n?gM(c,n).then(()=>c):Promise.resolve(c),u.then=f.then.bind(f),u.catch=f.then.bind(f,void 0),u}(this._delegate,n),u=s.then(f=>new ba(this.database,f));r&&u.then(()=>r(null),f=>r(f));const c=new ba(this.database,s);return c.then=u.then.bind(u),c.catch=u.catch.bind(u,void 0),c}onDisconnect(){return _u("Reference.onDisconnect",this._delegate._path),new HU(new d1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class hb{constructor(n,r){this._delegate=n,this.app=r,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(n,r,s={}){!function(i,n,r,s={}){(i=(0,j.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&ns("Cannot call useEmulator() after instance has already been initialized.");const u=i._repoInternal;let c;if(u.repoInfo_.nodeAdmin)s.mockUserToken&&ns('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new _v(_v.OWNER);else if(s.mockUserToken){const f="string"==typeof s.mockUserToken?s.mockUserToken:(0,j.Sg)(s.mockUserToken,i.app.options.projectId);c=new _v(f)}!function(i,n,r,s){i.repoInfo_=new rs(`${n}:${r}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),s&&(i.authTokenProvider_=s)}(u,n,r,c)}(this._delegate,n,r,s)}ref(n){if((0,j.Dv)("database.ref",0,1,arguments.length),n instanceof ba){const r=f1(this._delegate,n.toString());return new ba(this,r)}{const r=h1(this._delegate,n);return new ba(this,r)}}refFromURL(n){(0,j.Dv)("database.refFromURL",1,1,arguments.length);const s=f1(this._delegate,n);return new ba(this,s)}goOffline(){return(0,j.Dv)("database.goOffline",0,0,arguments.length),function(i){(i=(0,j.m9)(i))._checkNotDeleted("goOffline"),i1(i._repo)}(this._delegate)}goOnline(){return(0,j.Dv)("database.goOnline",0,0,arguments.length),function(i){(i=(0,j.m9)(i))._checkNotDeleted("goOnline"),function(i){i.persistentConnection_&&i.persistentConnection_.resume(Xk)}(i._repo)}(this._delegate)}}hb.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:i=>function(i){return{".sv":{increment:i}}}(i)};var qU=Object.freeze({__proto__:null,initStandalone:function({app:i,url:n,version:r,customAuthImpl:s,namespace:u,nodeAdmin:c=!1}){TS(r);const f=new wi.zt("auth-internal",new wi.H0("database-standalone"));return f.setComponent(new wi.wA("auth-internal",()=>s,"PRIVATE")),{instance:new hb(C1(i,f,void 0,n,c),i),namespace:u}}});const zU=hb.ServerValue;function I1(i){return null==i}function T1(i){return"function"==typeof i.set}function D1(i,n){return T1(n)?n:i.ref(n)}function S1(i,n){if(function(i){return"string"==typeof i}(i))return n.stringCase();if(T1(i))return n.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function fb(i,n,r="on",s=Lc.z){return new vr(u=>{let c=null;return c=i[r](n,(f,m)=>{s.schedule(()=>{u.next({snapshot:f,prevKey:m})}),"once"===r&&s.schedule(()=>u.complete())},f=>{s.schedule(()=>u.error(f))}),"on"===r?{unsubscribe(){null!=c&&i.off(n,c)}}:{unsubscribe(){}}}).pipe(Ue(u=>{const{snapshot:c,prevKey:f}=u;let m=null;return c.exists()&&(m=c.key),{type:n,payload:c,prevKey:f,key:m}}),tC())}function A1(i,n){const r=i.length;for(let s=0;s<r;s++)if(i[s].payload.key===n)return s;return-1}function XU(i,n){const{payload:r,prevKey:s,key:u}=n,c=A1(i,u),f=function(i,n){if(I1(n))return 0;{const r=A1(i,n);return-1===r?i.length:r+1}}(i,s);switch(n.type){case"value":if(n.payload&&n.payload.exists()){let m=null;n.payload.forEach(C=>{const T={payload:C,type:"value",prevKey:m,key:C.key};return m=C.key,i=[...i,T],!1})}return i;case"child_added":if(c>-1){const m=i[c-1];(m&&m.key||null)!==s&&(i=i.filter(C=>C.payload.key!==r.key)).splice(f,0,n)}else{if(null==s)return[n,...i];(i=i.slice()).splice(f,0,n)}return i;case"child_removed":return i.filter(m=>m.payload.key!==r.key);case"child_changed":return i.map(m=>m.payload.key===u?n:m);case"child_moved":if(c>-1){const m=i.splice(c,1)[0];return(i=i.slice()).splice(f,0,m),i}return i;default:return i}}function R1(i){return(I1(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function x1(i,n,r){return function(i,n,r){return fb(i,"value","once",r).pipe(Qu(s=>{const u=[te(s)];return n.forEach(c=>u.push(fb(i,c,"on",r))),eC(...u).pipe(vs(XU,[]))}),Es())}(i,n=R1(n),r)}function N1(i,n,r){return eC(...(n=R1(n)).map(u=>fb(i,u,"on",r)))}function eB(i,n,r){return function(i,n,r){return function(i,n){return fb(i,"value","on",n).pipe(Ue(r=>{let s;return r.payload.forEach(u=>(s=u.key,!1)),{data:r,lastKeyToLoad:s}}))}(i,r).pipe(function(...i){const n=function(i){return(0,yr.m)(S(i))?i.pop():void 0}(i);return(0,Ne.e)((r,s)=>{const u=i.length,c=new Array(u);let f=i.map(()=>!1),m=!1;for(let C=0;C<u;C++)pn(i[C]).subscribe(new Ke.Q(s,T=>{c[C]=T,!m&&!f[C]&&(f[C]=!0,(m=f.every(_s.y))&&(f=null))},ck.Z));r.subscribe(new Ke.Q(s,C=>{if(m){const T=[C,...c];s.next(n?n(...T):T)}}))})}(n),Ue(([u,c])=>{const f=u.lastKeyToLoad,m=c.map(C=>C.key);return{actions:c,lastKeyToLoad:f,loadedKeys:m}}),(0,Ne.e)((n,r)=>{let s=!1;n.subscribe(new Ke.Q(r,c=>(s||(s=!(u=>-1===u.loadedKeys.indexOf(u.lastKeyToLoad))(c)))&&r.next(c)))}),Ue(u=>u.actions))}(i,N1(i,n).pipe(vs((u,c)=>[...u,c],[])),r)}function O1(i,n){return function(s,u){return S1(s,{stringCase:()=>i.child(s)[n](u),firebaseCase:()=>s[n](u),snapshotCase:()=>s.ref[n](u)})}}function rB(i){return function(r){return r?S1(r,{stringCase:()=>i.child(r).remove(),firebaseCase:()=>r.remove(),snapshotCase:()=>r.ref.remove()}):i.remove()}}function M1(i,n){return function(){return fb(i,"value","on",n)}}!function(i){i.INTERNAL.registerComponent(new wi.wA("database-compat",(n,{instanceIdentifier:r})=>{const s=n.getProvider("app-compat").getImmediate(),u=n.getProvider("database").getImmediate({identifier:r});return new hb(u,s)},"PUBLIC").setServiceProps({Reference:ba,Query:as,Database:hb,DataSnapshot:Rp,enableLogging:NU,INTERNAL:qU,ServerValue:zU}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.1")}(dr.Z);const oB=new _.OlP("angularfire2.realtimeDatabaseURL"),aB=new _.OlP("angularfire2.database.use-emulator");let uB=(()=>{class i{constructor(r,s,u,c,f,m,C,T,x,O,L,W,re,Me,qe){this.schedulers=m;const ht=C,Ot=(0,qn.on)(r,f,s);T&&mC(Ot,f,x,L,W,re,O,Me),this.database=(0,qn.cc)(`${Ot.name}.database.${u}`,"AngularFireDatabase",Ot.name,()=>{const vn=f.runOutsideAngular(()=>Ot.database(u||void 0));return ht&&vn.useEmulator(...ht),vn},[ht])}list(r,s){const u=this.schedulers.ngZone.runOutsideAngular(()=>D1(this.database,r));let c=u;return s&&(c=s(u)),function(i,n){const r=n.schedulers.outsideAngular,s=n.schedulers.ngZone.run(()=>i.ref);return{query:i,update:O1(s,"update"),set:O1(s,"set"),push:u=>s.push(u),remove:rB(s),snapshotChanges:u=>x1(i,u,r).pipe(ue.iC),stateChanges:u=>N1(i,u,r).pipe(ue.iC),auditTrail:u=>eB(i,u,r).pipe(ue.iC),valueChanges:(u,c)=>x1(i,u,r).pipe(Ue(m=>m.map(C=>c&&c.idField?Object.assign(Object.assign({},C.payload.val()),{[c.idField]:C.key}):C.payload.val())),ue.iC)}}(c,this)}object(r){return function(i,n){return{query:i,snapshotChanges:()=>M1(i,n.schedulers.outsideAngular)().pipe(ue.iC),update:r=>i.ref.update(r),set:r=>i.ref.set(r),remove:()=>i.ref.remove(),valueChanges:()=>M1(i,n.schedulers.outsideAngular)().pipe(ue.iC,Ue(s=>s.payload.exists()?s.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>D1(this.database,r)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(qn.Dh),_.LFG(qn.xv,8),_.LFG(oB,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ue.HU),_.LFG(aB,8),_.LFG(fu,8),_.LFG(ov,8),_.LFG(av,8),_.LFG(pC,8),_.LFG(uv,8),_.LFG(lv,8),_.LFG(gC,8),_.LFG(nv,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),lB=(()=>{class i{constructor(){Yd.Z.registerVersion("angularfire",ue.q4.full,"rtdb-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[uB]}),i})();var Ia=U(7574);let P1=(()=>{class i{constructor(){}build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const wn={Get:0,Post:1,Put:2,Delete:3,Options:4,Head:5,Patch:6};wn[wn.Get]="Get",wn[wn.Post]="Post",wn[wn.Put]="Put",wn[wn.Delete]="Delete",wn[wn.Options]="Options",wn[wn.Head]="Head",wn[wn.Patch]="Patch";const Ri={Unsent:0,Open:1,HeadersReceived:2,Loading:3,Done:4,Cancelled:5};Ri[Ri.Unsent]="Unsent",Ri[Ri.Open]="Open",Ri[Ri.HeadersReceived]="HeadersReceived",Ri[Ri.Loading]="Loading",Ri[Ri.Done]="Done",Ri[Ri.Cancelled]="Cancelled";const Fo={Basic:0,Cors:1,Default:2,Error:3,Opaque:4};Fo[Fo.Basic]="Basic",Fo[Fo.Cors]="Cors",Fo[Fo.Default]="Default",Fo[Fo.Error]="Error",Fo[Fo.Opaque]="Opaque";const en={NONE:0,JSON:1,FORM:2,FORM_DATA:3,TEXT:4,BLOB:5,ARRAY_BUFFER:6};en[en.NONE]="NONE",en[en.JSON]="JSON",en[en.FORM]="FORM",en[en.FORM_DATA]="FORM_DATA",en[en.TEXT]="TEXT",en[en.BLOB]="BLOB",en[en.ARRAY_BUFFER]="ARRAY_BUFFER";const Eu={Text:0,Json:1,ArrayBuffer:2,Blob:3};Eu[Eu.Text]="Text",Eu[Eu.Json]="Json",Eu[Eu.ArrayBuffer]="ArrayBuffer",Eu[Eu.Blob]="Blob";class sh{constructor(n){if(this._headers=new Map,this._normalizedNames=new Map,n){if(n instanceof sh)return void n.forEach((r,s)=>{r.forEach(u=>this.append(s,u))});Object.keys(n).forEach(r=>{const s=Array.isArray(n[r])?n[r]:[n[r]];this.delete(r),s.forEach(u=>this.append(r,u))})}}static fromResponseHeaderString(n){const r=new sh;return n.split("\n").forEach(s=>{const u=s.indexOf(":");if(u>0){const c=s.slice(0,u),f=s.slice(u+1).trim();r.set(c,f)}}),r}append(n,r){const s=this.getAll(n);null===s?this.set(n,r):s.push(r)}delete(n){const r=n.toLowerCase();this._normalizedNames.delete(r),this._headers.delete(r)}forEach(n){this._headers.forEach((r,s)=>n(r,this._normalizedNames.get(s),this._headers))}get(n){const r=this.getAll(n);return null===r?null:r.length>0?r[0]:null}has(n){return this._headers.has(n.toLowerCase())}keys(){return Array.from(this._normalizedNames.values())}set(n,r){Array.isArray(r)?r.length&&this._headers.set(n.toLowerCase(),[r.join(",")]):this._headers.set(n.toLowerCase(),[r]),this.mayBeSetNormalizedName(n)}values(){return Array.from(this._headers.values())}toJSON(){const n={};return this._headers.forEach((r,s)=>{const u=[];r.forEach(c=>u.push(...c.split(","))),n[this._normalizedNames.get(s)]=u}),n}getAll(n){return this.has(n)&&this._headers.get(n.toLowerCase())||null}entries(){throw new Error('"entries" method is not implemented on Headers class')}mayBeSetNormalizedName(n){const r=n.toLowerCase();this._normalizedNames.has(r)||this._normalizedNames.set(r,n)}}class cc{constructor(n={}){const{body:r,status:s,headers:u,statusText:c,type:f,url:m}=n;this.body=null!=r?r:null,this.status=null!=s?s:null,this.headers=null!=u?u:null,this.statusText=null!=c?c:null,this.type=null!=f?f:null,this.url=null!=m?m:null}merge(n){return new cc({body:n&&null!=n.body?n.body:this.body,status:n&&null!=n.status?n.status:this.status,headers:n&&null!=n.headers?n.headers:this.headers,statusText:n&&null!=n.statusText?n.statusText:this.statusText,type:n&&null!=n.type?n.type:this.type,url:n&&null!=n.url?n.url:this.url})}}let cB=(()=>{class i extends cc{constructor(){super({status:200,statusText:"Ok",type:Fo.Default,headers:new sh})}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class dB{}class k1{}function F1(i){if("string"!=typeof i)return i;switch(i.toUpperCase()){case"GET":return wn.Get;case"POST":return wn.Post;case"PUT":return wn.Put;case"DELETE":return wn.Delete;case"OPTIONS":return wn.Options;case"HEAD":return wn.Head;case"PATCH":return wn.Patch}throw new Error(`Invalid request method. The method "${i}" is not supported.`)}class mB{encodeKey(n){return L1(n)}encodeValue(n){return L1(n)}}function L1(i){return encodeURIComponent(i).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class oh{constructor(n="",r=new mB){this.rawParams=n,this.queryEncoder=r,this.paramsMap=function(i=""){const n=new Map;return i.length>0&&i.split("&").forEach(s=>{const u=s.indexOf("="),[c,f]=-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],m=n.get(c)||[];m.push(f),n.set(c,m)}),n}(n)}clone(){const n=new oh("",this.queryEncoder);return n.appendAll(this),n}has(n){return this.paramsMap.has(n)}get(n){const r=this.paramsMap.get(n);return Array.isArray(r)?r[0]:null}getAll(n){return this.paramsMap.get(n)||[]}set(n,r){if(null==r)return void this.delete(n);const s=this.paramsMap.get(n)||[];s.length=0,s.push(r),this.paramsMap.set(n,s)}setAll(n){n.paramsMap.forEach((r,s)=>{const u=this.paramsMap.get(s)||[];u.length=0,u.push(r[0]),this.paramsMap.set(s,u)})}append(n,r){if(null==r)return;const s=this.paramsMap.get(n)||[];s.push(r),this.paramsMap.set(n,s)}appendAll(n){n.paramsMap.forEach((r,s)=>{const u=this.paramsMap.get(s)||[];for(let c=0;c<r.length;++c)u.push(r[c]);this.paramsMap.set(s,u)})}replaceAll(n){n.paramsMap.forEach((r,s)=>{const u=this.paramsMap.get(s)||[];u.length=0;for(let c=0;c<r.length;++c)u.push(r[c]);this.paramsMap.set(s,u)})}toString(){const n=[];return this.paramsMap.forEach((r,s)=>{r.forEach(u=>n.push(this.queryEncoder.encodeKey(s)+"="+this.queryEncoder.encodeValue(u)))}),n.join("&")}delete(n){this.paramsMap.delete(n)}}class V1{json(){return"string"==typeof this._body?JSON.parse(this._body):this._body instanceof ArrayBuffer?JSON.parse(this.text()):this._body}text(n="legacy"){if(this._body instanceof oh)return this._body.toString();if(this._body instanceof ArrayBuffer)switch(n){case"legacy":return String.fromCharCode.apply(null,new Uint16Array(this._body));case"iso-8859":return String.fromCharCode.apply(null,new Uint8Array(this._body));default:throw new Error(`Invalid value for encodingHint: ${n}`)}return null==this._body?"":"object"==typeof this._body?JSON.stringify(this._body,null,2):this._body.toString()}arrayBuffer(){return this._body instanceof ArrayBuffer?this._body:function(i){const n=new Uint16Array(i.length);for(let r=0,s=i.length;r<s;r++)n[r]=i.charCodeAt(r);return n.buffer}(this.text())}blob(){if(this._body instanceof Blob)return this._body;if(this._body instanceof ArrayBuffer)return new Blob([this._body]);throw new Error("The request body isn't either a blob or an array buffer")}}class pb extends V1{constructor(n){super(),this._body=n.body,this.status=n.status,this.ok=this.status>=200&&this.status<=299,this.statusText=n.statusText,this.headers=n.headers,this.type=n.type,this.url=n.url}toString(){return`Response with status: ${this.status} ${this.statusText} for URL: ${this.url}`}}const EB=/^\)\]\}',?\n/;class wB{constructor(n,r,s){this.request=n,this.response=new Ia.y(u=>{const c=r.build();c.open(wn[n.method].toUpperCase(),n.url),null!=n.withCredentials&&(c.withCredentials=n.withCredentials);const f=()=>{let C=1223===c.status?204:c.status,T=null;204!==C&&(T=void 0===c.response?c.responseText:c.response,"string"==typeof T&&(T=T.replace(EB,""))),0===C&&(C=T?200:0);const x=sh.fromResponseHeaderString(c.getAllResponseHeaders()),O=function(i){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(c)||n.url;let W=new cc({body:T,status:C,headers:x,statusText:c.statusText||"OK",url:O});null!=s&&(W=s.merge(W));const re=new pb(W);if(re.ok=(i=>i>=200&&i<300)(C),re.ok)return u.next(re),void u.complete();u.error(re)},m=C=>{let T=new cc({body:C,type:Fo.Error,status:c.status,statusText:c.statusText});null!=s&&(T=s.merge(T)),u.error(new pb(T))};if(this.setDetectedContentType(n,c),null==n.headers&&(n.headers=new sh),n.headers.has("Accept")||n.headers.append("Accept","application/json, text/plain, */*"),n.headers.forEach((C,T)=>c.setRequestHeader(T,C.join(","))),null!=n.responseType&&null!=c.responseType)switch(n.responseType){case Eu.ArrayBuffer:c.responseType="arraybuffer";break;case Eu.Json:c.responseType="json";break;case Eu.Text:c.responseType="text";break;case Eu.Blob:c.responseType="blob";break;default:throw new Error("The selected responseType is not supported")}return c.addEventListener("load",f),c.addEventListener("error",m),c.send(this.request.getBody()),()=>{c.removeEventListener("load",f),c.removeEventListener("error",m),c.abort()}})}setDetectedContentType(n,r){if(null==n.headers||null==n.headers.get("Content-Type"))switch(n.contentType){case en.NONE:break;case en.JSON:r.setRequestHeader("content-type","application/json");break;case en.FORM:r.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8");break;case en.TEXT:r.setRequestHeader("content-type","text/plain");break;case en.BLOB:const s=n.blob();s.type&&r.setRequestHeader("content-type",s.type)}}}class CB{constructor(n="XSRF-TOKEN",r="X-XSRF-TOKEN"){this._cookieName=n,this._headerName=r}configureRequest(n){const r=F().getCookie(this._cookieName);r&&n.headers.set(this._headerName,r)}}let U1=(()=>{class i{constructor(r,s,u){this._browserXHR=r,this._baseResponseOptions=s,this._xsrfStrategy=u}createConnection(r){return this._xsrfStrategy.configureRequest(r),new wB(r,this._browserXHR,this._baseResponseOptions)}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(P1),_.LFG(cc),_.LFG(k1))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class nl{get search(){return this.params}set search(n){this.params=n}constructor(n={}){const{method:r,headers:s,body:u,url:c,search:f,params:m,withCredentials:C,responseType:T}=n;this.method=null!=r?F1(r):null,this.headers=null!=s?s:null,this.body=null!=u?u:null,this.url=null!=c?c:null,this.params=this._mergeSearchParams(m||f),this.withCredentials=null!=C?C:null,this.responseType=null!=T?T:null}merge(n){return new nl({method:n&&null!=n.method?n.method:this.method,headers:n&&null!=n.headers?n.headers:new sh(this.headers),body:n&&null!=n.body?n.body:this.body,url:n&&null!=n.url?n.url:this.url,params:n&&this._mergeSearchParams(n.params||n.search),withCredentials:n&&null!=n.withCredentials?n.withCredentials:this.withCredentials,responseType:n&&null!=n.responseType?n.responseType:this.responseType})}_mergeSearchParams(n){return n?n instanceof oh?n.clone():"string"==typeof n?new oh(n):this._parseParams(n):this.params}_parseParams(n={}){const r=new oh;return Object.keys(n).forEach(s=>{const u=n[s];Array.isArray(u)?u.forEach(c=>this._appendParam(s,c,r)):this._appendParam(s,u,r)}),r}_appendParam(n,r,s){"string"!=typeof r&&(r=JSON.stringify(r)),s.append(n,r)}}let bB=(()=>{class i extends nl{constructor(){super({method:wn.Get,headers:new sh})}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();class ah extends V1{constructor(n){super();const r=n.url;this.url=n.url;const s=n.params||n.search;if(s){let u;if(u="object"!=typeof s||s instanceof oh?s.toString():function(i){const n=new oh;return Object.keys(i).forEach(r=>{const s=i[r];s&&Array.isArray(s)?s.forEach(u=>n.append(r,u.toString())):n.append(r,s.toString())}),n}(s).toString(),u.length>0){let c="?";-1!=this.url.indexOf("?")&&(c="&"==this.url[this.url.length-1]?"":"&"),this.url=r+c+u}}this._body=n.body,this.method=F1(n.method),this.headers=new sh(n.headers),this.contentType=this.detectContentType(),this.withCredentials=n.withCredentials,this.responseType=n.responseType}detectContentType(){switch(this.headers.get("content-type")){case"application/json":return en.JSON;case"application/x-www-form-urlencoded":return en.FORM;case"multipart/form-data":return en.FORM_DATA;case"text/plain":case"text/html":return en.TEXT;case"application/octet-stream":return this._body instanceof B1?en.ARRAY_BUFFER:en.BLOB;default:return this.detectContentTypeFromBody()}}detectContentTypeFromBody(){return null==this._body?en.NONE:this._body instanceof oh?en.FORM:this._body instanceof TB?en.FORM_DATA:this._body instanceof DB?en.BLOB:this._body instanceof B1?en.ARRAY_BUFFER:this._body&&"object"==typeof this._body?en.JSON:en.TEXT}getBody(){switch(this.contentType){case en.JSON:case en.FORM:return this.text();case en.FORM_DATA:return this._body;case en.TEXT:return this.text();case en.BLOB:return this.blob();case en.ARRAY_BUFFER:return this.arrayBuffer();default:return null}}}const xA=function(){},vM="object"==typeof window?window:xA,TB=vM.FormData||xA,DB=vM.Blob||xA,B1=vM.ArrayBuffer||xA;function j1(i,n){return i.createConnection(n).response}function xp(i,n,r,s){return i.merge(new nl(n?{method:n.method||r,url:n.url||s,search:n.search,params:n.params,headers:n.headers,body:n.body,withCredentials:n.withCredentials,responseType:n.responseType}:{method:r,url:s}))}let $1=(()=>{class i{constructor(r,s){this._backend=r,this._defaultOptions=s}request(r,s){let u;if("string"==typeof r)u=j1(this._backend,new ah(xp(this._defaultOptions,s,wn.Get,r)));else{if(!(r instanceof ah))throw new Error("First argument must be a url string or Request instance.");u=j1(this._backend,r)}return u}get(r,s){return this.request(new ah(xp(this._defaultOptions,s,wn.Get,r)))}post(r,s,u){return this.request(new ah(xp(this._defaultOptions.merge(new nl({body:s})),u,wn.Post,r)))}put(r,s,u){return this.request(new ah(xp(this._defaultOptions.merge(new nl({body:s})),u,wn.Put,r)))}delete(r,s){return this.request(new ah(xp(this._defaultOptions,s,wn.Delete,r)))}patch(r,s,u){return this.request(new ah(xp(this._defaultOptions.merge(new nl({body:s})),u,wn.Patch,r)))}head(r,s){return this.request(new ah(xp(this._defaultOptions,s,wn.Head,r)))}options(r,s){return this.request(new ah(xp(this._defaultOptions,s,wn.Options,r)))}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(dB),_.LFG(nl))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();function AB(){return new CB}function RB(i,n){return new $1(i,n)}let xB=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[{provide:$1,useFactory:RB,deps:[U1,nl]},P1,{provide:nl,useClass:bB},{provide:cc,useClass:cB},U1,{provide:k1,useFactory:AB}]}),i})();var Rs=U(4402),EM=U(4869),H1=U(6693),NB=U(4087);function Lt(...i){let n=i[i.length-1];return(0,EM.K)(n)?(i.pop(),(0,NB.r)(i,n)):(0,H1.n)(i)}var Np=U(9765),G1=U(7971);class rl extends Np.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new G1.N;return this._value}next(n){super.next(this._value=n)}}var wM=U(9796),il=U(7393);class OB extends il.L{notifyNext(n,r,s,u,c){this.destination.next(r)}notifyError(n,r){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class MB extends il.L{constructor(n,r,s){super(),this.parent=n,this.outerValue=r,this.outerIndex=s,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var PB=U(7444);function kB(i,n,r,s,u=new MB(i,r,s)){if(!u.closed)return n instanceof Ia.y?n.subscribe(u):(0,PB.s)(n)(u)}const W1={};class VB{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new UB(n,this.resultSelector))}}class UB extends OB{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(W1),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let s=0;s<r;s++)this.add(kB(this,n[s],void 0,s))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,s){const u=this.values,f=this.toRespond?u[s]===W1?--this.toRespond:this.toRespond:0;u[s]=r,0===f&&(this.resultSelector?this._tryResultSelector(u):this.destination.next(u.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}const NA=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();var OA=U(3282);function CM(...i){return(0,OA.J)(1)(Lt(...i))}const Gv=new Ia.y(i=>i.complete());function MA(i){return i?function(i){return new Ia.y(n=>i.schedule(()=>n.complete()))}(i):Gv}function q1(i){return new Ia.y(n=>{let r;try{r=i()}catch(u){return void n.error(u)}return(r?(0,Rs.D)(r):MA()).subscribe(n)})}var $B=U(2441),Jn=U(8002),Wv=U(5345);function Op(i,n){return"function"==typeof n?r=>r.pipe(Op((s,u)=>(0,Rs.D)(i(s,u)).pipe((0,Jn.U)((c,f)=>n(s,c,u,f))))):r=>r.lift(new HB(i))}class HB{constructor(n){this.project=n}call(n,r){return r.subscribe(new GB(n,this.project))}}class GB extends Wv.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const s=this.index++;try{r=this.project(n,s)}catch(u){return void this.destination.error(u)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new Wv.IY(this),u=this.destination;u.add(s),this.innerSubscription=(0,Wv.ft)(n,s),this.innerSubscription!==s&&u.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const z1=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();function bM(i){return n=>0===i?MA():n.lift(new WB(i))}class WB{constructor(n){if(this.total=n,this.total<0)throw new z1}call(n,r){return r.subscribe(new qB(n,this.total))}}class qB extends il.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,s=++this.count;s<=r&&(this.destination.next(n),s===r&&(this.destination.complete(),this.unsubscribe()))}}function K1(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(u){return u.lift(new KB(i,n,r))}}class KB{constructor(n,r,s=!1){this.accumulator=n,this.seed=r,this.hasSeed=s}call(n,r){return r.subscribe(new ZB(n,this.accumulator,this.seed,this.hasSeed))}}class ZB extends il.L{constructor(n,r,s,u){super(n),this.accumulator=r,this._seed=s,this.hasSeed=u,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let s;try{s=this.accumulator(this.seed,n,r)}catch(u){this.destination.error(u)}this.seed=s,this.destination.next(s)}}function qv(i,n){return function(s){return s.lift(new YB(i,n))}}class YB{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new QB(n,this.predicate,this.thisArg))}}class QB extends il.L{constructor(n,r,s){super(n),this.predicate=r,this.thisArg=s,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(s){return void this.destination.error(s)}r&&this.destination.next(n)}}function Qm(i){return function(r){const s=new JB(i),u=r.lift(s);return s.caught=u}}class JB{constructor(n){this.selector=n}call(n,r){return r.subscribe(new XB(n,this.selector,this.caught))}}class XB extends Wv.Ds{constructor(n,r,s){super(n),this.selector=r,this.caught=s}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const s=new Wv.IY(this);this.add(s);const u=(0,Wv.ft)(r,s);u!==s&&this.add(u)}}}var Xs=U(9773);function gb(i,n){return(0,Xs.zg)(i,n,1)}function IM(i){return function(r){return 0===i?MA():r.lift(new e2(i))}}class e2{constructor(n){if(this.total=n,this.total<0)throw new z1}call(n,r){return r.subscribe(new t2(n,this.total))}}class t2 extends il.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,s=this.total,u=this.count++;r.length<s?r.push(n):r[u%s]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const s=this.count>=this.total?this.total:this.count,u=this.ring;for(let c=0;c<s;c++){const f=r++%s;n.next(u[f])}}n.complete()}}function Z1(i=i2){return n=>n.lift(new n2(i))}class n2{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new r2(n,this.errorFactory))}}class r2 extends il.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function i2(){return new NA}function Y1(i=null){return n=>n.lift(new s2(i))}class s2{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new o2(n,this.defaultValue))}}class o2 extends il.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Q1=U(4487);function zv(i,n){const r=arguments.length>=2;return s=>s.pipe(i?qv((u,c)=>i(u,c,s)):Q1.y,bM(1),r?Y1(n):Z1(()=>new NA))}function Mp(){}var u2=U(9105);function Lo(i,n,r){return function(u){return u.lift(new l2(i,n,r))}}class l2{constructor(n,r,s){this.nextOrObserver=n,this.error=r,this.complete=s}call(n,r){return r.subscribe(new c2(n,this.nextOrObserver,this.error,this.complete))}}class c2 extends il.L{constructor(n,r,s,u){super(n),this._tapNext=Mp,this._tapError=Mp,this._tapComplete=Mp,this._tapError=s||Mp,this._tapComplete=u||Mp,(0,u2.m)(r)?(this._context=this,this._tapNext=r):r&&(this._context=r,this._tapNext=r.next||Mp,this._tapError=r.error||Mp,this._tapComplete=r.complete||Mp)}_next(n){try{this._tapNext.call(this._context,n)}catch(r){return void this.destination.error(r)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(r){return void this.destination.error(r)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}var d2=U(1307),mb=U(5319);class f2{constructor(n){this.callback=n}call(n,r){return r.subscribe(new p2(n,this.callback))}}class p2 extends il.L{constructor(n,r){super(n),this.add(new mb.w(r))}}class uh{constructor(n,r){this.id=n,this.url=r}}class TM extends uh{constructor(n,r,s="imperative",u=null){super(n,r),this.navigationTrigger=s,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _b extends uh{constructor(n,r,s){super(n,r),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class J1 extends uh{constructor(n,r,s){super(n,r),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class g2 extends uh{constructor(n,r,s){super(n,r),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class m2 extends uh{constructor(n,r,s,u){super(n,r),this.urlAfterRedirects=s,this.state=u}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _2 extends uh{constructor(n,r,s,u){super(n,r),this.urlAfterRedirects=s,this.state=u}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y2 extends uh{constructor(n,r,s,u,c){super(n,r),this.urlAfterRedirects=s,this.state=u,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class v2 extends uh{constructor(n,r,s,u){super(n,r),this.urlAfterRedirects=s,this.state=u}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E2 extends uh{constructor(n,r,s,u){super(n,r),this.urlAfterRedirects=s,this.state=u}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X1{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eF{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class w2{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C2{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b2{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I2{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tF{constructor(n,r,s){this.routerEvent=n,this.position=r,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const tn="primary";class T2{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function Kv(i){return new T2(i)}const nF="ngNavigationCancelingError";function DM(i){const n=Error("NavigationCancelingError: "+i);return n[nF]=!0,n}function S2(i,n,r){const s=r.path.split("/");if(s.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||s.length<i.length))return null;const u={};for(let c=0;c<s.length;c++){const f=s[c],m=i[c];if(f.startsWith(":"))u[f.substring(1)]=m;else if(f!==m.path)return null}return{consumed:i.slice(0,s.length),posParams:u}}function dc(i,n){const r=i?Object.keys(i):void 0,s=n?Object.keys(n):void 0;if(!r||!s||r.length!=s.length)return!1;let u;for(let c=0;c<r.length;c++)if(u=r[c],!rF(i[u],n[u]))return!1;return!0}function rF(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),s=[...n].sort();return r.every((u,c)=>s[c]===u)}return i===n}function iF(i){return Array.prototype.concat.apply([],i)}function sF(i){return i.length>0?i[i.length-1]:null}function us(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function hc(i){return(0,_.CqO)(i)?i:(0,_.QGY)(i)?(0,Rs.D)(Promise.resolve(i)):Lt(i)}const x2={exact:function uF(i,n,r){if(!Xm(i.segments,n.segments)||!PA(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children)if(!i.children[s]||!uF(i.children[s],n.children[s],r))return!1;return!0},subset:lF},oF={exact:function(i,n){return dc(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>rF(i[r],n[r]))},ignored:()=>!0};function aF(i,n,r){return x2[r.paths](i.root,n.root,r.matrixParams)&&oF[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function lF(i,n,r){return cF(i,n,n.segments,r)}function cF(i,n,r,s){if(i.segments.length>r.length){const u=i.segments.slice(0,r.length);return!(!Xm(u,r)||n.hasChildren()||!PA(u,r,s))}if(i.segments.length===r.length){if(!Xm(i.segments,r)||!PA(i.segments,r,s))return!1;for(const u in n.children)if(!i.children[u]||!lF(i.children[u],n.children[u],s))return!1;return!0}{const u=r.slice(0,i.segments.length),c=r.slice(i.segments.length);return!!(Xm(i.segments,u)&&PA(i.segments,u,s)&&i.children[tn])&&cF(i.children[tn],n,c,s)}}function PA(i,n,r){return n.every((s,u)=>oF[r](i[u].parameters,s.parameters))}class Jm{constructor(n,r,s){this.root=n,this.queryParams=r,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kv(this.queryParams)),this._queryParamMap}toString(){return k2.serialize(this)}}class cn{constructor(n,r){this.segments=n,this.children=r,this.parent=null,us(r,(s,u)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kA(this)}}class yb{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=Kv(this.parameters)),this._parameterMap}toString(){return pF(this)}}function Xm(i,n){return i.length===n.length&&i.every((r,s)=>r.path===n[s].path)}class SM{}class dF{parse(n){const r=new G2(n);return new Jm(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){return`${`/${vb(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const s=i[r];return Array.isArray(s)?s.map(u=>`${FA(r)}=${FA(u)}`).join("&"):`${FA(r)}=${FA(s)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${function(i){return encodeURI(i)}(n.fragment)}`:""}`}}const k2=new dF;function kA(i){return i.segments.map(n=>pF(n)).join("/")}function vb(i,n){if(!i.hasChildren())return kA(i);if(n){const r=i.children[tn]?vb(i.children[tn],!1):"",s=[];return us(i.children,(u,c)=>{c!==tn&&s.push(`${c}:${vb(u,!1)}`)}),s.length>0?`${r}(${s.join("//")})`:r}{const r=function(i,n){let r=[];return us(i.children,(s,u)=>{u===tn&&(r=r.concat(n(s,u)))}),us(i.children,(s,u)=>{u!==tn&&(r=r.concat(n(s,u)))}),r}(i,(s,u)=>u===tn?[vb(i.children[tn],!1)]:[`${u}:${vb(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[tn]?`${kA(i)}/${r[0]}`:`${kA(i)}/(${r.join("//")})`}}function hF(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function FA(i){return hF(i).replace(/%3B/gi,";")}function AM(i){return hF(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function LA(i){return decodeURIComponent(i)}function fF(i){return LA(i.replace(/\+/g,"%20"))}function pF(i){return`${AM(i.path)}${function(i){return Object.keys(i).map(n=>`;${AM(n)}=${AM(i[n])}`).join("")}(i.parameters)}`}const U2=/^[^\/()?;=#]+/;function VA(i){const n=i.match(U2);return n?n[0]:""}const B2=/^[^=?&#]+/,$2=/^[^?&#]+/;class G2{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(s[tn]=new cn(n,r)),s}parseSegment(){const n=VA(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new yb(LA(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=VA(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const u=VA(this.remaining);u&&(s=u,this.capture(s))}n[LA(r)]=LA(s)}parseQueryParam(n){const r=function(i){const n=i.match(B2);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const f=function(i){const n=i.match($2);return n?n[0]:""}(this.remaining);f&&(s=f,this.capture(s))}const u=fF(r),c=fF(s);if(n.hasOwnProperty(u)){let f=n[u];Array.isArray(f)||(f=[f],n[u]=f),f.push(c)}else n[u]=c}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=VA(this.remaining),u=this.remaining[s.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error(`Cannot parse url '${this.url}'`);let c;s.indexOf(":")>-1?(c=s.substr(0,s.indexOf(":")),this.capture(c),this.capture(":")):n&&(c=tn);const f=this.parseChildren();r[c]=1===Object.keys(f).length?f[tn]:new cn([],f),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class gF{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=RM(n,this._root);return r?r.children.map(s=>s.value):[]}firstChild(n){const r=RM(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=xM(n,this._root);return r.length<2?[]:r[r.length-2].children.map(u=>u.value).filter(u=>u!==n)}pathFromRoot(n){return xM(n,this._root).map(r=>r.value)}}function RM(i,n){if(i===n.value)return n;for(const r of n.children){const s=RM(i,r);if(s)return s}return null}function xM(i,n){if(i===n.value)return[n];for(const r of n.children){const s=xM(i,r);if(s.length)return s.unshift(n),s}return[]}class lh{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function Eb(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class mF extends gF{constructor(n,r){super(n),this.snapshot=r,NM(this,n)}toString(){return this.snapshot.toString()}}function _F(i,n){const r=function(i,n){const f=new UA([],{},{},"",{},tn,n,null,i.root,-1,{});return new vF("",new lh(f,[]))}(i,n),s=new rl([new yb("",{})]),u=new rl({}),c=new rl({}),f=new rl({}),m=new rl(""),C=new Zv(s,u,f,m,c,tn,n,r.root);return C.snapshot=r.root,new mF(new lh(C,[]),r)}class Zv{constructor(n,r,s,u,c,f,m,C){this.url=n,this.params=r,this.queryParams=s,this.fragment=u,this.data=c,this.outlet=f,this.component=m,this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Jn.U)(n=>Kv(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Jn.U)(n=>Kv(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yF(i,n="emptyOnly"){const r=i.pathFromRoot;let s=0;if("always"!==n)for(s=r.length-1;s>=1;){const u=r[s],c=r[s-1];if(u.routeConfig&&""===u.routeConfig.path)s--;else{if(c.component)break;s--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(s))}class UA{constructor(n,r,s,u,c,f,m,C,T,x,O){this.url=n,this.params=r,this.queryParams=s,this.fragment=u,this.data=c,this.outlet=f,this.component=m,this.routeConfig=C,this._urlSegment=T,this._lastPathIndex=x,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vF extends gF{constructor(n,r){super(r),this.url=n,NM(this,r)}toString(){return EF(this._root)}}function NM(i,n){n.value._routerState=i,n.children.forEach(r=>NM(i,r))}function EF(i){const n=i.children.length>0?` { ${i.children.map(EF).join(", ")} } `:"";return`${i.value}${n}`}function OM(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,dc(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),dc(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!dc(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),dc(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function MM(i,n){return dc(i.params,n.params)&&function(i,n){return Xm(i,n)&&i.every((r,s)=>dc(r.parameters,n[s].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||MM(i.parent,n.parent))}function BA(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const u=function(i,n,r){return n.children.map(s=>{for(const u of r.children)if(i.shouldReuseRoute(s.value,u.value.snapshot))return BA(i,s,u);return BA(i,s)})}(i,n,r);return new lh(s,u)}{if(i.shouldAttach(n.value)){const c=i.retrieve(n.value);if(null!==c){const f=c.route;return wF(n,f),f}}const s=function(i){return new Zv(new rl(i.url),new rl(i.params),new rl(i.queryParams),new rl(i.fragment),new rl(i.data),i.outlet,i.component,i)}(n.value),u=n.children.map(c=>BA(i,c));return new lh(s,u)}}function wF(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)wF(i.children[r],n.children[r])}function jA(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function wb(i){return"object"==typeof i&&null!=i&&i.outlets}function PM(i,n,r,s,u){let c={};return s&&us(s,(f,m)=>{c[m]=Array.isArray(f)?f.map(C=>`${C}`):`${f}`}),new Jm(r.root===i?n:CF(r.root,i,n),c,u)}function CF(i,n,r){const s={};return us(i.children,(u,c)=>{s[c]=u===n?r:CF(u,n,r)}),new cn(i.segments,s)}class bF{constructor(n,r,s){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=s,n&&s.length>0&&jA(s[0]))throw new Error("Root segment cannot have matrix parameters");const u=s.find(wb);if(u&&u!==sF(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kM{constructor(n,r,s){this.segmentGroup=n,this.processChildren=r,this.index=s}}function IF(i,n,r){if(i||(i=new cn([],{})),0===i.segments.length&&i.hasChildren())return $A(i,n,r);const s=function(i,n,r){let s=0,u=n;const c={match:!1,pathIndex:0,commandIndex:0};for(;u<i.segments.length;){if(s>=r.length)return c;const f=i.segments[u],m=r[s];if(wb(m))break;const C=`${m}`,T=s<r.length-1?r[s+1]:null;if(u>0&&void 0===C)break;if(C&&T&&"object"==typeof T&&void 0===T.outlets){if(!DF(C,T,f))return c;s+=2}else{if(!DF(C,{},f))return c;s++}u++}return{match:!0,pathIndex:u,commandIndex:s}}(i,n,r),u=r.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const c=new cn(i.segments.slice(0,s.pathIndex),{});return c.children[tn]=new cn(i.segments.slice(s.pathIndex),i.children),$A(c,0,u)}return s.match&&0===u.length?new cn(i.segments,{}):s.match&&!i.hasChildren()?FM(i,n,r):s.match?$A(i,0,u):FM(i,n,r)}function $A(i,n,r){if(0===r.length)return new cn(i.segments,{});{const s=function(i){return wb(i[0])?i[0].outlets:{[tn]:i}}(r),u={};return us(s,(c,f)=>{"string"==typeof c&&(c=[c]),null!==c&&(u[f]=IF(i.children[f],n,c))}),us(i.children,(c,f)=>{void 0===s[f]&&(u[f]=c)}),new cn(i.segments,u)}}function FM(i,n,r){const s=i.segments.slice(0,n);let u=0;for(;u<r.length;){const c=r[u];if(wb(c)){const C=nj(c.outlets);return new cn(s,C)}if(0===u&&jA(r[0])){s.push(new yb(i.segments[n].path,TF(r[0]))),u++;continue}const f=wb(c)?c.outlets[tn]:`${c}`,m=u<r.length-1?r[u+1]:null;f&&m&&jA(m)?(s.push(new yb(f,TF(m))),u+=2):(s.push(new yb(f,{})),u++)}return new cn(s,{})}function nj(i){const n={};return us(i,(r,s)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[s]=FM(new cn([],{}),0,r))}),n}function TF(i){const n={};return us(i,(r,s)=>n[s]=`${r}`),n}function DF(i,n,r){return i==r.path&&dc(n,r.parameters)}class ij{constructor(n,r,s,u){this.routeReuseStrategy=n,this.futureState=r,this.currState=s,this.forwardEvent=u}activate(n){const r=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,s,n),OM(this.futureState.root),this.activateChildRoutes(r,s,n)}deactivateChildRoutes(n,r,s){const u=Eb(r);n.children.forEach(c=>{const f=c.value.outlet;this.deactivateRoutes(c,u[f],s),delete u[f]}),us(u,(c,f)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(n,r,s){const u=n.value,c=r?r.value:null;if(u===c)if(u.component){const f=s.getContext(u.outlet);f&&this.deactivateChildRoutes(n,r,f.children)}else this.deactivateChildRoutes(n,r,s);else c&&this.deactivateRouteAndItsChildren(r,s)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const s=r.getContext(n.value.outlet);if(s&&s.outlet){const u=s.outlet.detach(),c=s.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:u,route:n,contexts:c})}}deactivateRouteAndOutlet(n,r){const s=r.getContext(n.value.outlet),u=s&&n.value.component?s.children:r,c=Eb(n);for(const f of Object.keys(c))this.deactivateRouteAndItsChildren(c[f],u);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(n,r,s){const u=Eb(r);n.children.forEach(c=>{this.activateRoutes(c,u[c.value.outlet],s),this.forwardEvent(new I2(c.value.snapshot))}),n.children.length&&this.forwardEvent(new C2(n.value.snapshot))}activateRoutes(n,r,s){const u=n.value,c=r?r.value:null;if(OM(u),u===c)if(u.component){const f=s.getOrCreateContext(u.outlet);this.activateChildRoutes(n,r,f.children)}else this.activateChildRoutes(n,r,s);else if(u.component){const f=s.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const m=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),f.children.onOutletReAttached(m.contexts),f.attachRef=m.componentRef,f.route=m.route.value,f.outlet&&f.outlet.attach(m.componentRef,m.route.value),SF(m.route)}else{const m=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(u.snapshot),C=m?m.module.componentFactoryResolver:null;f.attachRef=null,f.route=u,f.resolver=C,f.outlet&&f.outlet.activateWith(u,C),this.activateChildRoutes(n,null,f.children)}}else this.activateChildRoutes(n,null,s)}}function SF(i){OM(i.value),i.children.forEach(SF)}class LM{constructor(n,r){this.routes=n,this.module=r}}function Pp(i){return"function"==typeof i}function e_(i){return i instanceof Jm}const Cb=Symbol("INITIAL_VALUE");function bb(){return Op(i=>function(...i){let n,r;return(0,EM.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,wM.k)(i[0])&&(i=i[0]),(0,H1.n)(i,r).lift(new VB(n))}(i.map(n=>n.pipe(bM(1),function(...i){const n=i[i.length-1];return(0,EM.K)(n)?(i.pop(),r=>CM(i,r,n)):r=>CM(i,r)}(Cb)))).pipe(K1((n,r)=>{let s=!1;return r.reduce((u,c,f)=>u!==Cb?u:(c===Cb&&(s=!0),s||!1!==c&&f!==r.length-1&&!e_(c)?u:c),n)},Cb),qv(n=>n!==Cb),(0,Jn.U)(n=>e_(n)?n:!0===n),bM(1)))}let AF=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=_.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,s){1&r&&_._UZ(0,"router-outlet")},directives:function(){return[$M]},encapsulation:2}),i})();function RF(i,n=""){for(let r=0;r<i.length;r++){const s=i[r];dj(s,hj(n,s))}}function dj(i,n){i.children&&RF(i.children,n)}function hj(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function VM(i){const n=i.children&&i.children.map(VM),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==tn&&(r.component=AF),r}function wu(i){return i.outlet||tn}function xF(i,n){const r=i.filter(s=>wu(s)===n);return r.push(...i.filter(s=>wu(s)!==n)),r}const NF={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function HA(i,n,r){var s;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},NF):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(n.matcher||S2)(r,i,n);if(!c)return Object.assign({},NF);const f={};us(c.posParams,(C,T)=>{f[T]=C.path});const m=c.consumed.length>0?Object.assign(Object.assign({},f),c.consumed[c.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:m,positionalParamSegments:null!==(s=c.posParams)&&void 0!==s?s:{}}}function GA(i,n,r,s,u="corrected"){if(r.length>0&&function(i,n,r){return r.some(s=>WA(i,n,s)&&wu(s)!==tn)}(i,r,s)){const f=new cn(n,function(i,n,r,s){const u={};u[tn]=s,s._sourceSegment=i,s._segmentIndexShift=n.length;for(const c of r)if(""===c.path&&wu(c)!==tn){const f=new cn([],{});f._sourceSegment=i,f._segmentIndexShift=n.length,u[wu(c)]=f}return u}(i,n,s,new cn(r,i.children)));return f._sourceSegment=i,f._segmentIndexShift=n.length,{segmentGroup:f,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(s=>WA(i,n,s))}(i,r,s)){const f=new cn(i.segments,function(i,n,r,s,u,c){const f={};for(const m of s)if(WA(i,r,m)&&!u[wu(m)]){const C=new cn([],{});C._sourceSegment=i,C._segmentIndexShift="legacy"===c?i.segments.length:n.length,f[wu(m)]=C}return Object.assign(Object.assign({},u),f)}(i,n,r,s,i.children,u));return f._sourceSegment=i,f._segmentIndexShift=n.length,{segmentGroup:f,slicedSegments:r}}const c=new cn(i.segments,i.children);return c._sourceSegment=i,c._segmentIndexShift=n.length,{segmentGroup:c,slicedSegments:r}}function WA(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function OF(i,n,r,s){return!!(wu(i)===s||s!==tn&&WA(n,r,i))&&("**"===i.path||HA(n,i,r).matched)}function MF(i,n,r){return 0===n.length&&!i.children[r]}class Ib{constructor(n){this.segmentGroup=n||null}}class PF{constructor(n){this.urlTree=n}}function qA(i){return new Ia.y(n=>n.error(new Ib(i)))}function kF(i){return new Ia.y(n=>n.error(new PF(i)))}function _j(i){return new Ia.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class Ej{constructor(n,r,s,u,c){this.configLoader=r,this.urlSerializer=s,this.urlTree=u,this.config=c,this.allowRedirects=!0,this.ngModule=n.get(_.h0i)}apply(){const n=GA(this.urlTree.root,[],[],this.config).segmentGroup,r=new cn(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,tn).pipe((0,Jn.U)(c=>this.createUrlTree(UM(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qm(c=>{if(c instanceof PF)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Ib?this.noMatchError(c):c}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,tn).pipe((0,Jn.U)(u=>this.createUrlTree(UM(u),n.queryParams,n.fragment))).pipe(Qm(u=>{throw u instanceof Ib?this.noMatchError(u):u}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,s){const u=n.segments.length>0?new cn([],{[tn]:n}):n;return new Jm(u,r,s)}expandSegmentGroup(n,r,s,u){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe((0,Jn.U)(c=>new cn([],c))):this.expandSegment(n,s,r,s.segments,u,!0)}expandChildren(n,r,s){const u=[];for(const c of Object.keys(s.children))"primary"===c?u.unshift(c):u.push(c);return(0,Rs.D)(u).pipe(gb(c=>{const f=s.children[c],m=xF(r,c);return this.expandSegmentGroup(n,m,f,c).pipe((0,Jn.U)(C=>({segment:C,outlet:c})))}),K1((c,f)=>(c[f.outlet]=f.segment,c),{}),function(i,n){const r=arguments.length>=2;return s=>s.pipe(i?qv((u,c)=>i(u,c,s)):Q1.y,IM(1),r?Y1(n):Z1(()=>new NA))}())}expandSegment(n,r,s,u,c,f){return(0,Rs.D)(s).pipe(gb(m=>this.expandSegmentAgainstRoute(n,r,s,m,u,c,f).pipe(Qm(T=>{if(T instanceof Ib)return Lt(null);throw T}))),zv(m=>!!m),Qm((m,C)=>{if(m instanceof NA||"EmptyError"===m.name){if(MF(r,u,c))return Lt(new cn([],{}));throw new Ib(r)}throw m}))}expandSegmentAgainstRoute(n,r,s,u,c,f,m){return OF(u,r,c,f)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(n,r,u,c,f):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,s,u,c,f):qA(r):qA(r)}expandSegmentAgainstRouteUsingRedirect(n,r,s,u,c,f){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,s,u,f):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,u,c,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,s,u){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?kF(c):this.lineralizeSegments(s,c).pipe((0,Xs.zg)(f=>{const m=new cn(f,{});return this.expandSegment(n,m,r,f,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,u,c,f){const{matched:m,consumedSegments:C,lastChild:T,positionalParamSegments:x}=HA(r,u,c);if(!m)return qA(r);const O=this.applyRedirectCommands(C,u.redirectTo,x);return u.redirectTo.startsWith("/")?kF(O):this.lineralizeSegments(u,O).pipe((0,Xs.zg)(L=>this.expandSegment(n,r,s,L.concat(c.slice(T)),f,!1)))}matchSegmentAgainstRoute(n,r,s,u,c){if("**"===s.path)return s.loadChildren?(s._loadedConfig?Lt(s._loadedConfig):this.configLoader.load(n.injector,s)).pipe((0,Jn.U)(L=>(s._loadedConfig=L,new cn(u,{})))):Lt(new cn(u,{}));const{matched:f,consumedSegments:m,lastChild:C}=HA(r,s,u);if(!f)return qA(r);const T=u.slice(C);return this.getChildConfig(n,s,u).pipe((0,Xs.zg)(O=>{const L=O.module,W=O.routes,{segmentGroup:re,slicedSegments:Me}=GA(r,m,T,W),qe=new cn(re.segments,re.children);if(0===Me.length&&qe.hasChildren())return this.expandChildren(L,W,qe).pipe((0,Jn.U)(nn=>new cn(m,nn)));if(0===W.length&&0===Me.length)return Lt(new cn(m,{}));const ht=wu(s)===c;return this.expandSegment(L,qe,W,Me,ht?tn:c,!0).pipe((0,Jn.U)(vn=>new cn(m.concat(vn.segments),vn.children)))}))}getChildConfig(n,r,s){return r.children?Lt(new LM(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?Lt(r._loadedConfig):this.runCanLoadGuards(n.injector,r,s).pipe((0,Xs.zg)(u=>u?this.configLoader.load(n.injector,r).pipe((0,Jn.U)(c=>(r._loadedConfig=c,c))):function(i){return new Ia.y(n=>n.error(DM(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(r))):Lt(new LM([],n))}runCanLoadGuards(n,r,s){const u=r.canLoad;return u&&0!==u.length?Lt(u.map(f=>{const m=n.get(f);let C;if(function(i){return i&&Pp(i.canLoad)}(m))C=m.canLoad(r,s);else{if(!Pp(m))throw new Error("Invalid CanLoad guard");C=m(r,s)}return hc(C)})).pipe(bb(),Lo(f=>{if(!e_(f))return;const m=DM(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw m.url=f,m}),(0,Jn.U)(f=>!0===f)):Lt(!0)}lineralizeSegments(n,r){let s=[],u=r.root;for(;;){if(s=s.concat(u.segments),0===u.numberOfChildren)return Lt(s);if(u.numberOfChildren>1||!u.children[tn])return _j(n.redirectTo);u=u.children[tn]}}applyRedirectCommands(n,r,s){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,s)}applyRedirectCreatreUrlTree(n,r,s,u){const c=this.createSegmentGroup(n,r.root,s,u);return new Jm(c,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const s={};return us(n,(u,c)=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);s[c]=r[m]}else s[c]=u}),s}createSegmentGroup(n,r,s,u){const c=this.createSegments(n,r.segments,s,u);let f={};return us(r.children,(m,C)=>{f[C]=this.createSegmentGroup(n,m,s,u)}),new cn(c,f)}createSegments(n,r,s,u){return r.map(c=>c.path.startsWith(":")?this.findPosParam(n,c,u):this.findOrReturn(c,s))}findPosParam(n,r,s){const u=s[r.path.substring(1)];if(!u)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return u}findOrReturn(n,r){let s=0;for(const u of r){if(u.path===n.path)return r.splice(s),u;s++}return n}}function UM(i){const n={};for(const s of Object.keys(i.children)){const c=UM(i.children[s]);(c.segments.length>0||c.hasChildren())&&(n[s]=c)}return function(i){if(1===i.numberOfChildren&&i.children[tn]){const n=i.children[tn];return new cn(i.segments.concat(n.segments),n.children)}return i}(new cn(i.segments,n))}class FF{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class zA{constructor(n,r){this.component=n,this.route=r}}function bj(i,n,r){const s=i._root;return Tb(s,n?n._root:null,r,[s.value])}function KA(i,n,r){const s=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(s?s.module.injector:r).get(i)}function Tb(i,n,r,s,u={canDeactivateChecks:[],canActivateChecks:[]}){const c=Eb(n);return i.children.forEach(f=>{(function(i,n,r,s,u={canDeactivateChecks:[],canActivateChecks:[]}){const c=i.value,f=n?n.value:null,m=r?r.getContext(i.value.outlet):null;if(f&&c.routeConfig===f.routeConfig){const C=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!Xm(i.url,n.url);case"pathParamsOrQueryParamsChange":return!Xm(i.url,n.url)||!dc(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MM(i,n)||!dc(i.queryParams,n.queryParams);case"paramsChange":default:return!MM(i,n)}}(f,c,c.routeConfig.runGuardsAndResolvers);C?u.canActivateChecks.push(new FF(s)):(c.data=f.data,c._resolvedData=f._resolvedData),Tb(i,n,c.component?m?m.children:null:r,s,u),C&&m&&m.outlet&&m.outlet.isActivated&&u.canDeactivateChecks.push(new zA(m.outlet.component,f))}else f&&Db(n,m,u),u.canActivateChecks.push(new FF(s)),Tb(i,null,c.component?m?m.children:null:r,s,u)})(f,c[f.value.outlet],r,s.concat([f.value]),u),delete c[f.value.outlet]}),us(c,(f,m)=>Db(f,r.getContext(m),u)),u}function Db(i,n,r){const s=Eb(i),u=i.value;us(s,(c,f)=>{Db(c,u.component?n?n.children.getContext(f):null:n,r)}),r.canDeactivateChecks.push(new zA(u.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,u))}class Fj{}function LF(i){return new Ia.y(n=>n.error(i))}class Vj{constructor(n,r,s,u,c,f){this.rootComponentType=n,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f}recognize(){const n=GA(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,tn);if(null===r)return null;const s=new UA([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},tn,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new lh(s,r),c=new vF(this.url,u);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(n){const r=n.value,s=yF(r,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),n.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(n,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,s)}processChildren(n,r){const s=[];for(const c of Object.keys(r.children)){const f=r.children[c],m=xF(n,c),C=this.processSegmentGroup(m,f,c);if(null===C)return null;s.push(...C)}const u=VF(s);return function(i){i.sort((n,r)=>n.value.outlet===tn?-1:r.value.outlet===tn?1:n.value.outlet.localeCompare(r.value.outlet))}(u),u}processSegment(n,r,s,u){for(const c of n){const f=this.processSegmentAgainstRoute(c,r,s,u);if(null!==f)return f}return MF(r,s,u)?[]:null}processSegmentAgainstRoute(n,r,s,u){if(n.redirectTo||!OF(n,r,s,u))return null;let c,f=[],m=[];if("**"===n.path){const W=s.length>0?sF(s).parameters:{};c=new UA(s,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jF(n),wu(n),n.component,n,UF(r),BF(r)+s.length,$F(n))}else{const W=HA(r,n,s);if(!W.matched)return null;f=W.consumedSegments,m=s.slice(W.lastChild),c=new UA(f,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jF(n),wu(n),n.component,n,UF(r),BF(r)+f.length,$F(n))}const C=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(n),{segmentGroup:T,slicedSegments:x}=GA(r,f,m,C.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===x.length&&T.hasChildren()){const W=this.processChildren(C,T);return null===W?null:[new lh(c,W)]}if(0===C.length&&0===x.length)return[new lh(c,[])];const O=wu(n)===u,L=this.processSegment(C,T,x,O?tn:u);return null===L?null:[new lh(c,L)]}}function jj(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function VF(i){const n=[],r=new Set;for(const s of i){if(!jj(s)){n.push(s);continue}const u=n.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==u?(u.children.push(...s.children),r.add(u)):n.push(s)}for(const s of r){const u=VF(s.children);n.push(new lh(s.value,u))}return n.filter(s=>!r.has(s))}function UF(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function BF(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function jF(i){return i.data||{}}function $F(i){return i.resolve||{}}function BM(i){return Op(n=>{const r=i(n);return r?(0,Rs.D)(r).pipe((0,Jn.U)(()=>n)):Lt(n)})}class Zj extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const jM=new _.OlP("ROUTES");class HF{constructor(n,r,s,u){this.loader=n,this.compiler=r,this.onLoadStartListener=s,this.onLoadEndListener=u}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactory(r.loadChildren).pipe((0,Jn.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);const f=c.create(n);return new LM(iF(f.injector.get(jM,void 0,_.XFs.Self|_.XFs.Optional)).map(VM),f)}),Qm(c=>{throw r._loader$=void 0,c}));return r._loader$=new $B.c(u,()=>new Np.xQ).pipe((0,d2.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,Rs.D)(this.loader.load(n)):hc(n()).pipe((0,Xs.zg)(r=>r instanceof _.YKP?Lt(r):(0,Rs.D)(this.compiler.compileModuleAsync(r))))}}class Yj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Yv,this.attachRef=null}}class Yv{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Yj,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class Jj{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function Xj(i){throw i}function e$(i,n,r){return n.parse("/")}function GF(i,n){return Lt(null)}const t$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},n$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xi=(()=>{class i{constructor(r,s,u,c,f,m,C,T){this.rootComponentType=r,this.urlSerializer=s,this.rootContexts=u,this.location=c,this.config=T,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Np.xQ,this.errorHandler=Xj,this.malformedUriErrorHandler=e$,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:GF,afterPreactivation:GF},this.urlHandlingStrategy=new Jj,this.routeReuseStrategy=new Zj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(_.h0i),this.console=f.get(_.c2e);const L=f.get(_.R0b);this.isNgZoneEnabled=L instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(T),this.currentUrlTree=new Jm(new cn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new HF(m,C,W=>this.triggerEvent(new X1(W)),W=>this.triggerEvent(new eF(W))),this.routerState=_F(this.currentUrlTree,this.rootComponentType),this.transitions=new rl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const s=this.events;return r.pipe(qv(u=>0!==u.id),(0,Jn.U)(u=>Object.assign(Object.assign({},u),{extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Op(u=>{let c=!1,f=!1;return Lt(u).pipe(Lo(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Op(m=>{const C=this.browserUrlTree.toString(),T=!this.navigated||m.extractedUrl.toString()!==C||C!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ZA(m.source)&&(this.browserUrlTree=m.extractedUrl),Lt(m).pipe(Op(O=>{const L=this.transitions.getValue();return s.next(new TM(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),L!==this.transitions.getValue()?Gv:Promise.resolve(O)}),function(i,n,r,s){return Op(u=>function(i,n,r,s,u){return new Ej(i,n,r,s,u).apply()}(i,n,r,u.extractedUrl,s).pipe((0,Jn.U)(c=>Object.assign(Object.assign({},u),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Lo(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(i,n,r,s,u){return(0,Xs.zg)(c=>function(i,n,r,s,u="emptyOnly",c="legacy"){try{const f=new Vj(i,n,r,s,u,c).recognize();return null===f?LF(new Fj):Lt(f)}catch(f){return LF(f)}}(i,n,c.urlAfterRedirects,r(c.urlAfterRedirects),s,u).pipe((0,Jn.U)(f=>Object.assign(Object.assign({},c),{targetSnapshot:f}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),Lo(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const L=new m2(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);s.next(L)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:W,source:re,restoredState:Me,extras:qe}=m,ht=new TM(L,this.serializeUrl(W),re,Me);s.next(ht);const Ot=_F(W,this.rootComponentType).snapshot;return Lt(Object.assign(Object.assign({},m),{targetSnapshot:Ot,urlAfterRedirects:W,extras:Object.assign(Object.assign({},qe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,this.browserUrlTree=m.urlAfterRedirects,m.resolve(null),Gv}),BM(m=>{const{targetSnapshot:C,id:T,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:L,replaceUrl:W}}=m;return this.hooks.beforePreactivation(C,{navigationId:T,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!L,replaceUrl:!!W})}),Lo(m=>{const C=new _2(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(C)}),(0,Jn.U)(m=>Object.assign(Object.assign({},m),{guards:bj(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(i,n){return(0,Xs.zg)(r=>{const{targetSnapshot:s,currentSnapshot:u,guards:{canActivateChecks:c,canDeactivateChecks:f}}=r;return 0===f.length&&0===c.length?Lt(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,s){return(0,Rs.D)(i).pipe((0,Xs.zg)(u=>function(i,n,r,s,u){const c=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return c&&0!==c.length?Lt(c.map(m=>{const C=KA(m,n,u);let T;if(function(i){return i&&Pp(i.canDeactivate)}(C))T=hc(C.canDeactivate(i,n,r,s));else{if(!Pp(C))throw new Error("Invalid CanDeactivate guard");T=hc(C(i,n,r,s))}return T.pipe(zv())})).pipe(bb()):Lt(!0)}(u.component,u.route,r,n,s)),zv(u=>!0!==u,!0))}(f,s,u,i).pipe((0,Xs.zg)(m=>m&&function(i){return"boolean"==typeof i}(m)?function(i,n,r,s){return(0,Rs.D)(n).pipe(gb(u=>CM(function(i,n){return null!==i&&n&&n(new w2(i)),Lt(!0)}(u.route.parent,s),function(i,n){return null!==i&&n&&n(new b2(i)),Lt(!0)}(u.route,s),function(i,n,r){const s=n[n.length-1],c=n.slice(0,n.length-1).reverse().map(f=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(f)).filter(f=>null!==f).map(f=>q1(()=>Lt(f.guards.map(C=>{const T=KA(C,f.node,r);let x;if(function(i){return i&&Pp(i.canActivateChild)}(T))x=hc(T.canActivateChild(s,i));else{if(!Pp(T))throw new Error("Invalid CanActivateChild guard");x=hc(T(s,i))}return x.pipe(zv())})).pipe(bb())));return Lt(c).pipe(bb())}(i,u.path,r),function(i,n,r){const s=n.routeConfig?n.routeConfig.canActivate:null;return s&&0!==s.length?Lt(s.map(c=>q1(()=>{const f=KA(c,n,r);let m;if(function(i){return i&&Pp(i.canActivate)}(f))m=hc(f.canActivate(n,i));else{if(!Pp(f))throw new Error("Invalid CanActivate guard");m=hc(f(n,i))}return m.pipe(zv())}))).pipe(bb()):Lt(!0)}(i,u.route,r))),zv(u=>!0!==u,!0))}(s,c,i,n):Lt(m)),(0,Jn.U)(m=>Object.assign(Object.assign({},r),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),Lo(m=>{if(e_(m.guardsResult)){const T=DM(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw T.url=m.guardsResult,T}const C=new y2(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(C)}),qv(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),BM(m=>{if(m.guards.canActivateChecks.length)return Lt(m).pipe(Lo(C=>{const T=new v2(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(T)}),Op(C=>{let T=!1;return Lt(C).pipe(function(i,n){return(0,Xs.zg)(r=>{const{targetSnapshot:s,guards:{canActivateChecks:u}}=r;if(!u.length)return Lt(r);let c=0;return(0,Rs.D)(u).pipe(gb(f=>function(i,n,r,s){return function(i,n,r,s){const u=Object.keys(i);if(0===u.length)return Lt({});const c={};return(0,Rs.D)(u).pipe((0,Xs.zg)(f=>function(i,n,r,s){const u=KA(i,n,s);return hc(u.resolve?u.resolve(n,r):u(n,r))}(i[f],n,r,s).pipe(Lo(m=>{c[f]=m}))),IM(1),(0,Xs.zg)(()=>Object.keys(c).length===u.length?Lt(c):Gv))}(i._resolve,i,n,s).pipe((0,Jn.U)(c=>(i._resolvedData=c,i.data=Object.assign(Object.assign({},i.data),yF(i,r).resolve),null)))}(f.route,s,i,n)),Lo(()=>c++),IM(1),(0,Xs.zg)(f=>c===u.length?Lt(r):Gv))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Lo({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(C),this.cancelNavigationTransition(C,"At least one route resolver didn't emit any value."))}}))}),Lo(C=>{const T=new E2(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(T)}))}),BM(m=>{const{targetSnapshot:C,id:T,extractedUrl:x,rawUrl:O,extras:{skipLocationChange:L,replaceUrl:W}}=m;return this.hooks.afterPreactivation(C,{navigationId:T,appliedUrlTree:x,rawUrlTree:O,skipLocationChange:!!L,replaceUrl:!!W})}),(0,Jn.U)(m=>{const C=function(i,n,r){const s=BA(i,n._root,r?r._root:void 0);return new mF(s,n)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:C})}),Lo(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((i,n,r)=>(0,Jn.U)(s=>(new ij(n,s.targetRouterState,s.currentRouterState,r).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),Lo({next(){c=!0},complete(){c=!0}}),function(i){return n=>n.lift(new f2(i))}(()=>{if(!c&&!f){const m=`Navigation ID ${u.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(u),this.cancelNavigationTransition(u,m)):this.cancelNavigationTransition(u,m)}this.currentNavigation=null}),Qm(m=>{if(f=!0,function(i){return i&&i[nF]}(m)){const C=e_(m.url);C||(this.navigated=!0,this.restoreHistory(u,!0));const T=new J1(u.id,this.serializeUrl(u.extractedUrl),m.message);s.next(T),C?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),O={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ZA(u.source)};this.scheduleNavigation(x,"imperative",null,O,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{this.restoreHistory(u,!0);const C=new g2(u.id,this.serializeUrl(u.extractedUrl),m);s.next(C);try{u.resolve(this.errorHandler(m))}catch(T){u.reject(T)}}return Gv}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const s=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:u,state:c,urlTree:f}=s,m={replaceUrl:!0};if(c){const C=Object.assign({},c);delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(m.state=C)}this.scheduleNavigation(f,u,c,m)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(r){var s;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(s=r.state)||void 0===s?void 0:s.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,s){if(!r)return!0;const u=s.urlTree.toString()===r.urlTree.toString();return s.transitionId!==r.transitionId||!u||!("hashchange"===s.source&&"popstate"===r.source||"popstate"===s.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){RF(r),this.config=r.map(VM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,s={}){const{relativeTo:u,queryParams:c,fragment:f,queryParamsHandling:m,preserveFragment:C}=s,T=u||this.routerState.root,x=C?this.currentUrlTree.fragment:f;let O=null;switch(m){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=c||null}return null!==O&&(O=this.removeEmptyProps(O)),function(i,n,r,s,u){if(0===r.length)return PM(n.root,n.root,n,s,u);const c=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new bF(!0,0,i);let n=0,r=!1;const s=i.reduce((u,c,f)=>{if("object"==typeof c&&null!=c){if(c.outlets){const m={};return us(c.outlets,(C,T)=>{m[T]="string"==typeof C?C.split("/"):C}),[...u,{outlets:m}]}if(c.segmentPath)return[...u,c.segmentPath]}return"string"!=typeof c?[...u,c]:0===f?(c.split("/").forEach((m,C)=>{0==C&&"."===m||(0==C&&""===m?r=!0:".."===m?n++:""!=m&&u.push(m))}),u):[...u,c]},[]);return new bF(r,n,s)}(r);if(c.toRoot())return PM(n.root,new cn([],{}),n,s,u);const f=function(i,n,r){if(i.isAbsolute)return new kM(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const c=r.snapshot._urlSegment;return new kM(c,c===n.root,0)}const s=jA(i.commands[0])?0:1;return function(i,n,r){let s=i,u=n,c=r;for(;c>u;){if(c-=u,s=s.parent,!s)throw new Error("Invalid number of '../'");u=s.segments.length}return new kM(s,!1,u-c)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(c,n,i),m=f.processChildren?$A(f.segmentGroup,f.index,c.commands):IF(f.segmentGroup,f.index,c.commands);return PM(f.segmentGroup,m,n,s,u)}(T,this.currentUrlTree,r,O,null!=x?x:null)}navigateByUrl(r,s={skipLocationChange:!1}){const u=e_(r)?r:this.parseUrl(r),c=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(r,s={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let s;try{s=this.urlSerializer.parse(r)}catch(u){s=this.malformedUriErrorHandler(u,this.urlSerializer,r)}return s}isActive(r,s){let u;if(u=!0===s?Object.assign({},t$):!1===s?Object.assign({},n$):s,e_(r))return aF(this.currentUrlTree,r,u);const c=this.parseUrl(r);return aF(this.currentUrlTree,c,u)}removeEmptyProps(r){return Object.keys(r).reduce((s,u)=>{const c=r[u];return null!=c&&(s[u]=c),s},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new _b(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,s,u,c,f){var m,C;if(this.disposed)return Promise.resolve(!1);const T=this.getTransition(),x=ZA(s)&&T&&!ZA(T.source),W=(this.lastSuccessfulId===T.id||this.currentNavigation?T.rawUrl:T.urlAfterRedirects).toString()===r.toString();if(x&&W)return Promise.resolve(!0);let re,Me,qe;f?(re=f.resolve,Me=f.reject,qe=f.promise):qe=new Promise((vn,nn)=>{re=vn,Me=nn});const ht=++this.navigationId;let Ot;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),Ot=u&&u.\u0275routerPageId?u.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):Ot=0,this.setTransition({id:ht,targetPageId:Ot,source:s,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:c,resolve:re,reject:Me,promise:qe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qe.catch(vn=>Promise.reject(vn))}setBrowserUrl(r,s){const u=this.urlSerializer.serialize(r),c=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(u)||s.extras.replaceUrl?this.location.replaceState(u,"",c):this.location.go(u,"",c)}restoreHistory(r,s=!1){var u,c;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)||0===f?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===f&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,s){const u=new J1(r.id,this.serializeUrl(r.extractedUrl),s);this.triggerEvent(u),r.resolve(!1)}generateNgRouterState(r,s){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.DyG),_.LFG(SM),_.LFG(Yv),_.LFG(pt),_.LFG(_.zs3),_.LFG(_.v3s),_.LFG(_.Sil),_.LFG(void 0))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();function ZA(i){return"imperative"!==i}let YA=(()=>{class i{constructor(r,s,u,c,f){this.router=r,this.route=s,this.commands=[],this.onChanges=new Np.xQ,null==u&&c.setAttribute(f.nativeElement,"tabindex","0")}ngOnChanges(r){this.onChanges.next(this)}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}onClick(){const r={skipLocationChange:Jv(this.skipLocationChange),replaceUrl:Jv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jv(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(xi),_.Y36(Zv),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},i.\u0275dir=_.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(r,s){1&r&&_.NdJ("click",function(){return s.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[_.TTD]}),i})(),Qv=(()=>{class i{constructor(r,s,u){this.router=r,this.route=s,this.locationStrategy=u,this.commands=[],this.onChanges=new Np.xQ,this.subscription=r.events.subscribe(c=>{c instanceof _b&&this.updateTargetUrlAndHref()})}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}ngOnChanges(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(r,s,u,c,f){if(0!==r||s||u||c||f||"string"==typeof this.target&&"_self"!=this.target)return!0;const m={skipLocationChange:Jv(this.skipLocationChange),replaceUrl:Jv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jv(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(xi),_.Y36(Zv),_.Y36(ve))},i.\u0275dir=_.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(r,s){1&r&&_.NdJ("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&(_.Ikx("href",s.href,_.LSH),_.uIk("target",s.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[_.TTD]}),i})();function Jv(i){return""===i||!!i}let WF=(()=>{class i{constructor(r,s,u,c,f,m){this.router=r,this.element=s,this.renderer=u,this.cdr=c,this.link=f,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=r.events.subscribe(C=>{C instanceof _b&&this.update()})}ngAfterContentInit(){Lt(this.links.changes,this.linksWithHrefs.changes,Lt(null)).pipe((0,OA.J)()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var r;null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe();const s=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(u=>!!u).map(u=>u.onChanges);this.linkInputChangesSubscription=(0,Rs.D)(s).pipe((0,OA.J)()).subscribe(u=>{this.isActive!==this.isLinkActive(this.router)(u)&&this.update()})}set routerLinkActive(r){const s=Array.isArray(r)?r:r.split(" ");this.classes=s.filter(u=>!!u)}ngOnChanges(r){this.update()}ngOnDestroy(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const r=this.hasActiveLinks();this.isActive!==r&&(this.isActive=r,this.cdr.markForCheck(),this.classes.forEach(s=>{r?this.renderer.addClass(this.element.nativeElement,s):this.renderer.removeClass(this.element.nativeElement,s)}))})}isLinkActive(r){const s=function(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return u=>r.isActive(u.urlTree,s)}hasActiveLinks(){const r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(xi),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(YA,8),_.Y36(Qv,8))},i.\u0275dir=_.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,u){if(1&r&&(_.Suo(u,YA,5),_.Suo(u,Qv,5)),2&r){let c;_.iGM(c=_.CRH())&&(s.links=c),_.iGM(c=_.CRH())&&(s.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[_.TTD]}),i})(),$M=(()=>{class i{constructor(r,s,u,c,f){this.parentContexts=r,this.location=s,this.resolver=u,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.name=c||tn,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const f=(s=s||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,C=new s$(r,m,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,C),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Yv),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},i.\u0275dir=_.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class s${constructor(n,r,s){this.route=n,this.childContexts=r,this.parent=s}get(n,r){return n===Zv?this.route:n===Yv?this.childContexts:this.parent.get(n,r)}}class qF{}class zF{preload(n,r){return Lt(null)}}let KF=(()=>{class i{constructor(r,s,u,c,f){this.router=r,this.injector=c,this.preloadingStrategy=f,this.loader=new HF(s,u,T=>r.triggerEvent(new X1(T)),T=>r.triggerEvent(new eF(T)))}setUpPreloading(){this.subscription=this.router.events.pipe(qv(r=>r instanceof _b),gb(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(_.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){const u=[];for(const c of s)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const f=c._loadedConfig;u.push(this.processRoutes(f.module,f.routes))}else c.loadChildren&&!c.canLoad?u.push(this.preloadConfig(r,c)):c.children&&u.push(this.processRoutes(r,c.children));return(0,Rs.D)(u).pipe((0,OA.J)(),(0,Jn.U)(c=>{}))}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?Lt(s._loadedConfig):this.loader.load(r.injector,s)).pipe((0,Xs.zg)(c=>(s._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(xi),_.LFG(_.v3s),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(qF))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),HM=(()=>{class i{constructor(r,s,u={}){this.router=r,this.viewportScroller=s,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof TM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof _b&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof tF&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.router.triggerEvent(new tF(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(xi),_.LFG($o),_.LFG(void 0))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();const t_=new _.OlP("ROUTER_CONFIGURATION"),ZF=new _.OlP("ROUTER_FORROOT_GUARD"),u$=[pt,{provide:SM,useClass:dF},{provide:xi,useFactory:function(i,n,r,s,u,c,f,m={},C,T){const x=new xi(null,i,n,r,s,u,c,iF(f));return C&&(x.urlHandlingStrategy=C),T&&(x.routeReuseStrategy=T),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(m,x),m.enableTracing&&x.events.subscribe(O=>{var L,W;null===(L=console.group)||void 0===L||L.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(W=console.groupEnd)||void 0===W||W.call(console)}),x},deps:[SM,Yv,pt,_.zs3,_.v3s,_.Sil,jM,t_,[class{},new _.FiY],[class{},new _.FiY]]},Yv,{provide:Zv,useFactory:function(i){return i.routerState.root},deps:[xi]},{provide:_.v3s,useClass:_.EAV},KF,zF,class{preload(n,r){return r().pipe(Qm(()=>Lt(null)))}},{provide:t_,useValue:{enableTracing:!1}}];function l$(){return new _.PXZ("Router",xi)}let GM=(()=>{class i{constructor(r,s){}static forRoot(r,s){return{ngModule:i,providers:[u$,YF(r),{provide:ZF,useFactory:h$,deps:[[xi,new _.FiY,new _.tp0]]},{provide:t_,useValue:s||{}},{provide:ve,useFactory:d$,deps:[xe,[new _.tBr(fe),new _.FiY],t_]},{provide:HM,useFactory:c$,deps:[xi,$o,t_]},{provide:qF,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:zF},{provide:_.PXZ,multi:!0,useFactory:l$},[WM,{provide:_.ip1,multi:!0,useFactory:m$,deps:[WM]},{provide:QF,useFactory:_$,deps:[WM]},{provide:_.tb,multi:!0,useExisting:QF}]]}}static forChild(r){return{ngModule:i,providers:[YF(r)]}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(ZF,8),_.LFG(xi,8))},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({}),i})();function c$(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new HM(i,n,r)}function d$(i,n,r={}){return r.useHash?new Be(i,n):new ie(i,n)}function h$(i){return"guarded"}function YF(i){return[{provide:_.deG,multi:!0,useValue:i},{provide:jM,multi:!0,useValue:i}]}let WM=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Np.xQ}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const u=new Promise(m=>s=m),c=this.injector.get(xi),f=this.injector.get(t_);return"disabled"===f.initialNavigation?(c.setUpLocationChangeListener(),s(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?Lt(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),c.initialNavigation()):s(!0),u})}bootstrapListener(r){const s=this.injector.get(t_),u=this.injector.get(KF),c=this.injector.get(HM),f=this.injector.get(xi),m=this.injector.get(_.z2F);r===m.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&f.initialNavigation(),u.setUpPreloading(),c.init(),f.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(_.zs3))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();function m$(i){return i.appInitializer.bind(i)}function _$(i){return i.bootstrapListener.bind(i)}const QF=new _.OlP("Router Initializer"),v$=[];let E$=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[[GM.forRoot(v$)],GM]}),i})(),w$=(()=>{class i{constructor(r){this.afs=r,this.title="firestore"}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(GN))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){1&r&&_._UZ(0,"router-outlet")},directives:[$M],styles:[""]}),i})();var C$=U(1555);function QA(i,n){return new Ia.y(r=>{const s=i.length;if(0===s)return void r.complete();const u=new Array(s);let c=0,f=0;for(let m=0;m<s;m++){const C=(0,Rs.D)(i[m]);let T=!1;r.add(C.subscribe({next:x=>{T||(T=!0,f++),u[m]=x},error:x=>r.error(x),complete:()=>{c++,(c===s||!T)&&(f===s&&r.next(n?n.reduce((x,O,L)=>(x[O]=u[L],x),{}):u),r.complete())}}))}})}let JF=(()=>{class i{constructor(r,s){this._renderer=r,this._elementRef=s,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(r,s){this._renderer.setProperty(this._elementRef.nativeElement,r,s)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.Qsj),_.Y36(_.SBq))},i.\u0275dir=_.lG2({type:i}),i})(),n_=(()=>{class i extends JF{}return i.\u0275fac=function(){let n;return function(s){return(n||(n=_.n5z(i)))(s||i)}}(),i.\u0275dir=_.lG2({type:i,features:[_.qOj]}),i})();const fc=new _.OlP("NgValueAccessor"),T$={provide:fc,useExisting:(0,_.Gpc)(()=>Sb),multi:!0},S$=new _.OlP("CompositionEventMode");let Sb=(()=>{class i extends JF{constructor(r,s,u){super(r,s),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=F()?F().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(S$,8))},i.\u0275dir=_.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&_.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[_._Bn([T$]),_.qOj]}),i})();const xs=new _.OlP("NgValidators"),Fp=new _.OlP("NgAsyncValidators");function lL(i){return null!=i}function cL(i){const n=(0,_.QGY)(i)?(0,Rs.D)(i):i;return(0,_.CqO)(n),n}function dL(i){let n={};return i.forEach(r=>{n=null!=r?Object.assign(Object.assign({},n),r):n}),0===Object.keys(n).length?null:n}function hL(i,n){return n.map(r=>r(i))}function fL(i){return i.map(n=>function(i){return!i.validate}(n)?n:r=>n.validate(r))}function qM(i){return null!=i?function(i){if(!i)return null;const n=i.filter(lL);return 0==n.length?null:function(r){return dL(hL(r,n))}}(fL(i)):null}function zM(i){return null!=i?function(i){if(!i)return null;const n=i.filter(lL);return 0==n.length?null:function(r){return function(...i){if(1===i.length){const n=i[0];if((0,wM.k)(n))return QA(n,null);if((0,C$.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const r=Object.keys(n);return QA(r.map(s=>n[s]),r)}}if("function"==typeof i[i.length-1]){const n=i.pop();return QA(i=1===i.length&&(0,wM.k)(i[0])?i[0]:i,null).pipe((0,Jn.U)(r=>n(...r)))}return QA(i,null)}(hL(r,n).map(cL)).pipe((0,Jn.U)(dL))}}(fL(i)):null}function mL(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function KM(i){return i?Array.isArray(i)?i:[i]:[]}function JA(i,n){return Array.isArray(i)?i.includes(n):i===n}function vL(i,n){const r=KM(n);return KM(i).forEach(u=>{JA(r,u)||r.push(u)}),r}function EL(i,n){return KM(n).filter(r=>!JA(i,r))}let wL=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=qM(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=zM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,s){return!!this.control&&this.control.hasError(r,s)}getError(r,s){return this.control?this.control.getError(r,s):null}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=_.lG2({type:i}),i})(),eo=(()=>{class i extends wL{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=_.n5z(i)))(s||i)}}(),i.\u0275dir=_.lG2({type:i,features:[_.qOj]}),i})();class Vp extends wL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class CL{constructor(n){this._cd=n}is(n){var r,s,u;return"submitted"===n?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(u=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===u?void 0:u[n])}}let ZM=(()=>{class i extends CL{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(Vp,2))},i.\u0275dir=_.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&_.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[_.qOj]}),i})(),YM=(()=>{class i extends CL{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(eo,10))},i.\u0275dir=_.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&_.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))("ng-submitted",s.is("submitted"))},features:[_.qOj]}),i})();function Ab(i,n){XM(i,n),n.valueAccessor.writeValue(i.value),function(i,n){n.valueAccessor.registerOnChange(r=>{i._pendingValue=r,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&bL(i,n)})}(i,n),function(i,n){const r=(s,u)=>{n.valueAccessor.writeValue(s),u&&n.viewToModelUpdate(s)};i.registerOnChange(r),n._registerOnDestroy(()=>{i._unregisterOnChange(r)})}(i,n),function(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&bL(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function(i,n){if(n.valueAccessor.setDisabledState){const r=s=>{n.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(r),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(r)})}}(i,n)}function nR(i,n){i.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function XM(i,n){const r=function(i){return i._rawValidators}(i);null!==n.validator?i.setValidators(mL(r,n.validator)):"function"==typeof r&&i.setValidators([r]);const s=function(i){return i._rawAsyncValidators}(i);null!==n.asyncValidator?i.setAsyncValidators(mL(s,n.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const u=()=>i.updateValueAndValidity();nR(n._rawValidators,u),nR(n._rawAsyncValidators,u)}function bL(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function iR(i,n){const r=i.indexOf(n);r>-1&&i.splice(r,1)}const Rb="VALID",sR="INVALID",Xv="PENDING",xb="DISABLED";function nP(i){return(iP(i)?i.validators:i)||null}function DL(i){return Array.isArray(i)?qM(i):i||null}function rP(i,n){return(iP(n)?n.asyncValidators:i)||null}function SL(i){return Array.isArray(i)?zM(i):i||null}function iP(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class sP{constructor(n,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=r,this._composedValidatorFn=DL(this._rawValidators),this._composedAsyncValidatorFn=SL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Rb}get invalid(){return this.status===sR}get pending(){return this.status==Xv}get disabled(){return this.status===xb}get enabled(){return this.status!==xb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=DL(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=SL(n)}addValidators(n){this.setValidators(vL(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(vL(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(EL(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(EL(n,this._rawAsyncValidators))}hasValidator(n){return JA(this._rawValidators,n)}hasAsyncValidator(n){return JA(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Xv,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=xb,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=Rb,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rb||this.status===Xv)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xb:Rb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Xv,this._hasOwnPendingAsyncValidator=!0;const r=cL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(!1!==r.emitEvent)}get(n){return function(i,n,r){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let s=i;return n.forEach(u=>{s=s instanceof oP?s.controls.hasOwnProperty(u)?s.controls[u]:null:s instanceof j$&&s.at(u)||null}),s}(this,n)}getError(n,r){const s=r?this.get(r):this;return s&&s.errors?s.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?xb:this.errors?sR:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xv)?Xv:this._anyControlsHaveStatus(sR)?sR:Rb}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){iP(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class oR extends sP{constructor(n=null,r,s){super(nP(r),rP(s,r)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=null,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){iR(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){iR(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class oP extends sP{constructor(n,r,s){super(nP(r),rP(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,r){return this.controls[n]?this.controls[n]:(this.controls[n]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(n,r,s={}){this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],r&&this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,r={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(Object.keys(n).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n={},r={}){this._forEachChild((s,u)=>{s.reset(n[u],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(n,r,s)=>(n[s]=r instanceof oR?r.value:r.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(r,s)=>!!s._syncPendingControls()||r);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(r=>{const s=this.controls[r];s&&n(s,r)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const r of Object.keys(this.controls)){const s=this.controls[r];if(this.contains(r)&&n(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,r,s)=>((r.enabled||this.disabled)&&(n[s]=r.value),n))}_reduceChildren(n,r){let s=n;return this._forEachChild((u,c)=>{s=r(s,u,c)}),s}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class j$ extends sP{constructor(n,r,s){super(nP(r),rP(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,r={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(n,r,s={}){this.controls.splice(n,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,r={}){this._checkAllValuesPresent(n),n.forEach((s,u)=>{this._throwIfControlMissing(u),this.at(u).setValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(n.forEach((s,u)=>{this.at(u)&&this.at(u).patchValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n=[],r={}){this._forEachChild((s,u)=>{s.reset(n[u],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(n=>n instanceof oR?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((r,s)=>!!s._syncPendingControls()||r,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((r,s)=>{n(r,s)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(r=>r.enabled&&n(r))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const $$={provide:eo,useExisting:(0,_.Gpc)(()=>Ob)},Nb=(()=>Promise.resolve(null))();let Ob=(()=>{class i extends eo{constructor(r,s){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new _.vpe,this.form=new oP({},qM(r),zM(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Nb.then(()=>{const s=this._findContainer(r.path);r.control=s.registerControl(r.name,r.control),Ab(r.control,r),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Nb.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name),iR(this._directives,r)})}addFormGroup(r){Nb.then(()=>{const s=this._findContainer(r.path),u=new oP({});(function(i,n){XM(i,n)})(u,r),s.registerControl(r.name,u),u.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Nb.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,s){Nb.then(()=>{this.form.get(r.path).setValue(s)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,function(i,n){i._syncPendingControls(),n.forEach(r=>{const s=r.control;"submit"===s.updateOn&&s._pendingChange&&(r.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(xs,10),_.Y36(Fp,10))},i.\u0275dir=_.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&_.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([$$]),_.qOj]}),i})();const G$={provide:Vp,useExisting:(0,_.Gpc)(()=>aR)},xL=(()=>Promise.resolve(null))();let aR=(()=>{class i extends Vp{constructor(r,s,u,c){super(),this.control=new oR,this._registered=!1,this.update=new _.vpe,this._parent=r,this._setValidators(s),this._setAsyncValidators(u),this.valueAccessor=function(i,n){if(!n)return null;let r,s,u;return Array.isArray(n),n.forEach(c=>{c.constructor===Sb?r=c:function(i){return Object.getPrototypeOf(i.constructor)===n_}(c)?s=c:u=c}),u||s||r||null}(0,c)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(i,n){if(!i.hasOwnProperty("model"))return!1;const r=i.model;return!!r.isFirstChange()||!Object.is(n,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(i,n){return[...n.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ab(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){xL.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const s=r.isDisabled.currentValue,u=""===s||s&&"false"!==s;xL.then(()=>{u&&!this.control.disabled?this.control.disable():!u&&this.control.disabled&&this.control.enable()})}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(eo,9),_.Y36(xs,10),_.Y36(Fp,10),_.Y36(fc,10))},i.\u0275dir=_.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([G$]),_.qOj,_.TTD]}),i})(),aP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=_.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),OL=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({}),i})();const uH={provide:xs,useExisting:(0,_.Gpc)(()=>Mb),multi:!0};let Mb=(()=>{class i{constructor(){this._required=!1}get required(){return this._required}set required(r){this._required=null!=r&&!1!==r&&"false"!=`${r}`,this._onChange&&this._onChange()}validate(r){return this.required?function(i){return function(i){return null==i||0===i.length}(i.value)?{required:!0}:null}(r):null}registerOnValidatorChange(r){this._onChange=r}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=_.lG2({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){2&r&&_.uIk("required",s.required?"":null)},inputs:{required:"required"},features:[_._Bn([uH])]}),i})(),ZL=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[[OL]]}),i})(),pH=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({imports:[ZL]}),i})(),gH=(()=>{class i{constructor(r,s){this.afAuth=r,this.router=s}canActivate(){return Lt(this.afAuth).pipe((0,Jn.U)(r=>!!r),Lo(r=>{this.router.navigate(r?["/members"]:["/login"])}))}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(fu),_.LFG(xi))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})();U(1093);class mH extends mb.w{constructor(n,r){super()}schedule(n,r=0){return this}}class _H extends mH{constructor(n,r){super(n,r),this.scheduler=n,this.work=r,this.pending=!1}schedule(n,r=0){if(this.closed)return this;this.state=n;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(u,this.id,r),this}requestAsyncId(n,r,s=0){return setInterval(n.flush.bind(n,this),s)}recycleAsyncId(n,r,s=0){if(null!==s&&this.delay===s&&!1===this.pending)return r;clearInterval(r)}execute(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(n,r);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,r){let u,s=!1;try{this.work(n)}catch(c){s=!0,u=!!c&&c||new Error(c)}if(s)return this.unsubscribe(),u}_unsubscribe(){const n=this.id,r=this.scheduler,s=r.actions,u=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==u&&s.splice(u,1),null!=n&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null}}let YL=(()=>{class i{constructor(r,s=i.now){this.SchedulerAction=r,this.now=s}schedule(r,s=0,u){return new this.SchedulerAction(this,r).schedule(u,s)}}return i.now=()=>Date.now(),i})();class Up extends YL{constructor(n,r=YL.now){super(n,()=>Up.delegate&&Up.delegate!==this?Up.delegate.now():r()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,r=0,s){return Up.delegate&&Up.delegate!==this?Up.delegate.schedule(n,r,s):super.schedule(n,r,s)}flush(n){const{actions:r}=this;if(this.active)return void r.push(n);let s;this.active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=r.shift());if(this.active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}}}const EH=new class extends Up{}(class extends _H{constructor(n,r){super(n,r),this.scheduler=n,this.work=r}schedule(n,r=0){return r>0?super.schedule(n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)}execute(n,r){return r>0||this.closed?super.execute(n,r):this._execute(n,r)}requestAsyncId(n,r,s=0){return null!==s&&s>0||null===s&&this.delay>0?super.requestAsyncId(n,r,s):n.flush(this)}});class Cu{constructor(n,r,s){this.kind=n,this.value=r,this.error=s,this.hasValue="N"===n}observe(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}}do(n,r,s){switch(this.kind){case"N":return n&&n(this.value);case"E":return r&&r(this.error);case"C":return s&&s()}}accept(n,r,s){return n&&"function"==typeof n.next?this.observe(n):this.do(n,r,s)}toObservable(){switch(this.kind){case"N":return Lt(this.value);case"E":return function(i,n){return new Ia.y(r=>r.error(i))}(this.error);case"C":return MA()}throw new Error("unexpected notification kind value")}static createNext(n){return void 0!==n?new Cu("N",n):Cu.undefinedValueNotification}static createError(n){return new Cu("E",void 0,n)}static createComplete(){return Cu.completeNotification}}Cu.completeNotification=new Cu("C"),Cu.undefinedValueNotification=new Cu("N",void 0);class uR extends il.L{constructor(n,r,s=0){super(n),this.scheduler=r,this.delay=s}static dispatch(n){const{notification:r,destination:s}=n;r.observe(s),this.unsubscribe()}scheduleMessage(n){this.destination.add(this.scheduler.schedule(uR.dispatch,this.delay,new IH(n,this.destination)))}_next(n){this.scheduleMessage(Cu.createNext(n))}_error(n){this.scheduleMessage(Cu.createError(n)),this.unsubscribe()}_complete(){this.scheduleMessage(Cu.createComplete()),this.unsubscribe()}}class IH{constructor(n,r){this.notification=n,this.destination=r}}var TH=U(8858);class DH extends Np.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new SH(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,s=r?this._events:this._trimBufferThenGetEvents(),u=this.scheduler,c=s.length;let f;if(this.closed)throw new G1.N;if(this.isStopped||this.hasError?f=mb.w.EMPTY:(this.observers.push(n),f=new TH.W(this,n)),u&&n.add(n=new uR(n,u)),r)for(let m=0;m<c&&!n.closed;m++)n.next(s[m]);else for(let m=0;m<c&&!n.closed;m++)n.next(s[m].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),f}_getNow(){return(this.scheduler||EH).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,s=this._windowTime,u=this._events,c=u.length;let f=0;for(;f<c&&!(n-u[f].time<s);)f++;return c>r&&(f=Math.max(f,c-r)),f>0&&u.splice(0,f),u}}class SH{constructor(n,r){this.time=n,this.value=r}}class AH extends Np.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(n){return this.hasError?(n.error(this.thrownError),mb.w.EMPTY):this.hasCompleted&&this.hasNext?(n.next(this.value),n.complete(),mb.w.EMPTY):super._subscribe(n)}next(n){this.hasCompleted||(this.value=n,this.hasNext=!0)}error(n){this.hasCompleted||super.error(n)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}class QL{constructor(){}loadScript(n,r,s,u=null){if("undefined"!=typeof document&&!document.getElementById(n)){let c=document.createElement("script");c.async=!0,c.src=r,c.onload=s,u||(u=document.head),u.appendChild(c)}}}class lR{}let RH=(()=>{class i extends QL{constructor(r,s={scope:"email"}){super(),this.clientId=r,this.initOptions=s}initialize(){return new Promise((r,s)=>{try{this.loadScript(i.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})),this.auth2.then(()=>{r()}).catch(u=>{s(u)})})})}catch(u){s(u)}})}getLoginStatus(r){const s=Object.assign(Object.assign({},this.initOptions),r);return new Promise((u,c)=>{if(this.auth2.isSignedIn.get()){let f=new lR;const m=this.auth2.currentUser.get().getBasicProfile(),C=this.auth2.currentUser.get().getAuthResponse(!0);f.id=m.getId(),f.name=m.getName(),f.email=m.getEmail(),f.photoUrl=m.getImageUrl(),f.firstName=m.getGivenName(),f.lastName=m.getFamilyName(),f.response=C;const T=x=>{f.authToken=x.access_token,f.idToken=x.id_token,u(f)};s.refreshToken?this.auth2.currentUser.get().reloadAuthResponse().then(T):T(this.auth2.currentUser.get().getAuthResponse(!0))}else c(`No user is currently logged in with ${i.PROVIDER_ID}`)})}signIn(r){const s=Object.assign(Object.assign({},this.initOptions),r);return new Promise((u,c)=>{(s&&s.offline_access?this.auth2.grantOfflineAccess(r):this.auth2.signIn(r)).then(C=>{let T=new lR;if(C&&C.code)T.authorizationCode=C.code;else{let x=this.auth2.currentUser.get().getBasicProfile(),O=this.auth2.currentUser.get().getAuthResponse(!0),L=O.access_token,W=O.id_token;T.id=x.getId(),T.name=x.getName(),T.email=x.getEmail(),T.photoUrl=x.getImageUrl(),T.firstName=x.getGivenName(),T.lastName=x.getFamilyName(),T.authToken=L,T.idToken=W,T.response=O}u(T)},C=>{c(C)}).catch(C=>{c(C)})})}signOut(r){return new Promise((s,u)=>{let c;c=r?this.auth2.disconnect():this.auth2.signOut(),c.then(f=>{f?u(f):s()}).catch(f=>{u(f)})})}}return i.PROVIDER_ID="GOOGLE",i})(),pP=(()=>{class i{constructor(r){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new DH(1),this.initialized=!1,this._initState=new AH,r instanceof Promise?r.then(s=>{this.initialize(s)}):this.initialize(r)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(r){this.autoLogin=void 0!==r.autoLogin&&r.autoLogin;const{onError:s=console.error}=r;r.providers.forEach(u=>{this.providers.set(u.id,u.provider)}),Promise.all(Array.from(this.providers.values()).map(u=>u.initialize())).then(()=>{if(this.autoLogin){const u=[];let c=!1;this.providers.forEach((f,m)=>{let C=f.getLoginStatus();u.push(C),C.then(T=>{T.provider=m,this._user=T,this._authState.next(T),c=!0}).catch(console.debug)}),Promise.all(u).catch(()=>{c||(this._user=null,this._authState.next(null))})}}).catch(u=>{s(u)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(r){return new Promise((s,u)=>{if(this.initialized)if(r!==RH.PROVIDER_ID)u(i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const c=this.providers.get(r);c?c.getLoginStatus({refreshToken:!0}).then(f=>{f.provider=r,this._user=f,this._authState.next(f),s()}).catch(f=>{u(f)}):u(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else u(i.ERR_NOT_INITIALIZED)})}signIn(r,s){return new Promise((u,c)=>{if(this.initialized){let f=this.providers.get(r);f?f.signIn(s).then(m=>{m.provider=r,u(m),this._user=m,this._authState.next(m)}).catch(m=>{c(m)}):c(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else c(i.ERR_NOT_INITIALIZED)})}signOut(r=!1){return new Promise((s,u)=>{if(this.initialized)if(this._user){let f=this.providers.get(this._user.provider);f?f.signOut(r).then(()=>{s(),this._user=null,this._authState.next(null)}).catch(m=>{u(m)}):u(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else u(i.ERR_NOT_LOGGED_IN);else u(i.ERR_NOT_INITIALIZED)})}}return i.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",i.ERR_NOT_LOGGED_IN="Not logged in",i.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",i.\u0275fac=function(r){return new(r||i)(_.LFG("SocialAuthServiceConfig"))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})(),xH=(()=>{class i{constructor(r){if(r)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(r){return{ngModule:i,providers:[pP,{provide:"SocialAuthServiceConfig",useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)(_.LFG(i,12))},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[pP],imports:[[Sa]]}),i})(),gP=(()=>{class i extends QL{constructor(r,s={}){super(),this.clientId=r,this.requestOptions={scope:"email,public_profile",locale:"en_US",fields:"name,email,picture,first_name,last_name",version:"v10.0"},this.requestOptions=Object.assign(Object.assign({},this.requestOptions),s)}initialize(){return new Promise((r,s)=>{try{this.loadScript(i.PROVIDER_ID,`//connect.facebook.net/${this.requestOptions.locale}/sdk.js`,()=>{FB.init({appId:this.clientId,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this.requestOptions.version}),r()})}catch(u){s(u)}})}getLoginStatus(){return new Promise((r,s)=>{FB.getLoginStatus(u=>{if("connected"===u.status){let c=u.authResponse;FB.api(`/me?fields=${this.requestOptions.fields}`,f=>{let m=new lR;m.id=f.id,m.name=f.name,m.email=f.email,m.photoUrl="https://graph.facebook.com/"+f.id+"/picture?type=normal&access_token="+c.accessToken,m.firstName=f.first_name,m.lastName=f.last_name,m.authToken=c.accessToken,m.response=f,r(m)})}else s(`No user is currently logged in with ${i.PROVIDER_ID}`)})})}signIn(r){const s=Object.assign(Object.assign({},this.requestOptions),r);return new Promise((u,c)=>{FB.login(f=>{if(f.authResponse){let m=f.authResponse;FB.api(`/me?fields=${s.fields}`,C=>{let T=new lR;T.id=C.id,T.name=C.name,T.email=C.email,T.photoUrl="https://graph.facebook.com/"+C.id+"/picture?type=normal",T.firstName=C.first_name,T.lastName=C.last_name,T.authToken=m.accessToken,T.response=C,u(T)})}else c("User cancelled login or did not fully authorize.")},s)})}signOut(){return new Promise((r,s)=>{FB.logout(u=>{r()})})}}return i.PROVIDER_ID="FACEBOOK",i})();function NH(i,n){if(1&i&&(_.TgZ(0,"span",7),_._uU(1),_.qZA()),2&i){const r=_.oxw();_.xp6(1),_.Oqu(r.error)}}let OH=(()=>{class i{constructor(r,s,u){this.afAuth=r,this.router=s,this.socialAuthService=u,this.afAuth.authState.subscribe(c=>{c&&this.router.navigateByUrl("/members")})}loginFacebook(){Yd.Z.auth().signInWithPopup(new Yd.Z.auth.FacebookAuthProvider).then(r=>{console.log("Going to members"),this.router.navigate(["./members"])}).catch(r=>{this.error=r,console.log(this.error)})}loginFb(){this.socialAuthService.signIn(gP.PROVIDER_ID).then(r=>{console.log("Going to members"),this.router.navigate(["./members"])}).catch(r=>{this.error=r,console.log(this.error)})}loginGoogle(){Yd.Z.auth().signInWithPopup(new Yd.Z.auth.GoogleAuthProvider).then(r=>{console.log("Going to members"),this.router.navigate(["./members"])}).catch(r=>{this.error=r})}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(fu),_.Y36(xi),_.Y36(pP))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-login"]],decls:14,vars:1,consts:[[1,"form-container"],["src","../../assets/images/alice.png","id","lock"],["class","error",4,"ngIf"],["id","fb",3,"click"],["id","google",3,"click"],["routerLink","/login-email","id","email"],["routerLink","/signup","routerLinkActive","active",1,"alc"],[1,"error"]],template:function(r,s){1&r&&(_.TgZ(0,"div",0),_._UZ(1,"img",1),_.YNc(2,NH,2,1,"span",2),_.TgZ(3,"button",3),_.NdJ("click",function(){return s.loginFb()}),_._uU(4,"Login With Facebook"),_.qZA(),_._UZ(5,"br"),_.TgZ(6,"button",4),_.NdJ("click",function(){return s.loginGoogle()}),_._uU(7,"Login With Google"),_.qZA(),_.TgZ(8,"button",5),_._uU(9,"Email"),_.qZA(),_.TgZ(10,"a",6),_._uU(11,"No account? "),_.TgZ(12,"strong"),_._uU(13,"Create one here"),_.qZA(),_.qZA(),_.qZA()),2&r&&(_.xp6(2),_.Q6J("ngIf",s.error))},directives:[_i,YA,Qv,WF],styles:["#lock[_ngcontent-%COMP%]{width:40%;margin:1.5em auto 4em;display:block}#fb[_ngcontent-%COMP%]{background:#3B5998 url(facebook.4a455df5ba8390917507.png) no-repeat 14px 6px;background-size:47px;color:#fff}#google[_ngcontent-%COMP%]{border:1px solid #95989A;background:#fff url(google.4ef50377ac0e48c9ed2b.png) no-repeat 25px;background-size:25px}#email[_ngcontent-%COMP%]{background:#ECECEC url(email.c8c4a694f5fe21503d26.jpeg) no-repeat 25px;background-size:25px}@media (max-width: 600px){#page[_ngcontent-%COMP%]{padding:1em}#toolbar[_ngcontent-%COMP%]{width:90%;margin-left:-45%}#fb[_ngcontent-%COMP%]{background:#3B5998}#google[_ngcontent-%COMP%]{background:#fff}#email[_ngcontent-%COMP%]{background:#ECECEC}}"]}),i})(),MH=(()=>{class i{constructor(r,s){this.afAuth=r,this.router=s,this.state="",this.afAuth.authState.subscribe(u=>{u&&(this.name=u.displayName)})}logout(){this.afAuth.signOut(),console.log("logged out"),this.router.navigateByUrl("/login")}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(fu),_.Y36(xi))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-members"]],decls:7,vars:3,consts:[["id","toolbar",1,"form-container"],[1,"basic-btn",3,"click"],["id","page"]],template:function(r,s){1&r&&(_.TgZ(0,"div",0),_.TgZ(1,"header"),_.TgZ(2,"button",1),_.NdJ("click",function(){return s.logout()}),_._uU(3,"Logout"),_.qZA(),_.qZA(),_.TgZ(4,"div",2),_.TgZ(5,"h2"),_._uU(6),_.qZA(),_.qZA(),_.qZA()),2&r&&(_.xp6(1),_.Q6J("@fallIn",s.state),_.xp6(3),_.Q6J("@moveInLeft",s.state),_.xp6(2),_.hij("Hey ",s.name,"!"))},styles:["#toolbar[_ngcontent-%COMP%]{padding:0;width:70%;margin-left:-35%}header[_ngcontent-%COMP%]{background:#3B8598;width:100%}.basic-btn[_ngcontent-%COMP%]{width:100px;margin:0}#page[_ngcontent-%COMP%]{padding:3em;margin:0}#page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:30px}h2[_ngcontent-%COMP%]{margin:0}@media (max-width: 600px){#page[_ngcontent-%COMP%]{padding:1em}#toolbar[_ngcontent-%COMP%]{width:90%;margin-left:-45%}}"]}),i})();function PH(i,n){if(1&i&&(_.TgZ(0,"span",8),_._uU(1),_.qZA()),2&i){const r=_.oxw();_.Q6J("@fallIn",r.state),_.xp6(1),_.Oqu(r.error)}}function FH(i,n){if(1&i&&(_.TgZ(0,"span",9),_._uU(1),_.qZA()),2&i){const r=_.oxw();_.Q6J("@fallIn",r.state),_.xp6(1),_.Oqu(r.error)}}const VH=GM.forRoot([{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:OH},{path:"signup",component:(()=>{class i{constructor(r,s){this.afAuth=r,this.router=s,this.state="",this.email="",this.password=""}onSubmit(r){r.valid&&(console.log(r.value),this.afAuth.createUserWithEmailAndPassword(r.value.email,r.value.password).then(s=>{console.log(s),this.router.navigate(["./members"])}).catch(s=>{console.log(s),this.error=s}))}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(fu),_.Y36(xi))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-signup"]],decls:12,vars:4,consts:[[1,"form-container"],["routerLink","/login","id","goback"],["class","error",4,"ngIf"],[3,"ngSubmit"],["formData","ngForm"],["type","text","placeholder","Email address..","name","email","required","",1,"txt",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","name","password","required","",1,"txt",3,"ngModel","ngModelChange"],["type","submit",1,"basic-btn",3,"disabled"],[1,"error"]],template:function(r,s){if(1&r){const u=_.EpF();_.TgZ(0,"div",0),_.TgZ(1,"a",1),_._uU(2,"Go back"),_.qZA(),_.TgZ(3,"h2"),_._uU(4,"Join now"),_.qZA(),_.YNc(5,PH,2,2,"span",2),_.TgZ(6,"form",3,4),_.NdJ("ngSubmit",function(){_.CHM(u);const f=_.MAs(7);return s.onSubmit(f)}),_.TgZ(8,"input",5),_.NdJ("ngModelChange",function(f){return s.email=f}),_.qZA(),_.TgZ(9,"input",6),_.NdJ("ngModelChange",function(f){return s.password=f}),_.qZA(),_.TgZ(10,"button",7),_._uU(11,"Create my account"),_.qZA(),_.qZA(),_.qZA()}if(2&r){const u=_.MAs(7);_.xp6(5),_.Q6J("ngIf",s.error),_.xp6(3),_.Q6J("ngModel",s.email),_.xp6(1),_.Q6J("ngModel",s.password),_.xp6(1),_.Q6J("disabled",!u.valid)}},directives:[Qv,_i,aP,YM,Ob,Sb,Mb,ZM,aR],styles:[""]}),i})()},{path:"login-email",component:(()=>{class i{constructor(r,s){this.afAuth=r,this.router=s,this.state="",this.email="",this.password="",this.afAuth.authState.subscribe(u=>{u&&this.router.navigateByUrl("/members")})}onSubmit(r){r.valid&&(console.log(r.value),this.afAuth.signInWithEmailAndPassword(r.value.email,r.value.password).then(s=>{console.log(s),this.router.navigate(["/members"])}).catch(s=>{console.log(s),this.error=s}))}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(_.Y36(fu),_.Y36(xi))},i.\u0275cmp=_.Xpm({type:i,selectors:[["app-email"]],decls:14,vars:2,consts:[[1,"form-container"],["routerLink","/login","id","goback"],["class","error",4,"ngIf"],[3,"ngSubmit"],["formData","ngForm"],["type","text","placeholder","Email address..","name","email","required","",1,"txt",3,"ngModel"],["type","password","placeholder","Password","name","password","required","",1,"txt",3,"ngModel"],["type","submit",1,"basic-btn",3,"disabled"],["routerLink","/signup",1,"alc"],[1,"error"]],template:function(r,s){if(1&r){const u=_.EpF();_.TgZ(0,"div",0),_.TgZ(1,"a",1),_._uU(2,"Go back"),_.qZA(),_.TgZ(3,"h2"),_._uU(4,"Custom Login"),_.qZA(),_.YNc(5,FH,2,2,"span",2),_.TgZ(6,"form",3,4),_.NdJ("ngSubmit",function(){_.CHM(u);const f=_.MAs(7);return s.onSubmit(f)}),_.TgZ(8,"input",5),_.NdJ("ngModel",function(){return s.email}),_.qZA(),_.TgZ(9,"input",6),_.NdJ("ngModel",function(){return s.password}),_.qZA(),_.TgZ(10,"button",7),_._uU(11,"Log in"),_.qZA(),_.TgZ(12,"a",8),_._uU(13,"Don't have an account?"),_.qZA(),_.qZA(),_.qZA()}if(2&r){const u=_.MAs(7);_.xp6(5),_.Q6J("ngIf",s.error),_.xp6(5),_.Q6J("disabled",!u.valid)}},directives:[Qv,_i,aP,YM,Ob,Sb,Mb,ZM,aR],styles:[""]}),i})()},{path:"members",component:MH}]),UH={apiKey:"AIzaSyCzZtOKNBsfFllb0zcEfY95VYMw204OXaY",authDomain:"firestore-64697.firebaseapp.com",projectId:"firestore-64697",databaseURL:"https://firestore-64697-default-rtdb.firebaseio.com",storageBucket:"firestore-64697.appspot.com",messagingSenderId:"467771728068",appId:"1:467771728068:web:66185607387d011b60a991",measurementId:"G-1DQ91MPGLM"};let BH=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=_.oAB({type:i,bootstrap:[w$]}),i.\u0275inj=_.cJS({providers:[gH,{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:gP.PROVIDER_ID,provider:new gP("266004255442151")}]}}],imports:[[Kp,xB,E$,qn.hO.initializeApp(UH),lk,lB,FN,pH,VH,xH]]}),i})();(0,_.G48)(),Il().bootstrapModule(BH).catch(i=>console.error(i))},4762:(tt,De,U)=>{"use strict";function he(se,Te){var be={};for(var Se in se)Object.prototype.hasOwnProperty.call(se,Se)&&Te.indexOf(Se)<0&&(be[Se]=se[Se]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var $e=0;for(Se=Object.getOwnPropertySymbols(se);$e<Se.length;$e++)Te.indexOf(Se[$e])<0&&Object.prototype.propertyIsEnumerable.call(se,Se[$e])&&(be[Se[$e]]=se[Se[$e]])}return be}function xe(se,Te,be,Se){return new(be||(be=Promise))(function(pe,vt){function rn(jt){try{dt(Se.next(jt))}catch(pr){vt(pr)}}function Ln(jt){try{dt(Se.throw(jt))}catch(pr){vt(pr)}}function dt(jt){jt.done?pe(jt.value):function(pe){return pe instanceof be?pe:new be(function(vt){vt(pe)})}(jt.value).then(rn,Ln)}dt((Se=Se.apply(se,Te||[])).next())})}function ee(se,Te){var Se,$e,pe,vt,be={label:0,sent:function(){if(1&pe[0])throw pe[1];return pe[1]},trys:[],ops:[]};return vt={next:rn(0),throw:rn(1),return:rn(2)},"function"==typeof Symbol&&(vt[Symbol.iterator]=function(){return this}),vt;function rn(dt){return function(jt){return function(dt){if(Se)throw new TypeError("Generator is already executing.");for(;be;)try{if(Se=1,$e&&(pe=2&dt[0]?$e.return:dt[0]?$e.throw||((pe=$e.return)&&pe.call($e),0):$e.next)&&!(pe=pe.call($e,dt[1])).done)return pe;switch($e=0,pe&&(dt=[2&dt[0],pe.value]),dt[0]){case 0:case 1:pe=dt;break;case 4:return be.label++,{value:dt[1],done:!1};case 5:be.label++,$e=dt[1],dt=[0];continue;case 7:dt=be.ops.pop(),be.trys.pop();continue;default:if(!(pe=(pe=be.trys).length>0&&pe[pe.length-1])&&(6===dt[0]||2===dt[0])){be=0;continue}if(3===dt[0]&&(!pe||dt[1]>pe[0]&&dt[1]<pe[3])){be.label=dt[1];break}if(6===dt[0]&&be.label<pe[1]){be.label=pe[1],pe=dt;break}if(pe&&be.label<pe[2]){be.label=pe[2],be.ops.push(dt);break}pe[2]&&be.ops.pop(),be.trys.pop();continue}dt=Te.call(se,be)}catch(jt){dt=[6,jt],$e=0}finally{Se=pe=0}if(5&dt[0])throw dt[1];return{value:dt[0]?dt[1]:void 0,done:!0}}([dt,jt])}}}function ne(se){var Te="function"==typeof Symbol&&Symbol.iterator,be=Te&&se[Te],Se=0;if(be)return be.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Se>=se.length&&(se=void 0),{value:se&&se[Se++],done:!se}}};throw new TypeError(Te?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(se,Te){var be="function"==typeof Symbol&&se[Symbol.iterator];if(!be)return se;var $e,vt,Se=be.call(se),pe=[];try{for(;(void 0===Te||Te-- >0)&&!($e=Se.next()).done;)pe.push($e.value)}catch(rn){vt={error:rn}}finally{try{$e&&!$e.done&&(be=Se.return)&&be.call(Se)}finally{if(vt)throw vt.error}}return pe}function le(se,Te,be){if(be||2===arguments.length)for(var pe,Se=0,$e=Te.length;Se<$e;Se++)(pe||!(Se in Te))&&(pe||(pe=Array.prototype.slice.call(Te,0,Se)),pe[Se]=Te[Se]);return se.concat(pe||Array.prototype.slice.call(Te))}U.d(De,{_T:()=>he,mG:()=>xe,Jh:()=>ee,XA:()=>ne,CR:()=>me,ev:()=>le})},8239:(tt,De,U)=>{"use strict";function _(F,he,ce,Ce,we,xe,ee){try{var V=F[xe](ee),H=V.value}catch(ne){return void ce(ne)}V.done?he(H):Promise.resolve(H).then(Ce,we)}function q(F){return function(){var he=this,ce=arguments;return new Promise(function(Ce,we){var xe=F.apply(he,ce);function ee(H){_(xe,Ce,we,ee,V,"next",H)}function V(H){_(xe,Ce,we,ee,V,"throw",H)}ee(void 0)})}}U.d(De,{Z:()=>q})}},tt=>{tt(tt.s=56)}]);